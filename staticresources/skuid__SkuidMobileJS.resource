/*! Brooklyn Update 1 - Iteration 4 9.5.4 04-04-2017 */
/*!
 * jQuery UI Touch Punch 0.2.3
 *
 * Copyright 2011â€“2014, Dave Furfero
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Depends:
 *  jquery.ui.widget.js
 *  jquery.ui.mouse.js
 */
if(!function(a){function b(a,b){if(!(a.originalEvent.touches.length>1)){a.preventDefault();var c=a.originalEvent.changedTouches[0],d=document.createEvent("MouseEvents");d.initMouseEvent(b,!0,!0,window,1,c.screenX,c.screenY,c.clientX,c.clientY,!1,!1,!1,!1,0,null),a.target.dispatchEvent(d)}}if(a.support.touch="ontouchend"in document,a.support.touch){var c,d=a.ui.mouse.prototype,e=d._mouseInit,f=d._mouseDestroy;d._touchStart=function(a){var d=this;!c&&d._mouseCapture(a.originalEvent.changedTouches[0])&&(c=!0,d._touchMoved=!1,b(a,"mouseover"),b(a,"mousemove"),b(a,"mousedown"))},d._touchMove=function(a){c&&(this._touchMoved=!0,b(a,"mousemove"))},d._touchEnd=function(a){c&&(b(a,"mouseup"),b(a,"mouseout"),this._touchMoved||b(a,"click"),c=!1)},d._mouseInit=function(){var b=this;b.element.bind({touchstart:a.proxy(b,"_touchStart"),touchmove:a.proxy(b,"_touchMove"),touchend:a.proxy(b,"_touchEnd")}),e.call(b)},d._mouseDestroy=function(){var b=this;b.element.unbind({touchstart:a.proxy(b,"_touchStart"),touchmove:a.proxy(b,"_touchMove"),touchend:a.proxy(b,"_touchEnd")}),f.call(b)}}}(jQuery),/*! Hammer.JS - v1.1.3 - 2014-05-20
 * http://eightmedia.github.io/hammer.js
 *
 * Copyright (c) 2014 Jorik Tangelder <j.tangelder@gmail.com>;
 * Licensed under the MIT license */
!function(a,b){"use strict";function c(){d.READY||(s.determineEventTypes(),r.each(d.gestures,function(a){u.register(a)}),s.onTouch(d.DOCUMENT,n,u.detect),s.onTouch(d.DOCUMENT,o,u.detect),d.READY=!0)}var d=function v(a,b){return new v.Instance(a,b||{})};d.VERSION="1.1.3",d.defaults={behavior:{userSelect:"none",touchAction:"pan-y",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},d.DOCUMENT=document,d.HAS_POINTEREVENTS=navigator.pointerEnabled||navigator.msPointerEnabled,d.HAS_TOUCHEVENTS="ontouchstart"in a,d.IS_MOBILE=/mobile|tablet|ip(ad|hone|od)|android|silk/i.test(navigator.userAgent),d.NO_MOUSEEVENTS=d.HAS_TOUCHEVENTS&&d.IS_MOBILE||d.HAS_POINTEREVENTS,d.CALCULATE_INTERVAL=25;var e={},f=d.DIRECTION_DOWN="down",g=d.DIRECTION_LEFT="left",h=d.DIRECTION_UP="up",i=d.DIRECTION_RIGHT="right",j=d.POINTER_MOUSE="mouse",k=d.POINTER_TOUCH="touch",l=d.POINTER_PEN="pen",m=d.EVENT_START="start",n=d.EVENT_MOVE="move",o=d.EVENT_END="end",p=d.EVENT_RELEASE="release",q=d.EVENT_TOUCH="touch";d.READY=!1,d.plugins=d.plugins||{},d.gestures=d.gestures||{};var r=d.utils={extend:function(a,c,d){for(var e in c)!c.hasOwnProperty(e)||a[e]!==b&&d||(a[e]=c[e]);return a},on:function(a,b,c){a.addEventListener(b,c,!1)},off:function(a,b,c){a.removeEventListener(b,c,!1)},each:function(a,c,d){var e,f;if("forEach"in a)a.forEach(c,d);else if(a.length!==b){for(e=0,f=a.length;f>e;e++)if(c.call(d,a[e],e,a)===!1)return}else for(e in a)if(a.hasOwnProperty(e)&&c.call(d,a[e],e,a)===!1)return},inStr:function(a,b){return a.indexOf(b)>-1},inArray:function(a,b){if(a.indexOf){var c=a.indexOf(b);return-1===c?!1:c}for(var d=0,e=a.length;e>d;d++)if(a[d]===b)return d;return!1},toArray:function(a){return Array.prototype.slice.call(a,0)},hasParent:function(a,b){for(;a;){if(a==b)return!0;a=a.parentNode}return!1},getCenter:function(a){var b=[],c=[],d=[],e=[],f=Math.min,g=Math.max;return 1===a.length?{pageX:a[0].pageX,pageY:a[0].pageY,clientX:a[0].clientX,clientY:a[0].clientY}:(r.each(a,function(a){b.push(a.pageX),c.push(a.pageY),d.push(a.clientX),e.push(a.clientY)}),{pageX:(f.apply(Math,b)+g.apply(Math,b))/2,pageY:(f.apply(Math,c)+g.apply(Math,c))/2,clientX:(f.apply(Math,d)+g.apply(Math,d))/2,clientY:(f.apply(Math,e)+g.apply(Math,e))/2})},getVelocity:function(a,b,c){return{x:Math.abs(b/a)||0,y:Math.abs(c/a)||0}},getAngle:function(a,b){var c=b.clientX-a.clientX,d=b.clientY-a.clientY;return 180*Math.atan2(d,c)/Math.PI},getDirection:function(a,b){var c=Math.abs(a.clientX-b.clientX),d=Math.abs(a.clientY-b.clientY);return c>=d?a.clientX-b.clientX>0?g:i:a.clientY-b.clientY>0?h:f},getDistance:function(a,b){var c=b.clientX-a.clientX,d=b.clientY-a.clientY;return Math.sqrt(c*c+d*d)},getScale:function(a,b){return a.length>=2&&b.length>=2?this.getDistance(b[0],b[1])/this.getDistance(a[0],a[1]):1},getRotation:function(a,b){return a.length>=2&&b.length>=2?this.getAngle(b[1],b[0])-this.getAngle(a[1],a[0]):0},isVertical:function(a){return a==h||a==f},setPrefixedCss:function(a,b,c,d){var e=["","Webkit","Moz","O","ms"];b=r.toCamelCase(b);for(var f=0;f<e.length;f++){var g=b;if(e[f]&&(g=e[f]+g.slice(0,1).toUpperCase()+g.slice(1)),g in a.style){a.style[g]=(null==d||d)&&c||"";break}}},toggleBehavior:function(a,b,c){if(b&&a&&a.style){r.each(b,function(b,d){r.setPrefixedCss(a,d,b,c)});var d=c&&function(){return!1};"none"==b.userSelect&&(a.onselectstart=d),"none"==b.userDrag&&(a.ondragstart=d)}},toCamelCase:function(a){return a.replace(/[_-]([a-z])/g,function(a){return a[1].toUpperCase()})}},s=d.event={preventMouseEvents:!1,started:!1,shouldDetect:!1,on:function(a,b,c,d){var e=b.split(" ");r.each(e,function(b){r.on(a,b,c),d&&d(b)})},off:function(a,b,c,d){var e=b.split(" ");r.each(e,function(b){r.off(a,b,c),d&&d(b)})},onTouch:function(a,b,c){var f=this,g=function(e){var g,h=e.type.toLowerCase(),i=d.HAS_POINTEREVENTS,j=r.inStr(h,"mouse");j&&f.preventMouseEvents||(j&&b==m&&0===e.button?(f.preventMouseEvents=!1,f.shouldDetect=!0):i&&b==m?f.shouldDetect=1===e.buttons||t.matchType(k,e):j||b!=m||(f.preventMouseEvents=!0,f.shouldDetect=!0),i&&b!=o&&t.updatePointer(b,e),f.shouldDetect&&(g=f.doDetect.call(f,e,b,a,c)),g==o&&(f.preventMouseEvents=!1,f.shouldDetect=!1,t.reset()),i&&b==o&&t.updatePointer(b,e))};return this.on(a,e[b],g),g},doDetect:function(a,b,c,d){var e=this.getTouchList(a,b),f=e.length,g=b,h=e.trigger,i=f;b==m?h=q:b==o&&(h=p,i=e.length-(a.changedTouches?a.changedTouches.length:1)),i>0&&this.started&&(g=n),this.started=!0;var j=this.collectEventData(c,g,e,a);return b!=o&&d.call(u,j),h&&(j.changedLength=i,j.eventType=h,d.call(u,j),j.eventType=g,delete j.changedLength),g==o&&(d.call(u,j),this.started=!1),g},determineEventTypes:function(){var b;return b=d.HAS_POINTEREVENTS?a.PointerEvent?["pointerdown","pointermove","pointerup pointercancel lostpointercapture"]:["MSPointerDown","MSPointerMove","MSPointerUp MSPointerCancel MSLostPointerCapture"]:d.NO_MOUSEEVENTS?["touchstart","touchmove","touchend touchcancel"]:["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"],e[m]=b[0],e[n]=b[1],e[o]=b[2],e},getTouchList:function(a,b){if(d.HAS_POINTEREVENTS)return t.getTouchList();if(a.touches){if(b==n)return a.touches;var c=[],e=[].concat(r.toArray(a.touches),r.toArray(a.changedTouches)),f=[];return r.each(e,function(a){r.inArray(c,a.identifier)===!1&&f.push(a),c.push(a.identifier)}),f}return a.identifier=1,[a]},collectEventData:function(a,b,c,d){var e=k;return r.inStr(d.type,"mouse")||t.matchType(j,d)?e=j:t.matchType(l,d)&&(e=l),{center:r.getCenter(c),timeStamp:Date.now(),target:d.target,touches:c,eventType:b,pointerType:e,srcEvent:d,preventDefault:function(){var a=this.srcEvent;a.preventManipulation&&a.preventManipulation(),a.preventDefault&&a.preventDefault()},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return u.stopDetect()}}}},t=d.PointerEvent={pointers:{},getTouchList:function(){var a=[];return r.each(this.pointers,function(b){a.push(b)}),a},updatePointer:function(a,b){a==o||a!=o&&1!==b.buttons?delete this.pointers[b.pointerId]:(b.identifier=b.pointerId,this.pointers[b.pointerId]=b)},matchType:function(a,b){if(!b.pointerType)return!1;var c=b.pointerType,d={};return d[j]=c===(b.MSPOINTER_TYPE_MOUSE||j),d[k]=c===(b.MSPOINTER_TYPE_TOUCH||k),d[l]=c===(b.MSPOINTER_TYPE_PEN||l),d[a]},reset:function(){this.pointers={}}},u=d.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function(a,b){this.current||(this.stopped=!1,this.current={inst:a,startEvent:r.extend({},b),lastEvent:!1,lastCalcEvent:!1,futureCalcEvent:!1,lastCalcData:{},name:""},this.detect(b))},detect:function(a){if(this.current&&!this.stopped){a=this.extendEventData(a);var b=this.current.inst,c=b.options;return r.each(this.gestures,function(d){!this.stopped&&b.enabled&&c[d.name]&&d.handler.call(d,a,b)},this),this.current&&(this.current.lastEvent=a),a.eventType==o&&this.stopDetect(),a}},stopDetect:function(){this.previous=r.extend({},this.current),this.current=null,this.stopped=!0},getCalculatedData:function(a,b,c,e,f){var g=this.current,h=!1,i=g.lastCalcEvent,j=g.lastCalcData;i&&a.timeStamp-i.timeStamp>d.CALCULATE_INTERVAL&&(b=i.center,c=a.timeStamp-i.timeStamp,e=a.center.clientX-i.center.clientX,f=a.center.clientY-i.center.clientY,h=!0),(a.eventType==q||a.eventType==p)&&(g.futureCalcEvent=a),(!g.lastCalcEvent||h)&&(j.velocity=r.getVelocity(c,e,f),j.angle=r.getAngle(b,a.center),j.direction=r.getDirection(b,a.center),g.lastCalcEvent=g.futureCalcEvent||a,g.futureCalcEvent=a),a.velocityX=j.velocity.x,a.velocityY=j.velocity.y,a.interimAngle=j.angle,a.interimDirection=j.direction},extendEventData:function(a){var b=this.current,c=b.startEvent,d=b.lastEvent||c;(a.eventType==q||a.eventType==p)&&(c.touches=[],r.each(a.touches,function(a){c.touches.push({clientX:a.clientX,clientY:a.clientY})}));var e=a.timeStamp-c.timeStamp,f=a.center.clientX-c.center.clientX,g=a.center.clientY-c.center.clientY;return this.getCalculatedData(a,d.center,e,f,g),r.extend(a,{startEvent:c,deltaTime:e,deltaX:f,deltaY:g,distance:r.getDistance(c.center,a.center),angle:r.getAngle(c.center,a.center),direction:r.getDirection(c.center,a.center),scale:r.getScale(c.touches,a.touches),rotation:r.getRotation(c.touches,a.touches)}),a},register:function(a){var c=a.defaults||{};return c[a.name]===b&&(c[a.name]=!0),r.extend(d.defaults,c,!0),a.index=a.index||1e3,this.gestures.push(a),this.gestures.sort(function(a,b){return a.index<b.index?-1:a.index>b.index?1:0}),this.gestures}};d.Instance=function(a,b){var e=this;c(),this.element=a,this.enabled=!0,r.each(b,function(a,c){delete b[c],b[r.toCamelCase(c)]=a}),this.options=r.extend(r.extend({},d.defaults),b||{}),this.options.behavior&&r.toggleBehavior(this.element,this.options.behavior,!0),this.eventStartHandler=s.onTouch(a,m,function(a){e.enabled&&a.eventType==m?u.startDetect(e,a):a.eventType==q&&u.detect(a)}),this.eventHandlers=[]},d.Instance.prototype={on:function(a,b){var c=this;return s.on(c.element,a,b,function(a){c.eventHandlers.push({gesture:a,handler:b})}),c},off:function(a,b){var c=this;return s.off(c.element,a,b,function(a){var d=r.inArray({gesture:a,handler:b});d!==!1&&c.eventHandlers.splice(d,1)}),c},trigger:function(a,b){b||(b={});var c=d.DOCUMENT.createEvent("Event");c.initEvent(a,!0,!0),c.gesture=b;var e=this.element;return r.hasParent(b.target,e)&&(e=b.target),e.dispatchEvent(c),this},enable:function(a){return this.enabled=a,this},dispose:function(){var a,b;for(r.toggleBehavior(this.element,this.options.behavior,!1),a=-1;b=this.eventHandlers[++a];)r.off(this.element,b.gesture,b.handler);return this.eventHandlers=[],s.off(this.element,e[m],this.eventStartHandler),null}},function(a){function b(b,d){var e=u.current;if(!(d.options.dragMaxTouches>0&&b.touches.length>d.options.dragMaxTouches))switch(b.eventType){case m:c=!1;break;case n:if(b.distance<d.options.dragMinDistance&&e.name!=a)return;var j=e.startEvent.center;if(e.name!=a&&(e.name=a,d.options.dragDistanceCorrection&&b.distance>0)){var k=Math.abs(d.options.dragMinDistance/b.distance);j.pageX+=b.deltaX*k,j.pageY+=b.deltaY*k,j.clientX+=b.deltaX*k,j.clientY+=b.deltaY*k,b=u.extendEventData(b)}(e.lastEvent.dragLockToAxis||d.options.dragLockToAxis&&d.options.dragLockMinDistance<=b.distance)&&(b.dragLockToAxis=!0);var l=e.lastEvent.direction;b.dragLockToAxis&&l!==b.direction&&(b.direction=r.isVertical(l)?b.deltaY<0?h:f:b.deltaX<0?g:i),c||(d.trigger(a+"start",b),c=!0),d.trigger(a,b),d.trigger(a+b.direction,b);var q=r.isVertical(b.direction);(d.options.dragBlockVertical&&q||d.options.dragBlockHorizontal&&!q)&&b.preventDefault();break;case p:c&&b.changedLength<=d.options.dragMaxTouches&&(d.trigger(a+"end",b),c=!1);break;case o:c=!1}}var c=!1;d.gestures.Drag={name:a,index:50,handler:b,defaults:{dragMinDistance:10,dragDistanceCorrection:!0,dragMaxTouches:1,dragBlockHorizontal:!1,dragBlockVertical:!1,dragLockToAxis:!1,dragLockMinDistance:25}}}("drag"),d.gestures.Gesture={name:"gesture",index:1337,handler:function(a,b){b.trigger(this.name,a)}},function(a){function b(b,d){var e=d.options,f=u.current;switch(b.eventType){case m:clearTimeout(c),f.name=a,c=setTimeout(function(){f&&f.name==a&&d.trigger(a,b)},e.holdTimeout);break;case n:b.distance>e.holdThreshold&&clearTimeout(c);break;case p:clearTimeout(c)}}var c;d.gestures.Hold={name:a,index:10,defaults:{holdTimeout:500,holdThreshold:2},handler:b}}("hold"),d.gestures.Release={name:"release",index:1/0,handler:function(a,b){a.eventType==p&&b.trigger(this.name,a)}},d.gestures.Swipe={name:"swipe",index:40,defaults:{swipeMinTouches:1,swipeMaxTouches:1,swipeVelocityX:.6,swipeVelocityY:.6},handler:function(a,b){if(a.eventType==p){var c=a.touches.length,d=b.options;if(c<d.swipeMinTouches||c>d.swipeMaxTouches)return;(a.velocityX>d.swipeVelocityX||a.velocityY>d.swipeVelocityY)&&(b.trigger(this.name,a),b.trigger(this.name+a.direction,a))}}},function(a){function b(b,d){var e,f,g=d.options,h=u.current,i=u.previous;switch(b.eventType){case m:c=!1;break;case n:c=c||b.distance>g.tapMaxDistance;break;case o:!r.inStr(b.srcEvent.type,"cancel")&&b.deltaTime<g.tapMaxTime&&!c&&(e=i&&i.lastEvent&&b.timeStamp-i.lastEvent.timeStamp,f=!1,i&&i.name==a&&e&&e<g.doubleTapInterval&&b.distance<g.doubleTapDistance&&(d.trigger("doubletap",b),f=!0),(!f||g.tapAlways)&&(h.name=a,d.trigger(h.name,b)))}}var c=!1;d.gestures.Tap={name:a,index:100,handler:b,defaults:{tapMaxTime:250,tapMaxDistance:10,tapAlways:!0,doubleTapDistance:20,doubleTapInterval:300}}}("tap"),d.gestures.Touch={name:"touch",index:-1/0,defaults:{preventDefault:!1,preventMouse:!1},handler:function(a,b){return b.options.preventMouse&&a.pointerType==j?void a.stopDetect():(b.options.preventDefault&&a.preventDefault(),void(a.eventType==q&&b.trigger("touch",a)))}},function(a){function b(b,d){switch(b.eventType){case m:c=!1;break;case n:if(b.touches.length<2)return;var e=Math.abs(1-b.scale),f=Math.abs(b.rotation);if(e<d.options.transformMinScale&&f<d.options.transformMinRotation)return;u.current.name=a,c||(d.trigger(a+"start",b),c=!0),d.trigger(a,b),f>d.options.transformMinRotation&&d.trigger("rotate",b),e>d.options.transformMinScale&&(d.trigger("pinch",b),d.trigger("pinch"+(b.scale<1?"in":"out"),b));break;case p:c&&b.changedLength<2&&(d.trigger(a+"end",b),c=!1)}}var c=!1;d.gestures.Transform={name:a,index:45,defaults:{transformMinScale:.01,transformMinRotation:1},handler:b}}("transform"),"function"==typeof define&&define.amd?define(function(){return d}):"undefined"!=typeof module&&module.exports?module.exports=d:a.Hammer=d}(window),/*! jQuery plugin for Hammer.JS - v1.1.3 - 2014-05-20
 * http://eightmedia.github.com/hammer.js
 *
 * Copyright (c) 2014 Jorik Tangelder <j.tangelder@gmail.com>;
 * Licensed under the MIT license */
!function(a,b){"use strict";function c(a,c){Date.now||(Date.now=function(){return(new Date).getTime()}),a.utils.each(["on","off"],function(d){a.utils[d]=function(a,e,f){c(a)[d](e,function(a){var d=c.extend({},a.originalEvent,a);d.button===b&&(d.button=a.which-1),f.call(this,d)})}}),a.Instance.prototype.trigger=function(a,b){var d=c(this.element);return d.has(b.target).length&&(d=c(b.target)),d.trigger({type:a,gesture:b})},c.fn.hammer=function(b){return this.each(function(){var d=c(this),e=d.data("hammer");e?e&&b&&a.utils.extend(e.options,b):d.data("hammer",new a(this,b||{}))})}}"function"==typeof define&&define.amd?define(["hammerjs","jquery"],c):c(a.Hammer,a.jQuery||a.Zepto)}(window),Object.keys||(Object.keys=function(){var a=Object.prototype.hasOwnProperty,b=!{toString:null}.propertyIsEnumerable("toString"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],d=c.length;return function(e){if("object"!=typeof e&&"function"!=typeof e||null===e)throw new TypeError("Object.keys called on non-object");var f=[];for(var g in e)a.call(e,g)&&f.push(g);if(b)for(var h=0;d>h;h++)a.call(e,c[h])&&f.push(c[h]);return f}}()),Array.prototype.indexOf||(Array.prototype.indexOf=function(a){"use strict";if(null==this)throw new TypeError;var b=Object(this),c=b.length>>>0;if(0===c)return-1;var d=0;if(arguments.length>1&&(d=Number(arguments[1]),d!=d?d=0:0!=d&&d!=1/0&&d!=-(1/0)&&(d=(d>0||-1)*Math.floor(Math.abs(d)))),d>=c)return-1;for(var e=d>=0?d:Math.max(c-Math.abs(d),0);c>e;e++)if(e in b&&b[e]===a)return e;return-1}),Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(a){"use strict";if(null==this)throw new TypeError;var b=Object(this),c=b.length>>>0;if(0===c)return-1;var d=c;arguments.length>1&&(d=Number(arguments[1]),d!=d?d=0:0!=d&&d!=1/0&&d!=-(1/0)&&(d=(d>0||-1)*Math.floor(Math.abs(d))));for(var e=d>=0?Math.min(d,c-1):c-Math.abs(d);e>=0;e--)if(e in b&&b[e]===a)return e;return-1}),Array.prototype.filter||(Array.prototype.filter=function(a){"use strict";if(null==this)throw new TypeError;var b=Object(this),c=b.length>>>0;if("function"!=typeof a)throw new TypeError;for(var d=[],e=arguments[1],f=0;c>f;f++)if(f in b){var g=b[f];a.call(e,g,f,b)&&d.push(g)}return d}),Array.prototype.forEach||(Array.prototype.forEach=function(a,b){var c,d;if(null==this)throw new TypeError(" this is null or not defined");var e=Object(this),f=e.length>>>0;if("function"!=typeof a)throw new TypeError(a+" is not a function");for(arguments.length>1&&(c=b),d=0;f>d;){var g;d in e&&(g=e[d],a.call(c,g,d,e)),d++}}),Array.prototype.reduce||(Array.prototype.reduce=function(a){"use strict";if(null==this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof a)throw new TypeError(a+" is not a function");var b,c=Object(this),d=c.length>>>0,e=0;if(2==arguments.length)b=arguments[1];else{for(;d>e&&!(e in c);)e++;if(e>=d)throw new TypeError("Reduce of empty array with no initial value");b=c[e++]}for(;d>e;e++)e in c&&(b=a(b,c[e],e,c));return b}),Array.prototype.map||(Array.prototype.map=function(a,b){var c,d,e;if(null==this)throw new TypeError(" this is null or not defined");var f=Object(this),g=f.length>>>0;if("function"!=typeof a)throw new TypeError(a+" is not a function");for(arguments.length>1&&(c=b),d=new Array(g),e=0;g>e;){var h,i;e in f&&(h=f[e],i=a.call(c,h,e,f),d[e]=i),e++}return d}),Date.now||(Date.now=function(){return(new Date).getTime()}),String.prototype.startsWith||(String.prototype.startsWith=function(a,b){return b=b||0,this.substr(b,a.length)===a}),function(a){a&&a.prototype&&null==a.prototype.firstElementChild&&Object.defineProperty(a.prototype,"firstElementChild",{get:function(){for(var a,b=this.childNodes,c=0;a=b[c++];)if(1===a.nodeType)return a;return null}})}(window.Node||window.Element),window.skuid||(window.skuid={}),function(a){if(!a.console){var b=a.console={};b.warn=b.info=b.error=b.trace=b.log=b.time=b.timeEnd=function(){}}if("object"!=typeof JSON)throw a.alert("Skuid cannot run in this Web Browser. Please make sure you are using Internet Explorer 8 or higher and are not in Compatibility Mode."),"Unsupported browser."}(window),!skuid.$){!function(a,b){var c;c=c||function(a){var b,c=String.prototype.split,d=/()??/.exec("")[1]===a;return b=function(b,e,f){if("[object RegExp]"!==Object.prototype.toString.call(e))return c.call(b,e,f);var g,h,i,j,k=[],l=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.extended?"x":"")+(e.sticky?"y":""),m=0,e=new RegExp(e.source,l+"g");for(b+="",d||(g=new RegExp("^"+e.source+"$(?!\\s)",l)),f=f===a?-1>>>0:f>>>0;(h=e.exec(b))&&(i=h.index+h[0].length,!(i>m&&(k.push(b.slice(m,h.index)),!d&&h.length>1&&h[0].replace(g,function(){for(var b=1;b<arguments.length-2;b++)arguments[b]===a&&(h[b]=a)}),h.length>1&&h.index<b.length&&Array.prototype.push.apply(k,h.slice(1)),j=h[0].length,m=i,k.length>=f)));)e.lastIndex===h.index&&e.lastIndex++;return m===b.length?(j||!e.test(""))&&k.push(""):k.push(b.slice(m)),k.length>f?k.slice(0,f):k},String.prototype.split=function(a,c){return b(this,a,c)},b}(),!function(a,b){if("object"==typeof d&&d)b(d);else{var c={};b(c),"function"==typeof define&&define.amd?define(c):a.Mustache=c}}(this,function(a){function b(a,b){return t.call(a,b)}function c(a){return!b(p,a)}function d(a){return"function"==typeof a}function e(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function f(a){return String(a).replace(/[&<>"'\/]/g,function(a){return w[a]})}function g(a){if(!v(a)||2!==a.length)throw new Error("Invalid tags: "+a);return[new RegExp(e(a[0])+"\\s*"),new RegExp("\\s*"+e(a[1]))]}function h(b,d){function f(){if(A&&!B)for(;z.length;)delete y[z.pop()];else z=[];A=!1,B=!1}d=d||a.tags,b=b||"","string"==typeof d&&(d=d.split(o));for(var h,l,m,p,t,u,v=g(d),w=new k(b),x=[],y=[],z=[],A=!1,B=!1;!w.eos();){if(h=w.pos,m=w.scanUntil(v[0]))for(var C=0,D=m.length;D>C;++C)p=m.charAt(C),c(p)?z.push(y.length):B=!0,y.push(["text",p,h,h+1]),h+=1,"\n"===p&&f();if(!w.scan(v[0]))break;if(A=!0,l=w.scan(s)||"name",w.scan(n),"="===l?(m=w.scanUntil(q),w.scan(q),w.scanUntil(v[1])):"{"===l?(m=w.scanUntil(new RegExp("\\s*"+e("}"+d[1]))),w.scan(r),w.scanUntil(v[1]),l="&"):m=w.scanUntil(v[1]),!w.scan(v[1]))throw new Error("Unclosed tag at "+w.pos);if(t=[l,m,h,w.pos],y.push(t),"#"===l||"^"===l)x.push(t);else if("/"===l){if(u=x.pop(),!u)throw new Error('Unopened section "'+m+'" at '+h);if(u[1]!==m)throw new Error('Unclosed section "'+u[1]+'" at '+h)}else"name"===l||"{"===l||"&"===l?B=!0:"="===l&&(v=g(d=m.split(o)))}if(u=x.pop())throw new Error('Unclosed section "'+u[1]+'" at '+w.pos);return j(i(y))}function i(a){for(var b,c,d=[],e=0,f=a.length;f>e;++e)b=a[e],b&&("text"===b[0]&&c&&"text"===c[0]?(c[1]+=b[1],c[3]=b[3]):(d.push(b),c=b));return d}function j(a){for(var b,c,d=[],e=d,f=[],g=0,h=a.length;h>g;++g)switch(b=a[g],b[0]){case"#":case"^":e.push(b),f.push(b),e=b[4]=[];break;case"/":c=f.pop(),c[5]=b[2],e=f.length>0?f[f.length-1][4]:d;break;default:e.push(b)}return d}function k(a){this.string=a,this.tail=a,this.pos=0}function l(a,b){this.view=null==a?{}:a,this.cache={".":this.view},this.parent=b}function m(){this.cache={}}var n=/\s*/,o=/\s+/,p=/\S/,q=/\s*=/,r=/\s*\}/,s=/#|\^|\/|>|\{|&|=|!/,t=RegExp.prototype.test,u=Object.prototype.toString,v=Array.isArray||function(a){return"[object Array]"===u.call(a)},w={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};k.prototype.eos=function(){return""===this.tail},k.prototype.scan=function(a){var b=this.tail.match(a);if(b&&0===b.index){var c=b[0];return this.tail=this.tail.substring(c.length),this.pos+=c.length,c}return""},k.prototype.scanUntil=function(a){var b,c=this.tail.search(a);switch(c){case-1:b=this.tail,this.tail="";break;case 0:b="";break;default:b=this.tail.substring(0,c),this.tail=this.tail.substring(c)}return this.pos+=b.length,b},l.prototype.push=function(a){return new l(a,this)},l.prototype.lookup=function(a){var b;if(a in this.cache)b=this.cache[a];else{for(var c=this;c;){if(a.indexOf(".")>0){b=c.view;for(var e=a.split("."),f=0;null!=b&&f<e.length;)b=b[e[f++]]}else b=c.view[a];if(null!=b)break;c=c.parent}this.cache[a]=b}return d(b)&&(b=b.call(this.view)),b},m.prototype.clearCache=function(){this.cache={}},m.prototype.parse=function(a,b){var c=this.cache,d=c[a];return null==d&&(d=c[a]=h(a,b)),d},m.prototype.render=function(a,b,c){var d=this.parse(a),e=b instanceof l?b:new l(b);return this.renderTokens(d,e,c,a)},m.prototype.renderTokens=function(b,c,e,f){function g(a){return k.render(a,c,e)}for(var h,i,j="",k=this,l=0,m=b.length;m>l;++l)switch(h=b[l],h[0]){case"#":if(i=c.lookup(h[1]),!i)continue;if(v(i))for(var n=0,o=i.length;o>n;++n)j+=this.renderTokens(h[4],c.push(i[n]),e,f);else if("object"==typeof i||"string"==typeof i)j+=this.renderTokens(h[4],c.push(i),e,f);else if(d(i)){if("string"!=typeof f)throw new Error("Cannot use higher-order sections without the original template");i=i.call(c.view,f.slice(h[3],h[5]),g),null!=i&&(j+=i)}else j+=this.renderTokens(h[4],c,e,f);break;case"^":i=c.lookup(h[1]),(!i||v(i)&&0===i.length)&&(j+=this.renderTokens(h[4],c,e,f));break;case">":if(!e)continue;i=this.parse(d(e)?e(h[1]):e[h[1]]),null!=i&&(j+=this.renderTokens(i,c,e,f));break;case"&":i=c.lookup(h[1]),null!=i&&(j+=i);break;case"name":i=c.lookup(h[1]),null!=i&&(j+=a.escape(i));break;case"text":j+=h[1]}return j},a.name="mustache.js",a.version="0.8.0",a.tags=["{{","}}"];var x=new m;a.clearCache=function(){return x.clearCache()},a.parse=function(a,b){return x.parse(a,b)},a.render=function(a,b,c){return x.render(a,b,c)},a.to_html=function(b,c,e,f){var g=a.render(b,c,e);return d(f)?void f(g):g},a.escape=f,a.Scanner=k,a.Context=l,a.Writer=m});var d=a,e=window.Mustache;window.$j=d.$=d.jQuery=b.noConflict(),d.Mustache=window.Mustache,e?(window.Mustache=e,e=null):delete window.Mustache,function(a){function b(b){if("string"==typeof b.data&&(b.data={keys:b.data}),b.data&&b.data.keys&&"string"==typeof b.data.keys){var c=b.handler,d=b.data.keys.toLowerCase().split(" ");b.handler=function(e){if(this===e.target||!b.data.filterTextInputs||!(a.inArray(e.target.type,a.hotkeys.textAcceptingInputTypes)>-1||/textarea|select/i.test(e.target.nodeName))){var f=a.hotkeys.specialKeys[e.keyCode],g=String.fromCharCode(e.which).toLowerCase(),h="",i={};a.each(["alt","ctrl","meta","shift"],function(a,b){e[b+"Key"]&&f!==b&&(h+=b+"+")}),h=h.replace("alt+ctrl+meta+shift","hyper"),f&&(i[h+f]=!0),g&&(i[h+g]=!0,i[h+a.hotkeys.shiftNums[g]]=!0,"shift+"===h&&(i[a.hotkeys.shiftNums[g]]=!0));for(var j=0,k=d.length;k>j;j++)if(i[d[j]])return c.apply(this,arguments)}}}}a.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",10:"return",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",59:";",61:"=",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"},textAcceptingInputTypes:["text","password","number","email","url","range","date","month","week","time","datetime","datetime-local","search","color","tel"]},a.each(["keydown","keyup","keypress"],function(){a.event.special[this]={add:b}})}(b),function(a){a.datepicker.parseDate=function(b,c,d){if(null==b||null==c)throw"Invalid arguments";if(c="object"==typeof c?c.toString():c+"",""===c)return null;var e,f,g,h,i=0,j=(d?d.shortYearCutoff:null)||this._defaults.shortYearCutoff,k="string"!=typeof j?j:(new Date).getFullYear()%100+parseInt(j,10),l=(d?d.dayNamesShort:null)||this._defaults.dayNamesShort,m=(d?d.dayNames:null)||this._defaults.dayNames,n=(d?d.monthNamesShort:null)||this._defaults.monthNamesShort,o=(d?d.monthNames:null)||this._defaults.monthNames,p=!0,q=-1,r=-1,s=-1,t=-1,u=!1,v=function(a){var c=e+1<b.length&&b.charAt(e+1)===a;return c&&e++,c},w=function(a){var b=v(a),d="@"===a?14:"!"===a?20:"y"===a&&b?4:"o"===a?3:2,e="y"!==a||p?1:d,f=new RegExp("^\\d{"+e+","+d+"}"),g=c.substring(i).match(f);if(!g)throw"Missing number at position "+i;return i+=g[0].length,parseInt(g[0],10)},x=function(b,d,e){var f=-1,g=a.map(v(b)?e:d,function(a,b){return[[b,a]]}).sort(function(a,b){return-(a[1].length-b[1].length)});if(a.each(g,function(a,b){var d=b[1];return c.substr(i,d.length).toLowerCase()===d.toLowerCase()?(f=b[0],i+=d.length,!1):void 0}),-1!==f)return f+1;throw"Unknown name at position "+i},y=function(){if(c.charAt(i)!==b.charAt(e))throw"Unexpected literal at position "+i;i++};for(e=0;e<b.length;e++)if(u)"'"!==b.charAt(e)||v("'")?y():u=!1;else switch(b.charAt(e)){case"d":s=w("d");break;case"D":x("D",l,m);break;case"o":t=w("o");break;case"m":r=w("m");break;case"M":r=x("M",n,o);break;case"y":q=w("y");break;case"@":h=new Date(w("@")),q=h.getFullYear(),r=h.getMonth()+1,s=h.getDate();break;case"!":h=new Date((w("!")-this._ticksTo1970)/1e4),q=h.getFullYear(),r=h.getMonth()+1,s=h.getDate();break;case"'":v("'")?y():u=!0;break;default:y()}if(i<c.length&&(g=c.substr(i),!/^\s+/.test(g)))throw"Extra/unparsed characters found in date: "+g;if(-1===q?q=(new Date).getFullYear():100>q&&(q+=(new Date).getFullYear()-(new Date).getFullYear()%100+(k>=q?0:-100)),t>-1)for(r=1,s=t;;){if(f=this._getDaysInMonth(q,r-1),f>=s)break;r++,s-=f}if(h=this._daylightSavingAdjust(new Date(q,r-1,s)),h.getFullYear()!==q||h.getMonth()+1!==r||h.getDate()!==s)throw"Invalid date";return h}}(b),/*!
	 * jQuery Cookie Plugin v1.3.1
	 * https://github.com/carhartl/jquery-cookie
	 *
	 * Copyright 2013 Klaus Hartl
	 * Released under the MIT license
	 */
function(a){"function"==typeof define&&define.amd&&define.amd.jQuery?define(["jquery"],a):a(b)}(function(a){function b(a){return a}function c(a){return decodeURIComponent(a.replace(e," "))}function d(a){0===a.indexOf('"')&&(a=a.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return f.json?JSON.parse(a):a}catch(b){}}var e=/\+/g,f=a.cookie=function(e,g,h){if(void 0!==g){if(h=a.extend({},f.defaults,h),"number"==typeof h.expires){var i=h.expires,j=h.expires=new Date;j.setDate(j.getDate()+i)}return g=f.json?JSON.stringify(g):g+"",document.cookie=[encodeURIComponent(e),"=",f.raw?g:encodeURIComponent(g),h.expires?"; expires="+h.expires.toUTCString():"",h.path?"; path="+h.path:"",h.domain?"; domain="+h.domain:"",h.secure?"; secure":""].join("")}for(var k=f.raw?b:c,l=document.cookie.split("; "),m=e?void 0:{},n=0,o=l.length;o>n;n++){var p=l[n].split("="),q=k(p.shift()),r=k(p.join("="));if(e&&e===q){m=d(r);break}e||(m[q]=d(r))}return m};f.defaults={},a.removeCookie=function(b,c){return void 0!==a.cookie(b)?(a.cookie(b,"",a.extend(c,{expires:-1})),!0):!1}}),/*!
	 * jQuery blockUI plugin
	 * Version 2.65.0-2013.09.02
	 * Requires jQuery v1.7 or later
	 *
	 * Examples at: http://malsup.com/jquery/block/
	 * Copyright (c) 2007-2013 M. Alsup
	 * Dual licensed under the MIT and GPL licenses:
	 * http://www.opensource.org/licenses/mit-license.php
	 * http://www.gnu.org/licenses/gpl.html
	 *
	 * Thanks to Amir-Hossein Sobhi for some excellent contributions!
	 */
!function(){"use strict";function a(a){function b(b,d){var f,p,q=b==window,r=d&&void 0!==d.message?d.message:void 0;if(d=a.extend({},a.blockUI.defaults,d||{}),!d.ignoreIfBlocked||!a(b).data("blockUI.isBlocked")){if(d.overlayCSS=a.extend({},a.blockUI.defaults.overlayCSS,d.overlayCSS||{}),f=a.extend({},a.blockUI.defaults.css,d.css||{}),d.onOverlayClick&&(d.overlayCSS.cursor="pointer"),p=a.extend({},a.blockUI.defaults.themedCSS,d.themedCSS||{}),r=void 0===r?d.message:r,q&&n&&c(window,{fadeOut:0}),r&&"string"!=typeof r&&(r.parentNode||r.jquery)){var s=r.jquery?r[0]:r,t={};a(b).data("blockUI.history",t),t.el=s,t.parent=s.parentNode,t.display=s.style.display,t.position=s.style.position,t.parent&&t.parent.removeChild(s)}a(b).data("blockUI.onUnblock",d.onUnblock);var u,v,w,x,y=d.baseZ;u=a(k||d.forceIframe?'<iframe class="blockUI" style="z-index:'+y++ +';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="'+d.iframeSrc+'"></iframe>':'<div class="blockUI" style="display:none"></div>'),v=a(d.theme?'<div class="blockUI blockOverlay ui-widget-overlay" style="z-index:'+y++ +';display:none"></div>':'<div class="blockUI blockOverlay" style="z-index:'+y++ +';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0"></div>'),d.theme&&q?(x='<div class="blockUI '+d.blockMsgClass+' blockPage ui-dialog ui-widget ui-corner-all" style="z-index:'+(y+10)+';display:none;position:fixed">',d.title&&(x+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(d.title||"&nbsp;")+"</div>"),x+='<div class="ui-widget-content ui-dialog-content"></div>',x+="</div>"):d.theme?(x='<div class="blockUI '+d.blockMsgClass+' blockElement ui-dialog ui-widget ui-corner-all" style="z-index:'+(y+10)+';display:none;position:absolute">',d.title&&(x+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(d.title||"&nbsp;")+"</div>"),x+='<div class="ui-widget-content ui-dialog-content"></div>',x+="</div>"):x=q?'<div class="blockUI '+d.blockMsgClass+' blockPage" style="z-index:'+(y+10)+';display:none;position:fixed"></div>':'<div class="blockUI '+d.blockMsgClass+' blockElement" style="z-index:'+(y+10)+';display:none;position:absolute"></div>',w=a(x),r&&(d.theme?(w.css(p),w.addClass("ui-widget-content")):w.css(f)),d.theme||v.css(d.overlayCSS),v.css("position",q?"fixed":"absolute"),(k||d.forceIframe)&&u.css("opacity",0);var z=[u,v,w],A=a(q?"body":b);a.each(z,function(){this.appendTo(A)}),d.theme&&d.draggable&&a.fn.draggable&&w.draggable({handle:".ui-dialog-titlebar",cancel:"li"});var B=m&&(!a.support.boxModel||a("object,embed",q?null:b).length>0);if(l||B){if(q&&d.allowBodyStretch&&a.support.boxModel&&a("html,body").css("height","100%"),(l||!a.support.boxModel)&&!q)var C=i(b,"borderTopWidth"),D=i(b,"borderLeftWidth"),E=C?"(0 - "+C+")":0,F=D?"(0 - "+D+")":0;a.each(z,function(a,b){var c=b[0].style;if(c.position="absolute",2>a)q?c.setExpression("height","Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.support.boxModel?0:"+d.quirksmodeOffsetHack+') + "px"'):c.setExpression("height",'this.parentNode.offsetHeight + "px"'),q?c.setExpression("width",'jQuery.support.boxModel && document.documentElement.clientWidth || document.body.clientWidth + "px"'):c.setExpression("width",'this.parentNode.offsetWidth + "px"'),F&&c.setExpression("left",F),E&&c.setExpression("top",E);else if(d.centerY)q&&c.setExpression("top",'(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"'),c.marginTop=0;else if(!d.centerY&&q){var e=d.css&&d.css.top?parseInt(d.css.top,10):0,f="((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "+e+') + "px"';c.setExpression("top",f)}})}if(r&&(d.theme?w.find(".ui-widget-content").append(r):w.append(r),(r.jquery||r.nodeType)&&a(r).show()),(k||d.forceIframe)&&d.showOverlay&&u.show(),d.fadeIn){var G=d.onBlock?d.onBlock:j,H=d.showOverlay&&!r?G:j,I=r?G:j;d.showOverlay&&v._fadeIn(d.fadeIn,H),r&&w._fadeIn(d.fadeIn,I)}else d.showOverlay&&v.show(),r&&w.show(),d.onBlock&&d.onBlock();if(e(1,b,d),q?(n=w[0],o=a(d.focusableElements,n),d.focusInput&&setTimeout(g,20)):h(w[0],d.centerX,d.centerY),d.timeout){var J=setTimeout(function(){q?a.unblockUI(d):a(b).unblock(d)},d.timeout);a(b).data("blockUI.timeout",J)}}}function c(b,c){var f,g=b==window,h=a(b),i=h.data("blockUI.history"),j=h.data("blockUI.timeout");j&&(clearTimeout(j),h.removeData("blockUI.timeout")),c=a.extend({},a.blockUI.defaults,c||{}),e(0,b,c),null===c.onUnblock&&(c.onUnblock=h.data("blockUI.onUnblock"),h.removeData("blockUI.onUnblock"));var k;k=g?a("body").children().filter(".blockUI").add("body > .blockUI"):h.find(">.blockUI"),c.cursorReset&&(k.length>1&&(k[1].style.cursor=c.cursorReset),k.length>2&&(k[2].style.cursor=c.cursorReset)),g&&(n=o=null),c.fadeOut?(f=k.length,k.stop().fadeOut(c.fadeOut,function(){0===--f&&d(k,i,c,b)})):d(k,i,c,b)}function d(b,c,d,e){var f=a(e);if(!f.data("blockUI.isBlocked")){b.each(function(){this.parentNode&&this.parentNode.removeChild(this)}),c&&c.el&&(c.el.style.display=c.display,c.el.style.position=c.position,c.parent&&c.parent.appendChild(c.el),f.removeData("blockUI.history")),f.data("blockUI.static")&&f.css("position","static"),"function"==typeof d.onUnblock&&d.onUnblock(e,d);var g=a(document.body),h=g.width(),i=g[0].style.width;g.width(h-1).width(h),g[0].style.width=i}}function e(b,c,d){var e=c==window,g=a(c);if((b||(!e||n)&&(e||g.data("blockUI.isBlocked")))&&(g.data("blockUI.isBlocked",b),e&&d.bindEvents&&(!b||d.showOverlay))){var h="mousedown mouseup keydown keypress keyup touchstart touchend touchmove";b?a(document).bind(h,d,f):a(document).unbind(h,f)}}function f(b){if("keydown"===b.type&&b.keyCode&&9==b.keyCode&&n&&b.data.constrainTabKey){var c=o,d=!b.shiftKey&&b.target===c[c.length-1],e=b.shiftKey&&b.target===c[0];if(d||e)return setTimeout(function(){g(e)},10),!1}var f=b.data,h=a(b.target);return h.hasClass("blockOverlay")&&f.onOverlayClick&&f.onOverlayClick(),h.parents("div."+f.blockMsgClass).length>0?!0:0===h.parents().children().filter("div.blockUI").length}function g(a){if(o){var b=o[a===!0?o.length-1:0];b&&b.focus()}}function h(a,b,c){var d=a.parentNode,e=a.style,f=(d.offsetWidth-a.offsetWidth)/2-i(d,"borderLeftWidth"),g=(d.offsetHeight-a.offsetHeight)/2-i(d,"borderTopWidth");b&&(e.left=f>0?f+"px":"0"),c&&(e.top=g>0?g+"px":"0")}function i(b,c){return parseInt(a.css(b,c),10)||0}a.fn._fadeIn=a.fn.fadeIn;var j=a.noop||function(){},k=/MSIE/.test(navigator.userAgent),l=/MSIE 6.0/.test(navigator.userAgent)&&!/MSIE 8.0/.test(navigator.userAgent);document.documentMode||0;var m=a.isFunction(document.createElement("div").style.setExpression);a.blockUI=function(a){b(window,a)},a.unblockUI=function(a){c(window,a)},a.growlUI=function(b,c,d,e){var f=a('<div class="growlUI"></div>');b&&f.append("<h1>"+b+"</h1>"),c&&f.append("<h2>"+c+"</h2>"),void 0===d&&(d=3e3);var g=function(b){b=b||{},a.blockUI({message:f,fadeIn:"undefined"!=typeof b.fadeIn?b.fadeIn:700,fadeOut:"undefined"!=typeof b.fadeOut?b.fadeOut:1e3,timeout:"undefined"!=typeof b.timeout?b.timeout:d,centerY:!1,showOverlay:!1,onUnblock:e,css:a.blockUI.defaults.growlCSS})};g(),f.css("opacity"),f.mouseover(function(){g({fadeIn:0,timeout:3e4});var b=a(".blockMsg");b.stop(),b.fadeTo(300,1)}).mouseout(function(){a(".blockMsg").fadeOut(1e3)})},a.fn.block=function(c){if(this[0]===window)return a.blockUI(c),this;var d=a.extend({},a.blockUI.defaults,c||{});return this.each(function(){var b=a(this);d.ignoreIfBlocked&&b.data("blockUI.isBlocked")||b.unblock({fadeOut:0})}),this.each(function(){"static"==a.css(this,"position")&&(this.style.position="relative",a(this).data("blockUI.static",!0)),this.style.zoom=1,b(this,c)})},a.fn.unblock=function(b){return this[0]===window?(a.unblockUI(b),this):this.each(function(){c(this,b)})},a.blockUI.version=2.65,a.blockUI.defaults={message:"<h1>Please wait...</h1>",title:null,draggable:!0,theme:!1,css:{padding:0,margin:0,width:"30%",top:"40%",left:"35%",textAlign:"center",color:"#000",border:"3px solid #aaa",backgroundColor:"#fff",cursor:"wait"},themedCSS:{width:"30%",top:"40%",left:"35%"},overlayCSS:{backgroundColor:"#000",opacity:.6,cursor:"wait"},cursorReset:"default",growlCSS:{width:"350px",top:"10px",left:"",right:"10px",border:"none",padding:"5px",opacity:.6,cursor:"default",color:"#fff",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px","border-radius":"10px"},iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank",forceIframe:!1,baseZ:1e3,centerX:!0,centerY:!0,allowBodyStretch:!0,bindEvents:!0,constrainTabKey:!0,fadeIn:200,fadeOut:400,timeout:0,showOverlay:!0,focusInput:!0,focusableElements:":input:enabled:visible",onBlock:null,onUnblock:null,onOverlayClick:null,quirksmodeOffsetHack:4,blockMsgClass:"blockMsg",ignoreIfBlocked:!1};var n=null,o=[]}"function"==typeof define&&define.amd&&define.amd.jQuery?define(["jquery"],a):a(b)}(),function(a){var b=a.blockUI.defaults;a.extend(b.css,{border:"none",padding:"15px",backgroundColor:"#888","-webkit-border-radius":"10px","-moz-border-radius":"10px",opacity:.75,color:"#EEE","font-weight":"bold",top:"200px"}),b.centerY=!1,a.extend(b.overlayCSS,{backgroundColor:"#FFF",opacity:.7}),a.extend(b.growlCSS,{opacity:1,backgroundColor:"#000"})}(b),function(a){var b=0;a.widget("ech.multiselect",{options:{header:!0,height:175,minWidth:225,classes:"",checkAllText:"Check all",uncheckAllText:"Uncheck all",noneSelectedText:"Select options",selectedText:"# selected",selectedList:0,show:null,hide:null,autoOpen:!1,multiple:!0,position:{}},_create:function(){var b=this.element.hide(),c=this.options;this.speed=a.fx.speeds._default,this._isOpen=!1,b=(this.button=a('<div type="button"><span class="ui-icon ui-icon-triangle-2-n-s"></span></div>')).addClass("ui-multiselect ui-widget ui-state-default ui-corner-all").addClass(c.classes).attr({title:b.attr("title"),"aria-haspopup":!0,tabIndex:b.attr("tabIndex")}).insertAfter(b),(this.buttonlabel=a("<span />")).html(c.noneSelectedText).appendTo(b);var b=(this.menu=a("<div />")).addClass("ui-multiselect-menu ui-widget ui-widget-content ui-corner-all").addClass(c.classes).appendTo(document.body),d=(this.header=a("<div />")).addClass("ui-widget-header ui-corner-all ui-multiselect-header ui-helper-clearfix").appendTo(b);(this.headerLinkContainer=a("<ul />")).addClass("ui-helper-reset").html(function(){return!0===c.header?'<li><a class="ui-multiselect-all" href="#"><span class="ui-icon ui-icon-check"></span><span>'+c.checkAllText+'</span></a></li><li><a class="ui-multiselect-none" href="#"><span class="ui-icon ui-icon-closethick"></span><span>'+c.uncheckAllText+"</span></a></li>":"string"==typeof c.header?"<li>"+c.header+"</li>":""}).append('<li class="ui-multiselect-close"><a href="#" class="ui-multiselect-close"><span class="ui-icon ui-icon-circle-close"></span></a></li>').appendTo(d),(this.checkboxContainer=a("<ul />")).addClass("ui-multiselect-checkboxes ui-helper-reset").appendTo(b),this._bindEvents(),this.refresh(!0),c.multiple||b.addClass("ui-multiselect-single")},_init:function(){!1===this.options.header&&this.header.hide(),this.options.multiple||this.headerLinkContainer.find(".ui-multiselect-all, .ui-multiselect-none").hide(),this.options.autoOpen&&this.open(),this.element.is(":disabled")&&this.disable()},refresh:function(c){var d=this.element,e=this.options,f=this.menu,g=this.checkboxContainer,h=[],i="",j=d.attr("id")||b++;d.find("option").each(function(b){a(this);var c,d=this.parentNode,f=this.innerHTML,g=this.title,k=this.value,b="ui-multiselect-"+(this.id||j+"-option-"+b),l=this.disabled,m=this.selected,n=["ui-corner-all"],o=(l?"ui-multiselect-disabled ":" ")+this.className;"OPTGROUP"===d.tagName&&(c=d.getAttribute("label"),-1===a.inArray(c,h)&&(i+='<li class="ui-multiselect-optgroup-label '+d.className+'"><a href="#">'+c+"</a></li>",h.push(c))),l&&n.push("ui-state-disabled"),m&&!e.multiple&&n.push("ui-state-active"),i+='<li class="'+o+'">',i+='<label for="'+b+'" title="'+g+'" class="'+n.join(" ")+'">',i+='<input id="'+b+'" name="multiselect_'+j+'" type="'+(e.multiple?"checkbox":"radio")+'" value="'+k+'" title="'+f+'"',m&&(i+=' checked="checked"',i+=' aria-selected="true"'),l&&(i+=' disabled="disabled"',i+=' aria-disabled="true"'),i+=" /><span>"+f+"</span></label></li>"}),g.html(i),this.labels=f.find("label"),this.inputs=this.labels.children("input"),this._setButtonWidth(),this._setMenuWidth(),this.button[0].defaultValue=this.update(),c||this._trigger("refresh")},update:function(){var b=this.options,c=this.inputs,d=c.filter(":checked"),e=d.length,b=0===e?b.noneSelectedText:a.isFunction(b.selectedText)?b.selectedText.call(this,e,c.length,d.get()):/\d/.test(b.selectedList)&&0<b.selectedList&&e<=b.selectedList?d.map(function(){return a(this).next().html()}).get().join(", "):b.selectedText.replace("#",e).replace("#",c.length);return this.buttonlabel.html(b),b},_bindEvents:function(){function b(){return c[c._isOpen?"close":"open"](),!1}var c=this,d=this.button;d.find("span").bind("click.multiselect",b),d.bind({click:b,keypress:function(a){switch(a.which){case 27:case 38:case 37:c.close();break;case 39:case 40:c.open()}},mouseenter:function(){d.hasClass("ui-state-disabled")||a(this).addClass("ui-state-hover-")},mouseleave:function(){a(this).removeClass("ui-state-hover-")},focus:function(){d.hasClass("ui-state-disabled")||a(this).addClass("ui-state-focus")},blur:function(){a(this).removeClass("ui-state-focus")}}),this.header.delegate("a","click.multiselect",function(b){a(this).hasClass("ui-multiselect-close")?c.close():c[a(this).hasClass("ui-multiselect-all")?"checkAll":"uncheckAll"](),b.preventDefault()}),this.menu.delegate("li.ui-multiselect-optgroup-label a","click.multiselect",function(b){b.preventDefault();var d=a(this),e=d.parent().nextUntil("li.ui-multiselect-optgroup-label").find("input:visible:not(:disabled)"),f=e.get(),d=d.parent().text();!1!==c._trigger("beforeoptgrouptoggle",b,{inputs:f,label:d})&&(c._toggleChecked(e.filter(":checked").length!==e.length,e),c._trigger("optgrouptoggle",b,{inputs:f,label:d,checked:f[0].checked}))}).delegate("label","mouseenter.multiselect",function(){a(this).hasClass("ui-state-disabled")||(c.labels.removeClass("ui-state-hover-"),a(this).addClass("ui-state-hover-").find("input").focus())}).delegate("label","keydown.multiselect",function(b){switch(b.preventDefault(),b.which){case 9:case 27:c.close();break;case 38:case 40:case 37:case 39:c._traverse(b.which,this);break;case 13:a(this).find("input")[0].click()}}).delegate('input[type="checkbox"], input[type="radio"]',"click.multiselect",function(b){var d=a(this),e=this.value,f=this.checked,g=c.element.find("option");this.disabled||!1===c._trigger("click",b,{value:e,text:this.title,checked:f})?b.preventDefault():(d.focus(),d.attr("aria-selected",f),g.each(function(){this.value===e?this.selected=f:c.options.multiple||(this.selected=!1)}),c.options.multiple||(c.labels.removeClass("ui-state-active"),d.closest("label").toggleClass("ui-state-active",f),c.close()),c.element.trigger("change"),setTimeout(a.proxy(c.update,c),10))}),a(document).bind("mousedown.multiselect",function(b){c._isOpen&&!a.contains(c.menu[0],b.target)&&!a.contains(c.button[0],b.target)&&b.target!==c.button[0]&&c.close()}),a(this.element[0].form).bind("reset.multiselect",function(){setTimeout(a.proxy(c.refresh,c),10)})},_setButtonWidth:function(){var a=this.element.outerWidth(),b=this.options;/\d/.test(b.minWidth)&&a<b.minWidth&&(a=b.minWidth),this.button.css("width","100%")},_setMenuWidth:function(){var a=this.menu;this.button.outerWidth()-parseInt(a.css("padding-left"),10)-parseInt(a.css("padding-right"),10)-parseInt(a.css("border-right-width"),10)-parseInt(a.css("border-left-width"),10)},_traverse:function(b,c){var d=a(c),e=38===b||37===b,d=d.parent()[e?"prevAll":"nextAll"]("li:not(.ui-multiselect-disabled, .ui-multiselect-optgroup-label)")[e?"last":"first"]();d.length?d.find("label").trigger("mouseover"):(d=this.menu.find("ul").last(),this.menu.find("label")[e?"last":"first"]().trigger("mouseover"),d.scrollTop(e?d.height():0))},_toggleState:function(a,b){return function(){this.disabled||(this[a]=b),b?this.setAttribute("aria-selected",!0):this.removeAttribute("aria-selected")}},_toggleChecked:function(b,c){var d=c&&c.length?c:this.inputs,e=this;d.each(this._toggleState("checked",b)),d.eq(0).focus(),this.update();var f=d.map(function(){return this.value}).get();this.element.find("option").each(function(){!this.disabled&&-1<a.inArray(this.value,f)&&e._toggleState("selected",b).call(this)}),d.length&&this.element.trigger("change")},_toggleDisabled:function(b){this.button.attr({disabled:b,"aria-disabled":b})[b?"addClass":"removeClass"]("ui-state-disabled");var c=this.menu.find("input"),c=b?c.filter(":enabled").data("ech-multiselect-disabled",!0):c.filter(function(){return!0===a.data(this,"ech-multiselect-disabled")}).removeData("ech-multiselect-disabled");c.attr({disabled:b,"arial-disabled":b}).parent()[b?"addClass":"removeClass"]("ui-state-disabled"),this.element.attr({disabled:b,"aria-disabled":b})},open:function(){var b=this.button,c=this.menu,d=this.speed,e=this.options,f=[];if(!1!==this._trigger("beforeopen")&&!b.hasClass("ui-state-disabled")&&!this._isOpen){var g=c.find("ul").last(),h=e.show,i=b.offset();a.isArray(e.show)&&(h=e.show[0],d=e.show[1]||this.speed),h&&(f=[h,d]),g.scrollTop(0).height(e.height),a.ui.position&&!a.isEmptyObject(e.position)?(e.position.of=e.position.of||b,c.show().position(e.position).hide()):c.css({top:i.top+b.outerHeight(),left:i.left}),a.fn.show.apply(c,f),this.labels.eq(0).trigger("mouseover").trigger("mouseenter").find("input").trigger("focus"),b.addClass("ui-state-active"),this._isOpen=!0,this._trigger("open")}},close:function(){if(!1!==this._trigger("beforeclose")){var b=this.options,c=b.hide,d=this.speed,e=[];a.isArray(b.hide)&&(c=b.hide[0],d=b.hide[1]||this.speed),c&&(e=[c,d]),a.fn.hide.apply(this.menu,e),this.button.removeClass("ui-state-active").trigger("blur").trigger("mouseleave"),this._isOpen=!1,this._trigger("close")}},enable:function(){this._toggleDisabled(!1)},disable:function(){this._toggleDisabled(!0)},checkAll:function(){this._toggleChecked(!0),this._trigger("checkAll")},uncheckAll:function(){this._toggleChecked(!1),this._trigger("uncheckAll")},getChecked:function(){return this.menu.find("input").filter(":checked")},destroy:function(){return a.Widget.prototype.destroy.call(this),this.button.remove(),this.menu.remove(),this.element.show(),this},isOpen:function(){return this._isOpen},widget:function(){return this.menu},getButton:function(){return this.button},_setOption:function(b,c){var d=this.menu;switch(b){case"header":d.find("div.ui-multiselect-header")[c?"show":"hide"]();break;case"checkAllText":d.find("a.ui-multiselect-all span").eq(-1).text(c);break;case"uncheckAllText":d.find("a.ui-multiselect-none span").eq(-1).text(c);break;case"height":d.find("ul").last().height(parseInt(c,10));break;case"minWidth":this.options[b]=parseInt(c,10),this._setButtonWidth(),this._setMenuWidth();break;case"selectedText":case"selectedList":case"noneSelectedText":this.options[b]=c,this.update();break;case"classes":d.add(this.button).removeClass(this.options.classes).addClass(c);break;case"multiple":d.toggleClass("ui-multiselect-single",!c),this.options.multiple=c,this.element[0].multiple=c,this.refresh()}a.Widget.prototype._setOption.apply(this,arguments)}})}(b),function(a){var b=/[\-\[\]{}()*+?.,\\\^$|#\s]/g;a.widget("ech.multiselectfilter",{options:{label:"Filter:",width:null,placeholder:"Enter keywords",autoReset:!1},_create:function(){var b=this.options,c=a(this.element),d=this.instance=c.data("echMultiselect")||c.data("multiselect")||c.data("ech-multiselect");this.header=d.menu.find(".ui-multiselect-header").addClass("ui-multiselect-hasfilter");var e=this.wrapper=a('<div class="ui-multiselect-filter">'+(b.label.length?b.label:"")+'<input placeholder="'+b.placeholder+'" type="search"'+(/\d/.test(b.width)?'style="width:'+b.width+'px"':"")+" /></div>").prependTo(this.header);this.inputs=d.menu.find('input[type="checkbox"], input[type="radio"]'),this.input=e.find("input").bind({keydown:function(a){13===a.which&&a.preventDefault()},keyup:a.proxy(this._handler,this),click:a.proxy(this._handler,this)}),this.updateCache(),d._toggleChecked=function(b,c){var e=c&&c.length?c:this.labels.find("input"),f=this,g=d._isOpen?":disabled, :hidden":":disabled";e=e.not(g).each(this._toggleState("checked",b)),this.update();var h=e.map(function(){return this.value}).get();this.element.find("option").filter(function(){!this.disabled&&a.inArray(this.value,h)>-1&&f._toggleState("selected",b).call(this)}),e.length&&this.element.trigger("change")};var f=a(document).bind("multiselectrefresh",a.proxy(function(){this.updateCache(),this._handler()},this));this.options.autoReset&&f.bind("multiselectclose",a.proxy(this._reset,this))},_handler:function(c){var d=a.trim(this.input[0].value.toLowerCase()),e=this.rows,f=this.inputs,g=this.cache;if(d){e.hide();var h=RegExp(d.replace(b,"\\$&"),"gi");this._trigger("filter",c,a.map(g,function(a,b){return-1!==a.search(h)?(e.eq(b).show(),f.get(b)):null}))}else e.show();this.instance.menu.find(".ui-multiselect-optgroup-label").each(function(){var b=a(this),c=b.nextUntil(".ui-multiselect-optgroup-label").filter(function(){return"none"!==a.css(this,"display")}).length;b[c?"show":"hide"]()})},_reset:function(){this.input.val("").trigger("keyup")},updateCache:function(){this.rows=this.instance.menu.find(".ui-multiselect-checkboxes li:not(.ui-multiselect-optgroup-label)"),this.cache=this.element.children().map(function(){var b=a(this);return"optgroup"===this.tagName.toLowerCase()&&(b=b.children()),b.map(function(){return this.innerHTML.toLowerCase()}).get()}).get()},widget:function(){return this.wrapper},destroy:function(){a.Widget.prototype.destroy.call(this),this.input.val("").trigger("keyup"),this.wrapper.remove()}})}(b),void 0===b.when.all&&(b.when.all=function(a){var c=new b.Deferred;return b.when.apply(b,a).then(function(){c.resolve(Array.prototype.slice.call(arguments))},function(){c.reject(Array.prototype.slice.call(arguments))}),c}),b.settle||(b.settle=function(a){arguments.length>1&&(a=Array.prototype.slice.call(arguments)),b.isArray(a)||(a=[a]);var c=new b.Deferred,d=a.map(function(a){var c=new b.Deferred;return a.then(function(){var a=Array.prototype.slice.call(arguments);c.resolve({success:!0,results:a.length>1?a:a[0]})},function(){var a=Array.prototype.slice.call(arguments);c.resolve({success:!1,results:a.length>1?a:a[0]})}),c});return b.when.apply(b,d).always(function(){c.resolve(Array.prototype.slice.call(arguments))}),c}),function(a){a.number=function(a,b,c,d){d=void 0===d?",":d,c=void 0===c?".":c,b=isFinite(+b)?Math.abs(b):0;var e="\\u"+("0000"+c.charCodeAt(0).toString(16)).substr(-4);a=(a+"").replace(RegExp(e,"g"),".").replace(RegExp("[^0-9+-Ee.]","g"),"");var f=isFinite(+a)?+a:0,g="",h=function(a,b){var c=Math.pow(10,b);return""+Math.round(a*c)/c};return g=(b?h(f,b):""+Math.round(f)).split("."),g[0].length>3&&(g[0]=g[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,d)),b>(g[1]||"").length&&(g[1]=g[1]||"",g[1]+=Array(b-g[1].length+1).join("0")),g.join(c)}}(b),function(a){a.fn.setCursorPosition=function(a){return this.each(function(b,c){if(c.setSelectionRange)c.setSelectionRange(a,a);else if(c.createTextRange){var d=c.createTextRange();d.collapse(!0),d.moveEnd("character",a),d.moveStart("character",a),d.select()}}),this},a.fn.getCursorPosition=function(){var b=a(this).get(0),c=0;if("selectionStart"in b)c=b.selectionStart;else if("selection"in document){b.focus();var d=document.selection.createRange(),e=document.selection.createRange().text.length;d.moveStart("character",-b.value.length),c=d.text.length-e}return c}}(b),function(a){var b=a.fn.attr;a.fn.attr=function(){if(0===arguments.length){if(0===this.length)return null;var c={};return a.each(this[0].attributes,function(){this.specified&&(c[this.name]=this.value)}),c}return b.apply(this,arguments)}}(b),d.load=function(a,b,c){function d(){}function e(a){return Object(a)===a}function f(a){return"string"==typeof a}function g(){l&&l.parentNode||(l=b.body.getElementsByTagName("script")[0])}function h(a){var b=a.readyState;if(!b)return!0;if(!/loaded|complete/.test(b))return"uninitialized"===b?!0:!1;var c=b;return a.children,"loaded"!==c||"loading"!==a.readyState?!0:void onError()}function i(b,c,d){d&&(d.onload=d.onreadystatechange=d.onerror=null),c.call(a)}function j(a,j){function k(){t=1;var a=new Error("Script Error: "+o);j(a),v.reject(a)}var o,q,r,s,t,u,v=c.Deferred(),w=v.promise();if(f(a)?o=a:e(a)&&(o=a._url||a.src,q=a.attrs,r=a.timeout),j=j||d,q=q||{},!o){var x=new Error("You must provide a valid script to load.");return j(x),v.reject(x),w}if(o in n)return n[o];if(c("script[src='"+o+"']").size())return v.resolve(),i(o,j,s),w;n[o]=w,s=b.createElement("script"),r=r||p.errorTimeout,s.async=!1,s.src=o;for(u in q)s.setAttribute(u,q[u]);return s.onreadystatechange=s.onload=function(){!t&&h(s)&&(t=1,i(o,j,s),v.resolve())},s.onerror=function(){k()},m(function(){if(!t){t=1;var a=new Error("Timeout: "+o);j(a),v.reject(a),s.parentNode.removeChild(s)}},r),g(),l.parentNode.insertBefore(s,l),w}function k(h,i){var j,k,n,p={},q=c.Deferred(),r=q.promise();if(e(h)?(j=h._url||h.href,p=h.attrs||{}):f(h)&&(j=h),i=i||d,c("link[href='"+j+"']").size())return q.resolve(),i.call(a),r;n=b.createElement("link"),n.href=j,n.rel="stylesheet",n.media="only x",n.type=p.type||"text/css",m(function(){n.media=p.media||"all"});for(k in p)n.setAttribute(k,p[k]);return h&&h.insertBefore?h.insertBefore.parentNode.insertBefore(n,h.insertBefore):h&&h.insertAfter?h.insertAfter.parentNode.insertBefore(n,h.insertAfter.nextSibling):(g(),l.parentNode.appendChild(n)),o()?(n.onload=function(){q.resolve(),i.call(a)},n.onerror=function(){q.resolve(),i.call(a)}):m(function(){q.resolve(),i.call(a)}),r}var l,m=a.setTimeout,n={},o=function(){var a=b.createElement("link"),c="onload",d=c in a;return d||(a.setAttribute(c,"return;"),d="function"==typeof a[c]),a=null,d},p={errorTimeout:4e4,js:j,css:k};return p}(window,document,b),function(a){a.widget("custom.combobox",{options:{parentElem:a("<div>"),source:function(b,c){var d=new RegExp(a.ui.autocomplete.escapeRegex(b.term),"i");c(this.element.children("option").map(function(){var c=a(this).text();return!this.value||b.term&&!d.test(c)?void 0:{label:c,value:c,option:this}}))},delay:0,searchicon:a("<div>"),menuClass:"ui-combobox"},_create:function(){this.wrapper=this.options.parentElem.addClass("custom-combobox").insertAfter(this.options.parentElem),this.element.hide(),this._createAutocomplete(),this._createShowAllButton()},_createAutocomplete:function(){var b,c=this,d=c.element.children(":selected"),e=c.options.value||d.val()&&d.text()||"",f=a('<div class="ui-combobox-container"></div>'),g={delay:c.options.delay,minLength:0,source:c.options.source,select:c.options.onChange};c.options.appendDropdown?a.extend(g,{appendTo:f}):"",c.input=a("<input>").appendTo(c.wrapper).autocomplete(g).val(e),c.input.appendTo(c.wrapper),c.input.focus(function(a){c.options.onFocus&&c.options.onFocus(a)}),c.input.blur(function(a){c.options.onBlur&&c.options.onBlur(a)}),c.options.appendDropdown?(f.insertAfter(c.wrapper.children().last()),b=f.find("ul.ui-autocomplete")):b=a("body").find("ul.ui-autocomplete"),b.addClass(c.options.menuClass).removeClass("ui-front"),c.options.parentElem&&(c.options.parentElem.append(c.options.searchicon),c.options.parentElem.is(c.input)&&c.input.css("padding-right","22px"))},_createShowAllButton:function(){var b=this,c=b.input,d=!1;a("<a>").attr("tabIndex",-1).tooltip().appendTo(b.wrapper).button({icons:{primary:"fa fa-chevron-down"},text:!1}).removeClass("ui-corner-all ui-button ui-widget ui-state-default ui-button-icon-only").addClass("nx-combobox-renderer-button").on("mousedown",function(){d=c.autocomplete("widget").is(":visible")}).on("click",function(){c.trigger("focus"),d||c.autocomplete("search","")})}})}(b),function(a){function b(b){this.$textarea=a(b),this._init()}b.prototype={_init:function(){var b=this;this.$textarea.wrap('<div class="flex-text-wrap" />').before("<pre><span /><br /></pre>"),this.$span=this.$textarea.prev().find("span"),this.$textarea.on("input propertychange keyup change",function(){b._mirror()}),a.valHooks.textarea={get:function(a){return a.value.replace(/\r?\n/g,"\r\n")}},this._mirror()},_mirror:function(){this.$span.text(this.$textarea.val())}},a.fn.flexText=function(){return this.each(function(){a.data(this,"flexText")||a.data(this,"flexText",new b(this))})}}(b),Array.prototype.reduce||(Array.prototype.reduce=function(a){"use strict";if(null==this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof a)throw new TypeError(a+" is not a function");var b,c=Object(this),d=c.length>>>0,e=0;if(2==arguments.length)b=arguments[1];else{for(;d>e&&!(e in c);)e++;if(e>=d)throw new TypeError("Reduce of empty array with no initial value");b=c[e++]}for(;d>e;e++)e in c&&(b=a(b,c[e],e,c));return b}),b.fn.extend({insertAtCaret:function(a){return this.each(function(){if(document.selection){this.focus();var b=document.selection.createRange();b.text=a,this.focus()}else if(this.selectionStart||"0"==this.selectionStart){var c=this.selectionStart,d=this.selectionEnd,e=this.scrollTop;this.value=this.value.substring(0,c)+a+this.value.substring(d,this.value.length),this.focus(),this.selectionStart=c+a.length,this.selectionEnd=c+a.length,this.scrollTop=e}else this.value+=a,this.focus()})}})}(window.skuid,window.jQuery),function(){var a=function(){for(var a,b=3,c=document.createElement("div"),d=c.getElementsByTagName("i");c.innerHTML="<!--[if gt IE "+ ++b+"]><i></i><![endif]-->",d[0];);return 4>=b&&!window.ActiveXObject&&"ActiveXObject"in window?11:b>4?b:a}(),b=function(){"use strict";function a(a){for(var b,c=getComputedStyle(a).fontFamily,d={};null!==(b=g.exec(c));)d[b[1]]=b[2];return d}function b(b,d){if(!b[f].parsingSrcset){var e=a(b);if(e["object-fit"]=e["object-fit"]||"fill",!b[f].s){if("fill"===e["object-fit"])return;if(!b[f].skipTest&&i&&!e["object-position"])return}var g=b[f].ios7src||b.currentSrc||b.src;if(d)g=d;else if(b.srcset&&!k&&window.picturefill){var h=window.picturefill._;b[f].parsingSrcset=!0,b[h.ns]&&b[h.ns].evaled||h.fillImg(b,{reselect:!0}),b[h.ns].curSrc||(b[h.ns].supported=!1,h.fillImg(b,{reselect:!0})),delete b[f].parsingSrcset,g=b[h.ns].curSrc||g}if(b[f].s)b[f].s=g,d&&(b[f].srcAttr=d);else{b[f]={s:g,srcAttr:d||l.call(b,"src"),srcsetAttr:b.srcset},b.src=f;try{b.srcset&&(b.srcset="",Object.defineProperty(b,"srcset",{value:b[f].srcsetAttr})),c(b)}catch(j){b[f].ios7src=g}}b.style.backgroundImage='url("'+g+'")',b.style.backgroundPosition=e["object-position"]||"center",b.style.backgroundRepeat="no-repeat",/scale-down/.test(e["object-fit"])?(b[f].i||(b[f].i=new Image,b[f].i.src=g),function m(){return b[f].i.naturalWidth?void(b[f].i.naturalWidth>b.width||b[f].i.naturalHeight>b.height?b.style.backgroundSize="contain":b.style.backgroundSize="auto"):void setTimeout(m,100)}()):b.style.backgroundSize=e["object-fit"].replace("none","auto").replace("fill","100% 100%")}}function c(a){var c={get:function(){return a[f].s},set:function(c){return delete a[f].i,b(a,c),c}};Object.defineProperty(a,"src",c),Object.defineProperty(a,"currentSrc",{get:c.get})}function d(){j||(HTMLImageElement.prototype.getAttribute=function(a){return!this[f]||"src"!==a&&"srcset"!==a?l.call(this,a):this[f][a+"Attr"]},HTMLImageElement.prototype.setAttribute=function(a,b){!this[f]||"src"!==a&&"srcset"!==a?m.call(this,a,b):this["src"===a?"src":a+"Attr"]=String(b)})}function e(a,c){var d=!n&&!a;if(c=c||{},a=a||"img",j&&!c.skipTest)return!1;"string"==typeof a?a=document.querySelectorAll("img"):"length"in a||(a=[a]);for(var g=0;g<a.length;g++)a[g][f]=a[g][f]||c,
b(a[g]);d&&(document.body.addEventListener("load",function(a){"IMG"===a.target.tagName&&e(a.target,{skipTest:c.skipTest})},!0),n=!0,a="img"),c.watchMQ&&window.addEventListener("resize",e.bind(null,a,{skipTest:c.skipTest}))}var f="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",g=/(object-fit|object-position)\s*:\s*([-\w\s%]+)/g,h=new Image,i="object-fit"in h.style,j="object-position"in h.style,k="string"==typeof h.currentSrc,l=h.getAttribute,m=h.setAttribute,n=!1;return e.supportsObjectFit=i,e.supportsObjectPosition=j,d(),e}();(a>8||void 0===a)&&skuid.$(function(){b()})}(),window.sforce=window.sforce||{},sforce.internal={},sforce.StringBuffer=function(){this.buffer=[],this.append=function(a){return this.buffer.push(a),this},this.toString=function(){return this.buffer.join("")}},sforce.Base64Binary=function(a){this.input=a},sforce.Base64Binary.prototype.keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",sforce.Base64Binary.prototype.toString=function(){var a,b,c,d,e,f=[],g="",h="",i=0;do a=this.input.charCodeAt(i++),b=this.input.charCodeAt(i++),g=this.input.charCodeAt(i++),c=a>>2,d=(3&a)<<4|b>>4,e=(15&b)<<2|g>>6,h=63&g,isNaN(b)?e=h=64:isNaN(g)&&(h=64),f.push(this.keyStr.charAt(c)+this.keyStr.charAt(d)+this.keyStr.charAt(e)+this.keyStr.charAt(h)),a=b=g="",c=d=e=h="";while(i<this.input.length);return f.join("")},sforce.Base64Binary.prototype.decode=function(a){var b,c,d,e,f,g=[],h="",i="",j=0,k=/[^A-Za-z0-9\+\/\=]/g;k.exec(a)&&alert("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/', and '='\nExpect errors in decoding."),a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");do d=this.keyStr.indexOf(a.charAt(j++)),e=this.keyStr.indexOf(a.charAt(j++)),f=this.keyStr.indexOf(a.charAt(j++)),i=this.keyStr.indexOf(a.charAt(j++)),b=d<<2|e>>4,c=(15&e)<<4|f>>2,h=(3&f)<<6|i,g.push(String.fromCharCode(b)),64!=f&&g.push(String.fromCharCode(c)),64!=i&&g.push(String.fromCharCode(h)),b=c=h="",d=e=f=i="";while(j<a.length);return g.join("")},sforce.internal.dateToString=function(a){var b=a,c=b.getFullYear(),d=b.getMonth()+1,e=b.getDate();return c+"-"+d+"-"+e},sforce.internal.dateTimeToString=function(a){var b=a,c=b.getFullYear(),d=b.getMonth()+1,e=b.getDate(),f=b.getHours(),g=b.getMinutes(),h=b.getSeconds(),i=b.getTimezoneOffset(),j=0>i?"+":"-";i=Math.abs(i);var k=i/60,l=i%60;9>=h&&(h="0"+h);var m=b.getMilliseconds();0!==m&&(m="."+m,m.length>4&&(m=m.substring(0,4)),h+=m);var n;return 0===i?n="Z":(10>l&&(l="0"+l),10>k&&(k="0"+k),n=j+k+":"+l),9>=d&&(d="0"+d),9>=e&&(e="0"+e),9>=f&&(f="0"+f),9>=g&&(g="0"+g),c+"-"+d+"-"+e+"T"+f+":"+g+":"+h+n},sforce.internal.stringToDate=function(a){var b=!1;if(null===a||0===a.length)throw"Unable to parse dateTime";if("+"==a.charAt(0)&&(a=a.substring(1)),"-"==a.charAt(0)&&(a=a.substring(1),b=!0),10!=a.length)throw"Unable to parse date, "+a+" length != 10";if("-"!=a.charAt(4)||"-"!=a.charAt(7))throw"Unable to parse date";var c=a.substring(0,4),d=a.substring(5,7),e=a.substring(8,10),f=new Date(c,d-1,e,0,0,0);return f.setMilliseconds(0),f},sforce.internal.stringToDateTime=function(a){var b=!1;if(null===a||0===a.length)throw"Unable to parse dateTime";if("+"==a.charAt(0)&&(a=a.substring(1)),"-"==a.charAt(0)&&(a=a.substring(1),b=!0),a.length<19)throw"Unable to parse dateTime";if("-"!=a.charAt(4)||"-"!=a.charAt(7)||"T"!=a.charAt(10))throw"Unable to parse dateTime";if(":"!=a.charAt(13)||":"!=a.charAt(16))throw"Unable to parse dateTime";var c=a.substring(0,4),d=a.substring(5,7),e=a.substring(8,10),f=a.substring(11,13),g=a.substring(14,16),h=a.substring(17,19),i=new Date(c,d-1,e,f,g,h),j=19;if(j<a.length&&"."==a.charAt(j)){for(var k=0,l=++j;j<a.length&&sforce.internal.isDigit(a.charAt(j));)j++;var m=a.substring(l,j);3==m.length?k=m:m.length<3?k=(m+"000").substring(0,3):(k=m.substring(0,3),m.charAt(3)>="5"&&++k),i.setMilliseconds(k)}var n=6e4*i.getTimezoneOffset();if(j+5<a.length&&("+"==a.charAt(j)||"-"==a.charAt(j))){if(!(sforce.internal.isDigit(a.charAt(j+1))&&sforce.internal.isDigit(a.charAt(j+2))&&":"==a.charAt(j+3)&&sforce.internal.isDigit(a.charAt(j+4))&&sforce.internal.isDigit(a.charAt(j+5))))throw"Unable to parse dateTime";var o=10*(a.charAt(j+1)-"0")+a.charAt(j+2)-"0",p=10*(a.charAt(j+4)-"0")+a.charAt(j+5)-"0",q=60*(60*o+p)*1e3;"+"==a.charAt(j)&&(q=-q),i=new Date(i.getTime()-n+q),j+=6}if(j<a.length&&"Z"==a.charAt(j)&&(j++,i=new Date(i.getTime()-n)),j<a.length)throw"Unable to parse dateTime";return i},sforce.internal.isDigit=function(a){return"0"==a||"1"==a||"2"==a||"3"==a||"4"==a||"5"==a||"6"==a||"7"==a||"8"==a||"9"==a?!0:!1},sforce.Xml=function(a){},sforce.Xml.prototype.toXml=function(a,b,c){c.writeStartElement(b,a),this._xsiType&&c.writeXsiType(this._xsiType);for(var d in this)if("_name"==d||"_xsiType"==d);else{var e=this[d];if("function"!=typeof e)if(Array.isArray(e))for(var f=0;f<e.length;f++)this.writeValue(a,c,d,e[f]);else this.writeValue(a,c,d,e)}c.writeEndElement(b,a)},sforce.Xml.prototype.writeValue=function(a,b,c,d){return null===d?void b.writeNameValueNode("fieldsToNull",c):void("undefined"!=typeof d&&(d.toXml?d.toXml(a,c,b):b.writeNameValueNode(c,d)))},sforce.Xml.prototype.get=function(a){return this[a]?this[a]:null},sforce.Xml.prototype.set=function(a,b){this[a]=b},sforce.Xml.prototype.getArray=function(a){var b=this[a];return b?b.join?b:[b]:[]},sforce.Xml.prototype.getBoolean=function(a){return"true"==this[a]?!0:!1},sforce.Xml.prototype.getDate=function(a){return this[a]?this[a].getFullYear?this[a]:sforce.internal.stringToDate(this[a]):null},sforce.Xml.prototype.getDateTime=function(a){return this[a]?this[a].getFullYear?this[a]:sforce.internal.stringToDateTime(this[a]):null},sforce.Xml.prototype.getInt=function(a){if(this[a])return"number"==typeof this[a]?this[a]:parseInt(this[a],10);throw"Unable to parse int field: "+a},sforce.Xml.prototype.getFloat=function(a){if(this[a])return"number"==typeof this[a]?this[a]:parseFloat(this[a]);throw"Unable to parse float field: "+a},sforce.Xml.prototype.getBase64Binary=function(a){if(this[a])return sforce.Base64Binary.prototype.decode(this[a]);throw"Unable to parse base64Binary field: "+a},sforce.Xml.prototype.toString=function(){var a=new sforce.StringBuffer;a.append("{");for(var b in this){var c=this[b];if(c)if("object"==typeof c)a.append(b).append(":").append(c.toString());else if(c.join){a.append(b).append(":").append("[");for(var d=0;d<c.length;d++)a.append(c[d]),d<c.length-1&&a.append(", ");a.append("]")}else{if("function"==typeof c)continue;a.append(b).append(":").append("'"+c+"'")}else a.append(b).append(":").append(""+c);a.append(", ")}return a.append("}"),a.toString()},sforce.internal.Debug=function(){this.output=null,this.trace=!1,this.apexTrace=!1,this.win=null,this.traceQueue=[],this.quiet=!1,this.open=function(){this.println("","print")},this.println=function(a,b){if(!this.quiet){if("function"==typeof println)return void println(a,b);null!==this.win&&this.win.document||(this.output=null,this.win=window.open("undefined"!=typeof window.UserContext?UserContext.getUrl("/soap/ajax/35.0/debugshell.html"):"/soap/ajax/35.0/debugshell.html","","width=800,height=400,toolbar=no,location=no,directories=no,alwaysRaised=yes,status=no,menubar=no,scrollbars=yes,copyhistory=yes,resizable=yes")),null===this.output&&this.findOutput(),null!==this.output?(sforce.debug.traceQueue.length>0&&this.traceCallback(),this.win.println(a,b)):(sforce.debug.traceQueue.push({message:a,type:b}),setTimeout(sforce.debug.traceCallback,1e3))}},this.traceCallback=function(){if(sforce.debug.findOutput(),null===sforce.debug.output)return void setTimeout(sforce.debug.traceCallback,1e3);for(var a=0;a<sforce.debug.traceQueue.length;a++){var b=sforce.debug.traceQueue[a];sforce.debug.win.println(b.message,b.type)}sforce.debug.traceQueue=[]},this.findOutput=function(){return null===this.output&&(this.output=this.win.document.getElementById("output")),this.output},this.logXml=function(a){a=a.replace(/</g,"&lt;"),a=a.replace(/>/g,"&gt;"),a="<textarea cols=80 rows=5 wrap=hard>"+a+"</textarea>",this.println(a,"printxml")},this.log=function(a){this.println(a,"print")},this.logApex=function(a){var b=a.indexOf("<debugLog>"),c=a.indexOf("</debugLog>");-1===b?b=0:b+="<debugLog>".length,-1===c&&(c=a.length);var d=a.substring(b,c);this.println(d,"printxml")}},sforce.debug=new sforce.internal.Debug,sforce.internal._connections=[],sforce.internal.ConnectionHolder=function(a,b){this.connection=a,this.callback=b,this.timedout=!1},sforce.Transport=function(a){this.url=a,this.connection=null,this.newConnection=function(){try{this.connection=new ActiveXObject("Msxml2.XMLHTTP")}catch(a){try{this.connection=new ActiveXObject("Microsoft.XMLHTTP")}catch(a){this.connection=new XMLHttpRequest}}return this.connection},this.send=function(a,b,c,d){this.newConnection(),c&&(this.connection.onreadystatechange=this.httpConnectionCallback);var e=new sforce.internal.ConnectionHolder(this.connection,b);sforce.internal._connections.push(e),this.connection.open("POST",this.url,c),this.connection.setRequestHeader("Content-Type","text/xml; charset=UTF-8"),this.connection.setRequestHeader("SOAPAction",'""'),this.connection.setRequestHeader("Accept","text/xml"),this.connection.setRequestHeader("User-Agent","SFAJAX 1.0"),this.connection.send(a),c&&"undefined"!=typeof d&&this.setTimeoutOn(e,d),c||this.httpConnectionCallback()},this.setTimeoutOn=function(a,b){function c(){4!==a.connection.readyState&&(a.timedout=!0,a.connection.abort())}setTimeout(c,b)},this.httpConnectionCallback=function(){for(var a=0;a<sforce.internal._connections.length;a++){var b=sforce.internal._connections[a];if(null!==b)if(b.timedout)sforce.internal._connections[a]=null,sforce.internal._connections.slice(a,1),b.callback.httpCallback("Remote invocation timed out",!1);else if(4==b.connection.readyState){sforce.internal._connections[a]=null,sforce.internal._connections.slice(a,1);var c=200==b.connection.status;sforce.debug.trace&&(sforce.debug.log("Response : status - "+b.connection.status),sforce.debug.logXml(b.connection.responseText)),sforce.debug.apexTrace&&sforce.debug.logApex(b.connection.responseText),b.connection.responseXML&&b.connection.responseXML.documentElement?b.callback.httpCallback(b.connection.responseXML.documentElement,c):b.callback.httpCallback("Remote invocation failed, due to: "+b.connection.responseText+" status code: ",b.connection.status)}}}},sforce.XmlWriter=function(){this.buffer=new sforce.StringBuffer,this.namespaces={},this.prefixCount=0,this.writingStartElement=!1},sforce.XmlWriter.prototype.writeStartElement=function(a,b,c){this.writingStartElement&&this.buffer.append(">"),this.buffer.append("<");var d=!1;b&&(this.namespaces[b]||""===this.namespaces[b]||(d=!0),c||(c=this.getPrefix(b)),null!==c&&""!==c&&(this.buffer.append(c),this.buffer.append(":"))),this.buffer.append(a),d===!0&&this.writeNamespace(b,c),this.writingStartElement=!0},sforce.XmlWriter.prototype.writeEndElement=function(a,b){if(this.writingStartElement)this.buffer.append("/>");else{if(this.buffer.append("</"),b){var c=this.getPrefix(b);c&&""!==c&&(this.buffer.append(c),this.buffer.append(":"))}this.buffer.append(a),this.buffer.append(">")}this.writingStartElement=!1},sforce.XmlWriter.prototype.writeNamespace=function(a,b){b&&""!==b?(this.namespaces[a]=b,this.buffer.append(" "),this.buffer.append("xmlns:"),this.buffer.append(b)):(this.namespaces[a]="",this.buffer.append(" "),this.buffer.append("xmlns")),this.buffer.append('="'),this.buffer.append(a),this.buffer.append('"')},sforce.XmlWriter.prototype.writeText=function(a){if(!this.writingStartElement)throw"Can only write text after a start element";this.buffer.append(">"),this.writingStartElement=!1,"string"==typeof a&&(a=a.replace(/&/g,"&amp;"),a=a.replace(/</g,"&lt;"),a=a.replace(/>/g,"&gt;")),this.buffer.append(a)},sforce.XmlWriter.prototype.writeXsiType=function(a){this.writeNamespace("http://www.w3.org/2001/XMLSchema-instance","xsi"),this.writeAttribute("xsi:type",a)},sforce.XmlWriter.prototype.writeAttribute=function(a,b){this.buffer.append(" "+a+'="'+b+'"')},sforce.XmlWriter.prototype.getPrefix=function(a){var b=this.namespaces[a];return b||""===b?b:(b="ns"+this.prefixCount,this.prefixCount++,this.namespaces[a]=b,b)},sforce.XmlWriter.prototype.toString=function(){return this.buffer.toString()},sforce.XmlWriter.prototype.soapNS="http://schemas.xmlsoap.org/soap/envelope/",sforce.XmlWriter.prototype.startEnvelope=function(){this.writeStartElement("Envelope",this.soapNS,"se")},sforce.XmlWriter.prototype.endEnvelope=function(){this.writeEndElement("Envelope",this.soapNS)},sforce.XmlWriter.prototype.startHeader=function(){this.writeStartElement("Header",this.soapNS,"se")},sforce.XmlWriter.prototype.endHeader=function(){this.writeEndElement("Header",this.soapNS)},sforce.XmlWriter.prototype.startBody=function(){this.writeStartElement("Body",this.soapNS,"se")},sforce.XmlWriter.prototype.endBody=function(){this.writeEndElement("Body",this.soapNS)},sforce.XmlWriter.prototype.writeNameValueNode=function(a,b){if(null===b)return this.writeStartElement(a),this.writeNamespace("http://www.w3.org/2001/XMLSchema-instance","xsi"),this.writeAttribute("xsi:nill","true"),void this.writeEndElement(a);if(b.toUTCString&&(b=sforce.internal.dateTimeToString(b)),"boolean"==typeof b&&(b=b?"true":"false"),b&&b.join)for(var c=0;c<b.length;c++)this.writeStartElement(a),this.writeText(b[c]),this.writeEndElement(a);else this.writeStartElement(a),this.writeText(b),this.writeEndElement(a)},sforce.XmlReader=function(a){this.envelope=a},sforce.XmlReader.prototype.getEnvelope=function(){if(this.isTag("Envelope",this.envelope))return this.envelope;throw"Unable to find soap envelope, but found "+this.envelope.nodeName},sforce.XmlReader.prototype.getBody=function(){return this.getChild("Body",this.envelope)},sforce.XmlReader.prototype.getHeader=function(){return this.getChild("Header",this.envelope)},sforce.XmlReader.prototype.getChild=function(a,b){for(var c=b.childNodes,d=0;d<c.length;d++)if(1==c[d].nodeType&&this.isTag(a,c[d]))return c[d];return null},sforce.XmlReader.prototype.getFirstElement=function(a){for(var b=a.childNodes,c=0;c<b.length;c++)if(1==b[c].nodeType)return b[c];return null},sforce.XmlReader.prototype.isTag=function(a,b){var c=b.nodeName.split(":");return 2==c.length&&c[1]==a?!0:1==c.length&&c[0]==a?!0:!1},sforce.XmlReader.prototype.isNameValueNode=function(a){for(var b=a.childNodes,c=0;c<b.length;c++)if(3!=b[c].nodeType)return!1;return!0},sforce.XmlReader.prototype.getTextValue=function(a){if(3==a.nodeType)return a.nodeValue;var b=a.getAttribute("xsi:nil");if("true"==b)return null;for(var c="",d=a.childNodes,e=0;e<d.length;e++){if(3!=d[e].nodeType)throw"Not a simple name value node";c+=d[e].nodeValue}return c},sforce.XmlReader.prototype.toXmlObject=function(a){var b=a.getAttribute("xsi:nil");if("true"==b)return null;var c=new sforce.Xml,d=[];for(d.push({node:a,obj:c});d.length>0;)for(var e=d.shift(),f=e.node.firstChild;null!==f;f=f.nextSibling)if(1==f.nodeType){var g=f.nodeName,h=g.indexOf(":");g=-1==h?g:g.substring(h+1);for(var i,j=!0,k="",l=f.firstChild;null!==l;l=l.nextSibling){if(3!=l.nodeType){j=!1;break}k+=l.nodeValue}if(j?i="true"==f.getAttribute("xsi:nil")?null:k:(i=new sforce.Xml,d.push({node:f,obj:i})),e.obj[g])if(e.obj[g].push)e.obj[g].push(i);else{var m=e.obj[g];"Id"===g&&m===i||(e.obj[g]=[],e.obj[g].push(m),e.obj[g].push(i))}else e.obj[g]=i}return c},sforce.SoapTransport=function(){this.connectionCallback=null,this.result=null,this.fault=null,this.isAsync=!0,this.isArray=!1},sforce.SoapTransport.prototype.onFailure=function(a,b){var c="ERROR: ........... ";alert(c+a),this.result=null},sforce.SoapTransport.prototype.send=function(a,b,c,d){this.isArray=c;var e=new sforce.Transport(a);if(this.isAsync=d?!0:!1,!this.isAsync){if(e.send(b.toString(),this,this.isAsync),null!==this.fault)throw this.fault;return this.result}this.connectionCallback=d,e.send(b.toString(),this,this.isAsync,d.timeout)},sforce.SoapTransport.prototype.httpCallback=function(a,b){try{if(b===!0){var c=new sforce.XmlReader(a),d=(c.getEnvelope(),c.getBody()),e=c.getFirstElement(d);if(null===e)throw"Unable to find operation response element";for(var f=[],g=e.childNodes,h=0;h<g.length;h++)1==g[h].nodeType&&(c.isNameValueNode(g[h])?f.push(c.getTextValue(g[h])):f.push(c.toXmlObject(g[h])));if(this.isArray)this.result=f;else{if(f.length>1)throw"Found more than one response: "+f;this.result=f[0]}if(this.isAsync)try{if(this.beforeCallback(),"function"==typeof this.connectionCallback)this.connectionCallback(this.result);else{if(!this.connectionCallback.onSuccess)throw"Unable to find onSuccess method in the callback object";this.connectionCallback.onSuccess(this.result,this.connectionCallback.source)}}finally{this.afterCallback()}}else if("undefined"!=typeof a.nodeName){var i=new sforce.XmlReader(a),j=(i.getEnvelope(),i.getBody()),k=i.getFirstElement(j),l=i.toXmlObject(k);this.sendFault(l)}else this.sendFault(a)}catch(m){this.sendFault(m)}},sforce.SoapTransport.prototype.sendFault=function(a){if(this.isAsync)if(this.connectionCallback.onFailure)try{this.beforeCallback(),this.connectionCallback.onFailure(a,this.connectionCallback.source)}finally{this.afterCallback()}else this.onFailure(a);else this.fault=a},sforce.SoapTransport.prototype.beforeCallback=function(){},sforce.SoapTransport.prototype.afterCallback=function(){},sforce.SObject=function(a){this.type=a},sforce.SObject.prototype=new sforce.Xml("sObjects"),sforce.LeadConvert=function(){},sforce.LeadConvert.prototype=new sforce.Xml("leadConverts"),sforce.MergeRequest=function(){},sforce.MergeRequest.prototype=new sforce.Xml("request"),sforce.DescribeSoqlListViewsRequest=function(){},sforce.DescribeSoqlListViewsRequest.prototype=new sforce.Xml("request"),sforce.DescribeSoqlListViewParams=function(){},sforce.DescribeSoqlListViewParams.prototype=new sforce.Xml("listViewParams"),sforce.QuickAction=function(){},sforce.QuickAction.prototype=new sforce.Xml("quickActions"),sforce.MatchOptions=function(){},sforce.MatchOptions.prototype=new sforce.Xml("matchOptions"),sforce.Connection=function(){this.sessionId=null,this.updateMru=null,this.allowFieldTruncation=null,this.disableFeedTracking=null,this.streamingEnabled=null,this.allOrNone=null,this.client=null,this.defaultNamespace=null,this.batchSize=null,this.loginScopeHeader=null,this.emailHeader=null,this.assignmentRuleHeader=null,this.duplicateRuleHeader=null,this.transferToUserId=null,this.debuggingHeader=null,this.serverUrl="undefined"!=typeof window.UserContext?UserContext.getUrl("/services/Soap/u/35.0"):"/services/Soap/u/35.0"},sforce.internal.Parameter=function(a,b,c){this.name=a,this.value=b,this.isArray=c},sforce.Connection.prototype.sforceNs="urn:partner.soap.sforce.com",sforce.Connection.prototype.sobjectNs="sobject.partner.soap.sforce.com",sforce.Connection.prototype.writeOne=function(a,b,c,d){null===c?a.writeNameValueNode(b,null):c.toXml?c.toXml(d,b,a):a.writeNameValueNode(b,c)},sforce.Connection.prototype.init=function(a,b){this.sessionId=a,this.serverUrl=b},sforce.Connection.prototype.login=function(a,b){var c=new sforce.internal.Parameter("username",a,!1),d=new sforce.internal.Parameter("password",b,!1),e=this.invoke("login",[c,d],!1,null);return this.sessionId=e.sessionId,e},sforce.Connection.prototype.describeSObject=function(a,b){var c=new sforce.internal.Parameter("sObjectType",a,!1);return this.invoke("describeSObject",[c],!1,b)},sforce.Connection.prototype.describeSObjects=function(a,b){var c=new sforce.internal.Parameter("sObjectType",a,!0);return this.invoke("describeSObjects",[c],!0,b)},sforce.Connection.prototype.describeSearchLayouts=function(a,b){var c=new sforce.internal.Parameter("sObjectType",a,!0);return this.invoke("describeSearchLayouts",[c],!0,b)},sforce.Connection.prototype.describeListViews=function(a,b){var c=new sforce.internal.Parameter("sObjectType",a,!0);return this.invoke("describeListViews",[c],!0,b)},sforce.Connection.prototype.describeSoqlListViews=function(a,b,c){var d=new sforce.DescribeSoqlListViewParams;d.developerNameOrId=a,d.sobjectType=b;var e=new sforce.DescribeSoqlListViewsRequest;e.listViewParams=[d];var f=new sforce.internal.Parameter("request",e,!1);return this.invoke("describeSoqlListViews",[f],!1,c)},sforce.Connection.prototype.describeGlobal=function(a){return this.invoke("describeGlobal",[],!1,a)},sforce.Connection.prototype.describeLayout=function(a,b,c,d){var e=new sforce.internal.Parameter("sObjectType",a,!1);b||(b=null);var f=new sforce.internal.Parameter("layoutName",b,!1);c||(c=[]);var g=new sforce.internal.Parameter("recordTypeIds",c,!0);return this.invoke("describeLayout",[e,f,g],!1,d)},sforce.Connection.prototype.describeAvailableQuickActions=function(a,b){var c=new sforce.internal.Parameter("parentType",a,!1);return this.invoke("describeAvailableQuickActions",[c],!0,b)},sforce.Connection.prototype.describeQuickActions=function(a,b){var c=new sforce.internal.Parameter("quickActionNames",a,!0);return this.invoke("describeQuickActions",[c],!0,b)},sforce.Connection.prototype.performQuickActions=function(a,b){var c=new sforce.internal.Parameter("quickActions",a,!0);return this.invoke("performQuickActions",[c],!0,b)},sforce.Connection.prototype.describeCompactLayouts=function(a,b,c){var d=new sforce.internal.Parameter("sObjectType",a,!1);b||(b=[]);var e=new sforce.internal.Parameter("recordTypeIds",b,!0);return this.invoke("describeCompactLayouts",[d,e],!1,c)},sforce.Connection.prototype.describePathAssistants=function(a,b,c,d){var e=new sforce.internal.Parameter("sObjectType",a,!1);b||(b=null);var f=new sforce.internal.Parameter("picklistValue",b,!1);c||(c=[]);var g=new sforce.internal.Parameter("recordTypeIds",c,!0);return this.invoke("describePathAssistants",[e,f,g],!1,d)},sforce.Connection.prototype.describePrimaryCompactLayouts=function(a,b){var c=new sforce.internal.Parameter("sObjectTypes",a,!0);return this.invoke("describePrimaryCompactLayouts",[c],!0,b)},sforce.Connection.prototype.describeApprovalLayout=function(a,b,c){var d=new sforce.internal.Parameter("sObjectType",a,!1);b||(b=[]);var e=new sforce.internal.Parameter("approvalProcessNames",b,!0);return this.invoke("describeApprovalLayout",[d,e],!1,c)},sforce.Connection.prototype.describeSObjectListViews=function(a,b,c){var d=new sforce.internal.Parameter("sObjectType",a,!1),e=new sforce.internal.Parameter("recentlyViewed",b,!1),f=new sforce.internal.Parameter("isSoqlCompatible",isSoqlCompatible,!1),g=new sforce.internal.Parameter("limit",limit,!1),h=new sforce.internal.Parameter("offset",offset,!1);return this.invoke("describeSObjectListViews",[d,e,f,g,h],!0,c)},sforce.Connection.prototype.describeTabs=function(a){return this.invoke("describeTabs",[],!0,a)},sforce.Connection.prototype.describeAllTabs=function(a){return this.invoke("describeAllTabs",[],!0,a)},sforce.Connection.prototype.describeFlexiPages=function(a,b){var c=new sforce.internal.Parameter("FlexiPage",a,!1);return this.invoke("describeFlexiPages",[c],!0,b)},sforce.Connection.prototype.describeTheme=function(a){return this.invoke("describeTheme",[],!0,a)},sforce.Connection.prototype.describeGlobalTheme=function(a){return this.invoke("describeGlobalTheme",[],!0,a)},sforce.Connection.prototype.describeSoftphoneLayout=function(a){return this.invoke("describeSoftphoneLayout",[],!1,a)},sforce.Connection.prototype.describeMiniLayout=function(a,b,c){var d=new sforce.internal.Parameter("sObjectType",a,!1),e=new sforce.internal.Parameter("recordTypeIds",b,!0);return this.invoke("describeMiniLayout",[d,e],!1,c)},sforce.Connection.prototype.describeSearchScopeOrder=function(a){return this.invoke("describeSearchScopeOrder",[],!0,a)},sforce.Connection.prototype.create=function(a,b){var c=new sforce.internal.Parameter("sObjects",a,!0);return this.invoke("create",[c],!0,b)},sforce.Connection.prototype.update=function(a,b){var c=new sforce.internal.Parameter("sObjects",a,!0);return this.invoke("update",[c],!0,b)},sforce.Connection.prototype.upsert=function(a,b,c){var d=new sforce.internal.Parameter("externalIDFieldName",a,!1),e=new sforce.internal.Parameter("sObjects",b,!0);return this.invoke("upsert",[d,e],!0,c)},sforce.Connection.prototype.deleteIds=function(a,b){var c=new sforce.internal.Parameter("ids",a,!0);return this.invoke("delete",[c],!0,b)},sforce.Connection.prototype.impersonateUser=function(a,b){var c=new sforce.internal.Parameter("ids",a,!0);return this.invoke("impersonateUser",[c],!0,b)},sforce.Connection.prototype.query=function(a,b){var c=new sforce.internal.Parameter("queryString",a,!1);return this.invoke("query",[c],!1,b)},sforce.Connection.prototype.queryAll=function(a,b){var c=new sforce.internal.Parameter("queryString",a,!1);return this.invoke("queryAll",[c],!1,b)},sforce.Connection.prototype.queryMore=function(a,b){var c=new sforce.internal.Parameter("queryLocator",a,!1);return this.invoke("queryMore",[c],!1,b)},sforce.Connection.prototype.retrieve=function(a,b,c,d){var e=new sforce.internal.Parameter("fieldList",a,!1),f=new sforce.internal.Parameter("sObjectType",b,!1),g=new sforce.internal.Parameter("ids",c,!0);return this.invoke("retrieve",[e,f,g],!0,d)},sforce.Connection.prototype.match=function(a,b,c){var d=new sforce.internal.Parameter("sObjects",a,!0),e=new sforce.internal.Parameter("matchOptions",b,!1);return this.invoke("match",[d,e],!1,c)},sforce.Connection.prototype.getAccessInfo=function(a){return this.invoke("getAccessInfo",[],!1,a)},sforce.Connection.prototype.getUserInfo=function(a){return this.invoke("getUserInfo",[],!1,a)},sforce.Connection.prototype.resetPassword=function(a,b){var c=new sforce.internal.Parameter("userId",a,!1);return this.invoke("resetPassword",[c],!1,b)},sforce.Connection.prototype.setPassword=function(a,b,c){var d=new sforce.internal.Parameter("userId",a,!1),e=new sforce.internal.Parameter("password",b,!1);return this.invoke("setPassword",[d,e],!1,c)},sforce.Connection.prototype.search=function(a,b){var c=new sforce.internal.Parameter("searchString",a,!1);return this.invoke("search",[c],!1,b)},sforce.Connection.prototype.getDeleted=function(a,b,c,d){var e=new sforce.internal.Parameter("sObjectType",a,!1),f=new sforce.internal.Parameter("startDate",b,!1),g=new sforce.internal.Parameter("endDate",c,!1);return this.invoke("getDeleted",[e,f,g],!1,d)},sforce.Connection.prototype.getUpdated=function(a,b,c,d){var e=new sforce.internal.Parameter("sObjectType",a,!1),f=new sforce.internal.Parameter("startDate",b,!1),g=new sforce.internal.Parameter("endDate",c,!1);return this.invoke("getUpdated",[e,f,g],!1,d)},sforce.Connection.prototype.getServerTimestamp=function(a){return this.invoke("getServerTimestamp",[],!1,a)},sforce.Connection.prototype.convertLead=function(a,b){var c=new sforce.internal.Parameter("leadConverts",a,!0);return this.invoke("convertLead",[c],!0,b)},sforce.Connection.prototype.merge=function(a,b){var c=new sforce.internal.Parameter("request",a,!0);return this.invoke("merge",[c],!0,b)},sforce.Connection.prototype.undelete=function(a,b){var c=new sforce.internal.Parameter("ids",a,!0);return this.invoke("undelete",[c],!0,b)},sforce.Connection.prototype.process=function(a,b){var c=new sforce.internal.Parameter("actions",a,!0);return this.invoke("process",[c],!0,b)},sforce.Connection.prototype.sendEmail=function(a,b){var c=new sforce.internal.Parameter("messages",a,!0);return this.invoke("sendEmail",[c],!0,b)},sforce.Connection.prototype.emptyRecycleBin=function(a,b){var c=new sforce.internal.Parameter("ids",a,!0);return this.invoke("emptyRecycleBin",[c],!0,b)},sforce.Connection.prototype.invalidateSessions=function(a,b){var c=new sforce.internal.Parameter("sessionIds",a,!0);return this.invoke("invalidateSessions",[c],!0,b)},sforce.Connection.prototype.logout=function(a){return this.invoke("logout",[],!0,a)},sforce.Connection.prototype.remoteFunction=function(a){function b(){if(sforce.debug.trace&&sforce.debug.log("callback called ..."),4==c.readyState)if(200==c.status)if("text/plain"==a.mimeType)a.onSuccess(c.responseText,c);else{if("text/xml"!=a.mimeType)throw"unsupported mime type: "+a.mimeType;if(!c.responseXML||!c.responseXML.documentElement)throw"Response not text/xml mime type: "+c.responseText;a.onSuccess(c.responseXML.documentElement,c)}else a.onFailure?a.onFailure(c.responseText,c):sforce.debug.log(c.responseText)}if(!a.url)throw"url not defined";if(!a.onSuccess)throw"onSuccess method not defined";if(a.method||(a.method="GET"),a.mimeType||(a.mimeType="text/plain"),"undefined"==typeof a.async&&(a.async=!0),"undefined"==typeof a.cache&&(a.cache=!1),"text/plain"!=a.mimeType&&"text/xml"!=a.mimeType)throw"Unknown mime type "+a.mimeType;sforce.debug.trace&&sforce.debug.log("Open connection to ... "+a.url);var c=(new sforce.Transport).newConnection(),d="undefined"!=typeof window.UserContext?UserContext.getUrl("/services/proxy"):"/services/proxy";if(d=a.cache?d+"?end-point-url="+a.url:d+"?no-cache="+(new Date).getTime(),c.open(a.method,d,a.async),a.requestHeaders)for(var e in a.requestHeaders)"function"!=typeof a.requestHeaders[e]&&c.setRequestHeader(e,a.requestHeaders[e]);c.setRequestHeader("SalesforceProxy-Endpoint",a.url),c.setRequestHeader("SalesforceProxy-SID",this.sessionId),a.async&&(c.onreadystatechange=b),sforce.debug.trace&&sforce.debug.log("Sending ..."),a.requestData?c.send(a.requestData):c.send(null),sforce.debug.trace&&sforce.debug.log("Done Sending ..."),a.async||b()},sforce.Connection.prototype.writeHeader=function(a,b){if(a.startHeader(),a.writeNamespace(b,"sfns"),null!==this.sessionId&&(a.writeStartElement("SessionHeader",b),a.writeNameValueNode("sessionId",this.sessionId),a.writeEndElement("SessionHeader",b)),"undefined"!=typeof this.organizationId)throw"Use sforce.connection.loginScopeHeader.organizationId instead of sforce.connection.organizationId";if(null!==this.loginScopeHeader&&(a.writeStartElement("LoginScopeHeader",b),null!==this.loginScopeHeader.organizationId&&a.writeNameValueNode("organizationId",this.loginScopeHeader.organizationId),null!==this.loginScopeHeader.portalId&&a.writeNameValueNode("portalId",this.loginScopeHeader.portalId),a.writeEndElement("LoginScopeHeader",b)),(null!==this.client||null!==this.defaultNamespace)&&(a.writeStartElement("CallOptions",b),null!==this.client&&a.writeNameValueNode("client",this.client),null!==this.defaultNamespace&&a.writeNameValueNode("defaultNamespace",this.defaultNamespace),a.writeEndElement("CallOptions",b)),null!==this.batchSize&&(a.writeStartElement("QueryOptions",b),a.writeNameValueNode("batchSize",this.batchSize),a.writeEndElement("QueryOptions",b)),null!==this.allowFieldTruncation&&(a.writeStartElement("AllowFieldTruncationHeader",b),a.writeNameValueNode("allowFieldTruncation",this.allowFieldTruncation),a.writeEndElement("AllowFieldTruncationHeader",b)),null!==this.disableFeedTracking&&(a.writeStartElement("DisableFeedTrackingHeader",b),a.writeNameValueNode("disableFeedTracking",this.disableFeedTracking),a.writeEndElement("DisableFeedTrackingHeader",b)),null!==this.streamingEnabled&&(a.writeStartElement("StreamingEnabledHeader",b),a.writeNameValueNode("StreamingEnabled",this.streamingEnabled),a.writeEndElement("StreamingEnabledHeader",b)),null!==this.allOrNone&&(a.writeStartElement("AllOrNoneHeader",b),a.writeNameValueNode("allOrNone",this.allOrNone),a.writeEndElement("AllOrNoneHeader",b)),null!==this.updateMru&&(a.writeStartElement("MruHeader",b),a.writeNameValueNode("updateMru",this.updateMru),a.writeEndElement("MruHeader",b)),null!==this.emailHeader&&(a.writeStartElement("EmailHeader",b),this.emailHeader.triggerAutoResponseEmail&&a.writeNameValueNode("triggerAutoResponseEmail",this.emailHeader.triggerAutoResponseEmail),this.emailHeader.triggerOtherEmail&&a.writeNameValueNode("triggerOtherEmail",this.emailHeader.triggerOtherEmail),this.emailHeader.triggerUserEmail&&a.writeNameValueNode("triggerUserEmail",this.emailHeader.triggerUserEmail),a.writeEndElement("EmailHeader",b)),null!==this.assignmentRuleHeader&&(a.writeStartElement("AssignmentRuleHeader",b),
this.assignmentRuleHeader.assignmentRuleId&&a.writeNameValueNode("assignmentRuleId",this.assignmentRuleHeader.assignmentRuleId),this.assignmentRuleHeader.useDefaultRule&&a.writeNameValueNode("useDefaultRule",this.assignmentRuleHeader.useDefaultRule),a.writeEndElement("AssignmentRuleHeader",b)),null!==this.transferToUserId&&(a.writeStartElement("UserTerritoryDeleteHeader",b),a.writeNameValueNode("transferToUserId",this.transferToUserId),a.writeEndElement("UserTerritoryDeleteHeader",b)),null!==this.duplicateRuleHeader&&(a.writeStartElement("DuplicateRuleHeader",b),this.duplicateRuleHeader.allowSave&&a.writeNameValueNode("allowSave",this.duplicateRuleHeader.allowSave),this.duplicateRuleHeader.includeRecordDetails&&a.writeNameValueNode("includeRecordDetails",this.duplicateRuleHeader.includeRecordDetails),this.duplicateRuleHeader.runAsCurrentUser&&a.writeNameValueNode("runAsCurrentUser",this.duplicateRuleHeader.runAsCurrentUser),a.writeEndElement("DuplicateRuleHeader",b)),null!==this.debuggingHeader){if(a.writeStartElement("DebuggingHeader",b),this.debuggingHeader.debugLevel&&a.writeNameValueNode("debugLevel",this.debuggingHeader.debugLevel),this.debuggingHeader.debugCategories)for(var c=this.debuggingHeader.debugCategories,d=0;d<c.length;d++){var e=c[d].split(",");2==e.length&&(a.writeStartElement("categories"),a.writeNameValueNode("category",e[0]),a.writeNameValueNode("level",e[1]),a.writeEndElement("categories"))}a.writeEndElement("DebuggingHeader",b)}a.endHeader()},sforce.Connection.prototype.namespaceMap=[{ns:sforce.Connection.prototype.sforceNs,prefix:null},{ns:sforce.Connection.prototype.sobjectNs,prefix:"ns1"}],sforce.Connection.prototype.invoke=function(a,b,c,d){return this._invoke(a,b,c,d,this.namespaceMap,this.serverUrl,this.sforceNs,this.sobjectNs)},sforce.Connection.prototype._invoke=function(a,b,c,d,e,f,g,h){if(d)if("function"==typeof d);else{if(!d.onSuccess)throw"onSuccess not defined in the callback";if(!d.onFailure)throw"onFailure not defined in the callback"}var i=new sforce.XmlWriter;i.startEnvelope(),this.writeHeader(i,g),i.startBody(),i.writeStartElement(a);for(var j=0;j<e.length;j++)i.writeNamespace(e[j].ns,e[j].prefix);for(var j=0;j<b.length;j++){var k=b[j];if("undefined"==typeof k.value)throw"arg "+j+" '"+k.name+"' not specified";if(null!==k.value){if(k.isArray&&!k.value.push)throw"arg "+j+" '"+k.name+"' is an array. But passed in value is not an array";if(!k.isArray&&k.value.push)throw"arg "+j+" '"+k.name+"' is not an array. But passed in value is an array"}if(null===k.value)this.writeOne(i,k.name,null,h);else if(k.value.push)for(var l=0;l<k.value.length;l++){var m=k.value[l];if(!m)throw"Array element at "+l+" is null.";this.writeOne(i,k.name,m,h)}else this.writeOne(i,k.name,k.value,h)}i.writeEndElement(a),i.endBody(),i.endEnvelope(),sforce.debug.trace&&(sforce.debug.log("Request: server- "+f),sforce.debug.logXml(i.toString()));var n=new sforce.SoapTransport;return n.send(f,i,c,d)},sforce.QueryResultIterator=function(a){this.queryResult=a,this.index=0,this.records=this.queryResult.getArray("records")},sforce.QueryResultIterator.prototype.hasNext=function(){return this.records.length>this.index?!0:(null!==this.queryResult.queryLocator&&(this.queryResult=sforce.connection.queryMore(this.queryResult.queryLocator),this.records=this.queryResult.getArray("records"),this.index=0),this.records.length>this.index?!0:!1)},sforce.QueryResultIterator.prototype.next=function(){if(this.records.length>this.index){var a=this.records[this.index];return this.index++,a}throw"Index out of bound : "+this.index},sforce.Email=function(){},sforce.Email.prototype=new sforce.Xml("messages"),sforce.MassEmailMessage=function(){},sforce.MassEmailMessage.prototype=new sforce.Xml("messages"),sforce.MassEmailMessage.prototype._xsiType="MassEmailMessage",sforce.SingleEmailMessage=function(){},sforce.SingleEmailMessage.prototype=new sforce.Xml("messages"),sforce.SingleEmailMessage.prototype._xsiType="SingleEmailMessage",sforce.ProcessRequest=function(){},sforce.ProcessRequest.prototype=new sforce.Xml("actions"),sforce.ProcessSubmitRequest=function(){},sforce.ProcessSubmitRequest.prototype=new sforce.Xml("actions"),sforce.ProcessSubmitRequest.prototype._xsiType="ProcessSubmitRequest",sforce.ProcessWorkitemRequest=function(){},sforce.ProcessWorkitemRequest.prototype=new sforce.Xml("actions"),sforce.ProcessWorkitemRequest.prototype._xsiType="ProcessWorkitemRequest",sforce.connection=new sforce.Connection;var UserContext="undefined"!=typeof window.UserContext?window.UserContext:{siteUrlPrefix:"",getUrl:function(a){return"undefined"!=typeof a&&"undefined"!=typeof UserContext.siteUrlPrefix&&UserContext.siteUrlPrefix?0!=a.indexOf("/")?a:0==a.indexOf(UserContext.siteUrlPrefix)?a:UserContext.siteUrlPrefix+a:a}};"undefined"!=typeof __sfdcSiteUrlPrefix&&(UserContext.siteUrlPrefix=__sfdcSiteUrlPrefix),sforce.connection.serverUrl="undefined"!=typeof window.UserContext?UserContext.getUrl("/services/Soap/u/35.0"):"/services/Soap/u/35.0","undefined"!=typeof __sfdcSessionId&&(sforce.connection.sessionId=__sfdcSessionId),window.Sfdc&&Sfdc.xdomain&&window.location.hostname.indexOf(".visual.force.")>-1&&(sforce._consoleApiUrl="/support/console/35.0/integration.js",skuid.load.js(sforce._consoleApiUrl)),/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */
function(){var a;try{a=!!new Blob}catch(b){}a?(skuid.utils||(skuid.utils={}),skuid.utils.saveAs=skuid.utils.saveAs||function(a){"use strict";if(!("undefined"==typeof a||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var b=a.document,c=function(){return a.URL||a.webkitURL||a},d=b.createElementNS("http://www.w3.org/1999/xhtml","a"),e="download"in d,f=function(a){var b=new MouseEvent("click");a.dispatchEvent(b)},g=/constructor/i.test(a.HTMLElement)||a.safari,h=/CriOS\/[\d]+/.test(navigator.userAgent),i=function(b){(a.setImmediate||a.setTimeout)(function(){throw b},0)},j="application/octet-stream",k=4e4,l=function(a){var b=function(){"string"==typeof a?c().revokeObjectURL(a):a.remove()};setTimeout(b,k)},m=function(a,b,c){b=[].concat(b);for(var d=b.length;d--;){var e=a["on"+b[d]];if("function"==typeof e)try{e.call(a,c||a)}catch(f){i(f)}}},n=function(a){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob([String.fromCharCode(65279),a],{type:a.type}):a},o=function(b,i,k){k||(b=n(b));var o,p=this,q=b.type,r=q===j,s=function(){m(p,"writestart progress write writeend".split(" "))},t=function(){if((h||r&&g)&&a.FileReader){var d=new FileReader;return d.onloadend=function(){var b=h?d.result:d.result.replace(/^data:[^;]*;/,"data:attachment/file;"),c=a.open(b,"_blank");c||(a.location.href=b),b=void 0,p.readyState=p.DONE,s()},d.readAsDataURL(b),void(p.readyState=p.INIT)}if(o||(o=c().createObjectURL(b)),r)a.location.href=o;else{var e=a.open(o,"_blank");e||(a.location.href=o)}p.readyState=p.DONE,s(),l(o)};return p.readyState=p.INIT,e?(o=c().createObjectURL(b),void setTimeout(function(){d.href=o,d.download=i,f(d),s(),l(o),p.readyState=p.DONE})):void t()},p=o.prototype,q=function(a,b,c){return new o(a,b||a.name||"download",c)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(a,b,c){return b=b||a.name||"download",c||(a=n(a)),navigator.msSaveOrOpenBlob(a,b)}:(p.abort=function(){},p.readyState=p.INIT=0,p.WRITING=1,p.DONE=2,p.error=p.onwritestart=p.onprogress=p.onwrite=p.onabort=p.onerror=p.onwriteend=null,q)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content),"undefined"!=typeof module&&module.exports?module.exports.saveAs=saveAs:"undefined"!=typeof define&&null!==define&&null!==define.amd&&define("FileSaver.js",function(){return saveAs})):skuid.utils.saveAs=function(){}}()}!function(a){var b={ADDRESS:"ADDRESS",ARRAY:"ARRAY",BASE64:"BASE64",BOOLEAN:"BOOLEAN",COMBOBOX:"COMBOBOX",CURRENCY:"CURRENCY",DATE:"DATE",DATETIME:"DATETIME",DOUBLE:"DOUBLE",EMAIL:"EMAIL",ENCRYPTEDSTRING:"ENCRYPTEDSTRING",FORMULA:"FORMULA",ID:"ID",IMAGE:"IMAGE",INTEGER:"INTEGER",LOCATION:"LOCATION",MULTIPICKLIST:"MULTIPICKLIST",NUMBER:"NUMBER",OBJECT:"OBJECT",PHONE:"PHONE",PICKLIST:"PICKLIST",PERCENT:"PERCENT",REFERENCE:"REFERENCE",STRING:"STRING",TEXT:"TEXT",TEXTAREA:"TEXTAREA",RICHTEXT:"RICHTEXT",TIME:"TIME",URL:"URL",UUID:"UUID"},c={CHILDREL:"CHILDREL",COMBO:"COMBO",IMAGE:"IMAGE"},d={BOOLEAN:"boolean",NUMBER:"number",STRING:"string",OBJECT:"object",FUNCTION:"function",UNDEFINED:"undefined"},e={JSON:"application/json",ZIP:"application/zip"},f={GET:"GET",PATCH:"PATCH",POST:"POST",PUT:"PUT",DELETE:"DELETE",MERGE:"MERGE"},g={GLOBAL:"global",MODEL:"model",ROW:"row"},h={medium:1024,small:480};a.constants={DISPLAY_TYPES:b,FIELD_TYPES:c,HTTP_VERBS:f,MERGE_CONTEXTS:g,MEDIA_QUERY_BREAKPOINTS:h,JS_TYPES:d,MIME_TYPES:e,SALESFORCE:"salesforce",NATIVE:"pliny"}}(skuid),function(a,b){var c,d=a.themeSettings={};d.load=function(d){"string"==typeof d&&(d=JSON.parse(d)),c=b.extend({},d),a.events.publish("ui.themeSettings.loaded")},d.getAll=function(){return c}}(skuid,skuid.$),function(a,b,c){function d(){return a.utils}function e(){return h.fontsloaded}function f(e){e===c&&(e={});var f=d().size,g=d().getSafeRelativeUrl,h=b.extend({},e),i=h.custom;return i!==c&&(a.isAura&&i.localurls&&i.localurls.length&&(i.localurls.forEach(function(a,b){i.urls[b]=a}),delete i.localurls),i.urls&&i.urls.length&&i.urls.forEach(function(a,b){i.urls[b]=g(a)}),f(i)&&i.families!==c&&i.families.length||delete h.custom),i=h.google,i!==c&&(f(i)&&i.families!==c&&i.families.length||delete h.google),i=h.typekit,i!==c&&(f(i)&&i.id!==c&&"string"==typeof i.id||delete h.typekit),h}function g(c){function e(){var b=window.sforce,c=b&&b._consoleApiUrl,d=function(){a.events.publish("ui.fontsloaded")};h.fontsloaded=!0,c?a.load.js(c).always(function(){d()}):d()}"string"==typeof c&&(c=JSON.parse(c));var f,g,i,j=h.processFontConfig(c&&c.fontConfig),k=c?c.cssResources:null,l=d().getSafeRelativeUrl;if(j.custom||j.google||j.typekit?(j.active=e,j.inactive=e,h.attemptedToLoadFonts=!0,WebFont.load(j)):e(),k)for(g=0;g<k.length;g++)f=k[g],i=null,i=d().isString(f)?f:"static"===f.type?a.platform.themeBuilder.getThemeResourceUrl(f):f.url,i&&d().loadCSS(l(i),{insertAfter:b("link#themeLink")[0]})}var h=a.webfonts={attemptedToLoadFonts:!1,fontsloaded:!1};b.extend(h,{haveFontsLoaded:e,processFontConfig:f,load:g})}(skuid,skuid.$),function(a,b){b.fn.skootip=function(c,d){var e,f=this,g={position:{my:"center bottom",at:"center top-10",collision:"fit",using:function(a,c){b(this).css({top:a.top,left:a.left});var d=a.left+c.element.width/2,f=c.target.left+c.target.width/2;e=Math.floor(f-d-4)}},show:{delay:700},open:function(a,c){var d=b("<div>").addClass("sk-hastooltip").css("left",e+"px");c.tooltip.append(d)}};return c&&f.attr("title",c),d&&b.extend(!0,g,d),a.utils._oniOS()?f:f.tooltip(g)}}(skuid,skuid.$),function(a,b){function c(a,b){return h[a]||(h[a]=[]),h[a].push(b),[a,b]}function d(a,c,d){if(d||(d={}),d.buffer&&!i[a]?i[a]={interval:d.buffer}:d.buffer===!1&&i[a]&&delete i[a],h[a]){var e=i[a],f=function(){b.each(h[a].slice(0),function(a,d){d&&d.apply(b,c||[])})};e?(!e.initialCallTime||(new Date).getTime()-e.initialCallTime>e.interval)&&(setTimeout(f,e.interval),e.initialCallTime=(new Date).getTime()):f()}}function e(a,d){return a instanceof Array?b.map(a,function(a){return c(a,d)}):c(a,d)}function f(a,c){var d=e(a,function(){g(d),c&&c.apply(b,arguments)});return d}function g(a){var b,c=a[0],d=a[1],e=h[c];if(e&&e.length)for(b=e.length-1;b>=0;b--)e[b]==d&&e.splice(b,1)}var h={},i={};a.events={_cache:h,publish:d,subscribe:e,subscribeOnce:f,unsubscribe:g}}(skuid,skuid.$),function(a,b){function c(a){var c=a.Id,d=f[c];d||(d=f[c]={}),b.extend(d,a)}function d(d){var e={},i={data:e},j={},k=!1;if(b.each(d,function(c,d){var g,h=d.objectType,i=d.fields,k=d.records,l=e[c]={};b.each(k,function(c,d){var e,k={},m={},n=0,o={};b.each(i,function(a,b){m[b]=1,n++}),n&&(e=f[d],e&&b.each(m,function(b){var c=a.utils.getObjectProperty(e,b);"undefined"!=typeof c&&(o[b]=c,delete m[b],n--)}),n&&(b.each(a.model.list(),function(c,f){if(f.data&&f.data.length&&(f.objectName===h&&(e=f.getRowById(d),e&&b.each(m,function(a){a in e&&(o[a]=f.getFieldValue(e,a,!0),delete m[a],n--)})),n)){var g={},i=f.fields;i&&i.length&&b.each(i,function(a,c){var d=c.referenceTo;"REFERENCE"===c.displaytype&&d&&d.length&&b.each(d,function(a,b){return b.objectName===h?(g[c.id]=c.rel,!1):void 0})}),a.utils.size(g)&&b.each(g,function(c,e){return b.each(f.data,function(f,g){return a.utils.getObjectProperty(g,c)!==d||(b.each(m,function(b){var c=a.utils.getObjectProperty(g,e+"."+b);"undefined"!=typeof c&&(o[b]=c,delete m[b],n--)}),n)?void 0:!1}),n?void 0:!1})}}),n&&(g=j[h],g||(g=j[h]={objectType:h,fields:{},records:[]}),g.records.push(d),b.each(m,function(a){g.fields[a]=1})))),b.extend(k,o),l[d]={record:k,isDone:0===n}})}),a.utils.size(j)){k=!0;var l=[],m=b.Deferred(),n=g++;b.each(j,function(c,d){var e=new a.model.Model({objectName:c,id:a.utils.generateGUID(),fields:b.map(d.fields,function(a,b){return{id:b}}),conditions:[{field:"Id",operator:"IN",type:"multiple",values:d.records}],doQuery:!0,recordsLimit:d.records.length,doClone:!1});e.calloutIterator=n,e.lastSuccessfulCallout=function(){return h},l.push(e)}),j={},b.when(a.model.load(l)).done(function(){b.each(l,function(a,d){var f=e[d.keyPrefix];b.each(d.data,function(a,e){"attributes"in e&&delete e.attributes;var g=e.Id,h=f[g];h||(h=f[g]={}),b.extend(h,d.getRowById(g)),h.isDone=!0,c(e)})}),i.isSuccess=!0}).fail(function(){i.isSuccess=!1}).always(function(){h=l[0].lastSuccessfulCallout,i.isComplete=!0,m.resolve(i)}),i.promise=m.promise()}return i.isComplete=i.isSuccess=!k,i}var e=a.data={},f={},g=0,h=0;e.get=d,e.add=c}(skuid,skuid.$),function(a,b){function c(a){g[e]=a}function d(){return g[e]}var e="_cls",f="skuid.RemotingStubs",g=a.remote=function(){var c,d=a.utils.getObjectProperty,h=g[e],i=d(window,h),j=d(window,f);return h!==f?(c=j||{},i&&b.extend(c,i)):c=i?i:j,c};c(f),g.set=c,g.get=d}(skuid,skuid.$),function(a,b){function c(a){return"[object Date]"===Object.prototype.toString.call(a)}function d(a){N=a}function e(){var b=window.Intl&&window.Intl.DateTimeFormat&&window.Intl.DateTimeFormat();return b&&(b=b.resolved?b.resolved.timeZone:b.resolvedOptions?b.resolvedOptions().timeZone:null),!b&&a[P]&&(b=a[P].tz.guess()),b}function f(c,d){if(Q(c))throw"A valid TimeZone Id is required.";var f,g,h=K,i=N,j=e(),k=b.Deferred(),l=!1,m=!Q(d)&&i!==d||h!==c,n=function(){var b=a[P];O=!Q(b),K=c,N=b?b.tz.zone(K).offset(new Date):Q(d)?N:d},o=a.utils;return m?(l=Q(j)?M!==d:j!==c,l&&!a[P]?(g=window[P],f=o.loadJS(o.getStaticResourceUrl("MomentJS","skuid",null,o.getCacheTimestamp())).done(function(){if(a[P]=window[P],g)window.moment=g;else try{delete window[P]}catch(b){window.moment=void 0}})):f=b.Deferred().resolve(),f.done(function(){n(),a.events.publish("ui.timeZoneChanged",[{oldTimeZone:h,newTimeZone:c}]),k.resolve()}).fail(function(){k.reject("Unable to load information for timezone.")}),k.promise()):k.resolve()}function g(){return K}function h(a){if(!a)return!1;if(c(a))return a;var b=a.split&&a.split("T"),d=b&&b.length&&b[0].split("-");return d&&3===d.length?new Date(d[0],d[1]-1,d[2]):!1}function i(b){if(b){if(c(b)){var d=1,e=b.getMonth()-0+d+"",f=b.getDate()+"";return e.length===d&&(e="0"+e),f.length===d&&(f="0"+f),b.getFullYear()+"-"+e+"-"+f}return a.utils.isString(b)&&3===b.split("-").length?b:null}return null}function j(b){if(!b)return"";var c;return c=a.utils.isDate(b)?i(b):b,1===c.split(" ").length?l(h(c)):k(h(c))}function k(a){return l(s(a))}function l(c){return c?b.datepicker.formatDate(a.utils.userLocale.dateFormat,c):""}function m(a){return o(a)}function n(b){var c=a.utils;if(!b&&0!==b)return!1;var d,e=Date.parse,f=[1,4,5,6,7,10,11],g=0;if(d=R.exec(b)){for(var h,i=0;h=f[i];++i)d[h]=+d[h]||0;return d[2]=(+d[2]||1)-1,d[3]=+d[3]||1,"Z"===d[8]||c.isUndefined(d[9])||(g=60*d[10]+d[11],"+"===d[9]&&(g=0-g)),Date.UTC(d[1],d[2],d[3],d[4],d[5]+g,d[6],d[7])}return c.isString(b)&&-1!==b.split(":")[0].indexOf("N_")?NaN:e?e(b):NaN}function o(a){if(c(a))return a;var b=n(a);return isNaN(b)||b===!1?!1:new Date(b)}function p(b){return b&&"function"==typeof b.toISOString?b.toISOString():b&&a.utils.isString(b)?b:null}function q(b){return O?a[P].tz.zone(K).offset(b):N}function r(b){return O?a[P].tz.zone(e()).offset(b):M}function s(a){if(!a)return!1;var b=a.getTime(),c=new Date(b);return c.setMinutes(c.getMinutes()-(q(b)-r(b))),c}function t(a){if(!a)return!1;var b=a.getTime(),c=new Date(b);return c.setMinutes(a.getMinutes()+(q(b)-r(b))),c}function u(b){if(b){var d=c(b)?b:o(b),e=s(d),f=a.utils.userLocale;if(e)return f.showTimeBeforeDate?w(f.timeFormat,e)+" "+l(e):l(e)+" "+w(f.timeFormat,e)}return""}function v(d,e){if("undefined"!=typeof e&&"undefined"!=typeof d){var f,g,h=a.utils.isString;return h(e)&&!h(d)&&c(d)?(f=d,g=e):(h(e)&&(e=o(e)),f=e,g=d),b.datepicker.formatDate(g,f)}return""}function w(b,c){if(!c&&0!==c)return"";a.utils.isString(c)&&(c=o(c));var d,e=function(a){var c=d+1<b.length&&b.charAt(d+1)===a;return c&&d++,c},f=function(a){return a.getHours()%12},g=function(a,b,c){var d=""+b;if(e(a))for(;d.length<c;)d="0"+d;return d},h="",i=!1;if(c)for(d=0;d<b.length;d++)if(i)"'"!==b.charAt(d)||e("'")?h+=b.charAt(d):i=!1;else switch(b.charAt(d)){case"a":h+=y(c);break;case"h":var j=f(c);0===j&&(j=12),h+=g("h",j,2);break;case"K":h+=g("h",f(c),2);break;case"k":h+=g("k",c.getHours()+1,2);break;case"H":h+=g("H",c.getHours(),2);break;case"m":h+=g("m",c.getMinutes(),2);break;case"s":h+=g("s",c.getSeconds(),2);break;case"S":h+=g("S",c.getMilliseconds(),3);break;case"Z":var k=r(c),l=Math.floor(Math.abs(k)/60),m=Math.abs(k)-60*l;10>l&&(l="0"+l),10>m&&(m="0"+m),h+=(0>k?"+":"-")+l+m;break;case"'":e("'")?h+="'":i=!0;break;default:h+=b.charAt(d)}return h}function x(b,c){var d,e,f=a.utils,g=f.isUndefined;return b||0===b?(f.isString(b)?(e=(d=R.exec(b))&&!g(d[3])&&g(d[4]),b=e?h(b):o(b),b&&!e&&(b=s(b))):f.isNumber(b)&&(b=new Date(b)),b&&f.isDate(b)?(c&&(b=Date.prototype[c].call(b)),b):null):null}function y(b){var c=a.time.amPm,d=x(b,"getHours");return null!==d?d>11?c[1]:c[0]:null}function z(a){var b=x(a,"getMonth");return null!==b?1+b:null}function A(a){var b=x(a,"getUTCMonth");return null!==b?1+b:null}function B(b){var c=x(b,"getMonth");return null!==c?a.time.monthNames[c]:null}function C(b){var c=x(b,"getMonth");return null!==c?a.time.monthNamesShort[c]:null}function D(a){var b=x(a,"getDay");return null!==b?1+b:null}function E(a){var b=x(a,"getUTCDay");return null!==b?1+b:null}function F(b){var c=x(b,"getDay");return null!==c?a.time.dayNames[c]:null}function G(b){var c=x(b,"getDay");return null!==c?a.time.dayNamesShort[c]:null}function H(a,b,c){b=b||{},c=c||{};var d,e,f=b.years||0,g=b.quarters||0,h=(b.months||0)+3*g,i=b.weeks||0,j=b.days||0,k=(b.hours||0)+24*j+168*i,l=b.minutes||0,m=b.seconds||0,n=b.milliseconds||0,o=c.baseDate,p=c.useDeviceTimezone;switch(e=o?new Date(o.getTime()):p?new Date:s(new Date),a){case S:e.setMonth(0);case T:e.setMonth(e.getMonth()-e.getMonth()%3);case U:e.setDate(1);case W:e.setHours(0);case X:e.setMinutes(0);case Y:e.setSeconds(0);case Z:e.setMilliseconds(0);break;case V:e.setHours(-24*e.getDay()),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0)}return f&&e.setFullYear(e.getFullYear()+f),h&&(d=(e.getMonth()+h)%12,e.setMonth(e.getMonth()+h),e.getMonth()>d&&e.setDate(-e.getDate())),k&&e.setHours(e.getHours()+k),l&&e.setMinutes(e.getMinutes()+l),m&&e.setSeconds(e.getSeconds()+m),n&&e.setMilliseconds(e.getMilliseconds()+n),o||p||(e=t(e)),e}function I(a){if("string"!=typeof a||0===a.length)return a;var c,d,e,f=H,g=function(a){return f(W,a)},h=function(a){return f(V,a)},i=function(a){return f(U,a)},j=function(a){return f(T,a)},k=function(a){return f(S,a)};switch(a=a.split(":"),b.isNumeric(a[1])&&(e=parseInt(a[1])),a[0]){case $:c=new Date,d=new Date;break;case _:c=g({days:-1}),d=g();break;case aa:c=g(),d=g({days:1});break;case ba:c=g({days:1}),d=g({days:2});break;case ca:c=g({days:-90}),d=g();break;case da:c=g({days:1}),d=g({days:91});break;case ea:if(!e)return a;c=g({days:-e}),d=g();break;case fa:if(!e)return a;c=g({days:1}),d=g({days:e+1});break;case ga:if(!e)return a;c=g({days:-e}),d=g({days:-e+1});break;case ha:c=h({weeks:-1}),d=h();break;case ia:c=h(),d=h({weeks:1});break;case ja:c=h({weeks:1}),d=h({weeks:2});break;case ka:if(!e)return a;c=h({weeks:-e}),d=h();break;case la:if(!e)return a;c=h({weeks:1}),d=h({weeks:1+e});break;case ma:if(!e)return a;c=h({weeks:-e}),d=h({weeks:-e+1});break;case na:c=i({months:-1}),d=i();break;case oa:c=i(),d=i({months:1});break;case pa:c=i({months:1}),d=i({months:2});break;case qa:if(!e)return a;c=i({months:-e}),d=i();break;case ra:if(!e)return a;c=i({months:1}),d=i({months:1+e});break;case sa:if(!e)return a;c=i({months:-e}),d=i({months:-e+1});break;case ta:c=j({quarters:-1}),d=j();break;case ua:c=j(),d=j({quarters:1});break;case va:c=j({quarters:1}),d=j({quarters:2});break;case wa:if(!e)return a;c=j({quarters:-e}),d=j();break;case xa:if(!e)return a;c=j({quarters:1}),d=j({quarters:1+e});break;case ya:if(!e)return a;c=j({quarters:-e}),d=j({quarters:-e+1});break;case za:c=k({years:-1}),d=k();break;case Aa:c=k(),d=k({years:1});break;case Ba:c=k({years:1}),d=k({years:2});break;case Ca:if(!e)return a;c=k({years:-e}),d=k();break;case Da:if(!e)return a;c=k({years:1}),d=k({years:1+e});break;case Ea:if(!e)return a;c=k({years:-e}),d=k({years:-e+1});break;default:return a[0]}return[c,d]}function J(){var a=new Date;return a.setMilliseconds(0),a}var K,L=a.time={},M=(new Date).getTimezoneOffset(),N=(new Date).getTimezoneOffset(),O=!1,P="moment",Q=function(a){return void 0===a},R=/^(\d{4}|[+\-]\d{6})(?:-(\d{2})(?:-(\d{2}))?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(?:\.(\d{3}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?)?)?$/;Date.prototype.toISOString||!function(){function a(a){return 10>a?"0"+a:a}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"."+(this.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}}(),b.each({getYear:"getFullYear",getDay:"getDate",getHour:"getHours",getMinute:"getMinutes",getSecond:"getSeconds",getMillisecond:"getMilliseconds",getUTCYear:"getUTCFullYear",getUTCDay:"getUTCDate",getUTCHour:"getUTCHours",getUTCMinute:"getUTCMinutes",getUTCSecond:"getUTCSeconds"},function(a,b){L[a]=function(a){return x(a,b)}});var S="YEAR",T="QUARTER",U="MONTH",V="WEEK",W="DAY",X="HOUR",Y="MINUTE",Z="SECOND",$="NOW",_="YESTERDAY",aa="TODAY",ba="TOMORROW",ca="LAST_90_DAYS",da="NEXT_90_DAYS",ea="LAST_N_DAYS",fa="NEXT_N_DAYS",ga="N_DAYS_AGO",ha="LAST_WEEK",ia="THIS_WEEK",ja="NEXT_WEEK",ka="LAST_N_WEEKS",la="NEXT_N_WEEKS",ma="N_WEEKS_AGO",na="LAST_MONTH",oa="THIS_MONTH",pa="NEXT_MONTH",qa="LAST_N_MONTHS",ra="NEXT_N_MONTHS",sa="N_MONTHS_AGO",ta="LAST_QUARTER",ua="THIS_QUARTER",va="NEXT_QUARTER",wa="LAST_N_QUARTERS",xa="NEXT_N_QUARTERS",ya="N_QUARTERS_AGO",za="LAST_YEAR",Aa="THIS_YEAR",Ba="NEXT_YEAR",Ca="LAST_N_YEARS",Da="NEXT_N_YEARS",Ea="N_YEARS_AGO";b.extend(L,{formatDate:v,formatTime:w,getAnchoredDate:H,getDayName:F,getDayNameShort:G,getDayOfWeek:D,getLocalDateTime:s,getMonth:z,getMonthName:B,getMonthNameShort:C,getParseDateTimeResult:n,getPeriod:y,getRealJSDateTimeFromLocal:t,getSFDate:i,getSFDateTime:p,getUTCDayOfWeek:E,getUTCMonth:A,makeFormattedDate:j,makeFormattedDateFromJS:k,makeFormattedDateFromLocal:l,makeFormattedLongDateTime:u,parseDateString:o,parseDateTimeString:o,parseSFDate:h,parseSFDateTime:m,resolveDateKeyword:I,roundedNow:J,setUserTimeZone:f,getUserTimeZone:g,getDeviceTimeZone:e,setUserTimeZoneOffset:d})}(skuid,skuid.$),function(a,b){function c(a){b.extend(j,a)}function d(a,b){return j[a]||b||""}function e(c,d,e){var f=a.label.parse(c,d,e),g=f[0],h=f[1],i="";return b(h).each(function(b){i+=this;var c=g[b];c&&(i+=a.label.read(c.substring(c.indexOf(".")+1,c.length-1)))}),i}function f(c){var d="string"==typeof c,e=d?c:c.template,f=(d?Array.prototype.slice.call(arguments,1):c.data)||[],g=c&&c.leftMerge,h=c&&c.rightMerge,i=a.label.parse(e,g,h),j=i[0],k=i[1],l="";return b(k).each(function(a){l+=this;var b=j[a];b&&(l+=f[b.substring(1,b.length-1)])}),l}function g(a,b,c){b||(b="{"),c||(c="}");var d=b+"__"+c,e=d in k?k[d]:k[d]=new RegExp("\\"+b+"[^"+b+"\\"+c+"]+\\"+c,"g");return[a.match(e)||[],a.split(e)]}function h(){return j}var i=a.label={},j={},k={};if(window.SkuidLabels){c(window.SkuidLabels);try{delete window.SkuidLabels}catch(l){window.SkuidLabels=void 0}}b.extend(i,{add:c,read:d,labelize:e,merge:f,parse:g,getAll:h,map:j}),a.$L=d}(skuid,skuid.$),function(a){var b=a.currency={},c={ALL:"Lek",ARS:"$",AWG:"f",AUD:"$",BSD:"$",BBD:"$",BYR:"p.",BZD:"BZ$",BMD:"$",BOB:"$b",BAM:"KM",BWP:"P",BRL:"R$",BND:"$",CAD:"$",KYD:"$",CLP:"$",CNY:"&yen;",COP:"$",CRC:"c",HRK:"kn",CZK:"Kc",DKK:"kr",DOP:"RD$",XCD:"$",EGP:"&pound;",SVC:"$",EEK:"kr",EUR:"&euro;",FKP:"&pound;",FJD:"$",GBP:"&pound;",GHC:"c",GIP:"&pound;",GTQ:"Q",GGP:"&pound;",GYD:"$",HNL:"L",HKD:"$",HUF:"Ft",ISK:"kr",IDR:"Rp",IMP:"&pound;",JMD:"J$",JPY:"&yen;",JEP:"&pound;",LVL:"Ls",LBP:"&pound;",LRD:"$",LTL:"Lt",MYR:"RM",MXN:"$",MZN:"MT",NAD:"$",ANG:"f",NZD:"$",NIO:"C$",NOK:"kr",PAB:"B/.",PYG:"Gs",PEN:"S/.",PLN:"zl",RON:"lei",SHP:"&pound;",SGD:"$",SBD:"$",SOS:"S",ZAR:"R",SEK:"kr",CHF:"CHF",SRD:"$",SYP:"&pound;",TWD:"NT$",TTD:"TT$",TRY:"TL",TRL:"&pound;",TVD:"$",USD:"$",UYU:"$U",VEF:"Bs",ZWD:"Z$"};b.getSymbol=function(a){var b=c[a];return b?b:"$"}}(skuid),function(a){function b(a,b){e[a]=b}function c(a){delete e[a]}function d(a){return e[a]}var e={};a.snippet={registerSnippet:b,register:b,getSnippet:d,get:d,unregister:c}}(skuid),function(a,b){function c(a,b){j[a]=b}function d(c){c&&(a.utils.isString(c)&&c in j?delete j[c]:c instanceof Array&&b.each(c,function(a,b){b&&b in j&&delete j[b]}))}function e(a){return a?j[a]:void 0}function f(){return b.map(j,function(a){return a})}function g(){return j}function h(){return Object.keys(j)}var i=a.componentType={},j={};b.extend(i,{get:e,register:c,unregister:d,list:f,map:g,getAll:h})}(skuid,skuid.$),function(a,b){function c(a,b){var c=n.getObjectProperty(a,b);return c||b&&"Id"!==b?c||"":a.__skuid_record__.getId()}function d(d,e){var f=[],g=d.is("conditions")?d.children():d.children("conditions").first().children(),h=d.attr("rowid");if(g){var i,j;e&&(j=e.rows,i=e.row||j&&j.length&&j[0]||null),g.each(function(){var d=new a.model.Condition(b(this)),e=d.mergeField;if("contextrow"==d.type){var g=h;!g&&i&&(g=c(i,e)),g&&(d.value=g)}else"contextrows"==d.type&&j&&j.length&&(d.values=b.map(j,function(a){return c(a,e)}));f.push(d)})}return f}function e(a){var b=a.type();!b||b in p||(p[b]=[]),p[b].push(a),o[a.id()]=a}function f(a){if(a){var b=p[a];return b?b:{}}return p}function g(){return b.map(o,function(a){return a})}function h(a){return o[a]}function i(c,d,e,f){var g,h;if(1==arguments.length){var i=arguments[0];c=i.element,d=i.definition,e=i.type,g=i.context,f=i.options,h=i.state,d||(d=i.xmlDefinition)}if(f||(f={}),!e&&!d)throw"Either a Component Type or XML Definition must be provided.";if(c?c.jquery||(c=b(c)):c=b("<div>"),d&&(n.isString(d)&&(d=n.makeXMLDoc(d)),d.jquery||(d=b(d)),d.length&&(d=d.first()),e||(e=d.prop("tagName")),d.attr("uniqueid")&&(f.uniqueId=d.attr("uniqueid")),d.attr("cssclass")&&c.addClass(d.attr("cssclass"))),a.componentType.get(e)){var j=new k(c,e,b.extend(f,{state:h}));return d&&(j.xmlDefinition=d),j.conditionallyRender({context:g,xmlDefinition:d}),j}return q(e)}function j(a,c,d,e){var f=[],g=[];return b.each(a,function(){var a=l.factory({definition:this,context:d,state:e});a&&a instanceof k&&(a.element&&g.push(a.element),f.push(a))}),c&&(c.append(g),b.each(g,function(){b(this).trigger("attach")})),f}function k(a,c,d){d||(d={});var f=this;d.state&&b.extend(f,d.state),f.element=a,f._componentType=c,f._GUID=d.uniqueId||a.prop("id")||n.generateUniqueId(),f.isRendered=!1,a.prop("id")!==f._GUID&&a.prop("id",f._GUID),a.attr("data-rendered","false").data({rendered:!1,component:f}),e(f)}var l=a.component={},m=a.events,n=a.utils,o={},p={},q=function(a){return"There is no Skuid Component Type called '"+a+"'"},r="_eventSubscriptions";k.prototype={id:function(){return this._GUID},getId:function(){return this.id()},type:function(){return this._componentType},getType:function(){return this.type()},setType:function(a){return this._componentType=a,this},getElement:function(){return this.element},getPersonalizationService:function(){var b="_personalizationService",c=this[b];return c||(c=this[b]=a.personalization.createComponentService(this)),c},setParentPageId:function(a){var b=this;return b._parentPageId=a,b},getParentPage:function(){return o[this.getParentPageId()]},getParentPageId:function(){var a,b,c,d=this,e=d._parentPageId;if(e)return e;if(c=p.skuidpage,c&&1===c.length)return c[0].id();if(a=d.getParentComponentId(),a&&o[a]&&(b=d.getParentComponent(),b&&(e=b.getParentPageId())),e)return e;var f=d.element.closest(".nx-page");return f.length&&f.data("component")?f.data("component").id():c[0].id()},setParentComponentId:function(a){var b=this;return b._parentComponentId=a,b},getParentComponent:function(){return o[this.getParentComponentId()]},getParentComponentId:function(){return this._parentComponentId},render:function(b){var c,d=this,e=d.getType(),f=a.componentType.get(e);if(b||(b={}),!f)return q(e);if(b.context&&(d.context=b.context),b.xmlDefinition?d.xmlDefinition=c=b.xmlDefinition:c=d.xmlDefinition,d.element.empty&&f&&!f.onlyRenderOnce&&f.emptyBeforeRender!==!1&&d.element.empty(),!d.isBeingRendered&&(!d.isRendered||d.isRendered&&!f.onlyRenderOnce)){switch(d.isBeingRendered=!0,typeof f){case"function":f(d.element,c,d);break;case"object":if("render"in f){f.render(d.element,c,d);break}default:throw"Invalid Component Type definition. Component Type must be a JavaScript Object with a render() method."}d.isBeingRendered=!1}return d.isRendered=!0,d.element.attr("data-rendered","true").data("rendered",!0),d},unrender:function(){var c=this,d=c.getType(),e=a.componentType.get(d);return"function"==typeof c.beforeUnrender&&c.beforeUnrender(),c.element.data&&b.each(c.element.data(),function(a,b){"component"!==a&&"object"!==a&&b&&"object"==typeof b&&b.widget&&b.widget._destroy&&b.widget._destroy()}),c.unregisterChildComponents(),c.element.empty&&e&&!e.onlyRenderOnce?c.element.removeAttr("style").empty():e&&e.onlyRenderOnce&&c.xmlDefinition.attr("domid")&&b("body").append(c.element.children().hide().detach()),c.isRendered=!1,c.element.attr("data-rendered","false").data("rendered",!1),"function"==typeof c.afterUnrender&&c.afterUnrender(),c},rerender:function(){return this.unrender().render()},unregisterChildComponents:function(){var a=this,c=this.childComponents;return c&&c.length&&(b.each(c,function(a,b){n.removeEventSubscriptions(b.element),b.unregister&&b.unregister()}),c.length=0),a},conditionallyRender:function(b){var c=this;return n.conditionallyRender(function(d,e,f,g){c.render(b),g&&g.eventSubscriptions&&(c[r]=g.eventSubscriptions),a.events.publish("ui.reflow",[{component:c}])},function(){a.events.publish("ui.reflow",[{component:c}]),c.unrender()},c.xmlDefinition,c.element,c._GUID,b),c},createConditionsFromXml:function(b,c){var e=this,f=b||e.xmlDefinition,g=e.element,h=c&&c.context||e&&e.context,i=[];if(i=d(f,h),g){var j=f.attr("controllingcomponent");j&&(g.controllingComponent=a.component.getById(j)),g.conditions=i}return i},addProblem:function(a){var c=this;b(function(){var b=c.getParentPage(),d=c._GUID;!b||b.id()===d&&d||b.addProblem(a)})},addProblems:function(a){var c=this;b(function(){var b=c.getParentPage(),d=c._GUID;!b||b.id()===d&&d||b.addProblems(a)})},unregister:function(c){c=b.extend({removeElement:!0},c);var d,e=this,f=e.getType(),g=a.componentType.get(f),h=p[f],i=e[r];e.id()in o&&delete o[e.id()],d=b.inArray(e,h),-1!==d&&h.splice(d,1),e.unregisterChildComponents({removeElement:!1}),i&&(b.each(i,function(){m.unsubscribe(this)}),delete e[r]),g&&g.onlyRenderOnce&&e.xmlDefinition.attr("domid")&&b("body").append(e.element.children().hide().detach()),c.removeElement&&this.element.remove()},createChildComponents:function(){var a=this,c=a.id(),d=j.apply(a,arguments,a.context);return b.each(d,function(a,b){b.setParentComponentId(c)}),a.childComponents?Array.prototype.push.apply(a.childComponents,d):a.childComponents=d,d}},b.extend(l,{Component:k,createChildComponents:j,createConditionsFromXml:d,getByType:f,getAll:g,getById:h,factory:i,register:e}),a.$C=h}(skuid,skuid.$),function(a,b){function c(){return a.utils}function d(a){return{xhr:function(){var c=b.ajaxSettings.xhr();return c.upload&&c.upload.addEventListener("progress",function(b){a.notify(b)},!1),c}}}function e(d){var e,f,g=d.modelDataSource,h=a.dataSource.get(g),i={_foundCache:!1};return h&&h.isAuthenticated&&"GET"===d.method&&!d.body?(e=g+" - "+d.url+" - "+(c().size(d.headers)?JSON.stringify(d.headers):""),f=k[e],f?i._foundCache=!0:(f=k[e]=b.Deferred(),i.deferred=function(){return f}),i.promise=function(){return f.promise()}):(f=b.Deferred(),i.deferred=function(){return f}),i.markComplete=function(){e&&delete k[e]},i.wasFound=function(){return i._foundCache},i.promise=function(){return f.promise()},i}function f(d,f){function g(){a.remote().proxy(o?JSON.stringify(d):d,function(c,d){if(h.markComplete(),c&&m(c))try{c=JSON.parse(c),j=c.setCookies}catch(e){j=null}j&&j.length&&(b.cookie.raw=!0,b.each(j,function(c,d){var e,f={};b.each(["path","secure","domain"],function(a,b){b in d&&(f[b]=d[b])}),"expires"in d&&(e=d.expires,f.expires=a.utils.isNumber(e)===!1?a.time.parseDateTimeString(e):parseInt(e,10)),b.cookie(d.name,d.value,f)}),b.cookie.raw=!1),c&&!c.error&&0!==c.statusCode&&(!c.statusCode||c.statusCode<400)?i.resolve(c):(!c&&d&&d.message&&(c={statusCode:0,status:"",error:d.message}),i.reject(c))},f)}var h,i,j,k=d.body,l=b.extend({"User-Agent":navigator.userAgent},d.headers),m=c().isString,n=a.platform,o="function"==typeof n.requiresSerializedProxyRequests?n.requiresSerializedProxyRequests():!0;return delete d.originalRequest,d.contentType&&(l["Content-Type"]=d.contentType),d.headers=l,h=e(d),h.wasFound()?h.promise():(i=h.deferred(),f||(f={}),f.escape=!1,!k||m(k)||k instanceof FormData||k instanceof Blob||(d.body=JSON.stringify(k)),o&&k instanceof Blob?c().readFileAsBase64(k).then(function(a){d.body=a,g()},function(a){i.reject(a)}):g(),i.promise())}function g(a){for(var b,c=/^(.*?):[ \t]*([^\r\n]*)$/gm,d={};b=c.exec(a);)d[b[1]]=b[2];return d}function h(c){var f,h=c.body,i=e(c);return i.wasFound()?i.promise():(f=i.deferred(),!h||a.utils.isString(h)||h instanceof FormData||h instanceof Blob?c.data=h:c.data=JSON.stringify(h),delete c.originalRequest,b.extend(c,d(f)),b.ajax(c).always(function(){i.markComplete()}).done(function(a,b,c){var d={statusCode:c.status,body:a,status:c.statusText,headers:g(c.getAllResponseHeaders())};f.resolve(d)}).fail(function(a){var b={statusCode:a.status,body:a.responseText,status:a.statusText,headers:g(a.getAllResponseHeaders())};f.reject(b)}),f.promise())}function i(b,c){var d,e,f=c?c+": ":"",g=a.utils.isString,h=b&&!g(b)?b.response||b.body:b;if(h)try{d=g(h)?JSON.parse(h):h,d&&(d.message&&g(d.message)?e=d.message:d[0]&&d[0].message&&(e=d[0].message),e&&(f+=e))}catch(i){g(h)&&(f+=h)}return f}var j=a.ajax={},k={};b.extend(j,{proxy:f,direct:h,getResponseHeaderObject:g,getErrorMessage:i})}(skuid,skuid.$),function(a,b){function c(){return a.utils.getCSSSizeObj.apply(this,arguments)}function d(d,e){var g,h,i,j;if(e.columnGutter&&(g=c(e.columnGutter),g&&(h=g.number/2*-1+g.unit)),e.rowGutter&&(i=c(e.rowGutter),i&&(j=-1*i.number+i.unit)),h||j?d.css({margin:(j||"0")+" "+(h||"0")+" 0 "+(h||"0")}):d.css({margin:""}),"rigid"===e.layoutMode&&e.precision&&d.children().length>e.precision&&!d.children(".sm-grid-division-filler").length)for(var k=0;k<e.precision;k++){var l=a.mobile?"sm-card sm-grid-division sm-grid-division-filler":"sk-card sk-grid-division sk-grid-division-filler",m=b("<article>").addClass(l);f(m,{parentMinWidth:e.minWidth,columnGutter:e.columnGutter,rowGutter:e.rowGutter}),d.append(m)}}function e(a){a.css({margin:""}),b.each(a.children(),function(){g(this)})}function f(a,b){b=b||{};var d,e,f,g,h,i,j,k,l,m;b.columnGutter&&(h=c(b.columnGutter),h&&(i=h.number/2+h.unit)),b.rowGutter&&(j=c(b.rowGutter),j&&(k=j.number+j.unit)),(k||i)&&a.css({margin:(k||"0")+" "+(i||"0")+" 0 "+(i||"0")}),"top"===b.verticalAlign?a.css({"-webkit-justify-content":"flex-start","justify-content":"flex-start"}):"center"===b.verticalAlign?a.css({"-webkit-justify-content":"flex-start","justify-content":"center"}):"bottom"===b.verticalAlign&&a.css({"-webkit-justify-content":"flex-start","justify-content":"flex-end"}),"specified"===b.behavior?a.css({width:b.width,"-webkit-flex":"none",flex:"none"}):"fit"===b.behavior?a.css({width:"","-webkit-flex":"none",flex:"none"}):(m=c(b.minWidth),l=c(b.parentMinWidth),d=b.relativeSize||1,e=b.relativeSize||1,m?f=m.number+m.unit:l&&(f=l.number*(b.relativeSize||1)+l.unit),g=d+" "+e+" "+f,a.css({"-webkit-flex":g,flex:g,width:""}))}function g(a){a.css({margin:"",width:"","-webkit-flex":"none",flex:"none","-webkit-justify-content":"","justify-content":""})}function h(a){var c,d=parseInt(a.data("voffset"),10),e=parseInt(a.data("vpercent"),10),f=parseInt(a.data("precision"),10);if((d||0===d)&&e||0===e?(c=(a.offsetParent().outerHeight()-d)*(e/100),a.addClass("sm-grid-fixed-vertical").css("height",c+"px")):a.removeClass("sm-grid-fixed-vertical").css("height",""),
f){var g,h=0;a.children(".sm-grid-division-forcewrap").remove(),b.each(a.children(".sm-grid-division"),function(){var a,c=b(this),d=c.data("size"),e=c.data("component"),i=e&&e.xmlDefinition&&e.xmlDefinition.attr("type"),j=c[0].offsetTop;a=!i||"specified"!==i&&"fit"!==i?parseInt(d,10)||1:1,j!==g&&(h=0),h+=a,h>f&&(c.before(b("<div>").addClass("sm-grid-division-forcewrap")),j=c[0].offsetTop,h=a),g=j})}}function i(){a.events.publish("ui.reflow")}var j=a.responsive={config:{resizeWaitTime:100}},k=!1;b(window).on("resize orientationchange",function(){k!==!1&&clearTimeout(k),k=setTimeout(a.responsive.handleResize,a.responsive.config.resizeWaitTime)}),b.extend(j,{handleResize:i,prepareDivision:f,prepareGrid:d,processGrid:h,unMakeDivision:g,unMakeGrid:e})}(skuid,skuid.$),function(a,b){function c(c,d){if(!c)return!1;c&&a.utils.isString(c)&&(c=a.utils.makeXMLDoc(c)),c.jquery||(c=b(c));var e=c.attr("uniqueid");d&&("__header"===e||"__footer"===e)&&(e+=d),j[e]={xmlDefinition:c}}function d(a){return j[a]}function e(){var a=[];return b.each(j,function(b,c){a.push(c)}),a}function f(){return j}function g(a,b){a.unregisterChildComponents().createChildComponents(b.children(),a.element,a.context)}function h(b,c){var e,f=a.$C(b),h=d(c);h&&(e=h.xmlDefinition.children("components").first(),g(f,e))}var i=a.region={},j={};b.extend(i,{get:d,list:e,map:f,register:c,setContent:g,setContentByIds:h})}(skuid,skuid.$),function(skuid){function getCustomFormulaFunction(a){var b=customFormulaFunctions[a];if(!utils().isString(a)||!b)throw'Bad Formula Function ID: Formula function with id "'+a+'" does not exist';return b}function evaluate(formulaString){function processTemplate(a,b){var c=0===b.args;formulaString=formulaString.replace(new RegExp(a+"\\("+(c?"\\s*\\)":""),"g"),(b.snippetName?"skuid.snippet.get('"+b.snippetName+"')":b.output)+"("+(c?")":""))}return $.each(customFormulaFunctionDefinitions,processTemplate),$.each(coreFormulaFunctionDefinitions,processTemplate),eval(formulaString)}function Formula(a,b,c){c=c||{};var d,e=c.numArgs||1,f=c.returnType;if(!utils().isString(a)||!utils().isFunction(b))throw"Bad Formula Initialization: both forumula formulaName and formula function must be defined";d=utils().generateUniqueId(),a="c_"+a,customFormulaFunctions[d]=b;var g={output:'skuid.formula.getCustomFormulaFunction("'+d+'")',t:f,args:e,defaultState:c.defaultState};customFormulaFunctionDefinitions[a]=g,this.getFunction=function(){return b},this.getName=function(){return a},this.getReturnType=function(){return f},this.getNumArgs=function(){return e}}var $=skuid.$,formula=skuid.formula={},utils=function(){return skuid.utils},TYP_BOOLEAN="boolean",TYP_NUMBER="number",TYP_STRING="string",TYP_DATE="date",TIME_NAMESPACE="skuid.time.",UTILS_NAMESPACE="skuid.utils.",coreFormulaFunctionDefinitions={ABS:{output:"Math.abs",defaultState:"ABS(number)",t:TYP_NUMBER},AMPM:{output:TIME_NAMESPACE+"getPeriod",defaultState:"AMPM(datetime)",t:TYP_DATE},CEIL:{output:"Math.ceil",defaultState:"CEIL(val)",t:TYP_DATE},COMBINE_STRINGS:{output:UTILS_NAMESPACE+"combineStrings",defaultState:"COMBINE_STRINGS(startString,endString,separator)",t:TYP_STRING,args:3},CONTAINS:{output:UTILS_NAMESPACE+"contains",defaultState:"CONTAINS(stringToExamine,stringToLookFor)",t:TYP_BOOLEAN,args:2},ENDS_WITH:{output:UTILS_NAMESPACE+"endsWith",defaultState:"ENDS_WITH(stringToExamine,stringToLookFor)",t:TYP_BOOLEAN,args:2},TODAY:{output:"(function(){var d = new Date();d.setHours(0,0,0,0);return d;})",t:TYP_DATE,defaultState:"TODAY()",args:0},DAY:{output:TIME_NAMESPACE+"getDay",defaultState:"DAY(date)",t:TYP_DATE},DAY_NAME:{output:TIME_NAMESPACE+"getDayName",defaultState:"DAY_NAME(date)",t:TYP_DATE},DAY_NAME_SHORT:{output:TIME_NAMESPACE+"getDayNameShort",defaultState:"DAY_NAME_SHORT(date)",t:TYP_DATE},DAY_OF_WEEK:{output:TIME_NAMESPACE+"getDayOfWeek",defaultState:"DAY_OF_WEEK(date)",t:TYP_DATE},DAY_OF_WEEK_UTC:{output:TIME_NAMESPACE+"getUTCDayOfWeek",defaultState:"DAY_OF_WEEK_UTC(date)",t:TYP_DATE},FLOOR:{output:"Math.floor",defaultState:"FLOOR(val)",t:TYP_NUMBER},FORMAT_DATE:{output:TIME_NAMESPACE+"formatDate",defaultState:"FORMAT_DATE(format,date)",t:TYP_DATE,args:2},FORMAT_TIME:{output:TIME_NAMESPACE+"formatTime",defaultState:"FORMAT_TIME(format,datetime)",t:TYP_DATE,args:2},HOUR:{output:TIME_NAMESPACE+"getHour",defaultState:"HOUR(datetime)",t:TYP_DATE},HOUR_UTC:{output:TIME_NAMESPACE+"getUTCHour",defaultState:"HOUR_UTC(datetime)",t:TYP_DATE},IF:{output:UTILS_NAMESPACE+"ifElse",defaultState:"IF(logic_test,value_if_true,value_if_false)",t:TYP_BOOLEAN,args:3},ISBLANK:{output:UTILS_NAMESPACE+"isBlank",defaultState:"ISBLANK(val)",t:TYP_BOOLEAN},LEFT:{output:UTILS_NAMESPACE+"substringLeft",defaultState:"LEFT(string,numChars)",t:TYP_STRING,args:2},LEN:{output:UTILS_NAMESPACE+"size",defaultState:"LEN(string)",t:TYP_STRING},LOWER:{output:UTILS_NAMESPACE+"lowercase",defaultState:"LOWER(string)",t:TYP_STRING},MILLISECOND:{output:TIME_NAMESPACE+"getMillisecond",defaultState:"MILLISECOND(datetime)",t:TYP_DATE},MINUTE:{output:TIME_NAMESPACE+"getMinute",defaultState:"MINUTE(datetime)",t:TYP_DATE},MINUTE_UTC:{output:TIME_NAMESPACE+"getUTCMinute",defaultState:"MINUTE_UTC(datetime)",t:TYP_DATE},MODEL_LOOKUP:{output:UTILS_NAMESPACE+"modelLookup",defaultState:"MODEL_LOOKUP(Lookup_Model_Id,Model_Field_To_Return,Model_Field_To_Search,Search_Value)",args:4},MONTH:{output:TIME_NAMESPACE+"getMonth",defaultState:"MONTH(date)",t:TYP_DATE},MONTH_UTC:{output:TIME_NAMESPACE+"getUTCMonth",defaultState:"MONTH_UTC(date)",t:TYP_DATE},MONTH_NAME:{output:TIME_NAMESPACE+"getMonthName",defaultState:"MONTH_NAME(date)",t:TYP_DATE},MONTH_NAME_SHORT:{output:TIME_NAMESPACE+"getMonthNameShort",defaultState:"MONTH_NAME_SHORT(date)",t:TYP_DATE},NOW:{output:TIME_NAMESPACE+"roundedNow",t:TYP_DATE,defaultState:"NOW()",args:0},RIGHT:{output:UTILS_NAMESPACE+"substringRight",defaultState:"RIGHT(string,numChars)",t:TYP_STRING,args:2},ROUND:{output:"Math.round",defaultState:"ROUND(val)",t:TYP_NUMBER},SECOND:{output:TIME_NAMESPACE+"getSecond",defaultState:"SECOND(datetime)",t:TYP_DATE},SECOND_UTC:{output:TIME_NAMESPACE+"getUTCSecond",defaultState:"SECOND_UTC(datetime)",t:TYP_DATE},STARTS_WITH:{output:UTILS_NAMESPACE+"startsWith",defaultState:"STARTS_WITH(stringToExamine,stringToLookFor)",t:TYP_BOOLEAN,args:2},UPPER:{output:UTILS_NAMESPACE+"uppercase",defaultState:"UPPER(string)",t:TYP_STRING},VALUE:{output:"parseFloat",defaultState:"VALUE(text)",t:TYP_STRING},YEAR:{output:TIME_NAMESPACE+"getYear",defaultState:"YEAR(date)",t:TYP_DATE},YEAR_UTC:{output:TIME_NAMESPACE+"getUTCYear",defaultState:"YEAR_UTC(date)",t:TYP_DATE}},customFormulaFunctionDefinitions={},customFormulaFunctions={};$(document.body).one("pageload",function(){skuid.builder&&skuid.builder.core&&(skuid.builder.core.formula={getFormulasAsItems:function(){return $.map(coreFormulaFunctionDefinitions,function(a,b){return{value:a.defaultState?a.defaultState:b+"()",label:b}})}})}),$.extend(formula,{evaluate:evaluate,getCustomFormulaFunction:getCustomFormulaFunction,Formula:Formula})}(window.skuid),function(skuid){function getUserInfo(){return skuid.utils.userInfo}function _setCurrentDomain(a){_currentDomain=a}function getCurrentDomain(){return _currentDomain}function getLocalVisualforceDomain(a){var b,c,d,e,f=!a;return _localVisualforceDomain&&f?_localVisualforceDomain:(a||(a=getCurrentDomain()),c=a.split("."),d=c[0],"c"===d||endsWith(d,"--c")?b=a:(contains(d,"--")?(e=d.split("--"),e.pop(),e.push("c"),c[0]=e.join("--")):c[0]="c",b=c.join(".")),f&&(_localVisualforceDomain=b),b)}function getStaticResourceUrl(a,b,c,d){return skuid.platform.getResourceUrl({name:a,namespace:b,nestedPath:c,modstamp:d})}function getSafeRelativeUrl(a){var b=a&&startsWith(a,"/"),c=skuid.page.sitePrefix;return c&&"null"!==c&&b&&!startsWith(a,c)?(endsWith(c,"/s")&&(c=c.substring(0,c.length-2)),c+a):a}function getDefaultImageUrl(a){var b=skuid.platform.getDefaultImagePath?skuid.platform.getDefaultImagePath():"";return getStaticResourceUrl(combineUrls(b,"DefaultPhotos"),"skuid",("org"===a?"Org":"Profile")+".jpg",skuid.version.date)}function getContextToUse(a,b,c){var d={},e=c&&c.mode||"row";return a&&a.context&&$.extend(d,a.context),b&&$.extend(d,b),d.model||(a&&a.model?d.model=a.model:a&&a.list&&a.list.model&&(d.model=a.list.model)),d.row||(d.item&&d.item.row?d.row=d.item.row:!a||!a.row||a instanceof skuid.model.Model?a&&a.item&&a.item.row&&(d.row=a.item.row):d.row=a.row),d.list||a&&a.list&&(d.list=a.list),d.editor||a&&a.editor&&(d.editor=a.editor),"model"===e&&(d.row=void 0,d.list=void 0,d.rows=void 0),d}function isApiEnabled(){return getUserInfo().isApiEnabled}function canUseSessionStorage(){if("nodata"===_canUseSessionStorage)try{_canUseSessionStorage="sessionStorage"in window&&null!==window.sessionStorage}catch(a){_canUseSessionStorage=!1}return _canUseSessionStorage}function hsh(a){var b,c,d,e=0;if(0===a.length)return e;for(b=0,c=a.length;c>b;b++)d=a.charCodeAt(b),e=(e<<5)-e+d,e|=0;return e}function getSessionHash(){return _sessionIdHash||(_sessionIdHash=hsh(getUserInfo().sessionId)),_sessionIdHash}function getSessionLanguage(){return getUserInfo().language}function cacheNeedsRefresh(a){return a.__uid!==getSessionHash()||a.__userLanguage!==getSessionLanguage()}function checkInCache(a){return a?(a.modstamp=(new Date).getTime(),a.__uid=getSessionHash(),void(a.__userLanguage=getSessionLanguage())):!1}function capitalizeFirst(a){return a&&a.length?a.charAt(0).toUpperCase()+a.slice(1):void 0}function combineUrls(a,b){return combineStrings(a,b,"/")}function combineStrings(a,b,c){a||(a=""),b||(b=""),c||(c="");var d=a.length,e=b.length,f=c.length;return(d&&endsWith(a,c)?a.substring(0,d-f):a)+(d&&e?c:"")+(e&&startsWith(b,c)?b.substring(f,e):b)}function _storage(a,b,c){if("undefined"==typeof a)return null;var d=utils["canUse"+capitalizeFirst(c)]();return"undefined"==typeof b?d?window[c][a]:$.cookie(a):d?window[c][a]=b:$.cookie(a,b)}function sessionStorage(a,b){return _storage(a,b,"sessionStorage")}function mergeNodeProperty(a,b,c,d){d||(d=_mergeSettings);var e=c&&c.model?c.row?MERGE_ROW:MERGE_MODEL:MERGE_GLOBAL,f=$("<div>"),g=a.attr(b);return"undefined"!=typeof g?(e===MERGE_ROW?f.append(merge(MERGE_ROW,g,d,c.model,c.row)):e===MERGE_MODEL?f.append(merge(MERGE_MODEL,g,d,c.model)):f.append(merge(MERGE_GLOBAL,g,d)),f.text()):void 0}function redirect(a){if(a){var b=a.model,c=a.row,d=a.url,e=a.title||"",f=a.window,g=b?c?MERGE_ROW:MERGE_MODEL:MERGE_GLOBAL,h=$.extend(_mergeSettings,a.mergeSettings||{}),i=window.sforce&&sforce.one?sforce.one:!1,j=window.sforce&&sforce.console&&sforce.console.isInConsole()?sforce.console:!1,k=d&&startsWith(d,"/"),l=b&&c?b.getRowId(c):null;d&&(d=mergeAsText(g,d,h,b,c),i?i.navigateToURL(d,"blank"===f):j?k?(b&&c&&(startsWith(d,"/"+l)||startsWith(d,"/"+l.substring(0,15)))&&b.getRowById(l)&&(e=b.getNameFieldValueForRow(c)),skuid.ui.openConsoleTabForUrl(d,e)):window.open(d):(k&&(d=getSafeRelativeUrl(d)),"blank"===f?window.open(d):"parent"===f?parent.location=d:window.location=d))}}function createPopupFromPopupXML(a,b,c){if(!a)return null;b||(b={}),c||(c={});var d=$("<div>").attr("title",mergeNodeProperty(a,"title",b,{createFields:!0,registerFields:!1})),e=[],f=[],g=!0,h=!0;return b.popup=d,("false"===a.attr("modal")||c.modal===!1)&&(g=!1),("false"===a.attr("resizable")||c.resizable===!1)&&(h=!1),a.children("components").first().children().each(function(){var a=skuid.component.factory({definition:this,context:b});e.push(a.element),f.push(a)}),d.append(e).dialog({close:function(){f&&$.each(f,function(){this.unregister&&this.unregister()}),d.dialog("destroy").remove(),c.close&&c.close.apply(this);var e=a.children("afterclose");e.length&&skuid.actions.runActionsNode(e,null,b)},open:function(){c.open&&c.open.apply(this)},beforeClose:function(){c.beforeClose&&c.beforeClose.apply(this)},modal:g,resizable:h,width:a.attr("width")||"600px",buttons:c.buttons||[]}),d}function createPopupFromAction(a,b,c){var d=a.children("popup").first();return createPopupFromPopupXML(d,b,c)}function calculateReferenceMerges(a){a||(a={});var b,c,d,e,f,g={registerFields:!1},h=a.fieldMetadata;if(h&&(e=h.rel,f=h.id),!("template"in a||"fieldMetadata"in a))throw"skuid.utils.calculateReferenceText: Either fieldMetadata or a template must be provided.";if(a.template){var i=f.indexOf(".");d=f&&-1!=i?f.substring(0,i+1):"",c=a.template,g.fieldPrefix=d+e+"."}else{var j,k;if(h.ref&&-1!=h.ref.indexOf(",")||h.referenceTo&&h.referenceTo.length>=2){if(a.targetObject){var l=a.targetObject.split(".");j=l[l.length-1]}else j=h.referenceTo[0].objectName;k="Name"}else j=h.ref,k=a.model.getDataSource().getNameField(j||a.model);e?(-1!=f.indexOf(".")&&(e=f.substring(0,f.lastIndexOf(".")+1)+e),c="{{"+e+"."+k+"}}"):c="{{"+k+"}}"}return b=a.model.getRowMergeResult(a.row,c,g)}function calculateReferenceText(a){return calculateReferenceMerges(a).merges.text()}function getFieldRelationshipName(a,b){var c=a.split(".");c.pop();var d=c.join(".");return b.displaytype===DT_REFERENCE?(d?d+".":"")+b.rel:d}function getTargetObject(a){return a.referenceTo[0]}function getFieldReference(a,b,c){var d=getNameField(getTargetObject(b).objectName,c);if(d)return getFieldRelationshipName(a,b)+"."+d}function getReferenceFieldNameFromRelationshipField(a){var b=a.split(".")[0];return endsWith(b,"__r")||endsWith(b,"__pr")?b.substring(0,b.length-1)+"c":b+"Id"}function getReferenceFieldRelationshipName(a){return endsWith(a,"__c")||endsWith(a,"__pc")?a.substring(0,a.length-1)+"r":a.substring(0,a.length-2)}function getUserInfoPropValue(a){var b=userInfoCamelCasings[a]||a,c=getUserInfo();return"ismulticurrencyorganization"===a?skuid.utils.isMultiCurrencyOrganization:b in c?c[b]:void 0}function makeConditionLogicString(a,b,c){var d,e=!0,f=b.length;if(c||(c={}),a?(d=a.toLowerCase().replace(/\s+/g,""),CONDITION_LOGIC_REGEX.test(d)||(e=!1)):e=!1,!e)throw"Invalid Condition Logic: "+a;for(c.customAndString&&(d=d.replace(/and/g,c.customAndString)),c.customOrString&&(d=d.replace(/or/g,c.customOrString));f>0;f--)d=d.replace(f,b[f-1]);return d}function evaluateConditionLogic(logic,returnValues){var result=eval(makeConditionLogicString(logic,returnValues,{customAndString:"&&",customOrString:"||"}));return result}function compareValues(a){var b=a.left,c=a.right,d=a.op,e=a.displaytype,f=defaultComparators[d]||defaultComparators["="],g=e===DT_DATE,h=e===DT_DATETIME,i=skuidTime.resolveDateKeyword,j=g?function(a){return skuidTime.getRealJSDateTimeFromLocal(skuidTime.parseSFDate(a))}:skuidTime.parseSFDateTime;if(g||h){if(typeof b===TYP_STRING&&(b=j(b)),!b)return!1;b=b.getTime(),typeof c===TYP_STRING&&(c=j(c)||c),typeof c===TYP_STRING?(c=i(c),$.isArray(c)?(c[0]=c[0].getTime(),c[1]=c[1].getTime(),f=dateRangeComparators[d]||dateRangeComparators["="]):(b=a.left,c=a.right)):c=c.getTime()}return f(b,c)}function areConditionsMet(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K=!0,L=!1,M=!1;for(b||(b={}),j=b.context,w=b.logicType||"and","custom"===w?(v=b.logic,c=[]):"or"===w?M=!0:L=!0,a instanceof Array||(a=[a]),s=0;s<a.length;s++){if(C=!0,f=a[s],H=f.sourceType||FIELD_VALUE,I=H===FIELD_VALUE,G=f.sourceProperty,B=f.operator,i=f.type||FIELD_VALUE,z=null,D=null,q=null,g=f.value,h=f.values,I||endsWith(H,"property")){if(f.fieldModel){if(z=skuid.$M(f.fieldModel),z&&z.data)if(b.row&&(b.model&&b.model.id===z.id||z.getRowById(z.getRowId(b.row))))D=b.row;else if(z.data.length)D=z.data[0],f.fieldRow=z.getRowId(D);else if(I){if(A=f.noSourceRowBehavior||"deactivate","deactivate"===A)continue;return"skipandrender"===A?!0:!1}}else b.row&&(D=b.row,b.model&&(z=b.model));"function"==typeof D&&(D=D()),z&&(q=z.getField(f.field))}if(I?o=z?z.getFieldValue(D,f.field,!0):getObjectProperty(D,f.field):"userinfo"===H?o=getUserInfoPropValue(f.sourceUserInfoType):"param"===H?o=skuid.page.params[f.sourceParam]:"snippet"===H?(F=skuid.snippet.get(f.sourceSnippet),o=F?F():!0,B="=",g=!0):endsWith(H,"property")&&G&&z&&(inArray(G,["hasRows","hasNoRows"])>-1?(o=!(!z.data||!z.data.length),g="hasRows"===G,B="=",i=FIELD_VALUE):"rowproperty"===H?D?(i||(i=FIELD_VALUE),g||g===!1||0===g||(g=!0),B||(B="="),"isCloned"===G?o=z.isRowUnsavedClone(D):"isNew"===G?o=z.isNewRow(D):"isSaved"===G?o=!z.isNewRow(D):"hasChanged"===G?o=z.isRowChanged(D):"isMarkedForDeletion"===G?o=z.isRowMarkedForDeletion(D):"rowid"===G&&(o=z.getRowId(D))):C=!1:("data.length"===G&&(g=parseInt(g,10)),o=getObjectProperty(z,G))),t=null===o||""===o||"undefined"==typeof o,t&&(o=""),"userinfo"===i?g=getUserInfoPropValue(f.userInfoType):"param"===i&&(g=skuid.page.params[g]),j)if(k=j.model,l=j.row,m=j.rows,x=f.mergeField,"contextrow"===i&&l)y=x?k.getFieldValue(l,x,!0):k.getRowId(l),isUndefined(y)||(g=y);else if("contextrows"===i&&m){for(J={},E=0;E<m.length;E++)n=m[E],y=x?k.getFieldValue(n,x,!0):k.getRowId(n),isUndefined(y)||y in J||(J[y]=1);h=Object.keys(J)}if("blank"===i)"!="===B?t&&(C=!1):t||(C=!1);else if(-1!==$.inArray(i,["multiple","contextrows"])){if(h&&h instanceof Array)if(u="includes"===B,r=h.length,"in"===B&&-1===inArray(o,h))C=!1;else if("not in"===B&&-1!==inArray(o,h))C=!1;else if("includes"===B||"excludes"===B)if(p=o.split(";"),p.length){for(d=0;d<h.length;d++)if(e=h[d],-1!==inArray(e,p)){if(!u){C=!1;break}}else if(u){C=!1;break}}else u&&r&&(C=!1)}else compareValues({left:o,op:B,right:g,displaytype:q&&q.displaytype})||(C=!1);if(L&&!C){K=!1;break}if(M){if(K=C,C)break}else v&&c.push(C)}return v&&c&&c.length&&(K=evaluateConditionLogic(v,c)),K}function doesRowMeetConditions(a,b,c,d){return areConditionsMet(b,{row:a,model:d,context:c})}function downloadBase64StringAsFile(a,b){var c=skuid.utils._ie;if(!(c&&10>c)){for(var d=atob(a),e=new Array(d.length),f=0;f<d.length;f++)e[f]=d.charCodeAt(f);var g=new Uint8Array(e),h=new Blob([g],{type:"octet/stream"});skuid.utils.saveAs(h,b)}}function filterRowsByConditions(a,b,c,d){if(a&&a.length){var e=b&&b.length;return e?a.filter(function(a){return doesRowMeetConditions(a,b,c,d)}):a}return[]}function filterByDataSourceAndEntity(a,b){return function(c){return c.attr("datasource")===a&&c.attr("x-entityname")===b}}function isMultiValueOperator(a){return a&&a.toLowerCase()in multiValueOperators}function isNumber(a){return!isNaN(a-0)}function isExactlyNaN(a){return a!==a}function adjustValueBasedOnQuotedness(a,b){var c=a;return void 0!==a&&(b?c=a.toString():"false"===a?c=!1:"true"===a?c=!0:isNumber(a)&&a!==!1&&a!==!0&&(c=-1!==a.toString().indexOf(".")?parseFloat(a):parseInt(a,10))),c}function getObjectProperty(a,b){if(a&&b){for(var c,d,e,f=getUnescapedParts(b),g=0;g<f.length;){if(c=f[g],a){if(a instanceof Array&&"length"!==c){e=null;try{d=parseInt(c,10)}catch(h){e=h}if((e||isNaN(c))&&a.length){a=a[0];continue}if(d>=0){a=a[d],g++;continue}}if(c in a){a=a[c],g++;continue}}return null}return a}return null}function hasObjectProperty(a,b){if(a&&b){for(var c=getUnescapedParts(b),d=0,e=!1;d<c.length;){if(!(a&&c[d]in a))return!1;a=a[c[d++]],e=!0}return e}return!1}function setObjectProperty(a,b,c){if(a&&b&&"undefined"!=typeof c){for(var d,e,f,g,h=getUnescapedParts(b),i=0,j=h.length-1;j>i;){d=h[i];{if(!a)break;if(a instanceof Array){f=null;try{e=parseInt(d,10)}catch(k){f=k}!f&&!isNaN(d)&&e>=0&&(a=a[e])}else a=d in a?a[d]:a[d]={};i++}}a&&(a instanceof Array?isNaN(h[j])?a.push(c):a[h[j]]=c:(g={},g[h[j]]=c,$.extend(a,g)))}}function removeScriptTags(a){return a&&isString(a)?a.replace(RSCRIPT,""):a}function decodeXML(a){return a.replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&")}function decodeHTML(a){return isString(a)?a&&$("<div/>").html(a).text():a}function encodeHTML(a){return isString(a)?a&&String(a).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):a}function isString(a){return typeof a===TYP_STRING||a instanceof String}function isFunction(a){return typeof a===TYP_FUNCTION}function isDate(a){return"[object Date]"===Object.prototype.toString.call(a)}function isUndefined(a){return typeof a===TYP_UNDEFINED}function isBlank(a){return 0===a||"boolean"==typeof a?!1:!a}function isObject(a){return null!==a&&typeof a===TYP_OBJECT}function nl2br(a){return a&&a.replace(/(\r\n|\n|\r)/gm,"<br>")}function lowercase(a){return a&&isString(a)?a.toLocaleLowerCase?a.toLocaleLowerCase():a.toLowerCase():a}function uppercase(a){return a&&isString(a)?a.toLocaleUpperCase?a.toLocaleUpperCase():a.toUpperCase():a}function stringComparison(a,b,c,d){return a&&b&&c?(d&&(b=lowercase(b),c=lowercase(c)),a(b,c)):!1}function endsWith(a,b,c){return stringComparison(function(a,b){return-1!==a.indexOf(b,a.length-b.length)},a,b,c)}function startsWith(a,b,c){return stringComparison(function(a,b){return 0===a.lastIndexOf(b,0)},a,b,c)}function contains(a,b,c){return stringComparison(function(a,b){return-1!==a.indexOf(b)},a,b,c)}function substringLeft(a,b){return a&&b&&typeof a===TYP_STRING&&a.length>b?a.substring(0,b):a}function substringRight(a,b){return a&&b&&typeof a===TYP_STRING&&a.length>b?a.substring(a.length-b,a.length):a}function doArraysIntersect(a,b){for(var c=0;c<a.length;c++)if(inArray(a[c],b)>-1)return!0}function escapeCSVCell(a){return"undefined"!=typeof a?(a.indexOf(QUOTE)>-1&&(a=a.replace(/"/g,ESCAPED_QUOTE)),$.each(CHARS_THAT_MUST_BE_QUOTED,function(b,c){return a.indexOf(c)>-1?(a=QUOTE+a+QUOTE,!1):void 0})):a="",a}function escapeSelector(a){return a&&a.replace(/\./g,"\\.")}function escapeSingleQuotes(a){return a&&a.replace(/'/g,"\\'")}function getBodyOfStaticResource(a){var b={},c={buffer:!1};return b[a]=[""],getBodiesOfZIPResourceFiles(b,c)}function getBodiesOfZIPResourceFiles(a,b){b||(b={});var c,d=$.Deferred(),e=!b||b.cache!==!1,f=function(a){var c={},e=b&&b.json===!0;$.each(a,function(a,b){var d=c[a]={};$.each(b,function(a,b){if(e)try{d[a]=JSON.parse(b)}catch(c){d[a]=b}else d[a]=b})}),d.resolve(c)};return e&&(_resourceBodiesCache||(_resourceBodiesCache={}),c={},$.each(a,function(a,b){var d,e=_resourceBodiesCache[a];return e?(d=c[a]={},$.each(b,function(a,b){return e[b]?void(d[b]=e[b]):(c=!1,!1)}),!!c):(c=!1,!1)})),c?f(c):skuid.remote().getBodiesOfZIPResourceFiles(JSON.stringify(a),function(a){if(a&&isString(a))try{a=JSON.parse(a)}catch(b){a=null}a&&!a.error?(e&&$.each(a,function(a,b){var c=_resourceBodiesCache[a];c||(c=_resourceBodiesCache[a]={}),$.each(b,function(a,b){c[a]=b})}),f(a)):d.reject(a&&a.error?a.error:a)},{escape:!1,buffer:b.buffer!==!1}),d.promise()}function getJSONBodiesOfZIPResourceFiles(a,b){return getBodiesOfZIPResourceFiles(a,$.extend({json:!0},b))}function getBodyOfZIPResourceFile(a,b,c,d){var e={},f=$.Deferred(),g=(b?b+"__":"")+a;return e[g]=[c],getBodiesOfZIPResourceFiles(e,d).done(function(a){if(a=a[g],a&&a[c]){if(a=a[c],d&&d.json===!0&&isString(a))try{a=JSON.parse(a)}catch(b){f.reject("Unable to parse body of file at path: "+c)}f.resolve(a)}else f.reject()}).fail(function(a){f.reject(a)}),f.promise()}function getJSONBodyOfZIPResourceFile(a,b,c,d){return getBodyOfZIPResourceFile(a,b,c,$.extend({json:!0},d))}function getNameField(a,b){var c=b&&b.dataSourceType||skuid.dataSource.getType("salesforce");return c&&c.getNameField({objectName:a,dataSource:b})}function getCache(a){var b=describeCache[a];return b?b:(b=sessionStorage(a),b?(b=JSON.parse(b),describeCache[a]=b,b):null)}function setCache(a,b){describeCache[a]=b,b&&!b.__isFailure&&sessionStorage(a,JSON.stringify(b))}function getMetadataForRecordTypes(a,b){if(isApiEnabled()){var c,d,e,f=b?!!b.length:!1,g=function(a){var b=getCache(a),c=!1,d=!1;return b?b.__isFailure?d=!0:(cacheNeedsRefresh(b)&&(c=!0),(!b.modstamp||b.modstamp<skuid.page.modstamp)&&(c=!0)):c=!0,{result:b,getNew:c,failed:d}},h=function(b){return"skuid_recordTypeMetadata_"+a+(b?"_"+b:"_all")},i=function(){n={__isFailure:!0},checkInCache(n),c.length>1?$.each(c,function(a,b){setCache(h(b),n)}):setCache(h(),n)},j=!1,k="b";if(f){if(d=[],e={recordTypeMappings:d},$.each(b,function(a,b){var e=h(b),f=g(e);return f.failed?(j=!0,!1):void(f.result&&!f.getNew?d.push(f.result):f.getNew&&(c||(c=[]),c.push(b)))}),j)return!1}else{var l=h(),m=g(l);if(m.failed)return!1;m.result&&!m.getNew?e=m.result:m.getNew&&(c=[])}if(c){var n,o;try{n=sforce.connection.describeLayout(a,k,c)}catch(p){return i(),!1}if(o=n&&n.recordTypeMappings?toArray(n.recordTypeMappings):!1,!o)return i(),!1;f?$.each(o,function(a,b){checkInCache(b),setCache(h(b.recordTypeId),b),d.push(b)}):(checkInCache(n),setCache(h(),n),e=n)}return e}return!1}function getAPIDescribeLayout(a){if(isApiEnabled()){var b="skuid_describeLayout_"+a,c=getCache(b),d=!1;if(c?(cacheNeedsRefresh(c)&&(d=!0),(!c.modstamp||c.modstamp<skuid.page.modstamp)&&(d=!0)):d=!0,d)try{c=sforce.connection.describeLayout(a),checkInCache(c),setCache(b,c)}catch(e){c=null}return c}return!1}function getAPIDescribeSObject(a){if(isApiEnabled()){var b="skuid_describeSObject_"+a,c=getCache(b),d=!1;if(c?(cacheNeedsRefresh(c)&&(d=!0),(!c.modstamp||c.modstamp<skuid.page.modstamp)&&(d=!0)):d=!0,d)try{c=sforce.connection.describeSObject(a),checkInCache(c),setCache(b,c)}catch(e){c=null}return c}return!1}function getPicklistEntriesValidForRecordTypes(a,b,c){var d,e,f=function(a){a.value in d||(d[a.value]=1,e.push(a))},g=!1,h=getMetadataForRecordTypes(a,c);if(h){var i=h.recordTypeMappings;if(i){var j=[];$.each(toArray(i),function(){inArray(this.recordTypeId,c)>-1&&j.push(this)}),j.length&&(e=[],d={},$.each(j,function(a,c){var d=c.picklistsForRecordType;d&&$.each(toArray(d),function(){return this.picklistName===b?(g||(g=!0),this.picklistValues instanceof Array?$.each(this.picklistValues,function(){f(this)}):f(this.picklistValues),!1):void 0})}))}}return g?e:null}function highlightSFTab(a){var b,c=$(".bodyDiv"),d=$("ul#tabBar"),e=d.children("li.zen-active, li.active"),f=e.find("span.zen-assistiveText, span.assistiveText").detach(),g=skuid.utils.sfTabs[a];e.removeClass("zen-active primaryPalette primaryPalette active").find("a").attr("title",function(a,b){return b.replace(" - Selected","")}),a&&g&&(b=d.children("li").has('a[href="'+a+'"]')),b.length&&(b.first().addClass("zen-active active primaryPalette").find("a").attr("title",function(a,b){return b+" - Selected"}).after(f),g.color&&(b.css({"background-color":"#"+g.color,"border-color":"#"+g.color}),c.css("border-top-color","#"+g.color)))}function ifElse(a,b,c){return a?b:c}function insertAtIndex(a,b,c){0===c?a.prepend(b):a.children().eq(c-1).after(b)}function loadJS(a,b){return skuid.load.js(a,b)}function loadRichTextApi(a){if(skuid.CKEDITOR)return void a(skuid.CKEDITOR);if(loadRichTextApi.loading)return void loadRichTextApi.loading.done(function(){a(skuid.CKEDITOR)});loadRichTextApi.loading=$.Deferred();var b,c=getStaticResourceUrl("CKEditor","skuid","ckeditor.js",getCacheTimestamp());loadJS(c,function(){b=skuid.CKEDITOR=window.CKEDITOR,loadRichTextApi.configured||(loadRichTextApi.configured=!0,b.disableAutoInline=!0),a(b),loadRichTextApi.loading.resolve()})}function loadCSS(a,b){return b.href=a,skuid.load.css(b,b.callback)}function getSearchOperatorForDisplayType(a,b,c){var d;return d="MULTIPICKLIST"===b?"="===a||"exact"===a?"=":"includes":b===DT_ID||"Id"===c||endsWith(c,".Id")?"=":"exact"===a?"=":a}function createSearchSubConditions(a,b,c,d,e){e||(e={});var f,g=e.delimiter||" ",h=e.searchOperator||"contains",i=1;return b.subConditions=[],b.subConditionLogic="",f=e.tokenize?c.split(g):[c],$.each(f,function(c){var e=this+"",g=[];return e?($.each(d,function(c,d){var f=d.searchOperator||h,j=a.getField?a.getField(d.id):d;j||(j=d);var k=j&&j.displaytype?j.displaytype:!1,l=k===DT_REFERENCE?getFieldReference(d.id,d):d.id,m={name:"__default_searchbox_subcondition",type:"fieldvalue",field:l,inactive:!1};if(m.operator=getSearchOperatorForDisplayType(f,k,l),"MULTIPICKLIST"===k)"="===m.operator||"exact"===m.operator?m.value=e:m.values=[e];else if(k===DT_ID||"Id"===l||endsWith(l,".Id")){if(!e||18!==e.length&&15!==e.length)return!0;m.value=e}else m.value=e;if(k===DT_REFERENCE){var n=a.getField(l);n&&n.targetObjects&&(m.fieldTargetObjects=n.targetObjects)}else d.targetObjects&&(m.fieldTargetObjects=d.targetObjects);b.subConditions.push(m),g.push(i),i++}),b.subConditionLogic+="("+g.join("OR")+")",void(c<f.length-1&&(b.subConditionLogic+="AND"))):!0}),b}function extractFieldsFromTemplate(a,b){b||(b={});var c={},d=getMergeApi(),e=function(a){if(a instanceof Array)for(var f=0;f<a.length;f++){var g=a[f];if("name"===g[0]||"&"===g[0]||"#"===g[0]||"^"===g[0]){var h,i=g[1];""!==i&&(h=d[i],b.ignoreGlobals&&(h||-1!==i.indexOf("$")||-1!==i.indexOf("Model."))||b.ignoreFunctions&&"function"==typeof h||(c[i]=1))}g.length>=5&&g[4]instanceof Array&&e(g[4])}};return e(skuid.Mustache.parse(a,["{{","}}"])),e(skuid.Mustache.parse(a,["{{{","}}}"])),Object.keys(c)}function modelLookup(a,b,c,d){var e,f,g,h,i=skuid.$M(a),j=getDisplayTypeOfEntity(d);return c||(c=null,d=null),i&&(e=c&&i.getField(c),e&&(f=e.displaytype),f&&j&&f!==j&&(f===DT_INTEGER?d=parseInt(d,10):f===DT_DOUBLE&&(d=parseFloat(d))),g=i.getRows(),c&&(g=g.filter(function(a){return i.getFieldValue(a,c,!0)===d}))),g&&g.length&&(h=i.getFieldValue(g[0],b,!0)),h}function getDisplayTypeOfEntity(a){if(null!==a)switch(typeof a){case TYP_BOOLEAN:return DT_BOOLEAN;case TYP_NUMBER:return a%1===0?DT_INTEGER:DT_DOUBLE;case TYP_OBJECT:if(a){if(a instanceof Array)return"ARRAY";if(a instanceof Date)return DT_DATETIME}return"OBJECT";case TYP_STRING:if(Date.parse(a)){if(-1!==a.indexOf("T"))return DT_DATETIME;if(3===a.split("-").length)return DT_DATE}else if(contains(a,"://"))return"URL";try{if(!isNaN(+a))return-1!==a.indexOf(".")?DT_DOUBLE:DT_INTEGER}catch(b){return"STRING"}}return"STRING"}function preparse(a){return[a.match(PREPARSE_REGEX)||[],a.split(PREPARSE_REGEX)]}function skuidField(){var a=this;return function(b,c){return(a.Model?skuid.$M(a.Model.id).getRowId(a):a.Id||"")+'">'+c(b)}}function urlEncode(){return function(a,b){return encodeURIComponent($("<div>").html(b(a)).text())}}function urlDecode(){return function(a,b){return decodeURIComponent($("<div>").html(b(a)).text())}}function escapeLiterals(){return function(a,b){return b(a).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/"/g,'\\"').replace(/'/g,"\\'")}}function getQueryParamsObject(a){if(!a)return{};"?"===a.substring(0,1)&&(a=a.substr(1));for(var b,c=a.split("&"),d={},e=0;e<c.length;++e)b=c[e].split("="),2==b.length&&(d[b[0]]=decodeURIComponent(b[1].replace(/\+/g," ")));return d}function _mergeInContext(a,b,c,d){c||(c={});var e=c.model,f=c.row,g=d||_defaultMergeSettings;return c&&(g.apiExtensions=c),f&&e?a(MERGE_ROW,b,g,e,f):e?a(MERGE_MODEL,b,g,e):a(MERGE_GLOBAL,b,g)}function mergeInContext(a,b,c){return _mergeInContext(merge,a,b,c)}function mergeAsData(a,b,c,d,e){return c||(c={}),c.asData=!0,b?getMergeResult(a,b,c,d,e):null}function mergeAsDataInContext(a,b){return _mergeInContext(mergeAsData,a,b)}function mergeAsTextInContext(a,b,c){return _mergeInContext(mergeAsText,a,b,c)}function mergeAsText(a,b,c,d,e){return c||(c={}),"undefined"==typeof c.nl2br&&(c.nl2br=!1),c.asText=!0,b?getMergeResult(a,b,c,d,e):""}function merge(a,b,c,d,e){var f=getMergeResult(a,b,c,d,e);return"object"==typeof f&&f.merges?f.merges:f}function getMergeApi(a){a||(a={});var b=a.mode||MERGE_GLOBAL,c=a.model,d=a.row,e=a.apiExtensions,f=getUserInfo(),g=skuid.page,h=window.sforce?sforce.connection:{},i=$.extend({},e,{$Label:skuid.label.map,$Model:skuid.model.map(),$Param:g.params,$Api:{Session_Id:h.sessionId,Organization_Id:f.organizationId,User_Id:f.userId,Partner_Server_Url:h.partnerServerUrl,Enterprise_Server_Url:h.enterpriseServerUrl,Partner_Server_Urls:h.partnerServerUrls,Enterprise_Server_Urls:h.enterpriseServerUrls},$User:f,$Site:{CurrentSiteUrl:g.currentSiteUrl,Prefix:g.sitePrefix},SkuidField:skuidField,urlEncode:urlEncode,encodeUrl:urlEncode,urlDecode:urlDecode,decodeUrl:urlDecode,escapeLiterals:escapeLiterals});if((b===MERGE_MODEL||b===MERGE_ROW)&&$.extend(i,{Model:{conditions:c.conditions,Data:c.data,data:c.data,Label:c.label,label:c.label,LabelPlural:c.labelPlural,labelPlural:c.labelPlural,fields:c.fields,Fields:c.fieldsMap,fieldsMap:c.fieldsMap,KeyPrefix:c.keyPrefix,keyPrefix:c.keyPrefix,
ObjectName:c.objectName,objectName:c.objectName,id:c.id,updateable:c.updateable,createable:c.createable,deleteable:c.deleteable}}),b===MERGE_ROW){var j=c.data.indexOf(d)+1,k=c.getRecordForRow(d),l=1===j,m=j===c.data.length,n={first:l,last:m,index:j};k&&(n.Record={id:k.getId(),index:j,isFirst:l,isLast:m,isNew:k.isNew(),isClone:k.isClone(),isMarkedForDeletion:k.isMoribund()}),$.extend(i,n,d)}return i}function getMergeResult(a,b,c,d,e){var f=arguments[0];if(null!==f&&typeof f===TYP_OBJECT&&(a=f.mode,b=f.template,c=f.options,d=f.model,e=f.row),e&&"function"==typeof e&&(e=e()),e||"row"!==a||(d&&d.data&&d.data.length?e=d.data[0]:a="model"),d||"model"!==a||(a="global"),!b&&""!==b)throw"Required argument 'template' was not provided.";if(!(a&&a.toLowerCase()in validModes))throw"Invalid merge mode. Valid modes are: global,model,row.";a=a.toLowerCase(),c||(c={});var g,h,i,j,k,l,m=d,n=m?m.fieldsMap:null,o=c.asText===!0,p=c.asData===!0,q=c.outputType,r=c.evaluateFormulas,s={fields:[]},t=preparse(b),u=t[0],v=t[1],w="",x=!1,y=!1,z=-1,A=v.length,B=c.apiExtensions;if(u.length)k=getMergeApi({mode:a,apiExtensions:B,model:m,row:e});else if(o||p)return b;if(p){if(1===u.length&&""===v.join("")){var C=extractFieldsFromTemplate(u[0]);if(1===C.length)return getObjectProperty(k,C[0])}o=!0}for(;A>0;){j=v[++z],A--,w+=j;var D=u[z];if(D){var E,F="{{{"===D.substring(0,3),G=D.substring(F?3:2,D.lastIndexOf(F?"}}}":"}}")),H=G.charAt(0),I=-1!==["#","/","^"].indexOf(H),J=I||-1!==["&","!"].indexOf(H),K="/"===H,L=I&&!K,M=startsWith(G,"$System")||startsWith(G,"$Date")||startsWith(G,"$Time"),N=startsWith(G,"$Model.");if(c.fieldPrefix&&(G=J?H+c.fieldPrefix+G.substr(1):c.fieldPrefix+G,D="{{"+G+"}}"),-1!==G.indexOf(".records")&&(L?(x=G.substring(1,G.indexOf(".records")),y=x.startsWith("$Model.")):K&&(x=!1,y=!1)),M){if(l=skuidTime.getLocalDateTime(new Date),"$System.Now"===G)G=F?skuidTime.getSFDateTime(l):skuidTime.makeFormattedLongDateTime(l);else if(E=G.split("."),1===E.length)G="$Date"===G?skuidTime.makeFormattedDateFromLocal(l):skuidTime.formatTime(getUserLocale().timeFormat,l);else switch(E[1]){case"Year":G=l.getFullYear();break;case"Month":G=l.getMonth()+1;break;case"Day":G=l.getDate();break;case"DayOfWeek":G=l.getDay();break;case"Hour":G=l.getHours();break;case"Minute":G=l.getMinutes()+1;break;case"Second":G=l.getSeconds();break;case"Millisecond":G=l.getMilliseconds();break;case"Period":G=skuidTime.getPeriod(l)}w+=G;continue}if(F||r||"&"===H||I&&-1===G.indexOf(".records")){if(r){var O,P,Q,R,S=v.length>=z?$.trim(v[z]):null,T=v.length>=z?$.trim(v[z+1]):null;S&&(S=S.substring(S.length-1,S.length)),T&&(T=T.substring(0,1)),R=$.inArray(T,_operators)>-1||$.inArray(S,_operators)>-1,contains(G,".data.")?(P=G.split("."),Q=P.splice(0,N?4:3),Q=N?skuid.$M(Q[1]):m,O=Q?Q.getField(P.join(".")):!1):O=m.getField(G);var U=O.displaytype,V=inArray(U,_numberTypes)>-1,W=U===DT_BOOLEAN,X=!W&&!V,Y=X,Z=!1;O&&"childRelationship"!==O.type&&(Z=startsWith(U,DT_DATE),Z&&R&&(Y=!1)),w+="{{#"+G+"}}"+(Y?'"{{#escapeLiterals}}':""),w+=R&&Z?"skuid.time.parseDate"+(U===DT_DATETIME?"Time":"")+'String("{{{'+G+'}}}")':"{{{"+G+"}}}",w+=(Y?'{{/escapeLiterals}}"':"")+"{{/"+G+"}}{{^"+G+"}}",w+=V||R&&Z?"0":W?"false":'""',w+="{{/"+G+"}}"}else w+="{{"+G+"}}";continue}if("$System.Now"===G){w+=skuidTime.makeFormattedLongDateTime(new Date);continue}var _,aa=G.match(/^[#\/]?\$Model\.([^.]+)\.data\.(\d+)\.(.+)/);if(null!==aa||y){aa?(g=skuid.$M(aa[1]),h=aa[2],i=aa[3]):i=G;var ba=g&&g.fieldsMap,ca=g&&g.getRows()[h];if(aa&&x&&(x=i.substring(0,i.indexOf(".records"))),_=wrapFieldMerge({isSectionChar:I,childRelName:x,fieldsMap:ba,fieldName:i,mode:MERGE_ROW,model:g,row:ca,token:D})){w+=_;continue}}else if(a!==MERGE_GLOBAL&&(_=wrapFieldMerge({isSectionChar:I,childRelName:x,fieldsMap:n,fieldName:G,mode:a,model:d,row:e,token:D}))){w+=_;continue}w+=D}}var da=c.asText===!0&&c.nl2br!==!0||c.allowHTML===!0||c.nl2br===!1||r,ea=skuid.Mustache.render(w,k),fa=da?ea:nl2br(ea),ga=!0,ha=!0;if(r){var ia;try{ia=skuid.formula.evaluate(fa)}catch(ja){return $(document.body).one("pageload",function(){skuid.component.getByType("skuidpage")[0].addProblem("Invalid syntax for field formula: "+b+". "+ja)}),null}return q===DT_INTEGER?parseInt(ia,10):q===DT_CURRENCY||q===DT_NUMBER?parseFloat(ia):q===DT_BOOLEAN?!!ia:q===DT_DATE?skuidTime.getSFDate(ia):q===DT_DATETIME?skuidTime.getSFDateTime(ia):ia}c&&c.createFields===!1&&(ha=!1,ga=!1),c&&c.registerFields===!1&&(ga=!1);var ka=$('<div class="nx-template">'+fa+"</div>");return ha&&$.each(ka.find(".nx-merge"),function(){var a,b=$(this),f=b.data("model"),g=b.data("field"),h=b.data("parentfield"),i=b.data("parentrowid"),j=f&&skuid.$M(f)||d,k=b.data("rowid");if(!k&&e&&(k=j.getRowId(e)),h&&i&&k){var l=j.dataMap[i][h].records;l&&$.each(l,function(b,c){return c.Id===k?(a=c,!1):void 0})}else j&&(a=j.dataMap[k]);if(g&&a){var m={fieldId:g,editable:!1,register:ga};h&&(m.fieldContext=h),c.noLink&&(m.noLink=!0);var n=new skuid.ui.Field(a,j,null,m);n.render(),s.fields.push(n),b.after(n.element),b.remove()}}),o?(ea=ka.text(),s.fields.length&&s.fields.forEach(function(a){a.unregister()}),ea):(s.merges=ka,s)}function wrapFieldMerge(a){var b,c,d,e=a.isSectionChar,f=a.childRelName,g=a.fieldsMap,h=a.fieldName,i=e&&f&&g&&f in g&&"childRelationship"===g[f].type,j=a.mode,k=a.model,l=a.row,m=a.token,n=null,o=k&&l?k.getRowId(l):null;return i?b=!1:f&&!e?(c=g[f],d=c.subFieldsMap,b=d&&h in d||"Id"===h):b=g&&h in g||"Id"===h,b&&(n='<span class="nx-merge'+(k?'" data-model="'+k.id:"")+'" data-field="'+h,n+=j===MERGE_ROW?f?'" data-parentfield="'+f+'" data-parentrowid="'+o+'" data-rowid="{{#SkuidField}}'+m+"{{/SkuidField}}</span>":(l&&o?'" data-rowid="'+o:"")+'">'+m+"</span>":(f?'" data-parentfield="'+f:"")+'" data-rowid="{{#SkuidField}}'+m+"{{/SkuidField}}</span>"),n}function listToMap(a,b){var c={},d=0;if(a){for(;d<a.length;d++)c[a[d][b]]=a[d];return c}}function outerHTML(a){return a.outerHTML||function(a){var b,c=document.createElement("div");return c.appendChild(a.cloneNode(!0)),b=c.innerHTML,c=null,b}(a)}function isPromise(a){return"function"==typeof a.then}function writeXmlToPageLayoutFields(a,b,c){var d,e=getLayoutFields();if(d=a?isString(a)?a:""+getXML(a):"",e.length){for(var f,g,h,i,j,k="",l=0,m=0,n=d.length,o=0,p=0,q={};p<e.length&&n>o;){if(f=e[p],g=b.getField(f).length,h=n>=l+g,k=d.substring(l,h?l+g:n),i=!1,h&&k.length&&""!==$.trim(k))for(j=k.length-1;j>-1;j--)if(""===$.trim(k[j]))i=!1;else{if(i){m=j+1;break}i=!0}else m=k.length;b.updateRow(c,f,k.substring(0,m)),l+=m,o+=g,p++}for(;p<e.length;)f=e[p],q[f]=null,p++;if(b.updateRow(c,q),n>o)throw"The total number of characters in this Page's Layout ("+n+") exceeds the maximum number of characters available for each Page ("+o+"). Please split out some of your content into other Pages, and then include these Pages within this Page."}}function getConversionRates(){return skuid.utils.conversionRates}function getRowCurrency(a){var b,c="CurrencyIsoCode",d=a.model,e=a.row,f=a.field,g=f.lastIndexOf("."),h=d.isAggregate,i=-1!==g?f.substring(0,g+1):"";return h?b=getConversionRates()[0].IsoCode:(b=d.getFieldValue(e,i+c,!0),b||(b=d.getFieldValue(e,c,!0))),b}function convertCurrency(a,b,c){var d,e=getConversionRates(),f=skuid.utils.conversionRatesMap;if(!e||!e.length)return a;if(d=e[0].IsoCode,f||(f=skuid.utils.conversionRatesMap={},$.each(e,function(a,b){f[b.IsoCode]=b})),f&&f[b]&&f[c]){var g,h=f[c];if(b!==d){var i=f[b];g=Math.pow(10,6),a=Math.round(a/i.ConversionRate*g)/g}return g=Math.pow(10,6),Math.round(a*h.ConversionRate*g)/g}}function _setAttachmentBaseUrl(a){a&&(_attachmentBaseUrl=a.substring(0,a.indexOf("?")))}function getUrlFromAttachmentId(a){return _attachmentBaseUrl+"?file="+a+"&retURL="+encodeURIComponent(location.pathname+location.search)}function makeXMLDoc(a){return $($.parseXML(a)).children().first()}function getXML(a){return a.xml?a.xml:(new XMLSerializer).serializeToString(a)}function size(a){if(isUndefined(a)||null===a)return 0;if($.isPlainObject(a)){var b,c=0;for(b in a)a.hasOwnProperty(b)&&c++;return c}return $.isArray(a)||isString(a)?a.length:isNumber(a)?a.toString().replace(/\D/g,"").length:0}function getUnescapedParts(a,b){b||(b=".");var c=["\\\\","\\"+b,b];return a.indexOf(".")<0?[a]:a.indexOf("\\")<0?a.split("."):_dig(a,c)}function _dig(a,b){var c,d=b[0],e=[],f=[],g=d&&d.substring(1);return 1===b.length?a.split(d):(a.split(d).forEach(function(a){e.push(_dig(a,b.slice(1,b.length)))}),c=e.length,$.each(e,function(a,b){if(b.length){var d=b.length;$.each(b,function(b,h){if(b===d-1&&a!==c-1){var i=h+g+e[a+1][0];for(e[a+1].shift();e[a+2]&&!e[a+1].length;)a++,i+=g+e[a+1][0],e[a+1].shift();f.push(i)}else f.push(h)})}}),f)}function escapeFieldName(a,b){return["\\",b||"."].reduce(function(a,b){return a.split(b).join("\\"+b)},a)}function getModelFieldIdChanges(a){function b(a,c,d,e){var f=d?d+".":d;return f+=escapeFieldName(a),$.isPlainObject(c)?void $.each(c,function(a,c){b(a,c,f,e)}):void(e[f]=c)}var c={};return $.each(a,function(a,d){b(a,d,"",c)}),c}function delayInputCallback(a,b,c){var d,e,f,g,h,i="change",j="skuid.ui.commitUserInput";c=c||{},f=c.delayTime||400,e=c.dataPropertyName,e?a.data(e,a.val()):d=a.val(),i+=_ie?9===_ie?" selectionchange keyup":9>_ie?" keyup":" keyup input":" keyup input",a.on(i,function(c){if(!a.prop("disabled")){var i=a.val(),k=function(){if(clearTimeout(g),h&&skuid.events.unsubscribe(h),e&&(d=a.data(e)),i===a.val()&&i!==d){var c=d;e?a.data(e,i):d=i,b&&b(i,c)}};clearTimeout(g),h&&skuid.events.unsubscribe(h),"change"===c.type?k():(h=skuid.events.subscribe(j,k),g=setTimeout(k,f))}})}function delayEventCallback(a){if(a&&a.eventType){var b,c=a.eventType,d=a.delay||400,e=a.callback,f=a.context||$(window);f.on(c,function(){clearTimeout(b),b=setTimeout(function(){e&&e()},d)})}}function registerPlugin(a,b){$.fn[a]=function(c){return b[c]?b[c].apply(this,Array.prototype.slice.call(arguments,1)):typeof c!==TYP_OBJECT&&c?void $.error("Method "+c+" does not exist on jQuery."+a):b.init.apply(this,arguments)}}function registerBlurHandler(a,b){var c=$("html"),d=function(e){$(e.target).closest(a).length||(c.off("click.skuidBlur",d),b())};c.on("click.skuidBlur",d)}function generateGUID(){return _GUID++}function rfc4122v4GUID(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"==a?b:3&b|8;return c.toString(16)})}function renameFileWhileKeepingExtension(a,b){var c=a.split("."),d=b||"";return d&&-1===d.indexOf(".")&&c.length>1?d+="."+c[c.length-1]:d||(d=a),d}function compressInt(a){var b="";do b=compressionArray[63&a]+b,a>>>=6;while(0!==a);return b}function generateUniqueId(a){a||(a={});var b=a.prefix,c=""+compressInt(Date.now());return c.substr(0,c.length-2),(b?b:"sk")+"-"+c+"-"+generateGUID()}function createMapForArray(a,b,c,d){return skuid.utils.isString(b)&&(b=[b]),a&&$.each(a,function(){var a=this;a[c]={},$.each(b,function(b,e){a[e]&&a[e].length&&$.each(a[e],function(b,e){var f;$.each(d instanceof Array?d:[d],function(b,d){f=e[d],f&&"undefined"!=f&&(a[c][f]=e)})})})}),a}function toArray(a){return a instanceof Array?a:[a]}function removeEventSubscriptions(a){a&&a.data("eventSubscriptions")&&($.each(a.data("eventSubscriptions"),function(){skuid.events.unsubscribe(this)}),a.removeData("eventSubscriptions"))}function conditionallyRender(a,b,c,d,e,f){return f||(f={}),conditionallyDo(function(){var b,g=d.data("rendered");return g?!1:(b=a(c,d,e,f),d.data("rendered",!0),b)},function(){var a,g=d.data("rendered");return g?(a=b(c,d,e,f),d.data("rendered",!1),a):!1},f.renderConditions?f.renderConditions:c&&c.children?c.children("renderconditions"):null,f.eventParentElement||d,f)}function conditionallyDo(a,b,c,d,e){function f(a){return areConditionsMet(a,{row:q,model:r,logicType:m,logic:n})}function g(c){c?e.event=c:"event"in e&&delete e.event,s||(s=!0,f(p)?a(e):b(e),s=!1)}function h(a){var b,c,d=r&&q&&r.id&&(!a.fieldModel||a.fieldModel===r.id),e=d?r.id:a.fieldModel?a.fieldModel:r?r.id:null,f=e?skuid.$M(e):null,g=d?q:a.fieldRow?a.fieldRow:q?q:null;return g&&isObject(g)&&f?b=f.getRowId(g):isFunction(g)?(c=g(),c&&(b=f.getRowId(c))):b=g,{modelId:e,rowId:b}}function i(){p.length=0,j={};var a,b,c=d.data("eventSubscriptions");if(t.length){if($.each(t,function(a,b){skuid.events.unsubscribe(b)}),c&&c.length)for(a=c.length-1;a>=0;a--){b=c[a];for(var e=0;e<t.length;e++)b===t[e]&&c.splice(a,1)}t.length=0}o&&o.each(function(){var a=new skuid.model.Condition($(this));p.push(a)}),p.length&&($.each(p,function(a,b){var c,d,e=h(b),f=e.modelId,g=e.rowId,i=b.field,k=b.sourceType;f&&(c=j[f],c||(c=j[f]={}),g?(d=c[g],d||(d=c[g]={})):"fieldvalue"===k&&(c.__conditionsNeedRows=!0),"hasChanged"===b.sourceProperty?"modelproperty"===k?c.__any=!0:d&&(d.__any=!0):d&&i&&(contains(i,".")&&(i=getReferenceFieldNameFromRelationshipField(i)),d[i]||(d[i]=1)))}),t.push(u("row.updated",function(a){var b,c=j[a.modelId],d=!1;c&&(b=c[a.rowId],b&&($.each(b,function(b){return hasObjectProperty(a.updates,b)?(d=!0,!1):void 0}),!d&&b.__any&&(d=!a.rowHadPriorChanges)),d||(c.__any?d=!a.modelHadPriorChanges:c.__conditionsNeedRows&&(delete c.__conditionsNeedRows,i(),d=!0))),d&&g({name:"row.updated",data:a})})),t.push(u("row.created",function(a){a.modelId in j&&g({name:"row.created",data:a})})),t.push(u("row.deleted",function(a){a.modelId in j&&g({name:"row.deleted",data:a})})),t.push(u("row.undeleted",function(a){a.modelId in j&&g({name:"row.undeleted",data:a})})),t.push(u("models.saved",function(a){var b=!1;$.each(j,function(c,d){if(c in a.models){b=!0;var e=a.insertResults;e&&e.length&&$.each(e,function(a,b){var c=b.oldId,e=b.id;b.success&&c&&e&&c in d&&(d[e]=d[c],delete d[c])})}}),b&&g({name:"models.saved",data:a})})),t.push(u("models.cancelled",function(a){$.each(j,function(b){return b in a.models?(g({name:"models.cancelled",data:a}),!1):void 0})})),t.push(u("models.loaded",function(a){$.each(j,function(b){return b in a.models?(g({name:"models.loaded",data:a}),!1):void 0})}))),t.length&&(c&&c.length?c.push.apply(c,t):d.data("eventSubscriptions",t))}e||(e={});var j,k=e.context||{},l=c&&c.attr,m=l?c.attr("logictype"):null,n=l?c.attr("logic"):null,o=l?c.children():null,p=[],q=e.row?e.row:k.row,r=e.model?e.model:k.model,s=!1,t=e.eventSubscriptions=[],u=skuid.events.subscribe;return i(),(p.length?f(p):!0)?a(e):b(e)}function getUserLocale(){return skuid.utils.userLocale}function getHourOptions(a,b,c){var d,e=getUserLocale().timeFormat,f=e.toLowerCase(),g=f.indexOf("a"),h=f.indexOf("h"),i=[],j=new Date;for(-1!=g&&(e=h>g?"a"+e.charAt(h):e.charAt(h)+"a"),a=a||0,b=b||24,d=a;b>=d;d++)j.setHours(d,0,0,0),i.push({value:d,label:skuidTime.formatTime(e,j),isSelected:c===d});return i}function niceExpand(a,b,c,d){c=c||0;var e,f,g,h=a.scrollParent(),i=h[0],j=i.scrollTop,k=i.clientHeight,l=j+k;if(!d&&$(b).is(":visible"))b.hide();else if(b.show(),e=a[0].offsetHeight,g=a[0].offsetTop-c,f=g+e,f>=l-1){var m=Math.min(f-k+18,g);m>j&&(_ie||h.animate({scrollTop:m},500))}}function scrollTo(a,b){b=b||0;var c=a.scrollParent(),d=c[0],e=d.clientHeight,f=a[0].offsetHeight,g=a[0].offsetTop+f-b,h=g-e+18;_ie||c.animate({scrollTop:h},500)}function addResizeHandler(a,b){delayEventCallback({eventType:"resize orientationchange",delay:b,callback:a})}function processStylesNode(a,b,c){b.element&&(b=b.element);var d={};c=c||{},c.removeInlineStyles&&b.removeAttr("style"),a.find("styleitem").each(function(){var a,b,e=$(this),f=e.attr("property"),g=e.attr("value"),h=e.attr("type"),i=e.attr("datasource"),j=skuid.dataSource.get(i),k="background-image";"background"===h&&"image"===e.attr("bgtype")?(!c.whitelist||c.whitelist&&-1!==c.whitelist.indexOf(k))&&(a=e.attr("bg-source"),b=j&&j.getImageSource(a),b&&b.getSrc&&b.getSrc({context:{},mergeSettings:{},dataSource:b.dataSource,xmlDef:e,prefix:"bg-"}).then(function(a){a?d[k]="url("+a+")":d[k]=""},function(){d[k]=""})):f&&(!c.whitelist||c.whitelist&&-1!==c.whitelist.indexOf(f))&&(d[f]=g||"")}),$.isEmptyObject(d)||b.css(d)}function getCSSSizeObj(a,b){var c;return b=b||{},a&&(c=a.toString().match(/^([\d]*\.?[\d]+)([^\d]*)$/)),c?(c[1]=c[1].indexOf(".")>=0?parseFloat(c[1]):parseInt(c[1],10),{original:c[0],number:c[1],unit:c[2]?c[2]:b.defaultUnit||"px"}):!1}function getCacheTimestamp(){return skuid.dev||!skuid.version?(new Date).getTime():skuid.version.date}function SelectItem(a){var b=this;if(b._GUID="SelectItem-"+generateGUID(),!a)throw"You must provide a configuration object when creating a new SelectItem.";if(!("value"in a))throw"Value is required.";$.extend(b,a),"label"in a||(b.label=b.value),b.isSelected||(b.isSelected=!1)}function SelectList(){this.items=[],this.itemsMap={},this.selectedIndex=this.selectedKey=!1}function KeyValueService(a){a||(a={});var b=this;b._get=a.get,b._set=a.set,b.key=b._createKey({id:a.id,type:a.type})}function TemplateComponent(a,b){var c=this;return c.element=a,c.options=b||{},c.editor=new skuid.ui.Editor(a,{showHeader:!1,showMessages:!1,customContentClass:"nx-editor-contents-template"}),b.model&&(c.model=b.model,c.editor.registerModel(c.model)),!c.conditions&&b.conditions&&(c.conditions=b.conditions),b.controllingComponent||(c.editor.handleSave=function(a){a&&c.render()},c.editor.handleCancel=function(){c.render()},c.editor.handleDataRefresh=function(){c.render()},c.editor.handleChange=function(){c.render()}),c.render(),c}function FileUploader(a){var b=a.uploadMethod,c=hasFileAPISupport&&isApiEnabled()&&getUserInfo().isAuthenticated;this.options=a,this.canUpload=!1,this.uploadMethod=a.uploadMethod,this.progressDiv=$("<div>").addClass("nx-file-progress"),this.dragAndDrop=c,b.supportsIframeUpload&&b.supportsIframeUpload()?this.canUpload=!0:c&&(this.canUpload=!0),c?this.iframe=$('<input style="display:none;" type="file" id="'+generateUniqueId()+'" multiple>'):this.iframe=$('<iframe style="display:none;" src="" frameborder="0">')}function _inIframe(){try{return window.self!==window.top}catch(a){return!0}}function _oniOS(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}function readFileAsBase64(a){var b=$.Deferred(),c=new FileReader;return c.onload=function(a){var c=a.target.result;c?b.resolve(c.substring(c.indexOf(",")+1)):b.reject("No Content Found")},c.onerror=function(a){b.reject(a)},c.readAsDataURL(a),b.promise()}function FileComponent(a,b){function c(){var a=isApiEnabled();return a||hasFileAPISupport?a&&!hasFileAPISupport?"Your browser does not support HTML5 file uploads.":!a&&hasFileAPISupport?"You do not have permission to upload files using the API.":void 0:"You either do not have permission to upload files using the API, or your browser does not support HTML5 file uploads."}var d,e=this,f=b.uploadMethod,g=b.autoRefreshModelsOnUpload!==!1,h=b.onUploadSuccessActions,i=b.onUploadFailureActions,j=b.row,k=b.model;if(a.data("object",e).addClass("nx-fileupload"),e.elem=a,e.options=b,e.buttonText=b.label||$L("upload"),e.cacheBuster=b.cacheBuster,e.uploadMethod=f,e.model=k,e.row=j,!f){if(d=k.getDataSource(),!d)return a.text(skuid.label.merge($L("error_invalid_file_upload_data_source"),k.id)),!1;if(f=d.getUploadMethod(b.storeAs),b.uploadMethod=e.uploadMethod=f,!f)return a.text(skuid.label.merge($L("error_could_not_find_upload_method"),b.storeAs)),!1}if(f.needsRecordContext&&!j)return a.text("No record found for file component."),!1;if(a.off("imageuploadcomplete imageuploadstarted mouseenter mouseleave click drop dragleave dragenter dragover"),e.canCreateOrUpdateImage=!0,f.needsRecordContext){if(!k.accessible)return a.text("You do not have permission to upload files to this record."),!1;if(k.isRowNew(j)){a.text("This record must be saved before you can upload files.");var l=skuid.events.subscribe("models.saved",function(c){k.id in c.models&&(k.isRowNew(j)||(a.empty(),new FileComponent(a,b),skuid.events.unsubscribe(l)))});return!1}}if(f.needsFieldContext){var m=e.fieldName=b.idField;if(!m)return a.text("No image field was specified."),!1;e.fieldValue=k.getFieldValue(j,m);var n=f.getFileIdField&&f.getFileIdField(e.fieldName),o=f.getFileNameField&&f.getFileNameField(e.fieldName),p=k.getField(e.fieldName);e.fileId=k.getFieldValue(j,n),e.fileName=k.getFieldValue(j,o),e.canCreateOrUpdateImage=k.accessible&&(e.options.editable||e.options.deleteable)&&(k.updateable&&p.editable||e.fieldValue)}if(e.canCreateOrUpdateImage&&(e.uploader=new FileUploader(b,f),e.uploader.canUpload?(e.uploader.attach(e),j&&k.getRowId(j)&&e.uploader.setSource({row:j,model:k},e.elem,e.fieldName)):a.text(c())),e.uploader&&e.uploader.canUpload||(e.canCreateOrUpdateImage=!1),e.status=$("<div>").addClass("nx-fileupload-status").css({"float":"none",display:"inline-block"}).appendTo(a).hide(),e.statustext=$("<div>").appendTo(e.status),"filename"===b.displayAs||f.forceStoreAsFileName){var q,r;if(e.canCreateOrUpdateImage!==!1&&e.uploader&&(r=$("<div>"),e.progressParentDiv=r,skuid.mobile?(r.addClass("sm-button").css("display","inline-block"),q=new skuid.mobile.ui.Button({icon:"fa-plus",label:e.buttonText,element:r,iconColor:"green"}),r.on("tap",function(){e.uploader.pickFile()})):r.text(e.buttonText).css("vertical-align","top").skooButton({icon:"sk-icon-upload"}).click(function(){e.uploader.pickFile()}),r.appendTo(a)),skuid.mobile||(e.status.addClass("nx-actionselect nx-status").css({"margin-left":"4px","word-break":"break-all"}),e.statustext.addClass("nx-actionselect-text")),k&&k.updateable&&b.deleteable){if(skuid.mobile){e.deletebutton=$('<div class="sm-button">');var s=new skuid.mobile.ui.Button({icon:"fa-minus",element:e.deletebutton,iconColor:"red"});e.deletebutton.on("tap",function(){s.startProcessing(),e.deleteImage()}),a.on("imagedeletecomplete",function(){s.stopProcessing()})}else e.deletebutton=$('<div class="sk-icon inline sk-icon-delete">').css({border:"3px solid #EEE","vertical-align":"top","background-color":"#EEE","margin-top":"3px",cursor:"pointer"}),e.deletebutton.click(function(){e.deleteImage()});e.deletebutton.css("display","inline-block").appendTo(a)}a.on("imageuploadstarted",function(a,b){e.dragAndDrop||(e.fileName=b.fileName),e.setStatus(skuid.label.merge($L("uploading"),b.fileName)),e.status.off("click.skuid"),q&&q.startProcessing()}),q&&a.on("imageuploadcomplete",function(){q.stopProcessing()})}else"image"===b.displayAs&&(e.progressParentDiv=e.elem,e.elem.children(".nx-edithover").remove(),e.elem.addClass("nx-attachmentimage"),e.defaultImageSrc=getDefaultImageUrl(e.options.defaultImage||"person"),e.image=$("<img>").addClass("nx-attachmentimage-image").css("max-width","100%").appendTo(a),e.canCreateOrUpdateImage!==!1&&e.elem.on("mouseenter",function(){e.options.editable&&e.uploader&&e.elem.append($("<div>").addClass("nx-edithover sk-icon inline sk-icon-edit").css({"background-color":"white",opacity:"0.8",border:"4px solid white"}).click(function(a){e.elem.find(".nx-error").remove(),e.uploader&&e.uploader.pickFile(),a.stopPropagation()})),e.fileId&&e.options.deleteable&&e.elem.append($("<div>").addClass("nx-edithover sk-icon inline sk-icon-delete").css({cursor:"pointer","background-color":"white",opacity:"0.8",border:"4px solid white",left:"4px"}).click(function(a){e.elem.find(".nx-error").remove(),e.deleteImage(),a.stopPropagation()}))}).on("mouseleave",function(){e.elem.find("div.nx-edithover").remove()}));a.on("imageuploadcomplete",function(a,c){var d,l,m=c&&(c.newFileId||c.newAttachmentId),n=new Date;e.cacheBuster=n.getTime(),m&&(c.newFileName&&(e.fileName=c.newFileName),e.fileId=m,e.fieldValue=c.newFieldValue||c.newImageId,e.syncModel(),e.draw()),c&&c.message?(d={text:c.message,hideIn:4},e.fileId&&e.fileName?"image"!==b.displayAs&&(d.complete=function(){e.setStatus(e.fileName)}):!e.fileId&&e.fileName&&(e.fileName=""),e.setStatus(d),i&&skuid.actions.runActionsNode(i,e,{model:k,row:j,$Error:{Message:c.message}})):(f.needsFieldContext||(e.setStatus({text:$L("upload_successful"),hideIn:2}),f.canRunPostUploadSnippet&&b.snippetName&&skuid.snippet.get(b.snippetName)(c)),f.relatedObjectName&&g&&(l=[],$.each(skuid.model.list(),function(){var a=this.objectName===f.relatedObjectName,b=this.dataSource===f.dataSource;a&&b&&(l.push(this),this.cancel())}),skuid.model.updateData(l)),h&&skuid.actions.runActionsNode(h,e,{model:k,row:j,apiExtensions:{$Result:{body:c&&c.body?c.body:{}}}}))}),e.draw()}var $=skuid.$,utils=skuid.utils=skuid.utils||{},skuidTime=skuid.time,$L=skuid.$L,inArray=$.inArray,toClass={}.toString,constants=skuid.constants,MERGE_CONTEXTS=constants.MERGE_CONTEXTS,MERGE_GLOBAL=MERGE_CONTEXTS.GLOBAL,MERGE_MODEL=MERGE_CONTEXTS.MODEL,MERGE_ROW=MERGE_CONTEXTS.ROW,FIELD_VALUE="fieldvalue",QUOTE='"',ESCAPED_QUOTE='""',CHARS_THAT_MUST_BE_QUOTED=[",",'"',"\n"],RSCRIPT=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,CONDITION_LOGIC_REGEX=/^([and|or|\d|\(|\)]+)$/,PREPARSE_REGEX=/\{{2,3}[^\{\}]+\}{2,3}/g,JS_TYPES=constants.JS_TYPES,TYP_BOOLEAN=JS_TYPES.BOOLEAN,TYP_NUMBER=JS_TYPES.NUMBER,TYP_STRING=JS_TYPES.STRING,TYP_OBJECT=JS_TYPES.OBJECT,TYP_FUNCTION=JS_TYPES.FUNCTION,TYP_UNDEFINED=JS_TYPES.UNDEFINED,DISPLAY_TYPES=constants.DISPLAY_TYPES,DT_BOOLEAN=DISPLAY_TYPES.BOOLEAN,DT_INTEGER=DISPLAY_TYPES.INTEGER,DT_NUMBER=DISPLAY_TYPES.NUMBER,DT_PERCENT=DISPLAY_TYPES.PERCENT,DT_CURRENCY=DISPLAY_TYPES.CURRENCY,DT_DOUBLE=DISPLAY_TYPES.DOUBLE,DT_DATE=DISPLAY_TYPES.DATE,DT_DATETIME=DISPLAY_TYPES.DATETIME,DT_ID=DISPLAY_TYPES.ID,DT_REFERENCE=DISPLAY_TYPES.REFERENCE,_canUseSessionStorage="nodata",hasFileAPISupport=window.File&&window.FileReader&&window.FileList&&window.Blob&&window.XMLHttpRequest,_sessionIdHash,_mergeSettings={createFields:!1,registerFields:!1},_defaultMergeSettings={createFields:!0,registerFields:!1},validModes={global:1,model:1,row:1},_numberTypes=[DT_INTEGER,DT_NUMBER,DT_PERCENT,DT_CURRENCY,DT_DOUBLE],_operators=["+","-","*","/"],userInfoCamelCasings={defaultcurrency:"defaultCurrency",firstname:"firstName",lastname:"lastName",organizationid:"organizationId",organizationname:"organizationName",profileid:"profileId",profilename:"profileName",sessionid:"sessionId",userid:"userId",username:"userName",userroleid:"userRoleId",usertype:"userType"},multiValueOperators={includes:1,excludes:1,"in":1,"not in":1},_resourceBodiesCache,describeCache={},getLayoutFields=function(){return skuid.platform.getLayoutFields()},_attachmentBaseUrl,_ie=function(){for(var a,b=3,c=document.createElement("div"),d=c.getElementsByTagName("i");c.innerHTML="<!--[if gt IE "+ ++b+"]><i></i><![endif]-->",d[0];);return 4>=b&&!window.ActiveXObject&&"ActiveXObject"in window?11:b>4?b:a}(),_GUID=2,compressionArray="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz_-".split(""),_currentDomain=window.location.host,_localVisualforceDomain,defaultComparators={"!=":function(a,b){return a!==b},"=":function(a,b){return a===b},gt:function(a,b){return a>b},lt:function(a,b){return b>a},gte:function(a,b){return a>=b},lte:function(a,b){return b>=a},"starts with":function(a,b){return startsWith(a,b,!0)},"does not start with":function(a,b){return!startsWith(a,b,!0)},"ends with":function(a,b){return endsWith(a,b,!0)},"does not end with":function(a,b){return!endsWith(a,b,!0)},contains:function(a,b){return contains(a,b,!0)},"does not contain":function(a,b){return!contains(a,b,!0)},includes:function(a,b){return-1!==inArray(b,a.split(";"))},excludes:function(a,b){return-1===inArray(b,a.split(";"))}},dateRangeComparators={"!=":function(a,b){return a<b[0]||a>=b[1]},"=":function(a,b){return a>=b[0]&&a<b[1]},gt:function(a,b){return a>=b[1]},lt:function(a,b){return a<b[0]},gte:function(a,b){return a>=b[0]},lte:function(a,b){return a<b[1]}};SelectItem.prototype.id=function(){return this._GUID},SelectList.prototype={getItems:function(){return this.items},addItem:function(a,b){var c,d=this,e=d.items;if(!a._GUID)throw"Invalid SelectItem.";if(-1!==inArray(a,e))throw"Item is already in the List.";a.isSelected&&d.selectedIndex!==!1&&(e[d.selectedIndex].isSelected=!1),b?e.unshift(a):e.push(a),c=b?0:e.length-1,a.isSelected?(d.selectedIndex=c,d.selectedKey=a.value):b&&d.selectedIndex!==!1&&d.selectedIndex++,d.itemsMap[a.value]=a,d.selectedIndex===!1&&(d.selectedIndex=c,d.selectedKey=a.value,a.isSelected=!0)},getSelected:function(){return this.selectedIndex===!1?null:this.items[this.selectedIndex]},addItems:function(a,b){var c=this;a&&$.each(a,function(){c.addItem(this,b)})},size:function(){return this.items?this.items.length:0},removeItemAtIndex:function(a){this._validateIndex(a);var b=this.items[a],c=b.isSelected;b&&(b.value&&b.value in this.itemsMap&&delete this.itemsMap[b.value],this.items.splice(a,1),b.isSelected=!1),c!==!1&&(this.selectedIndex=!1,this.selectedKey=!1,this.size()>0&&this.selectItemAtIndex(0))},getItemAtIndex:function(a){return this.items[a]},getItemById:function(a){return $.grep(this.items,function(){return this.id()===a})},selectItemAtIndex:function(a){if(this._validateIndex(a),this.selectedIndex!==!1){if(a===this.selectedIndex)return!0;this.items[this.selectedIndex].isSelected=!1}this.items[a].isSelected=!0,this.selectedIndex=a,this.selectedKey=this.items[a].value},unselectItemAtIndex:function(a){this._validateIndex(a),a===this.selectedIndex&&(this.items[a].isSelected=!1,this.selectedIndex=!1,this.selectedKey=!1)},_getItemIndex:function(a){var b;if(b=isNumber(a)?a:this.indexOf(a),-1!==b)return b;throw"Invalid Item"},selectItem:function(a){this.selectItemAtIndex(this._getItemIndex(a))},unselectItem:function(a){this.unselectItemAtIndex(this._getItemIndex(a))},removeItem:function(a){this.removeItemAtIndex(this._getItemIndex(a))},indexOf:function(a){return!(a instanceof SelectItem)&&a.value&&a.value in this.itemsMap&&(a=this.itemsMap[a.value]),a?inArray(a,this.items):-1},contains:function(a){return-1!==this.indexOf(a)},_validateIndex:function(a){if(a>=this.size()||0>a)throw"Invalid Index";return!0}},KeyValueService.prototype={_createKey:function(a){if(a&&a.id)switch(a.type){case"component":return"skuid.component("+a.id+")";case"model":return"skuid.model("+a.id+")";default:return typeof a.type===TYP_STRING?a.type+"("+a.id+")":a.id}},getSettings:function(){var a=this.key,b=this._get();return a&&b&&a in b?$.extend(!0,{},b[a]):{}},updateSettings:function(a,b){var c=this.key,d=this._get(),e=$.extend(!0,{},d[c],a);if(b&&b.removeNulls===!0){var f=200,g=0,h=function(a){var b,c;if(!(g>f)){c=[];for(b in a)c.push(b);$.each(c,function(b,c){"undefined"==typeof a[c]||null===a[c]?delete a[c]:typeof a[c]===TYP_OBJECT&&(g++,h(a[c]),g--)})}};h(e)}d[c]=e,this._set(d)}},TemplateComponent.prototype={unregister:function(){this.editor&&this.model&&this.editor.unregister()},render:function(){var a,b=this,c=b.model,d=b.options||{},e=d.templateBody||"",f=d.context,g=b.conditions,h={allowHTML:d.allowHTML,registerFields:!1};void 0!==f&&(h.apiExtensions=f),b.editor.contents.empty(),c?(a=g&&g.length?c.getRows(g,f):f&&c&&f.model&&f.row&&f.model===c?[f.row]:c.getRows(null,f),!d.isMultiRow&&a&&a.length?(a&&a.length>1&&d.onlyShowFirstRow===!0&&(a=[a[0]]),$.each(a,function(a,d){d&&b.editor.contents.append(c.mergeRow(d,e,h))})):b.editor.contents.append(c.mergeModel(e,h))):b.editor.contents.append(merge(MERGE_GLOBAL,e,h))}},FileUploader.prototype={setSource:function(a,b,c){var d=this.uploadMethod;if(!this.dragAndDrop){var e,f,g=this.options;g&&(e=this.options.description,f=this.options.filename),d&&d.getIframeSrc&&this.iframe.attr("src",d.getIframeSrc(a,b,c,e,f))}},pickFile:function(){this.dragAndDrop?this.iframe.click():this.iframe.contents().find("input[type=file]").click()},startProgress:function(){this.fileComponent.progressParentDiv&&this.fileComponent.progressParentDiv.append(this.progressDiv)},handleProgress:function(a){if(this.fileComponent.progressParentDiv){var b=Math.round(a.loaded/a.total*100);100>b&&this.progressDiv.css("width",b+"%")}},endProgress:function(){var a=this;this.fileComponent.progressParentDiv&&(this.progressDiv.css("width","100%"),setTimeout(function(){a.progressDiv.detach()},1e3))},uploadFile:function(a,b){var c=this,d=c.options,e=c.element,f=$.Deferred(),g=d.uploadMethod.dataSource,h=function(a){c.startProgress(),e.trigger("imageuploadstarted",a)},i=function(a){c.endProgress(),e.trigger("imageuploadcomplete",a),a&&a.message?f.reject(a.message):f.resolve();
},j=function(a){c.handleProgress(a)};return g.authenticate().then(function(){d.uploadMethod.upload(a,b,d,h,i,j)},function(a){i({message:a})}),f.promise()},attach:function(a){var b,c,d,e,f=this,g=a.elem,h=f.options,i="nx-file-dropping",j=!1;if(f.iframe.appendTo(g),f.element=g,f.fileComponent=a,f.dragAndDrop){b=$(document.body),c=$("<div>").addClass("nx-file-droppable").text(a.buttonText),d=function(b){b.preventDefault();var c=b.originalEvent.dataTransfer?b.originalEvent.dataTransfer.files:b.target.files;if(!c||!c.length)return!1;var d;$.each(c,function(b,c){d=d?d.then(function(){return f.uploadFile(c,a)}):f.uploadFile(c,a)})};var k=function(){e&&clearTimeout(e),e=setTimeout(function(){c.detach(),j=!1,c.removeClass(i)},100)};f.iframe.on("click",function(a){this.value=null,a.stopPropagation()}).on("change",d),g.on("dragover",function(a){a.preventDefault(),a.originalEvent.dataTransfer.dropEffect="copy"}).on("dragenter",function(a){a.stopPropagation(),a.preventDefault(),k(),c.addClass(i),j||(g.append(c),j=!0)}).on("dragleave",function(a){a.stopPropagation(),a.preventDefault(),c.removeClass(i)}).on("drop",d),b.on("dragenter."+h._GUID,function(a){a.preventDefault(),j||(g.append(c),j=!0),k()}).on("dragover."+h._GUID,function(a){a.preventDefault(),k()}).on("drop."+h._GUID,function(a){return a.preventDefault(),a.stopPropagation(),c.detach(),c.removeClass(i),!1})}},unregister:function(a){var b=a.options._GUID;$(document.body).off("dragenter."+b+" dragleave."+b+" drop."+b)}},FileComponent.prototype={draw:function(){var a=this,b=this.uploadMethod,c=a.cacheBuster?"&cachebuster="+a.cacheBuster:"",d=function(){if(a.fileId){var d=$("<img>").css({"max-height":"600px","max-width":"800px"}),e=a.image&&a.image.attr("src");e?d.attr("src",e):b.getSrc&&b.getSrc({context:{id:a.fileId},paramString:c,dataSource:b.dataSource}).then(function(a){d.attr("src",a)},function(){d.attr("src","")}),d.load(function(){var b=$("<div>").attr("title",encodeHTML(a.fileName)).append(d).dialog({close:function(){$(this).remove()},modal:!0,width:"auto",resizable:!1,open:function(){$(".ui-widget-overlay").on("click",function(){b.dialog("close")})},dialogClass:"nx-imageview"})})}};"filename"===a.options.displayAs||b.forceStoreAsFileName?a.fileId&&a.fileName&&a.fieldName?(a.setStatus(a.fileName),a.status.off("click.skuid").on("click.skuid",function(){d()}),a.options.deleteable&&a.deletebutton&&a.deletebutton.show()):(a.deletebutton&&a.deletebutton.hide(),a.status.hide()):"image"===a.options.displayAs&&(a.fileId?b.getSrc&&b.getSrc({context:{id:a.fileId},paramString:c,dataSource:b.dataSource}).then(function(b){a.image.attr("src",b)},function(){a.image.attr("src","")}):a.image.attr("src",a.defaultImageSrc),a.elem.off("click.skuid").on("click.skuid",function(){d()}),a.status&&a.status.hide())},setStatus:function(a){var b,c,d,e=this,f=e.status,g=e.statustext;a&&(isString(a)?b=a:(b=a.text,c=a.hideIn,d=a.complete)),f&&g&&(e.statusTimeout&&clearTimeout(e.statusTimeout),skuid.ui.setStatus(f,g,b),c>=0&&(e.statusTimeout=setTimeout(function(){f.animate({opacity:0},{duration:2e3,complete:d||function(){f.hide()}})},1e3*c)))},deleteImage:function(){var a=this,b=a.uploadMethod,c=b.dataSource,d=function(){a.setStatus($L("deleting"))},e=function(b){var c;b&&b.message?a.setStatus({text:b.message,hideIn:2,complete:function(){a.draw()}}):(c=a.fileId,a.fileId=null,a.fileName=null,a.fieldValue=null,a.elem.trigger("imagedeletecomplete",{oldFileId:c}),a.syncModel(),a.draw())};c.authenticate().then(function(){b.deleteFile({row:a.row,model:a.model},a.fieldName,d,e)},function(a){e({message:a})})},unregister:function(){this.elem&&this.elem.remove&&this.elem.remove(),this.uploader&&this.uploader.unregister(this)},syncModel:function(){var a=this,b={},c=a.model,d=a.row,e={},f=a.uploadMethod,g=f.getFileIdField&&f.getFileIdField(a.fieldName),h=f.getFileNameField&&f.getFileNameField(a.fieldName);if(b[c.getRowId(d)]=e,a.fieldName){(a.fieldValue!==d[a.fieldName]||a.fileId!==c.getFieldValue(d,g,!0))&&(e[a.fieldName]=a.fieldValue);var i={};setObjectProperty(i,g,a.fileId),setObjectProperty(i,h,a.fileName),a.fieldValue?($.each(i,function(a,b){e[a]=b}),$.extend(d,e)):(delete d[a.fieldName],$.each(i,function(a){delete d[a]})),size(e)&&c.notifyFieldsOfChange(b,{initiatorId:a._GUID})}}},$.extend(utils,{addResizeHandler:addResizeHandler,adjustValueBasedOnQuotedness:adjustValueBasedOnQuotedness,areConditionsMet:areConditionsMet,calculateReferenceMerges:calculateReferenceMerges,calculateReferenceText:calculateReferenceText,canUseSessionStorage:canUseSessionStorage,capitalizeFirst:capitalizeFirst,combineStrings:combineStrings,combineUrls:combineUrls,conditionallyDo:conditionallyDo,conditionallyRender:conditionallyRender,contains:contains,convertCurrency:convertCurrency,createMapForArray:createMapForArray,createPopupFromPopupXML:createPopupFromPopupXML,createPopupFromAction:createPopupFromAction,createSearchSubConditions:createSearchSubConditions,decodeHTML:decodeHTML,decodeXML:decodeXML,delayEventCallback:delayEventCallback,delayInputCallback:delayInputCallback,doArraysIntersect:doArraysIntersect,doesRowMeetConditions:doesRowMeetConditions,downloadBase64StringAsFile:downloadBase64StringAsFile,encodeHTML:encodeHTML,endsWith:endsWith,escapeCSVCell:escapeCSVCell,escapeFieldName:escapeFieldName,escapeSelector:escapeSelector,escapeSingleQuotes:escapeSingleQuotes,extractFieldsFromTemplate:extractFieldsFromTemplate,filterRowsByConditions:filterRowsByConditions,filterByDataSourceAndEntity:filterByDataSourceAndEntity,generateGUID:generateGUID,rfc4122v4GUID:rfc4122v4GUID,renameFileWhileKeepingExtension:renameFileWhileKeepingExtension,generateUniqueId:generateUniqueId,getAPIDescribeSObject:getAPIDescribeSObject,getAPIDescribeLayout:getAPIDescribeLayout,getBodiesOfZIPResourceFiles:getBodiesOfZIPResourceFiles,getBodyOfStaticResource:getBodyOfStaticResource,getBodyOfZIPResourceFile:getBodyOfZIPResourceFile,getCacheTimestamp:getCacheTimestamp,getCSSSizeObj:getCSSSizeObj,getContextToUse:getContextToUse,getCurrentDomain:getCurrentDomain,getDefaultImageUrl:getDefaultImageUrl,getDisplayTypeOfEntity:getDisplayTypeOfEntity,getFieldReference:getFieldReference,getFieldRelationshipName:getFieldRelationshipName,getHourOptions:getHourOptions,getJSONBodiesOfZIPResourceFiles:getJSONBodiesOfZIPResourceFiles,getJSONBodyOfZIPResourceFile:getJSONBodyOfZIPResourceFile,getLayoutFields:getLayoutFields,getLocalVisualforceDomain:getLocalVisualforceDomain,getMergeApi:getMergeApi,getMergeResult:getMergeResult,getMetadataForRecordTypes:getMetadataForRecordTypes,getModelFieldIdChanges:getModelFieldIdChanges,getNameField:getNameField,getObjectProperty:getObjectProperty,getPicklistEntriesValidForRecordTypes:getPicklistEntriesValidForRecordTypes,getQueryParamsObject:getQueryParamsObject,getReferenceFieldNameFromRelationshipField:getReferenceFieldNameFromRelationshipField,getReferenceFieldRelationshipName:getReferenceFieldRelationshipName,getRowCurrency:getRowCurrency,getSafeRelativeUrl:getSafeRelativeUrl,getSearchOperatorForDisplayType:getSearchOperatorForDisplayType,getStaticResourceUrl:getStaticResourceUrl,getTargetObject:getTargetObject,getUnescapedParts:getUnescapedParts,getUrlFromAttachmentId:getUrlFromAttachmentId,getUserInfoPropValue:getUserInfoPropValue,getXML:getXML,hasObjectProperty:hasObjectProperty,highlightSFTab:highlightSFTab,ifElse:ifElse,insertAtIndex:insertAtIndex,isApiEnabled:isApiEnabled,isBlank:isBlank,isDate:isDate,isExactlyNaN:isExactlyNaN,isFunction:isFunction,isMultiValueOperator:isMultiValueOperator,isNumber:isNumber,isPromise:isPromise,isString:isString,isUndefined:isUndefined,isObject:isObject,listToMap:listToMap,loadJS:loadJS,loadRichTextApi:loadRichTextApi,loadCSS:loadCSS,lowercase:lowercase,makeConditionLogicString:makeConditionLogicString,makeXMLDoc:makeXMLDoc,merge:merge,mergeAsDataInContext:mergeAsDataInContext,mergeAsTextInContext:mergeAsTextInContext,mergeAsText:mergeAsText,mergeInContext:mergeInContext,mergeNodeProperty:mergeNodeProperty,modelLookup:modelLookup,niceExpand:niceExpand,nl2br:nl2br,outerHTML:outerHTML,processStylesNode:processStylesNode,readFileAsBase64:readFileAsBase64,redirect:redirect,registerBlurHandler:registerBlurHandler,registerPlugin:registerPlugin,removeEventSubscriptions:removeEventSubscriptions,removeScriptTags:removeScriptTags,scrollTo:scrollTo,sessionStorage:sessionStorage,setObjectProperty:setObjectProperty,size:size,startsWith:startsWith,substringLeft:substringLeft,substringRight:substringRight,toArray:toArray,toClass:toClass,uppercase:uppercase,writeXmlToPageLayoutFields:writeXmlToPageLayoutFields,_ie:_ie,_inIframe:_inIframe,_oniOS:_oniOS,_setAttachmentBaseUrl:_setAttachmentBaseUrl,_setCurrentDomain:_setCurrentDomain,FileUploader:FileUploader,FileComponent:FileComponent,KeyValueService:KeyValueService,SelectList:SelectList,SelectItem:SelectItem,TemplateComponent:TemplateComponent})}(window.skuid),function(a,b){function c(b){var c,d,e,f=i({},h.params);return b&&(a.utils.isString(b)?(c=b,d=a.$C(c)):(d=b,c=d.id())),d&&(e=d.getPageParameters()),e||(e=h._parametersByPage[c]),i(f,e),f}function d(){var b=[],c=a.component.getByType("skuidpage"),d={};return c&&c.length&&c.forEach(function(c){var e=c.problems;e&&e.length&&e.forEach(function(c){var e;c&&(e=a.utils.isString(c)?c:c.message),e&&!e[d]&&(d[e],b.push(c))})}),b}function e(c){var e=d(),f=h.problemsWrapper,g=c?c.justUpdateWrapper===!0:!1;f&&(g||h.problemsContainer.empty(),e.length?(g||b.each(e,function(){this.isDisplayed=!1,h.displayProblem(this)}),f.css("display","block"),h.problemsIndicator.text(a.label.merge(a.$L("skuid_page_problems"),e.length)).append(b("<div>").append(b('<div class="ui-icon ui-icon-close">')).addClass("nx-page-problems-dismiss").on("click",function(){f.hide()}))):f.css("display","none"))}function f(){h.rebuildPageProblems({justUpdateWrapper:!0})}function g(a){var c,d="_uniqueProblemMessages",e=this[d],f=a.message;return e||(e=this[d]={}),!h.problemsContainer||a.isDisplayed||e[f]?!1:(c=b("<div>").addClass("nx-problem").appendTo(h.problemsContainer),c.text(c.index()-0+1+". "+a.message),a.isDisplayed=!0,e[f]=a,!0)}var h=a.page={_parametersByPage:{}},i=b.extend;i(h,{getAllProblems:d,getParameters:c,displayProblem:g,updateProblemsWrapper:f,rebuildPageProblems:e,params:a.utils.getQueryParamsObject(window.location.search)})}(skuid,skuid.$),function(){var a=skuid.$,b=skuid.utils,c="sk-pagepanel",d="nx-page-withpanels",e=function(a){return" "+c+"-"+a},f=function(a){return" "+d+"-"+a};skuid.componentType.register("panel",function(g,h,i){var j=i.context,k="true"===h.attr("closeonpageclick"),l=a('<div class="nx-page-clickcatcher">'),m=h.attr("uniqueid"),n=h.children("interactions").first(),o=i.origin=h.attr("origin")||"left",p=i.getParentPage(),q=i.behavior=h.attr("behavior")||"overlay",r="left"===i.origin||"right"===i.origin,s=!r;i.size=h.attr("size")||"270px",i._open=!1,g.addClass(c+e(q)+e(o));var t={};t["overflow-"+(s?"x":"y")]=b._oniOS()?"scroll":"auto",t[s?"height":"width"]=i.size,g.css(t),i.createChildComponents(h.find("components").first().children(),g,j),n.length&&skuid.interactions.enableInteractions(g,{interactionsDef:n,component:i,context:j}),i.toggle=function(c){if(c!==i._open){var g,h=a("body"),j=i.behavior,m=p.getContentElement(),n=p.getElement(),q=i.element,t=q[s?"outerHeight":"outerWidth"](!0)+"px",u="reveal"===j?m:n,v="right"===i.origin||"bottom"===i.origin?"-":"",w=s?"0,"+v+t+",0":v+t+",0,0";c=void 0!==c?c:!i._open,q[c?"addClass":"removeClass"](e("open")),("overlay"===j||"reveal"===j)&&(q.addClass(e("animatable")),q.one("transitionend.skuid",function(){q.removeClass(e("animatable"))})),("reveal"===j||"push"===j)&&(c?(a.each(p.panel.getAll(),function(a,b){b.id()!==i.id()&&b.close()}),(r||"push"===j)&&(g=h.scrollTop(),u.one("transitionend.skuid",function(){m.scrollTop(g)}))):g=m.scrollTop(),m.toggleClass(f("pushed"),c),c?(n.addClass(d+" "+f(o)),m.scrollTop(g),b._oniOS()&&m.css("overflow","scroll"),q.css("opacity",""),r?h.css("overflow-x","hidden"):(m["top"===i.origin?"append":"prepend"]('<div class="sk-slidingpanelhelper" style="height: '+t+'">'),"top"!==i.origin&&t&&m.scrollTop(m.scrollTop()+parseFloat(t)))):((r||"push"===j)&&(h.scrollTop(g),r||q.css({top:g+"px","z-index":1})),u.one("transitionend.skuid",function(){if(!i._open){q.css({opacity:0,top:"","z-index":""});var c=!1;a.each(p.panel.getAll(),function(a,b){return c||"overlay"===b.behavior||"reveal"===b.behavior}),c||(n.removeClass(d+" "+f(o)),b._oniOS()&&m.css("overflow",""))}}),r?u.one("transitionend.skuid",function(){i._open||h.css("overflow-x","")}):a(".sk-slidingpanelhelper").remove()),c?(u.css("transform","translate3d("+w+")"),q.css("z-index","")):(u.css("transform",""),u.one("transitionend.skuid",function(){i._open||q.css("z-index","-100")}))),c?k&&(m.append(l),u.one("transitionend.skuid",function(){i._open&&l.one("click.skuid",function(){l.remove(),i.close()})})):l.remove(),i._open=c}},i.close=function(){i.toggle(!1)},i.open=function(){i.toggle(!0)},i.isOpen=function(){return i._open},i.unregister=function(){skuid.component.Component.prototype.unregister.call(i),p.panel._detachById(m)},i.updateContext=function(a){var b=h.children("interactions").first();g.empty(),i.unregisterChildComponents(),i.createChildComponents(h.find("components").first().children(),g,a),b.length&&(skuid.interactions.disableInteractions(g),skuid.interactions.enableInteractions(g,{interactionsDef:b,component:i,context:a})),i.context=a},setTimeout(function(){i.toggle(!0)},0)})}(skuid),function(a,b){function c(c){c||(c={});var d,e,f,g,h,i=c.type,j=c.url,k=c.data,l=!k&&c.cache===!0,m=function(a){c.success&&c.success(a)},n=function(a,b,d){if(c.error)c.error(a,b,d);else{var e=a.responseJSON[0];window.alert("There was an error performing this "+i+" request:\n\nError code: "+e.errorCode+"\nMessage: "+e.message+"\n")}};if(!i)throw o;if(!j)throw p;return e=i+" "+j,(f=e in u)?l?(g=u[e],d=b.Deferred(),d.done(m).resolve(g),d.promise()):void delete u[e]:!k&&e in t?t[e].done(m).fail(n):(d={type:i,url:a.utils.getSafeRelativeUrl(s+r+j),dataType:"json",headers:{"Content-Type":"application/json",Authorization:"Bearer "+a.utils.userInfo.sessionId},success:m,error:n},c.crossDomain&&(d.crossDomain=!0),k&&(d.data=JSON.stringify(k)),h=b.ajax(d),k||(t[e]=h,h.always(function(){delete t[e]}),l&&h.done(function(a){u[e]=a})),h)}function d(a){a||(a={});var b,c=a.type,d=a.url,e=a.data;if(!c)throw o;if(!d)throw p;return b=c+" "+d,!e&&b in u?u[b]:void 0}function e(a,b){this._type=a,"object"==typeof b&&m(this,b)}function f(a){a||(a={});var d=this,e=d.getFields(),f=d.getType(),g={},h=a.useToolingApi||"ApexClass"===f;return e&&b.each(e,function(a,b){var c=d[a];if(b.required&&("undefined"==typeof c||""===c)){if(!b.defaultValue)throw q+a;c=d[a]=b.defaultValue}g[a]=c}),c({type:"POST",url:"/"+(h?"tooling/":"")+"sobjects/"+f,data:g,success:function(b){b.success&&(d.Id=b.id,a.success&&a.success(b))},error:function(b,c,d){if(a.error)a.error(b,c,d);else{var e=b.responseJSON;e&&e.length&&window.alert("Unable to create new "+f+" due to error:\n\nError code: "+e[0].errorCode+"\nMessage: "+e[0].message)}}})}function g(a){a||(a={});var d=this,e=d.getFields(),f=d.getType(),g={};return e&&b.each(e,function(a){var b=d[a];"undefined"!=typeof b&&(g[a]=b)}),c({type:"PATCH",url:"/"+(a.useToolingApi?"tooling/":"")+"sobjects/"+f+"/"+d.Id,data:g,success:a.success,error:function(b,c,e){if(a.error)a.error(b,c,e);else{var g=b.responseJSON;g&&g.length&&window.alert("Unable to update "+f+" with Id "+d.Id+" due to error:\n\nError code: "+g[0].errorCode+"\nMessage: "+g[0].message)}}})}function h(a){a||(a={});var b=this,d=b.getType(),e=a.useToolingApi||"ApexClass"===d;if(!b.Id)throw q+"Id";return c({type:"DELETE",url:"/"+(e?"tooling/":"")+"sobjects/"+d+"/"+b.Id,success:a.success,error:a.error})}function i(a,b){return b||(b={}),c({type:"GET",url:"/"+(b.useToolingApi?"tooling/":"")+"query/?q="+encodeURIComponent(a),success:b.success,error:function(a,c,d){if(b.error)b.error(a,c,d);else{var e=a.responseJSON;e&&e.length&&window.alert("There was an error performing this query: "+e[0].message)}}})}function j(a){return window.btoa(window.unescape(encodeURIComponent(a)))}var k=a.sfdc={},l=k.api={},m=b.extend,n="36.0",o='Parameter "type" expected, e.g. "POST", "GET"',p='Parameter "url" expected, e.g. "/sobjects/Account", "/query/?q=select+Name+from+Account"',q="Missing object property: ",r=l.version=n,s="/services/data/v",t={},u={},v={StaticResource:{fields:{Name:{required:!0},Description:{required:!1},Body:{required:!0},CacheControl:{required:!0,defaultValue:"Public"},ContentType:{required:!0,defaultValue:"text/plain"}}},ApexPage:{fields:{Name:{required:!0},Markup:{required:!0},MasterLabel:{required:!0},ApiVersion:{required:!0,defaultValue:l.version}}},ApexClass:{fields:{Name:{required:!0},Body:{required:!0},ApiVersion:{required:!0,defaultValue:l.version}}}};e.prototype={insert:function(){return f.apply(this,arguments)},update:function(){return g.apply(this,arguments)},"delete":function(){return h.apply(this,arguments)},get:function(a){return this[a]},set:function(b,c){a.utils.isString(b)?this[b]=c:m(this,b)},getType:function(){return this._type},getFields:function(){var a=v[this.getType()];return a?a.fields:null},getField:function(a){var b=this.getFields();return b?b[a]:null}},m(l,{getCachedResult:d,makeRequest:c,query:i,escapeMetadataBody:j,SObject:e}),k.search=function(){var b=a.dataSource.get(a.constants.SALESFORCE);return b?b.search(arguments):void 0}}(skuid,skuid.$),function(a,b){var c=a.component,d=c.Component,e=c.createChildComponents,f=c.getById;a.componentType.register("skuidpage",{onlyRenderOnce:!0,render:function(c,g,h){function i(){b.each(G,function(a,b){b._createDefaultRowIfNeeded(),b._cloneRowsIfNeeded(h)}),b.each(F,function(a,b){delete b.realToFakeIdMap}),a.webfonts.haveFontsLoaded()===!0?E():(l||D(),a.events.subscribeOnce("ui.fontsloaded",E)),a.utils._oniOS()&&a.utils._inIframe()&&b(function(){b("body").removeClass("sk-scrollfix-ios-body"),b("html").removeClass("sk-scrollfix-ios-html"),b("body").addClass("sk-scrollfix-ios-body"),b("html").addClass("sk-scrollfix-ios-html")}),"Theme4d"===a.platform.get("SFUITheme")&&b("body").addClass("sk-body-nopadding")}var j,k,l,m=a?a.page:null,n="preventUnloadIfUnsavedChanges",o=h[n]="yes"===g.attr("unsavedchangeswarning"),p=h.problems=[],q=h._pageRecord?h._pageRecord.Name:"",r=a.region.get("__header"+q),s=a.region.get("__footer"+q),t=g.children("components").first().children(),u=g.children("interactions").first(),v=[],w=b('<div class="nx-page-content">'),x=b('<div class="nx-page-panels">'),y=a.page.updateProblemsWrapper,z={},A=function(){m._unsavedChangesHandler=!0,b(window).on("beforeunload.skuid",function(){var c;return b.each(a.model.list(),function(){var b=this.getParentPage();return this.hasChanged&&this[n]&&(!b||b[n])?(c=a.$L("unsaved_changes_warning"),!1):void 0}),c})},B=function(){var c="PageBuilder"==a.page.name,d=g.attr("hideeditbutton");if("true"===d)return!1;if(!c){var e=b("<div>").prop("id","skuidEditBtnContainer"),f=b("<div>").prop("id","skuidEditBtn").appendTo(e);b("<div>").addClass("inline sk-icon sk-icon-configure").css("margin-right","4px").appendTo(f),b("<div>").addClass("skuidEditButtonLabel").text(a.$L("edit_page")).appendTo(f),e.css("display","block").on("mouseover",function(){e.stop().animate({width:"90px"},400)}).on("mouseleave",function(){e.stop().animate({width:"16px"},400)}).on("click",function(){window.open(a.platform.getBaseBuilderUrl()+m.id,"_blank")}).appendTo("body")}},C=function(){var a,c,d,e=m.getAllProblems();m.problemsIndicator?a=m.problemsWrapper:(a=b("<div>").addClass("nx-page-problems-wrapper clearfix"),c=b("<div>").addClass("nx-page-problems-indicator nx-error").css({display:"inline-block","text-align":"left",padding:"7px"}).click(function(){d.toggle()}),d=b('<div class="nx-page-problems-container">').css({display:"none","white-space":"wrap"}),b.extend(m,{problemsIndicator:c,problemsWrapper:a,problemsContainer:d}),a.append(c,d),w.prepend(a)),e.length?b.each(e,function(){m.displayProblem(this)}):a.css("display","none")},D=function(){l=b('<div class="nx-page">').addClass("sk-loading").insertBefore(w),b("<div>").addClass("sk-loading-inner").append(b("<span>").text(a.$L("loading"))).appendTo(l),l.timeoutHandle=window.setTimeout(function(){l&&l.length&&(delete l.timeoutHandle,l.fadeIn(100))},300)},E=function(){var d={_parentPageId:h.id()},f=h.context;r&&(v=v.concat(e(r.xmlDefinition.children("components").first().children(),w,f,d))),v=v.concat(e(t,w,f,d)),s&&(v=v.concat(e(s.xmlDefinition.children("components").first().children(),w,f,d))),m.updateProblemsWrapper();var g=function(a){a?w.fadeIn(a):w.show()};if(l){l.addClass("sk-loading-swapping");var i=function(){l.detach(),l=null};l.timeoutHandle?(window.clearTimeout(l.timeoutHandle),i(),g()):(l.fadeOut(200,i),g(200))}else g();w.css("display","block"),c.css("display","block"),a.responsive.handleResize(),a.events.publish("ui.reflow",[],{buffer:10}),a.events.publish("page.rendered",[{page:h}]),b.holdReady(!1);var j=b(".nx-field > :input:visible:not(.hasDatepicker)");j.first().focus();var k=b('a.zen-trigger[title="Publisher Type Overflow Menu"]'),n=k.next();k.click(function(){n.toggle()}),n.click(function(){n.hide()}),u.length&&a.interactions.enableInteractions(w,{interactionsDef:u,component:h}),c.append(w,x),c.trigger("pageload")};"true"!==g.attr("useviewportmeta")||a.mobile||b("#sk-meta-viewport").length||b("head").append('<meta id="sk-meta-viewport" name="viewport" content="width=device-width, initial-scale=1">'),h.addProblem=function(b,c){("string"==typeof b||b instanceof String)&&(b={message:b}),a.page.displayProblem(b)&&p.push(b),c!==!0&&y()},h.addProblems=function(a){a instanceof Array?b.each(a,function(a,b){h.addProblem(b,!0)}):h.addProblem(a,!0),y()},h.removeProblem=function(a){var b,c=h.problems;if(c&&c.length&&c instanceof Array)for(b=c.length-1;b>=0;b--)if(c[b]===a)return c.splice(b,1)[0]},h&&(h.unregisterChildComponents=function(){return v.length&&b.each(v,function(){this.unregister()}),b.each(h.getModels(),function(){this.unregister()}),h},h.unregister=function(){return a.page.rebuildPageProblems(),d.prototype.unregister.call(h)}),h.getPageRecord=function(){return f(h.id())._pageRecord},h.getPageParameters=function(){var b=h.id(),c=f(b),d=c._pageParameters;return d||(d=a.page._parametersByPage[b],c._pageParameters=d),d},h.setPageParameters=function(c){var d=h._pageParameters;return d||(d=h._pageParameters=a.page._parametersByPage[h.id()]={}),b.extend(d,c),h},h.getModels=function(b){return a.model.list().filter(function(a){return a.getParentPageId()===h.id()&&(b?a.id===b:!0)})},h.getModel=function(a){return h.getModels(a)},h.getContentElement=function(){return w},h.getPanelsElement=function(){return x},h.panel={createFromAction:function(a,b,c){var d=a.children().first(),e=d.attr("uniqueid");return z[e]=h.createChildComponents(d,x,c)[0],z[e]},getById:function(a){return z[a]},_detachById:function(a){z[a]&&delete z[a]},getAll:function(){return b.extend({},z)},closeAll:function(){b.each(z,function(){this.close()})}},!m._unsavedChangesHandler&&o&&A(),h.isInclude||(a.mainPageElement=w),a.utils.processStylesNode(g.children("styles"),w),!m||!m.editable||m.runningOnForceSite||a.mobile||h.isInclude||(B(),C()),k=g.children("models").children(),k.length&&k.each(function(){new a.model.Model(b(this),{_parentPageId:h.id()}).register()}),j=[];var F=h.getModels(),G=[];b.each(F,function(a,b){b.initialize({createDefaultRowIfNeeded:!1,cloneRowsIfNeeded:!1,pageComponent:h}),!b.processOnClient||!b.doQuery&&b.hasMetadataLoaded()?(b.errors&&b.errors.length&&h.addProblems(b.errors),G.push(b)):j.push(b)}),b.holdReady(!0),j.length?(D(),a.model.load(j,i,{pageComponent:h})):i()}})}(skuid,skuid.$),function(a,b,c){function d(b){var c=a.page.language,d=[c];return c&&c.length>2&&d.push(c.substring(0,2)),{fields:[{id:"Name"},{id:"MasterLabel"},{id:"PageOrSobjectType"},{id:"NamespacePrefix"},{id:"OpenType"},{id:"LinkType"},{id:"Url"},{id:"Localization",type:"childRelationship",fields:[{id:"Value"}],conditions:[{field:"Language",type:"multiple",operator:"in",values:d}],recordsLimit:1,orderByClause:"NamespacePrefix NULLS FIRST"}],conditions:[{field:"DisplayType",operator:"IN",type:"multiple",values:["L","B"]},{field:"PageOrSobjectType",value:b},{field:"LinkType",operator:"IN",type:"multiple",values:["page","url"]}],objectName:"Weblink",order:"Name"}}function e(a){a&&(a instanceof Array?a.length&&c.each(a,function(){k.push(this)}):k.push(this))}function f(a){return a in l}function g(b){var h,i,j=b.weblinkName,n=b.objectName,o=b.namespacePrefix,p=b.callback,q=c.Deferred();if(j&&n&&c.each(k,function(a,b){if(b.Name===j&&b.PageOrSobjectType===n){if(o===b.NamespacePrefix)return i=b,!1;b.NamespacePrefix&&(h=b)}}),!i&&h&&(i=h),i||b.didQuery===!0||f(n))q.resolve(),p&&p(i);else{var r=m[n],s=!1;r||(r=m[n]=[],s=!0),r.push(b),s&&a.remote().load(JSON.stringify(d(n)),function(a,b){l[n]=1;var d=JSON.parse(a),f=d.models[0];b.status?(f.data&&f.data.length&&e(f.data),c.each(r,function(a,b){b.didQuery=!0,g(b)})):(q.resolve(),r.length&&c.each(r,function(a,b){b.callback&&b.callback(null)})),delete m[n]},{escape:!1})}return q}function h(a){var b=a.Localization;return b&&b.records?b.records[0].Value:a.MasterLabel}function i(a){var b=[];return k.length&&c.each(k,function(){this.PageOrSobjectType===a&&b.push(this)}),b}function j(){k=[],l={},m={}}var k,l,m,n=b.weblink={};j(),n.get=g,n.getLabel=h,n.getAllForObject=i,n.add=e,n.haveQueriedForObject=f,n.resetCaches=j,n._buildQueryForObject=d}(skuid,skuid.sfdc,skuid.$),window.skuid||(window.skuid={}),function(a,b){function c(){return a.utils}function d(a){return b.map(a.tabs,function(b){var d=c().sfTabs[b],e=a.url&&a.url.slice(-20);return e&&(e=-1===e.indexOf("tsid=")?"":(-1===d.url.indexOf("?")?"?":"&")+e),{label:d.label,link:d.url+e}})}function e(){var a,e=[];return c().sfApps&&c().sfTabs?(b.each(c().sfApps,function(){return this.isSelected?(a=this,!1):void 0}),a&&(e=d(a)),e):e}function f(a){if(!c().sfApps||!c().sfTabs)return[];a||(a={});var e,f,g=[],h={},i=[],j=a.selectedAppFirst,k=a.withTabs;return b.each(c().sfApps,function(a,b){if(j&&b.isSelected)f=b;else{var c=b.sortOrder;c>-1&&!h[c]?h[c]=b:i.push(b)}}),e=Object.keys(h),e.sort(function(a,b){return a-b}),f&&g.push(f),b.each(e,function(a,b){g.push(h[b])}),i.length&&g.concat(i),b.map(g,function(a){var b=k?d(a):null;return{label:a.label,link:a.url,items:b}})}function g(){return f({selectedAppFirst:!0})}function h(){return f({withTabs:!0})}function i(){return[{label:"My Profile",link:"/_ui/core/userprofile/UserProfilePage"},{label:"My Settings",link:"/ui/setup/Setup?setupid=PersonalSetup"},{label:"My Apps",link:null,items:g},{label:"Salesforce Setup",link:"/setup/forcecomHomepage.apexp?setupid=ForceCom"},{label:"Developer Console",link:"/_ui/common/apex/debug/ApexCSIPage",window:"blank"},{label:"Logout",link:"/secur/logout.jsp"}]}function j(){return"/apex/skuid__PageBuilder?id="}function k(c,d){var e="";return e=a.isAura?"/skuid/ui.app?"+(a.mobile?"type=Mobile&":"")+"page=":"/apex/skuid__ui?page=",e+=c[C.page.name],d&&(e+="&"+d.substring(b.inArray(d.charAt(0),["&","?"]>-1)?1:0)),e}function l(a){return"/apex/skuid__PageXMLEdit?id="+a[C.page.id]}function m(){return["skuid__Layout__c","skuid__Layout2__c","skuid__Layout3__c","skuid__Layout4__c","skuid__Layout5__c"]}function n(){return 65e4}function o(){return"salesforce"}function p(){return window.location.origin+(window.$A?"/skuid/oauthproxy.app":"/apex/skuid__oauthproxy")}function q(){var b=window.location.origin;return a.isAura?b+"/skuid/oauthcallback.app":r()?b+"/apex/skuid__oauthcallback":b+"/apex/oauthcallback"}function r(){var a=window.location.host.split(".")[0];return c().endsWith(a,"-skuid")||"skuid"===a}function s(){return[{value:"sftabs",label:"Salesforce Tabs for Current App",items:e},{value:"sfapps",label:"Salesforce Apps",items:g},{value:"sfappswithtabs",label:"Salesforce Apps with Tabs",items:h},{value:"sfusermenu",label:"Salesforce User Menu",items:i}]}function t(a){return C[a]}function u(a,b){return C[a][b]}function v(b){var d,e,f,g,h=a.page.sitePrefix,i=a.isAura,j=a.page.runningOnForceSite;return"object"==typeof b?(d=b.name,e=b.namespace||b.ns,f=b.nestedPath||b.path,g=b.modstamp):d=b,d&&c().contains(d,"/")&&(d=c().capitalizeFirst(d.split("/").pop().replace(".js","JS").replace(".css","CSS"))),(j&&h&&!i?h:"")+"/resource/"+(g?g+"/":"")+(e?e+"__":"")+d+(f?"/"+f:"")}function w(a){return v(a)}function x(a){var b=a.split("/").pop();return v(b.charAt(0).toUpperCase()+b.slice(1)+"TestsJS")}function y(){return"undefined"!=typeof window.InlineEditState}function z(a){return E[a]}function A(a,b){E[a]=b}var B="skuid__Module__c",C={auth_provider:{auth_method:"skuid__Auth_Method__c",authorize_endpoint_url:"skuid__Authorize_Endpoint_URL__c",client_id:"skuid__Client_Id__c",client_secret:"skuid__Client_Secret__c",id:"Id",name:"Name",oauth_grant_type:"skuid__OAuth_Grant_Type__c",oauth_provider_type:"skuid__Type__c",request_headers:"skuid__Request_Headers__c",token_endpoint_url:"skuid__Token_Endpoint_URL__c",token_request_body_parameters:"skuid__Token_Request_Body_Parameters__c",default_scopes:"skuid__Default_Scopes__c"},data_source:{authentication:"skuid__Authentication__c",auth_request_body:"skuid__Auth_Request_Body__c",auth_request_body_content_type:"skuid__Auth_Request_Body_Content_Type__c",auth_request_headers:"skuid__Auth_Request_Headers__c",auth_request_verb:"skuid__Auth_Request_Verb__c",auth_url:"skuid__Authentication_URL__c",credential_source:"skuid__Credential_Source__c",id:"Id",is_active:"skuid__Active__c",name:"Name",password:"skuid__Password__c",request_body_parameters:"skuid__Request_Body_Parameters__c",request_headers:"skuid__Request_Headers__c",request_url_parameters:"skuid__Request_URL_Parameters__c",request_scopes:"skuid__Request_Scopes__c",url:"skuid__URL__c",username:"skuid__Username__c",use_proxy:"skuid__Use_Apex_Proxy__c",type:"skuid__Adapter_Name__c"},page:{composer_settings:"skuid__Composer_Settings__c",id:"Id",is_master_page:"skuid__IsMaster__c",master_page:"skuid__MasterPage__r",master_page_id:"skuid__MasterPage__c",max_auto_saves:"skuid__Max_Auto_Saves__c",module:B,name:"Name"},static_resource:{id:"Id",name:"Name",namespace:"NamespacePrefix",content_type:"ContentType"},theme:{id:"Id",name:"Name",resource_name:"skuid__Resource_Name__c",resource_namespace:"skuid__Resource_Namespace__c",type:"skuid__Type__c",version_date:"skuid__Skuid_Version_Date__c",active:"skuid__Active__c"}},D=a.constants.SALESFORCE,E={};sforce.one&&navigator&&(navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPhone/i))&&(a.$.ui.dialog.prototype._focusTabbable=function(){}),window.Visualforce&&window.Visualforce.remoting&&(window.Visualforce.remoting.timeout=9e4),a.platform={get:z,getBaseBuilderUrl:j,getBasePreviewUrl:k,getBaseXmlEditorUrl:l,getDefaultDataSourceTypeName:function(){return"salesforce"},getDefaultDataSourceName:function(){return"salesforce"},dataSourceIsCurrentSalesforceOrg:function(a){return"string"==typeof a?a===D:"object"==typeof a?a.name===D:!1},getEntityFieldName:u,getEntityFieldNames:t,getLayoutFields:m,getMaxProxyRequestPayload:n,getName:o,getNavigationItemSourceTypes:s,getOAuthRedirectUri:q,getOAuthProxyUri:p,getResourceUrl:v,getSiteResourceUrl:w,requiresSerializedProxyRequests:function(){return!0},resolveTestPath:x,set:A,utils:{hasLoadedSFMainJS:y}},a.platform.builder={getProtectedModules:function(){return a.builder.core.protectedModules},getPageModule:function(a,b){return a.getFieldValue(b,B,!0)||""},getModuleEntries:function(b){return a.$.map(b.getField(B).picklistEntries,function(a){return{value:a.value,label:a.label,disabled:a.active===!1,defaultValue:a.defaultValue}})},getAvailableComponentPacks:function(){return a.builder.core.availablePacks},getPageSelectProperty:function(a){return{id:a.id,type:"autocomplete",sobject:"skuid__Page__c",dataSource:a.dataSource,fieldsToReturn:["Name","skuid__Module__c"],fieldsToSearch:["Name","skuid__Module__c"],displayTemplate:"{{Name}}{{#skuid__Module__c}} ({{skuid__Module__c}}){{/skuid__Module__c}}",
valueTemplates:{pagename:"{{Name}}",module:"{{skuid__Module__c}}"},order:"Name",label:a.label,helptext:a.helptext,required:!0,onChange:a.onChange||function(){}}},getStaticResourceProperty:function(a){return{id:a.id,type:"autocomplete",sobject:"StaticResource",fieldsToReturn:["Name","NamespacePrefix","ContentType"],fieldsToSearch:["Name","NamespacePrefix"],displayTemplate:"{{Name}}{{#ContentType}} ({{ContentType}}){{/ContentType}}",valueTemplates:a.valueTemplates,order:"Name",label:"Resource Name",helptext:a.helptext,required:a.required||!1,onChange:a.onChange||function(){}}},getNestedPathProperty:function(a){return{id:a.id||"filepath",type:"filepath",label:"File Path (within ZIP Static Resources)",helptext:"The desired file's relative location within Static Resources that are .zip files. Do not use unless your Static Resource is a ZIP file.",divisionSize:"2",getResourceName:function(){var b=a.state.attr(a.nameProperty).split("__");return b[b.length-1]},getResourceNamespace:function(){var b=a.state.attr(a.namespaceProperty).split("__");return 2===b.length?b[0]:null},onChange:a.onChange||function(){}}}},a.platform.themeBuilder={getThemeData:function(b,c){a.ThemeComposerController.bootstrap(JSON.stringify({resourceName:b.Name,resourceNamespace:b.NamespacePrefix}),function(a){c(a)},{escape:!1})},getThemeResourceUrl:function(b){return a.platform.getResourceUrl(b)},getResource:function(b,c){return a.utils.getBodyOfZIPResourceFile(b.Name,b.NamespacePrefix,c)},saveTheme:function(b,c,d){var e={Id:b.resourceId||d.Id,Body:c},f=new a.sfdc.api.SObject("StaticResource",e);return f.update()}}}(skuid,skuid.$),function(a){function b(b){return f[b||a.platform.getDefaultDataSourceTypeName()]}function c(){return d({},f)}var d=a.$.extend,e=a.dataSource||(a.dataSource={}),f={},g=function(a){if(a!==!1){d(this,a);var b=this.name;if(!b)throw"Data Source Type name is required.";f.hasOwnProperty(b)||(f[b]=this)}};d(g.prototype,{prop:function(b){return this.properties?a.utils.getObjectProperty(this.properties,b):null},getActions:function(){return a.$.Deferred().resolve({})},runAction:function(){return a.$.Deferred().resolve({})}}),d(e,{DataSourceType:g,getAllTypes:c,getAllDataSourceTypes:c,mapTypes:c,mapDataSourceTypes:c,getType:b,getDataSourceType:b,libraries:{skuid:{}}})}(skuid),function(a){function b(){return a.platform.getOAuthRedirectUri()}function c(a,b){var c=a.authentication,d=a.name,e=c.authMethod;return e?r.startsWith(e,"oauth")?d+(b?"::"+b:""):"apex"===e?d:void 0:c.url}function d(b){return q[b||a.platform.getDefaultDataSourceName()]}function e(b){b!==a.platform.getDefaultDataSourceName()&&delete q[b]}function f(b,c){var e,f,g=s.extend({useDefault:!0,nodeIdentifierAttribute:"id",allowNullReturn:!1},c);return b&&(e=g.customAttributeName?b.attr(g.customAttributeName):b.attr("datasource")||b.attr("service")),!e&&g.useDefault&&(e=a.platform.getDefaultDataSourceName()),f=e&&d(e),"undefined"!=typeof f||g.allowNullReturn?f:(a.component.getByType("skuidpage")[0].addProblem(a.label.merge({template:a.$L("invalid_data_source"),data:[b.attr("datasource")||b.attr("service"),b.attr(g.nodeIdentifierAttribute)]})),d())}function g(){return t({},q)}function h(){return JSON.parse(window.localStorage[I]||"{}")}function i(a){t(this,a)}function j(a){t(this,a)}function k(b){var c=b.name,d=b.dataSourceTypeName;t(this,b),this.customConfig&&(this._c=this.customConfig,delete this.customConfig),this.dataSourceType=a.dataSource.getType(d||a.platform.getDefaultDataSourceTypeName()),this.entityMetadataCache={},this._cache={},q.hasOwnProperty(c)||(q[c]=this)}function l(a){return a&&0!==a.length?a.length>1?a:1===a.length?a[0]:void 0:null}function m(a){this[C]=t(!0,{},a),this._isFull=!1}function n(a){return s.map(a,function(a){return a})}function o(a,b){var c={};return a&&a.length&&s.each(a,function(a,d){s.isArray(b)?s.each(b,function(a,b){d.hasOwnProperty(b)&&(c[d[b]]=d)}):d.hasOwnProperty(b)&&(c[d[b]]=d)}),c}var p=a.dataSource||(a.dataSource={}),q={},r=a.utils,s=a.$,t=s.extend,u=a.constants.SALESFORCE,v=r.isString,w=r.mergeAsTextInContext,x=r.contains,y=r.startsWith,z="skuidDataSourceMetadata",A="actionsMetadata",B={},C="_m",D="fields",E="_fm",F="_crm",G="childRelationships",H="extensions",I="skuidOAuth",J="2ndAuthRetry",K={Username:"{{$Auth.Username}}",Password:"{{$Auth.Password}}",Client_Id:"{{$Auth.Client_Id}}",Client_Secret:"{{$Auth.Client_Secret}}",BasicAuth:"{{$Auth.BasicAuth}}"};m.prototype={update:function(a){var b=this,c=this[C];c||(c=this[C]={}),delete this[E],s.each(a,function(d,e){if(!a.hasOwnProperty(d))return!0;if(c.hasOwnProperty(d))if(d===D){var f=b.getFieldsMap({noCache:!0,onlyIdKey:!0});s.each(e,function(a,b){var c=b.id,d=f[c];d?s.each(b,function(a,b){null!==b&&"undefined"!=typeof b&&(d[a]=b)}):f[c]=b}),c[D]=n(f)}else c[d]=e;else c[d]=e})},get:function(a){var b=this[C];if("string"==typeof a)return b[a];if(a instanceof Array){var c={};return s.each(a,function(a,d){c[d]=b[d]}),c}},getLabel:function(){return this[C].label},getLabelPlural:function(){return this[C].labelPlural},getPluralLabel:function(){return this.getLabelPlural()},getEntityName:function(){return this[C].objectName},getObjectName:function(){return this[C].objectName},getFieldsList:function(){return this[C][D]||[]},getSortedFieldsList:function(){var a=r.capitalizeFirst;return this.getFieldsList().slice().sort(function(b,c){var d=a(b.label||b.id)||"",e=a(c.label||c.id)||"";return e>d?-1:d>e?1:0})},getFieldsMap:function(a){var b=a&&a.noCache,c=a&&a.onlyIdKey,d=this.getFieldsList(),e=c?"id":["id","name"];return b?o(d,e):(this[E]||(this[E]=o(d,e)),this[E])},getField:function(a){return this.getFieldsMap()[a]},getChildRelationshipsList:function(){return this[C][G]||[]},getExtensions:function(a){var b=this[C][H]||{};return a?r.getObjectProperty(b,a):b},_getCRMap:function(){return this[F]||(this[F]=o(this[C][G],"relationshipName")),this[F]},getChildRelationship:function(a){return this._getCRMap()[a]},_unwrap:function(){return this[C]},setIsFullMetadata:function(){return this._isFull=!0,this},isFullMetadata:function(){return this._isFull}},k.prototype={save:function(a){return this.dataSourceType.save(a,{dataSource:this})},load:function(a,b){return b=b||{},this.dataSourceType.load(a,t({},b,{dataSource:this}))},getRowId:function(a,b){var c;try{c=this.dataSourceType.getRowId(a,b,this)}catch(d){}return(r.isUndefined(c)||null===c)&&(c=r.generateUniqueId()),c},getIdField:function(a){var b=this.dataSourceType;return b&&b.getIdField?b.getIdField(a):null},getRowName:function(a,b){return this.dataSourceType.getRowName(a,b,this)},getNameField:function(a){var b={dataSource:this};return r.isString(a)?b.objectName=a:a&&(b.model=a,b.objectName=a.objectName),this.dataSourceType.getNameField(b)},getConditionSourceProperties:function(a,b){var c=this.dataSourceType.getConditionSourceProperties;return c&&c(a,b)},getDataSourceType:function(){return this.dataSourceType},getDataSourceTypeName:function(){return this.dataSourceType&&this.dataSourceType.name},getEntityList:function(){return this.dataSourceType.getEntityList({dataSource:this})},search:function(a,b,c){return a.dataSource||(a.dataSource=this),this.dataSourceType.search(a,b,c)},searchableEntities:function(){return this.dataSourceType.searchableEntities()},getFieldRenderers:function(){return this.dataSourceType.fieldRenderers?this.dataSourceType.fieldRenderers():!1},getActions:function(a,b){var c=this,d=s.Deferred(),e=c._cacheService().getCachedValue(A);return e?d.resolve(e):c.dataSourceType.getActions(c,a,b).then(function(a){c._cacheService().setCachedValue(A,a),d.resolve(a)}),d.promise()},_cacheService:function(){function a(a,b){r.setObjectProperty(d._cache,a,b)}function b(a){"sessionStorage"!==a&&(a="localStorage");var b=window[a][z];return b?JSON.parse(b)[d.name]:void 0}function c(a,b){"sessionStorage"!==a&&(a="localStorage");var c=window[a][z];c=c?JSON.parse(c):{},c[d.name]=b,window[a][z]=JSON.stringify(c)}var d=this;return{setPersistentCachedValue:function(e,f,g){a(e,f);var h=b(g);return h||(h={}),h[e]=f,c(g,h),d},setPersistentCachedValues:function(e,f){var g=b(f);return g||(g={}),s.each(e,function(b,c){a(b,c),g[b]=c}),c(f,g),d},setCachedValue:function(b,c){return a(b,c),d},setCachedValues:function(b){return s.each(b,function(b,c){a(b,c)}),d},getCachedValue:function(a,c){var e,f=r.getObjectProperty(d._cache,a);return null===f&&(e=b(c),e&&(f=r.getObjectProperty(e,a),null!==f&&(d._cache[a]=f))),f},getCachedValues:function(a,c){var e,f=!1,g={};return a.forEach(function(a){var h=r.getObjectProperty(d._cache,a);null===h&&(e||f||(f=!0,e=b(c)),e&&(h=r.getObjectProperty(e,a),null!==h&&(d._cache[a]=h))),null!==h&&(g[a]=h)}),g}}},getCacheProperty:function(a,b){return this._cacheService().getCachedValue(a,b&&b.cacheLocation)},getCacheProperties:function(a,b){return this._cacheService().getCachedValues(a,b&&b.cacheLocation)},setCacheProperty:function(a,b){return this._cacheService().setCachedValue(a,b),this},setCacheProperties:function(a){return this._cacheService().setCachedValues(a),this},setPersistentCacheProperty:function(a,b,c){return this._cacheService().setPersistentCachedValue(a,b,c&&c.cacheLocation),this},setPersistentCacheProperties:function(a,b){return this._cacheService().setPersistentCachedValues(a,b&&b.cacheLocation),this},clearPropertiesCache:function(){var a=this;return a._cache={},["localStorage","sessionStorage"].forEach(function(b){var c=window[b][z];c&&(c=JSON.parse(c),c[a.name]&&(delete c[a.name],window[b][z]=JSON.stringify(c)))}),a},unregister:function(){return e(this.name),this},runAction:function(a,b,c,d){var e=this;return e.dataSourceType.runAction(a,b,c,d,e)},getConfigProperty:function(a){return r.getObjectProperty(this._c||{},a)},getUploadMethod:function(a){var b=this.getUploadMethods(),c=b&&b[a];return c?(c.dataSource=this,new i(c)):null},getUploadMethods:function(){var a=this.getDataSourceType();return a.getUploadMethods?a.getUploadMethods(this):{}},getImageSources:function(){var a=this.getDataSourceType(),b=a.getImageSources?a.getImageSources(this):{},c={label:"URL",optionalRecordContext:!0,getSrc:function(a){var b=s.Deferred(),c=a.context,d=a.mergeSettings,e=a.prefix||"",f=a.xmlDef.attr(e+"url"),g=r.getSafeRelativeUrl(r.mergeAsTextInContext(f,c,d));return g?b.resolve(g):b.reject(),b.promise()},builderProps:function(a,b,c){var d=c.additionalOnRefresh,e=c.prefix||"";return[{id:e+"url",label:"Image URL",type:"template",location:"attribute",onChange:function(){a.refresh(),d&&d()}}]}};return b.url=c,b||{}},getImageSource:function(a){this.name===u&&"external"===a&&(a="url");var b=this.getImageSources(),c=b&&b[a];return c?(c.dataSource=this,new j(c)):null},buildEntityMetadataRequest:function(a){var b=this.dataSourceType.buildEntityMetadataRequest(a);return b.dataSource=this,b},getEntityMetadataLoadingMessageFromBreadcrumb:function(a){var b=this.dataSourceType.getEntityMetadataLoadingMessageFromBreadcrumb(a);return b.dataSource=this,b},prefillMetadataForObject:function(a,b){var c=this.dataSourceType.prefillMetadataForObject;c&&c({object:a,data:b,dataSource:this}),this.cacheEntityMetadata(this.getEntityMetadataCacheKey(a),b)},populateBreadcrumbFromEntityMetadata:function(a){var b=this,c=b.getDataSourceType(),d=c.populateBreadcrumbFromEntityMetadata;return d?(a.dataSource=b,d(a)):a.crumb},getEntityMetadataCacheKey:function(a){var b=this;return r.isString(a)?a:b.dataSourceType.getEntityMetadataCacheKey?(a.dataSource||(a.dataSource=b),b.dataSourceType.getEntityMetadataCacheKey(a)):void 0},cacheEntityMetadata:function(a,b){var c=this;if(1===arguments.length&&r.size(arguments[0]))return s.map(arguments[0],function(a,b){return c.cacheEntityMetadata(b,a)});var d=c.entityMetadataCache,e=d[a];return e?e.update(b):e=d[a]=new m(b),e},getCachedEntityMetadata:function(b){var c,d=this,e=d.entityMetadataCache;return b?(c=b.entities?b.entities:a.utils.isString(b)?[{objectName:b}]:[b],s.isArray(c)||(c=[c]),l(s.map(c,function(a){return e[d.getEntityMetadataCacheKey(a)]}))):e},clearEntityMetadataCache:function(){return this.entityMetadataCache={},this},createHTTPRequest:function(a){a||(a={});var b,c,d=this,e=d.authentication,f=t({},d.requestHeaders,a.headers),g={},h=t({model:a.model,row:a.row},a.apiExtensions,a.context),i=d.requestBodyParameters,j=a.url,k=x(j,"?"),l=a.contentType,m=a.body,n=t({},d.requestUrlParameters||{},a.parameters||{});return e&&e.success&&(h.$Auth=s.extend({},K,{Response:{Body:e.responseBody,Headers:e.responseHeaders}})),s.each(n,function(a,b){a&&b&&(k?j+="&":(j+="?",k=!0),j+=a+"="+encodeURIComponent(w(b,h,{createFields:!1})))}),j=w(j,h,{createFields:!1}),s.each(f,function(a,b){var c=b&&v(b)?w(b,h,{createFields:!1}):b;g[a]=c}),(i&&r.size(i)||m&&r.size(m))&&(l&&x(l,"json")&&s.isPlainObject(m)?(c={},i&&t(c,i),m&&t(c,m)):c=m),b={url:j,headers:g,method:a.method,modelDataSource:d.name,originalRequest:a},c&&(b.contentType=l,b.body=c),b.method||(b.method=c?"POST":"GET"),a.accept&&(b.accept=a.accept),e&&e.success&&(b.isAuthenticated=!0),b},_hasRetriedAuthTwice:function(){return this[J]===!0},_setHasRetriedAuthTwice:function(){return this[J]=!0,this},_clearHasRetriedAuthTwice:function(){delete this[J]},makeRequest:function(b,c){function d(a){return g.call(e,a||e.createHTTPRequest(h),c)}var e=this,f=e.name,g=a.ajax[e.useApexProxy?"proxy":"direct"],h=b.originalRequest;return d(b).then(function(a){return e._clearHasRetriedAuthTwice(),a},function(a){var b,c=a.statusCode,g=a.error,h=e.authentication,i=function(){return s.Deferred().reject(a)};if(y(g,"Invalid Request: Unauthorized endpoint")&&window.confirm("To access this Data Source, you will need to add its endpoint as a Remote Site from Salesforce Setup.\n\nWould you like to do that now?")){var j=window.location.href+"",k=encodeURIComponent(j.substring(j.indexOf("/",j.indexOf("//")+2),j.length));window.location="/0rp/e?setupid=SecurityRemoteProxy&IsActive=1&retURL="+k+"&cancelURL="+k+"&EndpointUrl="+encodeURIComponent(e.serviceUrl||"")+"&SiteName="+e.name.replace(/[\W]+/g,"")+'&DescriptionField=For Skuid Model Data Source "'+f+'"'}if(401===c&&h&&"basicauth"!==h.method){if(h.success?(e.invalidateAuthentication(),h.hasRetried||(h.hasRetried=!0,b=e.authenticate())):e.getPendingAuthenticationRequest()&&(h.hasRetried=!0,b=e.getPendingAuthenticationRequest()),b){var l=s.Deferred();return b.then(function(){d().always(function(){delete h.hasRetried}).done(function(){l.resolve.apply(l,arguments)}).fail(function(a){401!==a.statusCode&&403!==a.statusCode||e._hasRetriedAuthTwice()?e._hasRetriedAuthTwice()?(e._clearHasRetriedAuthTwice(),l.reject.apply(l,arguments)):l.reject.apply(l,arguments):e._setHasRetriedAuthTwice().logout().authenticate().then(function(){d().done(function(){l.resolve.apply(l,arguments)}).fail(function(){l.reject.apply(l,arguments)})})})},function(){delete h.hasRetried,l.reject.apply(l,arguments)}),l.promise()}return i()}return i()})},processEntityMetadataRequests:function(a){var b,c,d=this,e=a.entities,f=a.results,g=d.getDataSourceType().processEntityMetadataRequest;if(g){for(c=[],b=0;b<e.length;b++){var h=f[b];h?c.push(g({entity:e[b],result:h})):c.push(null)}return c}return f},processModelXMLExtensions:function(a,b){var c=this.getDataSourceType(),d=function(a){var b={};return s.each(a.attr(),function(a,c){b[a]=c}),a.children().each(function(a,c){var e=c.nodeName,f=b[e]||(b[e]=[]);f.push(d(s(c)))}),b},e=a.extensions={};return s.each(b.attr(),function(a,b){return y(a,"x-")?void(e[a.slice(2)]=b):!0}),b.children().each(function(a,b){var c=b.nodeName;if(!y(c,"x-"))return!0;c=c.slice(2);var f=e[c]||(e[c]=[]);f.push(d(s(b)))}),c&&c.processModelXMLExtensions?void c.processModelXMLExtensions(a,b):void 0},getEntityMetadata:function(a){var b,c,d=this,e=s.Deferred(),f=a.entities,g=a.ignoreCache||!1,h=[],i=[],j=function(){e.resolve(l(i))};return f&&(s.isArray(f)||(f=[f]),s.each(f,function(a,c){c.dataSource=d,b=null,g||(b=d.getCachedEntityMetadata(c)),b&&b.isFullMetadata()?i.push(b):h.push(c)})),h.length?(c={entities:h,dataSource:d,ignoreCache:g},d.dataSourceType.getEntityMetadata(c).then(function(a){i=s.map(d.processEntityMetadataRequests({entities:h,results:a}),function(a,b){return d.cacheEntityMetadata(d.getEntityMetadataCacheKey(h[b]),a).setIsFullMetadata()}),j()},function(a){e.reject(a)})):j(),e.promise()},getPendingAuthenticationRequest:function(){return B[c(this)]},isAuthenticated:function(){var a=this.authentication;return!a||a.success},getStoredAuthData:function(a){return r.getObjectProperty(h(),this.name+(a?"."+a:""))},setStoredAuthData:function(a){var b=h();return r.setObjectProperty(b,this.name,a),window.localStorage[I]=JSON.stringify(b),b},removeStoredAuthData:function(){var a=h(),b=a[this.name];return delete a[this.name],window.localStorage[I]=JSON.stringify(a),b},authenticate:function(d,e){function f(a,b){a&&r.size(a)&&s.each(a,function(c,d){v(d)?a[c]=w(d,b):"object"==typeof d&&f(d,b)})}function g(a){var b,c=[];return v(a)?b=a:a&&a.error?v(a.error)?b=a.error:a.error&&a.error.message&&(b=a.error.message):a&&a.body&&(v(a.body.error)&&c.push(a.body.error),v(a.body.message)&&c.push(a.body.message),v(a.body.description)&&c.push(a.body.description),b=c.join(": ")),L.reject(b||"Authentication Failed"),L.promise()}function h(){return L.resolve(J),L.promise()}function i(a){return a&&a.refresh_token}function j(){var f=J.providerType,j={force:!1},k=a.oauth(I),l=k?k.getAuthResponse():null,m=(J.defaultScopes||"").split(","),n=(H.scopes||"").split(","),o=e&&e.scopes?e.scopes:d&&d.scopes||"",p={},u={id:J.clientId,name:I,type:f},v={},w={};return o=r.isString(o)?o.split(","):o,s.each(m.concat(n,o),function(a,b){b&&!p[b]&&(p[b]=1)}),r.size(p)&&(j.scope=Object.keys(p).join(",")),M||(J.grantType="implicit"),"implicit"!==J.grantType&&(j.response_type="code"),k.isSessionValid()||i(l)&&(j.display="none"),q=c(H,j.scope||""),x=B[q],x&&!H._hasRetriedAuthTwice()?x.done(h).fail(g):(J.url&&(v.auth=J.url),J.tokenUrl&&(v.grant=J.tokenUrl),"code"===j.response_type&&(v.response_type="code"),a.utils.size(v)&&(u.oauth=v),w[I]=t(!0,{},a.oauth.services[f]||{},u),a.oauth.init(w,{redirect_uri:b()}),D=a.oauth.login(I,j).then(function(a){J.responseBody=a.authResponse,J.success=!0,h(),delete B[q]},function(a){J.success=!1,g(a),delete B[q]}),void(B[q]=D))}var k,l,m,n,o,p,q,u,x,z,A,C,D,E,F,G,H=this,I=H.name,J=H.authentication,L=s.Deferred(),M=H.useApexProxy;if(J)if(l=J.method,C=J.authMethod,p=J.verb||"POST",k=J.url,G=J.username,A=J.password,k&&y(k,"/")&&H.serviceUrl&&(k=r.combineUrls(H.serviceUrl,k)),"provider"===l&&0===C.indexOf("oauth")&&J.success&&s.inArray(J.grantType,["password","saml2-bearer"])<0&&(u=J.responseBody.scope.split(","),E=e?e.scopes:d&&d.scopes,E&&v(E)&&(E=E.split(",")),E&&E.length&&s.each(E,function(a,b){return-1===s.inArray(b,u)?(J.success=!1,!1):void 0})),J.success)h();else if("separateurl"===l){if(J.expires&&J.expiresunit&&window.sessionStorage&&(F=sessionStorage.getItem("auth_"+H.name),F&&(F=JSON.parse(F)),F&&F.expires&&Date.parse(F.expires)>new Date))return J.responseHeaders=F.headers,J.responseBody=F.body,J.success=!0,h();if(n={url:k,headers:J.requestHeaders,method:p,modelDataSource:H.name},m=J.requestBody,q=c(H),x=B[q])return x;o=n.headers,M?(f(o,{$Auth:K}),f(m,{$Auth:K})):(z={$Auth:s.extend({},K,{Username:G,Password:A})},f(o,z),f(m,z)),m&&(n.contentType=J.requestBodyContentType||"application/x-www-form-urlencoded",n.body=JSON.stringify(m)),D=H.makeRequest(n,{buffer:!1}),B[q]=D,D.always(function(){delete B[q]}).done(function(a){if(J.responseHeaders=a.headers,delete J.responseBody,r.isString(a.body))try{J.responseBody=JSON.parse(a.body)}catch(b){}if(J.responseBody||(J.responseBody=a.body),J.success=!0,J.expires&&J.expiresunit&&window.sessionStorage){var c=w(J.expires,{$Auth:{Response:{Body:J.responseBody,Headers:J.responseHeaders}}},{createFields:!1});if(c&&(c=parseInt(c,10))){var d=new Date;d.setSeconds(d.getSeconds()+c),sessionStorage.setItem("auth_"+H.name,JSON.stringify({headers:J.responseHeaders,body:J.responseBody,expires:d}))}}h()}).fail(function(a){J.success=!1,g(a)})}else if("basicauth"!==l||M)if("provider"===l){var N=0===C.indexOf("oauth"),O=J.grantType;if(N&&s.inArray(O,["password","saml2-bearer"])>-1){if(!M)return g("You must connect through the Proxy to use this OAuth grant type."),L.promise();if(F=H.getStoredAuthData(),r.getObjectProperty(F,"responseBody.access_token")){if(!(F.responseBody.expires&&F.responseBody.expires<(new Date).getTime()))return s.extend(!0,J,F),J.success=!0,h();H.removeOAuthAccessToken()}if(n={url:J.tokenUrl,headers:J.requestHeaders,method:p,modelDataSource:I},m=J.requestBody,q=c(H),x=B[q])return x;m&&(n.contentType=J.requestBodyContentType||"application/x-www-form-urlencoded",n.body=JSON.stringify(m)),D=a.ajax.proxy(n,{buffer:!1}),B[q]=D,D.always(function(){delete B[q]}).done(function(a){if(J.success=!0,J.responseHeaders=a.headers,J.responseBody=a.body,a.body&&r.isString(a.body))try{J.responseBody=JSON.parse(a.body)}catch(b){}H.setStoredAuthData({responseBody:J.responseBody}),h()}).fail(function(a){J.success=!1,g(a)})}else if(N)a.oauth?j():r.loadJS(r.getStaticResourceUrl("models/oAuthClient.js","skuid",void 0,r.getCacheTimestamp())).done(function(){a.oauth=window.hello,delete window.hello}).done(j);else if("apex"===C){if(n={headers:J.requestHeaders,method:"GET",modelDataSource:H.name},q=c(H),x=B[q])return x;D=a.ajax.proxy(n,{buffer:!1}).done(function(a){J.responseHeaders=a.headers;try{J.responseBody=JSON.parse(a.body)}catch(b){J.responseBody=a.body}J.success=!0,h()}).fail(function(a){J.success=!1,g(a)}).always(function(){delete B[q]}),B[q]=D.promise()}else J.success=!0,h()}else J.success=!0,h();else{if(G&&A)return H.requestHeaders.Authorization="Basic "+btoa(G+":"+A),J.success=!0,h();if(!G)return J.success=!1,H.removeStoredAuthData(),g({error:"No Username provided."});if(!A)return J.success=!1,H.removeStoredAuthData(),g({error:"No Password provided."})}else h();return L.promise()},removeOAuthAccessToken:function(){var a=["access_token","expires","expires_in"],b=function(b){b&&b.responseBody&&a.forEach(function(a){delete b.responseBody[a]})};return b(this.authentication),b(this.getStoredAuthData()),this},invalidateAuthentication:function(){function a(a){a&&s.isPlainObject(a)&&Object.keys(a).forEach(function(b){"refresh_token"!==b&&delete a[b]})}var b,c=this.authentication,d=this.getStoredAuthData();return c&&(b=c.authMethod&&y(c.authMethod,"oauth"),c.success=!1,delete c.responseHeaders,d&&delete d.responseHeaders,b?(a(c.responseBody),d&&a(d.responseBody)):(delete c.responseBody,d&&delete d.responseBody),d&&this.setStoredAuthData(d)),this},logout:function(){var b=this.authentication,c=this.name;if(b&&(b.success=!1,delete b.responseHeaders,delete b.responseBody,b.authMethod&&y(b.authMethod,"oauth")&&"saml2-bearer"!==b.grantType)){var d=a.oauth&&a.oauth(c);d&&d.logout&&d.logout({name:c,options:{force:!0}})}return this.removeStoredAuthData(),this}},t(p,{DataSource:k,get:d,getDataSource:d,getDataSourceFromXML:f,map:g,mapDataSources:g})}(skuid),function(a){function b(){return a.utils}function c(a,b,d){aa.each(a,function(a,e){null!==e&&"object"==typeof e?c(e,b,d?d+"."+a:a):b.push(d?d+"."+a:a)})}function d(a){return b().isString(a)}function e(a){return b().size(a)}function f(b,c,e){var f=d(b)?b:b.id,g=!d(c),h=g?c.name:c;return e||(e=a.page.id),"apex__"+(g&&c.customCookie?c.customCookie:"nx-page-"+e+"-model-condition-"+f+"-"+h)}function g(a){return b().isMultiValueOperator(a)}function h(a){var c=Na[a];return c||(c=Na[a]=b().getXML(b().makeXMLDoc("<"+a+"/>")[0]).length),c}function i(b){var c=b.dataSource;return c?c instanceof a.dataSource.DataSource||(c=b.dataSource=a.dataSource.getDataSource(c.name)):b.dataSource=c=a.dataSource.getDataSource(b.dataSourceName||ca()),c}function j(b,c){var d=c&&c.getParentPage()||a.component.getByType("skuidpage")[0];return d?void d.addProblems(b):void aa(document).one("pageload",function(){j(b,c)})}function k(a,b){return b?b+"("+a+")":a}function l(a,b,c,d,e){typeof c.attr(d)!==va?a[b]=c.attr(d):typeof e!==va&&(a[b]=e)}function m(a,c,d){return a&&(a=aa.trim(a).toUpperCase()),c&&c.length&&!a&&(a="",aa.each(c,function(b){a+=b+1+"AND"}),b().endsWith(a,"AND")&&(a=a.substring(0,a.length-3))),a&&!b().startsWith(a,"(")&&d&&(a="("+a+")"),a}function n(a){var c='<field id="{id}" query="false"/>',d=null,e="";return a&&(d=aa(a),e=d.attr("field")),b().makeXMLDoc(c.replace("{id}",e))}function o(a){var c,d,e,f,g,k,l,o,p,q,r,s=a.model,t=a.xml,u=t.children("conditions"),v=t.children("havings"),w=t.children("actions"),x=t.children("groupby"),y=t.children("fields"),z=t.children("idfields").first().children(),A={};if(t.attr("_parentpageid")&&(s._parentPageId=t.attr("_parentpageid")),s.dataSourceName=t.attr("datasource")||t.attr("service")||ca(),c=i(s),!c)return void j("Missing Data Source: "+s.dataSourceName,s);if(r=c&&c.processModelXMLExtensions,d=c.getDataSourceType(),!d)return void j("Missing Data Source Type",s);switch(e=d?d.name:ea,f=d.prop("runtime.metadataSource"),g="local"===f,k=g||"hybrid"===f,s.processOnClient=s.dataSourceName===ea?"true"===t.attr("processonclient"):!0,aa.extend(s,{id:t.attr("id")||b().generateUniqueId(),objectName:t.attr("sobject"),type:t.attr("type"),createRowIfNoneFound:"true"===(t.attr("createrowifnonefound")||"false"),preventUnloadIfUnsavedChanges:"false"!==t.attr("unloadwarningifunsavedchanges"),recordsLimit:t.attr("limit")||null,orderByClause:t.attr("orderby"),rTypeFor:t.attr("rtypfor"),doQuery:"false"!==t.attr("query"),deferFieldRendering:"true"===t.attr("deferfieldrendering"),readonly:t.attr("readonly"),pathToContent:t.attr("pathtocontent")}),aa.extend(s,{fields:aa.map(y.children(),function(a){return new T({model:s,xml:aa(a)})}),conditions:aa.map(u.children(),function(a){return new S(aa(a),s)}),havings:aa.map(v.children(),function(a){return new S(aa(a),s)}),methods:aa.map(t.children("methods").children(),function(a){return new U(aa(a))})}),k||(aa.each(s.fields,function(a,b){A[b.id]=b}),aa.each(u.children(),function(a,b){q=n(b),q&&(A[q.attr("id")]||s.fields.push(new T({model:s,xml:q})))})),t.attr("doclone")){case"yes":s.doClone=!0;break;case"no":s.doClone=!1}x.length&&(s.groupByFields=aa.map(x.children(),function(a){return new T({model:s,xml:aa(a)})}),s.groupByMethod=x.attr("method")||"simple"),s.groupByFields&&s.groupByFields.length&&(s.fields=s.groupByFields.concat(s.fields)),e===ea&&(s.queryAllRows="true"===t.attr("queryallrows"),s.forView="true"===t.attr("forview")),w.length&&(s.actions=aa.map(w.children("action"),function(a){return new X(aa(a))})),s.needsMetadataLoad=!g,!s.pathToContent&&s.methods&&s.methods.length&&(l=s.methods.filter(function(a){return"query"===a.type&&a.pathToContent}),l.length&&(s.pathToContent=l[0].pathToContent)),o=t.attr("label"),p=t.attr("labelplural"),s.label||(o?s.label=b().mergeAsText("global",o):s.label=s.id),s.labelPlural||(p?s.labelPlural=b().mergeAsText("global",p):s.labelPlural=s.id),t.attr("namefield")&&(s.nameField=t.attr("namefield")),z.length&&(s.idFields=aa.map(z,function(a){if(a.textContent)return a.textContent;var c=b().getXML(a);return c.length>h("field")?c=b().decodeXML(c.substring(7,c.length-8)):null})),s.serviceUrl=t.attr("serviceurl")||t.attr("endpoint"),s.verb=t.attr("verb"),t.attr("scopes")&&(s.scopes=t.attr("scopes")),u.length&&(s.conditionLogic=m(u.attr("logic"),s.conditions)),v.length&&(s.havingLogic=m(v.attr("logic"),s.havings)),r&&r.call(c,s,t,a)}function p(a,c,d,e){var f=d.attr(e),g=!1;return f&&(g=b().escapeSingleQuotes(f),a[c]=g),g}function q(a){return a&&a.type&&-1!==aa.inArray(a.type,[za,Aa])}function r(a,c){var d,e=c===ra,f=c===sa,g=c===ta,h=typeof a;if(e||f){if(h===xa){if(e&&!ba.parseSFDate(a)||f&&!ba.parseSFDateTime(a)){var i=ba.resolveDateKeyword(a);return aa.isArray(i)?f?ba.getSFDateTime(i[0]):ba.getSFDate(ba.getLocalDateTime(i[0])):null}}else if(h===va)return null}else{if(g&&h!==ya&&null!==a)return h===xa&&"true"===a.toLowerCase()||h===wa&&0!==a;if(-1!==aa.inArray(c,[ka,la,ma])&&h!==wa&&a)try{d=parseFloat(a),b().isExactlyNaN(d)||(a=d)}catch(j){}else if(c===na&&h!==wa&&null!==a&&a)try{d=parseInt(a,10),b().isExactlyNaN(d)||(a=d)}catch(j){}}return a}function s(a,b){a&&b&&a._GUID&&!(a._GUID in b)&&(b[a._GUID]=a)}function t(a,b){a&&b&&a._GUID&&a._GUID in b&&delete b[a._GUID]}function u(a,c,d){return aa.map(a.getRows(),function(e){return{value:c?b().mergeAsText("row",c,null,a,e):a.getRowId(e),label:d?b().mergeAsText("row",d,null,a,e):a.getRowName(e)}})}function v(c,d){var e,f="aggregate"===c.type,g=[],h={},i=b().createMapForArray;return c.isAggregate=f,e=c.getDataSourceType(),e&&(c.dataSourceTypeName=e.name||ea,e.initialize&&e.initialize(c)),c.fields&&aa.each(c.fields,function(b,c){var d=c.picklistSource,e=a.snippet.get(c.picklistSourceSnippet);if(q(c)===!0&&c.subFields&&g.push(c),c.uiOnly&&c.calculated&&(c.createable=c.editable=!1),"rowsinmodel"===d&&a.$M(c.picklistSourceModel)){var f,i=a.$M(c.picklistSourceModel),j=c.picklistEntryValue,k=c.picklistEntryLabel;i.getRows().length?c.picklistEntries=u(i,j,k):i.lastLoadTime||(f=a.events.subscribe("models.loaded",function(b){b.models[i.id]&&(c.picklistEntries=u(i,j,k),a.events.unsubscribe(f))}))}else if("snippet"===d&&e){var l=e();l.length&&(c.picklistEntries=l)}if("REFERENCE"===c.displaytype&&c.rel){var m=c.id.split(".");m.pop(),m.push(c.rel);var n=m.join(".");h[n]={id:n,displaytype:"OBJECT",uiOnly:!0,accessible:!0,editable:!0,createable:!0}}}),g.length&&i(g,"subFields","subFieldsMap","id"),h&&aa.each(h,function(a,b){var d=!1;aa.each(c.fields,function(b,c){return c.id===a?(d=!0,!1):void 0}),d||c.fields.push(b)}),i([c],"fields","fieldsMap",["id","name"]),f||(d&&d.cloneRowsIfNeeded===!1||c._cloneRowsIfNeeded(d?d.pageComponent:$),B(c)),c._generateDataIndices(),D(c),J(c),!c.hasMetadataLoaded()||d&&d.createDefaultRowIfNeeded===!1||c._createDefaultRowIfNeeded(),c.evaluateFormulaFields({preventTrackChanges:!0}),c.isInitialized=!0,c}function w(a){return!(d(a)&&(15===a.length||18===a.length))}function x(){return b().generateUniqueId()}function y(a,b){var c,d=b._findRow(a);return d&&(c=b.getRecordForRow(d)),c?c.isClone():!1}function z(a,b){var c;return c=b instanceof W?b:new W(b),c.register(a),c}function A(a){var b;return b=d(a)?G(a):a,b?(b.unregister(),b):void 0}function B(a){a.dataSourceTypeName===ea&&aa.each(a.data,function(b,c){var d=a.getRowId(c);c.Id15=d?d.substring(0,15):null})}function C(a,b,c,d){var e=6378.137,f=(c-a)*Math.PI/180,g=(d-b)*Math.PI/180,h=Math.sin(f/2)*Math.sin(f/2)+Math.cos(a*Math.PI/180)*Math.cos(c*Math.PI/180)*Math.sin(g/2)*Math.sin(g/2),i=2*Math.atan2(Math.sqrt(h),Math.sqrt(1-h)),j=e*i;return 1e3*j}function D(a){a.conditions||(a.conditions=[]),a.conditions.forEach(function(b){a.updateConditionValue(b);var c=b.subConditions;c&&c.length&&c.forEach(function(b){a.updateConditionValue(b)})})}function E(){return aa.map(La,function(a){return a})}function F(){return La}function G(a){return La[a]}function H(a){return Ma[a]}function I(a){var b={};return aa.each(La,function(c,d){var e=d.dataSource&&d.dataSource.name;b[e]||(b[e]=[]),a&&a!==e||b[e].push(d)}),void 0!==a?b[a]:b}function J(c){var d=c?c.actions:null,e=c?c.id:null,f=b().startsWith,g=c[Ca];g||(g=c[Ca]=[]),g.length&&(aa.each(g,function(b,c){a.events.unsubscribe(c)}),g.length=0),d&&d.length&&aa.each(d,function(d,h){var i=h.events,j=h.actions,k=h.fields,l=h.conditions;typeof j===xa&&(j=b().makeXMLDoc(j)),i&&i.length&&aa.each(i,function(d,h){g.push(a.events.subscribe(h,function(d){var g=!1;if(f(h,"models.")&&d.models[e]&&("models.saved"!==h||d.totalsuccess))g=!0;else if(f(h,"row.")&&d.modelId===e)g="row.updated"===h&&k&&k.length?b().doArraysIntersect(Object.keys(d.updates),k):!0;else if(f(h,"condition.")&&d.modelId===e){var i=d.conditionName,m=c.getConditionByName(i);g=c.isFilterableCondition(m)&&(!l||-1!==aa.inArray(i,l))}if(g){var n=aa.extend({model:G(e),initiatorId:e},d),o=a.actions.runActionsNode,p=a.component.getByType("skuidpage");p&&p.length?o(j,c,n):aa(document.body).one("pageload",function(){o(j,c,n)})}}))})})}function K(f,h){h||(h={});var i,j=!1,k=aa.Deferred(),l={},m={},n={},o={},p={},q=[],r={},s=h.rollbackOnAnyError,t="models.saved",u={};
if(a.events.publish("skuid.ui.commitUserInput"),s===!0&&(m.rollbackOnAnyError=!0),aa.each(f,function(){var a,d,f,g,h,i=this;return n.hasOwnProperty(i.id)||i.isBeingSaved||!i.hasChanged||!e(i.changes)?!0:(n[i.id]=i,i.isBeingSaved=!0,d=i.dataSource,f=d.name,g=i.getIdField(),h=u[i.id]={},a={id:i.id,type:i.objectName},aa.each(i.registeredFields,function(a,b){b.messages=[]}),o[f]||(o[f]=[],p[f]=d),o[f].push(i),l[f]||(l[f]=[]),a.inserts={},a.updates={},a.deletes={},aa.each(i.changes,function(d,e){var f,j,k=i.record(d),l=k.row(),m=k.isMoribund(),n=k.isNew();m&&n?(h[d]=e,delete i.changes[d]):m?(f=a.deletes[d]={},g?aa.isArray(g)?g.forEach(function(a){f[a]=i.getFieldValue(l,a,!0)}):f[g]=i.getFieldValue(l,g,!0):aa.each(l,function(a,b){a===Ja||aa.isPlainObject(b)||aa.isArray(b)||(f[a]=b)})):(j=a[n?"inserts":"updates"][d]={},aa.each(e,function(a,d){var e=i.getField(a),f=[],g=!0,h=b().isObject(d);return e&&e.uiOnly?!0:void(e||!h?j[a]=d:!e&&h&&(c(d,f,a),aa.each(f,function(){return i.getField(this)||(g=!1),-1}),g&&(j[a]=d)))}))}),q=q.concat(this.validateRequiredFields()),a.returning=i.fields?aa.map(i.fields.filter(function(a){return a.type!==za&&a.query!==!1&&a.uiOnly!==!0}),function(a){return a.id}):[],l[f].push(a),void(j=!0))}),q.length&&(j=!1),j){var v=[],w={},x=[],y={event:t,models:n,initiatorId:h.initiatorId,insertResults:[],updateResults:[],deleteResults:[],totalsuccess:!0,messages:[]},z={};aa.each(l,function(b,c){var f=aa.Deferred(),h=o[b],j=p[b];v.push(f.promise()),m.operations=c,j.save(m).then(function(b){var c,j={},k={},l=function(a,b,c){aa.each(a,function(){this.rowId=c,this.model=b,x.push(this)})};b.totalsuccess=!0,aa.each(h,function(a,b){k[b.id]=!0}),aa.each(["delete","insert","update"],function(a,c){var d=b[c+"Results"];d&&d.length&&aa.each(d,function(a,c){var d=c.source,e=n[d],f=c.id||c.oldId;c.success||(b.totalsuccess=!1,k[d]=!1,l(c.errors,e,f)),l(c.messages,e,f)})}),aa.each(x,function(a,b){var c,d,e=b.fields,f=b.model;if(e&&e.length)for(c=0;c<e.length;c++)d=f.getField(e[c]),e[c]={id:d.id,label:d.label}}),s&&b.totalsuccess||!s?(aa.each(b.deleteResults,function(a,b){if(b.success){var c=b.source;z[c]||(z[c]={}),z[c][b.id]=b.id}}),aa.each(b.insertResults,function(a,b){if(b.success){var c,e,f,g,h=b.source,i=n[h],k=b.oldId,l=i.getRowById(k),m=b.record,o=i.registeredFieldsByRowThenField,p=i.registeredItemsByRow,q=i.record(k);if(m&&d(m))try{m=b.record=JSON.parse(m)}catch(r){}k in i.changes&&delete i.changes[k],k in i.originals&&delete i.originals[k],c=b.hasOwnProperty("id")?b.id:m?i.getRowId(m):k,m&&q.setRow(m),q.setId(c).markSaved(),j[k]={row:l,id:c},i.dataSourceTypeName===ea&&(l.Id15=c?c.substring(0,15):c),c===k&&i.dataMap[c]||(delete i.dataMap[k],delete i.recordsMap[k],i.dataMap[c]=l,i.recordsMap[c]=q),e=k in o?o[k]:!1,f=k in p?p[k]:!1,e!==!1&&(delete o[k],o[c]=e),f!==!1&&(delete p[k],p[c]=f),m&&(g=w[h],g||(g=w[h]={}),g[c]=m)}}),aa.each(b.updateResults,function(a,b){if(b.success){var c,e,f,g=b.id,h=b.record,i=b.source,j=n[i];if(g in j.changes&&delete j.changes[g],g in j.originals&&delete j.originals[g],c=j.getRowById(g),f=j.getRecordForRow(c),f.markSaved(),h){if(d(h))try{h=b.record=JSON.parse(h)}catch(k){}e=w[i],e||(e=w[i]={}),e[j.getRowId(c)]=h}}}),i={},aa.each([z,u],function(a,b){e(b)&&aa.each(b,function(a,b){e(b)&&(i[a]||(i[a]=[]),aa.each(b,function(b){i[a].push(b)}))})}),e(i)&&(aa.each(i,function(b,c){a.$M(b).abandonRows(c,{notify:!1})}),i=null,z=null,u=null),e(w)&&aa.each(w,function(a,b){n[a].updateRows(b,{preventSetActive:!1,preventTrackChanges:!0})}),c=a.model.list(),aa.each(c,function(){var a=this,b=a.conditions,c={};a.hasChanged&&aa.each(a.changes,function(b,d){aa.each(d,function(d,e){if(e){var f,g,h=j[e];h&&(f=a.getField(d),f&&f.displaytype===ga&&(g=c[b],g||(g=c[b]={}),g[d]=h.id,g[f.rel]=h.row))}})}),b&&b.length&&aa.each(b,function(a,b){if("modelmerge"===b.type){var c,d=G(b.model),e=d&&d.getIdField(),f=b.mergeField,h=d&&f?d.getField(f):null;(h&&h.displaytype===ga||f===e)&&(g(b.operator)?(c=b.values,c&&c.length&&aa.each(c,function(a,b){var d=j[b];d&&(c[a]=d.id)})):b.value&&b.value in j&&(b.value=j[b.value].id))}}),e(c)&&a.updateRows(c,{preventSetActive:!1,preventTrackChanges:!1})}),aa.each(c,function(){this.evaluateFormulaFields({preventTrackChanges:!0})})):s&&!b.totalsuccess&&e(u)&&aa.each(u,function(b,c){var d=a.$M(b).changes;aa.each(c,function(a,b){d[a]=b})}),aa.each(h,function(a,b){b.hasChanged=!k[b.id],aa.each(b.registeredEditors,function(a,c){c._GUID in r||(r[c._GUID]=c),c.hadErrors!==!0&&(c.hadErrors=b.hasChanged)})}),aa.each(h,function(a,b){b.isBeingSaved=!1}),f.resolve({insertResults:b.insertResults,updateResults:b.updateResults,deleteResults:b.deleteResults,totalsuccess:b.totalsuccess})},function(a){aa.each(h,function(){this.isBeingSaved=!1}),aa.each(h,function(a,b){aa.each(b.registeredEditors,function(a,c){c._GUID in r||(r[c._GUID]=c),c.hadErrors!==!0&&(c.hadErrors=b.hasChanged)})}),y.totalsuccess=!1,d(a)&&(a=[a]),aa.each(a,function(a,b){x.push({message:b,severity:"ERROR"})}),f.reject(a)})}),aa.when.all(v).then(function(b){aa.each(n,function(a,b){aa.each(b.registeredLists,function(){this.render({resetItemModes:!0,resetPagination:!0,changedRows:w[b.id],destroyDeletedRows:!0})})}),aa.each(b,function(a,b){aa.merge(y.insertResults,b.insertResults),aa.merge(y.updateResults,b.updateResults),aa.merge(y.deleteResults,b.deleteResults),b.totalsuccess===!1&&(y.totalsuccess=!1),x&&x.length&&(y.messages=aa.merge(y.messages,aa.map(x,function(a){return a.message})))}),a.events.publish(t,[y]),k.resolve(y),h.callback&&h.callback(y)},function(b){var c=[];aa.each(b,function(){d(this)&&c.push(this)}),x&&x.length&&(y.messages=aa.merge(y.messages||[],aa.map(x,function(a){return a.message}))),a.events.publish(t,[y]),k.reject(c)}).always(function(){if(e(r)){var a=[];aa.each(r,function(){this.handleSave(!this.hadErrors,y),this.hadErrors=!1}),aa.each(r,function(){var b=h.initiatorId;this.clearInlineErrors(),b&&this._GUID!==b||(this.handleMessages(x,{initiatorId:b}),a.push(this._GUID)),aa.each(x,function(){var c=this,d=c.model&&c.model.registeredFieldsByRowThenField[c.rowId];d&&!d[0]&&(d=[d]),d&&d.length&&aa.each(d,function(){var d=this,e=c.fields;e&&e.length?aa.each(e,function(){var b=this;aa.each(d,function(){var d=this;aa.each(d,function(){this.id===b.id&&(this.handleMessage(c),a.push(this._GUID))})})}):aa.each(d,function(c,d){var e=d[b];if(e){var f=e.editor,g=f.id();-1===a.indexOf(g)&&(f.handleMessages(x),a.push(g))}})})})})}})}else{var A=q.length>0,B={event:t,models:n,initiatorId:h.initiatorId};B.totalsuccess=!A,s&&!B.totalsuccess?e(u)&&aa.each(u,function(b,c){var d=a.$M(b).changes;aa.each(c,function(a,b){d[a]=b})}):e(u)&&(i={},aa.each(u,function(a,b){e(b)&&(i[a]||(i[a]=[]),aa.each(b,function(b){i[a].push(b)}))}),e(i)&&aa.each(i,function(b,c){a.$M(b).abandonRows(c,{notify:!1})})),A&&(B.messages=aa.map(q,function(a){return a.message}));var C={};aa.each(n,function(a,b){var c=(!s||s&&B.totalsuccess)&&e(u)&&e(u[a]),d=b.registeredEditors,f=b.registeredLists;b.isBeingSaved=!1,b.hasChanged=e(b.changes)?!0:!1,d&&e(d)&&aa.each(d,function(a,b){b._GUID in r||(r[b._GUID]=b)}),c&&f&&e(f)&&aa.each(f,function(a,b){b._GUID in C||(C[b._GUID]=b)})}),e(r)&&aa.each(r,function(){this.handleSave(B.totalsuccess,B),h.initiatorId&&this._GUID!==h.initiatorId||this.handleMessages(q,B)}),A&&aa.each(q,function(){var a=this;aa.each(a.model.registeredFieldsByRowThenField[a.rowId],function(){var b=this;a.fields&&aa.each(a.fields,function(){var c=this;aa.each(b,function(){this.id===c.id&&this.handleMessage(a)})})})}),e(C)&&aa.each(C,function(){this.render({resetPagination:!0,resetItemModes:!0,destroyDeletedRows:!0})}),a.events.publish(t,[B]),h.callback&&h.callback(B),k.resolve(B)}return k.promise()}function L(b,c){if(b){b instanceof Array||(b=[b]),c||(c={});var d,f={},g={};aa.each(b,function(a,b){aa.each(b.registeredFields,function(a,b){b.messages=[]});var h,i={},j={},k=[];aa.each(b.changes,function(a){b.originals[a]||(a||"0"===a)&&k.push(b.getRowById(a))}),b.abandonRows(k,{notify:!1}),d=b.changes,b.changes={},aa.each(b.originals,function(a){var c=b.getRowById(a),d=b.record(a),e=j[a]={};d.isNew()?(aa.each(c,function(a){e[a]=""}),i[a]={}):aa.each(this,function(a,b){e[a]=b}),d.isMoribund()&&d.unmarkForDeletion()}),e(j)&&b.updateRows(j,{preventSetActive:!1,preventTrackChanges:!0}),h=aa.extend(!0,{},b.originals),b.originals=i,b.hasChanged=!1,b.evaluateFormulaFields({preventTrackChanges:!0}),b.notifyFieldsOfChange(h,c),b.registeredLists&&aa.each(b.registeredLists,function(){this._GUID in f||(f[this._GUID]=this)}),b.registeredEditors&&aa.each(b.registeredEditors,function(){this._GUID in g||(g[this._GUID]=this)})}),aa.each(f,function(a,b){b.render({resetItemModes:!0,resetPagination:!0,changedRows:d,destroyDeletedRows:!0})});var h={},i="models.cancelled",j={event:i,models:h,initiatorId:c.initiatorId};return b.forEach(function(a){h[a.id]=a}),aa.each(g,function(a,b){b.handleCancel&&b.handleCancel(j)}),a.events.publish(i,[j]),b}}function M(a,b,c){return c=c||{},aa.extend(c,{loadAllMetadata:!0}),Q(a,b,c)}function N(a,b,c){return Q(a,b,c)}function O(a,b){return Q(a,b,{syncOnly:!0})}function P(a,b){return Q(a,b,{addOnly:!0})}function Q(b,c,f){f=f||{};var g=aa.Deferred(),h={},i={},k={},l={},m="models.loaded",n=f.loadAllMetadata;if(aa.each(b,function(){var a=this,b=a.getDataSource(),c=b.name,d=f.syncOnly&&a.lastSyncTime;if(a.hasChanged)throw"Model '"+a.id+"' has unsaved changes. To update this model's data, you must first save or cancel the changes.";if(d){var e=a.getConditionByName("_sync",!1);if(!a.fieldsMap.IsDeleted){var g={id:"IsDeleted"};a.fields.push(g),a.fieldsMap.IsDeleted=g}e||(e={name:"_sync",type:"fieldvalue",field:"LastModifiedDate",inactive:!1,operator:"gte",encloseValueInQuotes:!1},a.addCondition(e)),a.setCondition(e,a.lastSyncTime),a.queryAllRows=!0}a.getConditionsWithDependencies().forEach(function(b){a.updateConditionValue(b)}),f.addOnly||(delete a.offsetPageNumber,delete a.offsetPageSize),a.isProcessing++,l[a.id]=++a.calloutIterator,n||(a.doQuery=!0),delete a.errors,h[c]||(h[c]=[],i[c]=b),h[c].push(a)}),e(h)){var o=[],p=[],q={},r={event:m,models:q,initiatorId:f.initiatorId};aa.each(h,function(a,b){var c=aa.Deferred(),e=i[a];o.push(c),e.load(b,f).always(function(){aa.each(b,function(a,b){b.isProcessing--})}).done(function(a){var d=a,e={};aa.each(d,function(a,c){var d,g=b[a],h=!1,i=f.syncOnly&&g.lastSyncTime,j=c.errors,k={pageComponent:f?f.pageComponent:$};if(g._invalidateDataIndices(),g.lastLoadTime=(new Date).getTime(),"function"==typeof g.lastSuccessfulCallout&&(g.lastSuccessfulCallout=g.lastSuccessfulCallout()),!(l[g.id]>g.lastSuccessfulCallout))return!0;if(g.lastSuccessfulCallout=l[g.id],j&&j.length&&(g.errors=j),f.loadAllMetadata||!g.hasMetadataLoaded()){if(g.hasMetadataLoaded()||(h=!0,g.setMetadataHasLoaded()),c.actions||delete c.actions,c.fields){var m={};c.fields&&c.fields.length&&aa.each(c.fields,function(a,b){b.id&&(m[b.id]=b)}),aa.each(g.fields,function(a,b){if(b.id){var c=m[b.id];c&&aa.extend(!0,c,b)}}),g.fields=c.fields,delete c.fields}aa.extend(g,c),g.initialize(k),h&&g.registerKeyPrefix(),d=g.data}else{if(g.isInitialized||g.initialize(k),i){var n=g.getConditionByName("_sync",!1),o=[];g.deactivateCondition(n),g.queryAllRows=!1,c.data.forEach(function(a){g.dataSourceTypeName===ea&&a.IsDeleted?g.removeRowById(g.getRowId(a)):o.push(a)}),d=g.adoptRows(o,{notify:!1})}else d=f.addOnly?g.adoptRows(c.data,{doAppend:!0,notify:!1}):g.data=c.data||[];g.isAggregate||(g._cloneRowsIfNeeded(f?f.pageComponent:$),g._createDefaultRowIfNeeded(),B(g)),g.conditions&&c.conditions&&aa.each(g.conditions,function(a,b){var d=c.conditions[a];d&&(b.values=d.values),aa.extend(b,d)}),g._generateDataIndices(),g.canRetrieveMoreRows=c.canRetrieveMoreRows,g.recordsLimit=c.recordsLimit,g.lastSyncTime=c.lastSyncTime,g.debug=c.debug,g.soql=c.soql}g.doQuery=!0,e[a]=d}),aa.each(d,function(a){b[a].evaluateFormulaFields({preventTrackChanges:!0,updatedRows:e[a]})}),e={},aa.each(b,function(a,b){b.lastLoadTime=(new Date).getTime()}),aa.each(b,function(a,b){q[b.id]=b,aa.each(b.getDependentConditions(),function(a,b){var c=G(a);c&&aa.each(b,function(a,b){c.updateConditionValue(b)})})});var g=[];aa.each(b,function(a,b){b.batchLabelModels&&aa.each(b.batchLabelModels,function(a,c){var d=c.getConditionByName("__reference_batch"),e={};aa.each(b.data,function(b,c){var d=c[a];(d||0===d)&&(e[d]=!0)}),0!==Object.keys(e).length&&(c.setCondition(d,aa.map(e,function(a,b){return b})),c.referenceFieldId=a,c.referenceModelId=b.id,g.push(c))})}),g.length?Q(g).then(function(a){aa.each(a.models,function(a,b){var c=G(b.referenceModelId),d=c.getField(b.referenceFieldId);d.rel&&aa.each(c.data,function(a,c){var e=c[b.referenceFieldId];(e||0===e)&&(c[d.rel]=b.dataSource.getDataSourceType().getReferenceHandler().getRowFromReferenceValue(b,e,d))})}),c.resolve(r)},function(a){c.reject(a)}):c.resolve(r)}).fail(function(a){d(a)?p.push({message:a,severity:"ERROR"}):a instanceof Array&&aa.each(a,function(a,b){p.push({message:b,severity:"ERROR"})}),aa.each(b,function(){var a=this;a.registeredEditors&&aa.each(a.registeredEditors,function(a,b){b._GUID in k||(k[b._GUID]=b)})}),c.reject(a)})}),aa.settle(o).always(function(b){function h(a){var b,h=[],i=!1;aa.each(a,function(a,b){b instanceof Array?(aa.merge(h,b),i=!0):d(b)&&h.push(b)}),e(k)?aa.each(k,function(){f.initiatorId&&this._GUID!==f.initiatorId||this.handleMessages(p,{initiatorId:f.initiatorId})}):j(h),b=i===!1&&1===h.length?h[0]:h,c&&c(b),g.reject(b)}function i(a,b){var c,d=a.registeredEditors,f=a.errors;if(f&&f.length&&(c=aa.map(f,function(a){return{message:a,severity:"ERROR"}})),e(c))if(e(d)){var g=b.initiatorId;aa.each(d,function(){g&&this._GUID!==g||this.handleMessages(c,{initiatorId:g})})}else j(c,a)}var l=[];return aa.each(b,function(a,b){b.success||l.push(b.results)}),l.length?void h(l):(aa.each(q,function(a,b){var c=f.initiatorId,d=b.registeredItems,e=b.registeredFields,g=b.registeredLists,h=b.registeredEditors;d&&aa.each(d,function(){this.fields&&aa.each(this.fields,function(){f.addOnly||this.destroy()})}),e&&aa.each(e,function(){this.render&&this.render(),b.unregisterField(this)}),g&&aa.each(g,function(){this.render({doNotCache:!f.addOnly,initiatorId:c})}),h&&aa.each(h,function(a,b){b._GUID in k||(k[b._GUID]=b),b.clearMessages()}),i(b,{initiatorId:c})}),aa.each(k,function(a,b){b.handleDataRefresh&&b.handleDataRefresh({updatedModels:aa.map(q,function(a){return a})})}),a.events.publish(m,[r]),c&&c(r),void g.resolve(r))})}return g.promise()}function R(b,c){c||(c={});var d={};aa.each(b,function(a,b){b.registeredFields&&aa.each(b.registeredFields,function(){b.unregisterField(this)}),b.registeredItems&&aa.each(b.registeredItems,function(){this.destroy()}),b.registeredLists&&aa.each(b.registeredLists,function(){this.render({doNotCache:!0})}),b.registeredEditors&&aa.each(b.registeredEditors,function(a,b){b._GUID in d||(d[b._GUID]=b)})}),aa.each(d,function(a,c){c.handleDataRefresh&&c.handleDataRefresh({updatedModels:b})});var e={},f="models.loaded",g={event:f,models:e,initiatorId:c.initiatorId};aa.each(b,function(a,b){e[b.id]=b}),a.events.publish(f,[g])}function S(c,d){var e,f,g,i,j,k,n,o=this,p=d?d.getDataSourceType():null,q=a.page.getParameters(d?d.getParentPageId():!1);if(p&&p.setDefaultConditionState?p.setDefaultConditionState(o):(o.sourceType="fieldvalue",o.type="fieldvalue",o.operator="=",o.inactive=!1,o.encloseValueInQuotes=!0),c)if(c.jquery&&c.attr){if(n=c,f="false"!==n.attr("enclosevalueinquotes"),e=b().adjustValueBasedOnQuotedness,g=n.attr("sourcetype"),g&&g!==o.sourceType?o.sourceType=g:g=o.sourceType,j=n.attr("fieldmodel"),"fieldvalue"===g){if(o.field=n.attr("field"),k=n.attr("nosourcerowbehavior"),k&&(o.noSourceRowBehavior=k),j){o.fieldModel=j;var r,s=a.$M(j);s&&s.data&&s.data.length&&(r=s.data[0],o.fieldRow=s.getRowId(r))}}else"param"===g?o.sourceParam=n.attr("sourceparam"):"snippet"===g?o.sourceSnippet=n.attr("sourcesnippet"):"userinfo"===g?o.sourceUserInfoType=n.attr("sourceuserinfotype"):b().endsWith(g,"property")&&(o.sourceProperty=n.attr("sourceproperty"),j&&(o.fieldModel=j));o.operator=n.attr("operator")||"=",o.type=n.attr("type")||"fieldvalue",o.encloseValueInQuotes=f,o.value=e(n.attr("value"),f),o.state=n.attr("state"),o.inactive="true"===n.attr("inactive")||!1,o.mergeField=n.attr("mergefield"),i=o.type,aa.each(["name","fieldFunction","fieldTargetObjects","label","model","noValueBehavior","customCookie","units","locationSource","locationModel","latitudeField","longitudeField","locationNoValueBehavior","locationChangeBehavior","locationDelta"],function(a,b){l(o,b,n,b.toLowerCase())});var t=n.attr("row");if(t)try{t=parseInt(t,10)}catch(u){t=0}if(o.row=t,"userinfo"===i)o.userInfoType=n.attr("userinfotype"),o.mergeField=o.userInfoType||o.value,o.value=null;else if("modelmerge"===i)o.mergeField=n.attr("mergefield")||o.value,o.value=null;else if("multiple"===i){var v=o.values=[];n.children("values").first().children().each(function(){var a=b().getXML(this);a.length>h("value")?(a=b().decodeXML(a.substring(7,a.length-8)),v.push(e(a,f))):v.push("")})}else if("join"===i){o.joinObject=n.attr("joinobject"),o.joinField=n.attr("joinfield");var w=n.children("conditions"),x=n.children("condition");w.length&&(o.subConditions=aa.map(w.children(),function(a){return new S(aa(a),d)})),x.length&&(o.subConditions=aa.map(x,function(a){return new S(aa(a),d)})),o.subConditionLogic=m(n.attr("logic"),o.subConditions)}}else aa.extend(o,c);"param"===o.type?(o.value in q?o.value=q[o.value]:delete o.value,o.value||(o.value="","noquery"===o.noValueBehavior?d&&(d.doQuery=!1):"deactivate"===o.noValueBehavior&&(o.inactive=!0,o.originalInactive=!0)),o.originalValue=o.value,o.type="fieldvalue"):"fieldvalue"===o.type&&o.name in q&&(o.originalValue=o.value,o.value=q[o.name],o.inactive=!1),void 0===o.originalInactive&&(o.originalInactive=o.inactive),void 0===o.originalValue&&(o.originalValue=o.value)}function T(c){var d,e,f,g,i,j,k,n,o,q,r,s,t,u,v,w,x,y,z=c.xml,A=c.field||{},B=c.model,C=c.dataSourceType?c.dataSourceType:B?B.getDataSourceType():null,D="true"===z.attr("uionly")||C&&"Ui-Only"===C.name,E=C&&C.prop("runtime.metadataSource"),F="local"===E,G=F||"hybrid"===E,H="true"===z.attr("overridemetadata"),I=z.attr("readonly");if(f=A.id=b().escapeSingleQuotes(z.attr("id")),l(A,"targetObjects",z,"targetobjects"),p(A,"name",z,"name"),p(A,"function",z,"function"),l(A,"type",z,"type"),p(A,"orderByClause",z,"orderby"),"true"===z.attr("sortable")&&(A.sortable=!0),"false"===z.attr("query")&&(A.query=!1),(D||G)&&(A.accessible=!0),D&&(A.uiOnly=!0),H&&(A.overrideMetadata=!0),(H||D||G)&&(l(A,"displaytype",z,"displaytype"),l(A,"defaultvaluetype",z,"defaultvaluetype"),l(A,"mergefield",z,"mergefield"),l(A,"model",z,"model"),l(A,"userinfotype",z,"userinfotype"),z.attr("label")&&(A.label=z.attr("label")),z.attr("helptext")&&(A.inlineHelpText=z.attr("helptext")),"true"===z.attr("required")&&(A.required=!0),z.attr("placeholder")&&(A.placeholder=z.attr("placeholder")),A.createable="false"!==z.attr("createable"),A.editable="false"!==z.attr("editable"),"true"===I&&(A.createable=A.editable=!1),g=A.displaytype,g===qa&&(g=A.displaytype=z.attr("returntype"),A.calculated=!0,D&&(A.createable=A.editable=!1,z.attr("readonly","true")),q="formula",r=z.children(q).first(),s=r&&r.length?b().getXML(r.get(0)):"",s=s.length>q.length+3?b().decodeXML(s.substring(q.length+2,s.length-q.length-3)):null,A.formula=s),g===ha||g===ia||g===ja?(z.attr("picklistsource")&&(A.picklistSource=z.attr("picklistsource")),z.attr("picklistmodel")&&(A.picklistSourceModel=z.attr("picklistmodel")),z.attr("snippet")&&(A.picklistSourceSnippet=z.attr("snippet")),z.attr("entryvalue")&&(A.picklistEntryValue=z.attr("entryvalue")),z.attr("entrylabel")&&(A.picklistEntryLabel=z.attr("entrylabel")),z.attr("limitentries")&&(A.limitEntries="true"===z.attr("limitentries")),k=z.children("picklistentries").children(),k.length&&(A.picklistEntries=aa.map(k,function(a){var b=aa(a),c={value:b.attr("value"),label:b.attr("label"),defaultValue:"true"===(b.attr("defaultValue")||"false"),active:!0};return"true"===b.attr("disabled")&&(c.disabled=!0),c}))):aa.inArray(g,[ka,la,ma])>-1?(i=z.attr("precision"),null===i&&D?A.precision=8:null!==i&&(A.precision=parseInt(i,10)),j=z.attr("scale"),null===j&&D?A.scale=2:null!==j&&(A.scale=parseInt(j,10))):g===na?(n=z.attr("digits"),null===n&&D?A.digits=8:null!==n&&(A.digits=parseInt(n,10))):g===pa||g===oa?(o=z.attr("length"),null===o||""===o||void 0===o?D&&(A.length=255):A.length=parseInt(o,10)):g===ga&&(d=a.dataSource.getDataSourceFromXML(z),e=d.getDataSourceType(),A.dataSourceName=d.name,e&&e.getReferenceHandler&&e.getReferenceHandler().getMetadataHandler(z,A,B,f,D)),l(A,"defaultValue",z,"defaultValue"),x=A.enclosedInQuotes="false"!==z.attr("enclosevalueinquotes"),y=A.defaultValues=[],z.children("values").first().children().each(function(){var a=b().getXML(this);a.length>h("value")?(a=b().decodeXML(a.substring(7,a.length-8)),y.push(b().adjustValueBasedOnQuotedness(a,x))):y.push("")})),-1!==aa.inArray(A.type,[za,Aa])&&(t=z.children("fields").first(),w=z.children("conditions").first(),t.length>0&&(u=A.subFields=[],t.children("field").each(function(){var a=aa(this);u.push(new T({xml:a,field:c.field,model:c.model,dataSourceType:c.dataSourceType}))})),A.type===za)){if(v=z.attr("limit"),v||"0"===v)try{A.recordsLimit=parseInt(v,10),A.recordsLimit&&A.recordsLimit<1&&(A.recordsLimit=1)}catch(J){}A.subConditions=aa.map(w.children(),function(a){return new S(aa(a),B)}),A.subConditionLogic=m(w.attr("logic"),A.subConditions)}return A}function U(a){var b,c;a&&(a.jquery?(b=a.attr("type"),c={verb:a.attr("verb"),endpoint:a.attr("endpoint"),type:b,pathToContent:a.attr("pathtocontent"),scopes:a.attr("scopes"),sendChanges:a.attr("sendchanges"),successIf:a.attr("successif"),successField:a.attr("successfield"),successValue:a.attr("successvalue"),isBatch:"true"===a.attr("batch")},"insert"===b&&(c.insertResponse=a.attr("insertresponse"),c.createdRecordIdLocation=a.attr("createdrecordidlocation")),c.sendChanges&&(c.changeMapping=a.attr("changemapping"),c.changeMappingPrefix=a.attr("changemappingprefix"),"custompayloadinbody"===c.sendChanges&&(c.payloadSnippet=a.attr("payloadsnippet"),c.contentType=a.attr("contenttype")))):aa.isPlainObject(a)&&(c=a),aa.extend(this,c))}function V(a,c,d){this._model=a,this._row=c||{},c[Ja]=this,b().isUndefined(d)||(this[Ea]=d)}function W(c,e){var f=this;if(e&&aa.extend(f,e),c)if(d(c))try{o({model:f,xml:b().makeXMLDoc(c)})}catch(g){aa(document.body).one("pageload",function(){a.component.getByType("skuidpage")[0].addProblem("Unable to create Model: invalid Model XML string provided to Model constructor. "+g)})}else c.jquery?o({model:f,xml:c}):aa.extend(f,c);f.id||(f.id=a.utils.generateUniqueId()),f.conditions||(f.conditions=[]),f.fields||(f.fields=[]),f.data||(f.data=[]),f.changes={},f.originals={},f.registeredFields={},f.registeredFieldsByRowThenField={},f.registeredItems={},f.registeredItemsByRow={},f.registeredLists={},f.registeredEditors={},f.hasChanged=!1,"preventUnloadIfUnsavedChanges"in f||(f.preventUnloadIfUnsavedChanges=!0),f.isProcessing=0,f.calloutIterator=0,f.lastSuccessfulCallout=0,f.events={},f.extensions||(f.extensions={}),f.recordsMap={},i(f)}function X(a){var b=a.children("actions"),c=a.children("fields").first().children("field"),d=a.children("events").first().children("event"),e=a.children("conditions").first().children("condition"),f={};return b.length&&(f.actions=b),c.length&&(f.fields=aa.map(c,function(a){return a.textContent})),d.length&&(f.events=aa.map(d,function(a){return a.textContent})),e.length&&(f.conditions=aa.map(e,function(a){return a.textContent})),f}function Y(a,b){var c,e,f=b[0],g={};return b.length<2?!1:(d(b[1])?(e={},e[b[1]]=b[2],c=b[3]):(e=b[1],c=b[2]),g[a.getRowId(f)]=e,this.updates=g,void(this.options=c))}function Z(a,b){this.list=a,this.map=b}var $,_=a.model||(a.model={}),aa=a.$,ba=a.time,ca=function(){return a.platform.getDefaultDataSourceName()},da=a.constants,ea=da.SALESFORCE,fa=da.DISPLAY_TYPES,ga=fa.REFERENCE,ha=fa.PICKLIST,ia=fa.MULTIPICKLIST,ja=fa.COMBOBOX,ka=fa.DOUBLE,la=fa.CURRENCY,ma=fa.PERCENT,na=fa.INTEGER,oa=fa.TEXT,pa=fa.TEXTAREA,qa=fa.FORMULA,ra=fa.DATE,sa=fa.DATETIME,ta=fa.BOOLEAN,ua=fa.UUID,va="undefined",wa="number",xa="string",ya="boolean",za="childRelationship",Aa="array",Ba="__hadPriorChanges",Ca="_eventSubscriptions",Da="clone_",Ea="__id",Fa="__cloned",Ga="__new",Ha="__deleted",Ia="__notdeleted",Ja="__skuid_record__",Ka=1,La={},Ma={},Na={},Oa=1;V.prototype={id:function(){return this.getId()},getId:function(){if(this.hasOwnProperty(Ea))return this[Ea];var a=this.model(),c=this.isNew()?b().generateUniqueId():a.getDataSource().getRowId(this.row(),a);return this.setId(c),c},setId:function(a){return this[Ea]=a,this},name:function(){return this.model().getDataSource().getRowName(this.row(),this.model())},model:function(){return this._model},row:function(){return this._row},getRow:function(){return this._row},setRow:function(a){return this._row=a,a[Ja]=this,this},isNew:function(){return this[Ga]===!0},isClone:function(){return this[Fa]===!0},isMoribund:function(){return this.isMarkedForDeletion()},isMarkedForDeletion:function(){return this[Ha]===!0},markForDeletion:function(){return this[Ha]=!0,this},unmarkForDeletion:function(){return delete this[Ha],this},markNew:function(){return this[Ga]=!0,this},markCloned:function(){return this[Fa]=!0,this},markSaved:function(){var a=this;return[Ga,Fa,Ha].forEach(function(b){delete a[b]}),a},get:function(a){var c,d=this._row,e=b().getObjectProperty;return a?e(d,a):(c={},aa.each(d,function(a,b){a!==Ja&&(c[a]=b)}),c)},set:function(){return 1===arguments.length?aa.each(arguments[0],function(a,c){b().setObjectProperty(this._row,a,c)}):2===arguments.length&&b().setObjectProperty(this._row,arguments[0],arguments[1]),this}},Z.prototype={indexOf:function(a){var b=-1;return aa.each(this.list,function(c,d){return d.fieldName&&d.fieldName===a||d.fieldId===a?(b=c,!1):void 0}),b},size:function(){return this.list.length}},W.prototype={addPageProblems:function(a){return j(a,this)},getDataSource:function(){return i(this)},getDataSourceType:function(){var a=this.getDataSource();return a&&a.getDataSourceType()},setParentPageId:function(a){var b=this;return b._parentPageId=a,b},getParentPage:function(){return a.$C(this._parentPageId)},getParentPageId:function(){return this._parentPageId},hasMetadataLoaded:function(){return!this.needsMetadataLoad},setMetadataHasLoaded:function(){return this.needsMetadataLoad=!1,this},isSingleRow:function(){var a=this,b=!1;return a.conditions&&a.conditions.length&&aa.each(a.conditions,function(a,c){return c.field&&"id"===c.field.toLowerCase()&&c.type&&"param"===c.type?(b=!0,!1):void 0}),b},getField:function(a,b){var c,d,e=this.fieldsMap,f=e;return f&&(f=a in e?e[a]:!1,!f&&b&&b in e&&(c=e[b],d=c&&c.type===za?c.subFieldsMap:null,d&&a in d&&(f=d[a]))),f},getFieldValue:function(a,c,d){if(!a)return null;var e,f=this,g=b().getObjectProperty(a,c);return null===g&&"Id"===c&&(e=f.getRecordForRow(a),e&&(g=e.id())),d?g:b().encodeHTML(g)},getFieldValues:function(a,b,c){var d=[],e=this;return aa.each(b,function(){d.push(e.getFieldValue(a,this,c))}),d},getFirstRow:function(){return this.data[0]},getRowById:function(a){return a in this.dataMap?this.dataMap[a]:!1},getNameField:function(){var a=this.getDataSource();return a.getNameField?a.getNameField(this):void 0},getNameFieldValueForRow:function(a,c){var d,e=this,f=e.objectName,g=e.getNameField();return e.dataSourceTypeName===ea&&f&&-1!==aa.inArray(f,["Lead","User","Contact"])?d=b().mergeAsText("row","{{#Name}}{{{Name}}}{{/Name}}{{^Name}}{{{FirstName}}} {{{LastName}}}{{/Name}}",{createFields:!1},e,a):g&&(d=e.getFieldValue(a,g,!0)),d&&c!==!0&&(d=b().encodeHTML(d)),d},load:function(a){return M([this],a)},updateData:function(a,b){return N([this],a,b)},getOverrideableFieldMetadata:function(a){var b,c,d;return a.overrideMetadata===!0&&(b=a.displaytype,c=["displaytype","defaultValue","label","inlineHelpText","idField","nameField","placeholder"],d={overrideMetadata:!0},a.calculated===!0&&void 0!==a.formula&&c.push("calculated","createable","editable","formula"),a.createable===!1&&c.push("createable"),a.editable===!1&&c.push("editable"),-1!==aa.inArray(b,[ha,ia,ja])?c.push("picklistEntries"):-1!==aa.inArray(b,[ka,la,ma])?c.push("precision","scale"):b===na?c.push("digits"):-1!==aa.inArray(b,[oa,pa,"STRING",ja,"ANYTYPE"])?c.push("length"):b===ga&&c.push("isNamePointing","relationshipName","referenceTo","rel","ref"),aa.each(c,function(b,c){var e=a[c];void 0!==e&&(d[c]=aa.isArray(e)?aa.extend(!0,[],e):e)})),d},sync:function(a){return O([this],a)},getMoreData:function(a){return P([this],a)},loadNextOffsetPage:function(a){var b=this;if(b.canRetrieveMoreRows&&!b.isProcessing){if(b.offsetPageNumber&&b.offsetPageSize)b.offsetPageNumber++;else if(b.recordsLimit>2e3?b.offsetPageSize=2e3:b.offsetPageSize=b.recordsLimit||100,b.data.length>0){var c=b.offsetPageSize>0?Math.ceil(b.data.length/b.offsetPageSize):1;b.offsetPageNumber=c>1?c:2}else b.offsetPageNumber=1;b.getMoreData(function(){a&&a()})}},loadAllRemainingRecords:function(a){a=a||{};var b=this,c=b.recordsLimit,d=function(){if(b.canRetrieveMoreRows){var e=b.data.length;a.stepCallback&&a.stepCallback(e+1,e+c),b.loadNextOffsetPage(d)}else a.finishCallback&&a.finishCallback(b.data.length)};d()},getRecords:function(){var a=this;return aa.map(a.data,function(b){return a.getRecordForRow(b)})},getRows:function(a,c){return b().filterRowsByConditions(this.data,a,c,this)},getRawRows:function(){var a=this;return a.getRows.apply(a,arguments).map(function(a){var b={};return aa.each(a,function(c,d){a.hasOwnProperty(c)&&c!==Ja&&(b[c]=d)}),b})},adoptRow:function(a,b){var c=this.adoptRows([a],b);return c&&c.length?c[0]:null},adoptRows:function(a,b){b||(b={});var c=this,d=[];return aa.each(a,function(a,e){var f=c.getRowId(e),g=f&&c.getRowById(f);g?aa.extend(g,e):(g={},g=aa.extend(!0,g,e),b.doAppend?c.data.push(g):c.data.unshift(g),c.dataMap[f]=g,c.recordsMap[f]=new V(c,g,f)),d.push(g)}),b.notify!==!1&&c.notifyEditorsOfDataRefresh(),d},abandonRow:function(a){return this.abandonRows([a]),a},abandonRows:function(a,b){var c=this,d=c.changes,f=c.originals,g=c.registeredItemsByRow,h=c.registeredFieldsByRowThenField,i=[],j=!(b&&b.notify===!1);if(a&&a.length)return aa.each(a,function(a,b){var d=c._findRow(b);d&&i.push(d)}),i.length&&aa.each(i,function(a,b){var e=c.getRowId(b),i=aa.inArray(b,c.data),k=d?d[e]:!1,l=f?f[e]:!1;k&&delete d[e],l&&delete f[e],-1!=i&&(c.data.splice(i,1),delete c.dataMap[e],delete c.recordsMap[e]),j||c.registeredLists&&aa.each(c.registeredLists,function(){this.handleRowDeletion&&this.handleRowDeletion(e)}),e in g&&(aa.each(g[e],function(){c.unregisterItem(this)}),delete g[e]),e in h&&(aa.each(h[e],function(a,b){b.length&&aa.each(b,function(){c.unregisterField(this)})}),delete h[e])}),0===e(c.changes)&&(c.hasChanged=!1),j&&c.notifyEditorsOfDataRefresh(),a},emptyData:function(){var a=this,b=a.data;return a.data=[],a.changes={},a.originals={},a.hasChanged=!1,a._invalidateDataIndices(),a.notifyEditorsOfDataRefresh(),aa.each(a.registeredItemsByRow,function(b,c){aa.each(c,function(){a.unregisterItem(this)})}),a.registeredItemsByRow={},aa.each(a.registeredFieldsByRowThenField,function(b,c){aa.each(c,function(b,c){aa.each(c,function(){a.unregisterField(this)})})}),a.registeredFieldsByRowThenField={},b},abandonAllRows:function(){return this.emptyData()},record:function(a){var c=b().isObject(a)?this.getRowId(a):a;return this.getRecordById(c)},getRecordById:function(a){return this.recordsMap[a]},createRow:function(c){function d(c){if(!c.inactive&&c.field&&"null"!=c.value){var d,e=g.getField(c.field),f=e?e.displaytype:null,h=c.operator||"=";if(e&&e.createable&&("="===h||"starts with"===h))if(g.updateConditionValue(c),d=c.value,"="===h&&f===ga){var j=e.rel,k=b().getNameField(e.ref),l=c.nameFieldValue||!1;if(l||"RecordType"!==e.ref||aa.each(g.recordTypeInfos,function(){return this.recordTypeId===d?(l=this.name,!1):void 0;
}),!l){if(c.model){var m=a.$M(c.model),o=m.getDataSourceType().name===ea;m&&m.data.length&&aa.each(m.data,function(a,b){if(d===m.getRowId(b)||o&&d===b.Id15){var c=m.getRecordForRow(b);return l=c?c.get():b,!1}})}if(!l){var p=b().getFieldReference(c.field,e);aa.each(n,function(a,b){b===c||b.field!==p||b.inactive||!b.value||c.operator&&"="!==c.operator||(l=b.value)})}}var q={};if(l){var s;"object"==typeof l?s=l:(s={},s[k]=l),q[j]=s}q[c.field]=d,g.updateRow(i,q)}else{if(d=r(d,f),b().startsWith(f,ra)&&!d)return!0;g.updateRow(i,c.field,d)}}}c||(c={});var e,f,g=this,h=g.hasChanged,i={},j={},k=g.dataSourceTypeName===ea;if(c.editModeForNewItems&&(j.editModeForNewItems=!0),g.hasChanged=!0,e=new V(g,i).markNew(),f=e.id(),c.doAppend?g.data.push(i):g.data.unshift(i),g.dataMap&&(g.dataMap[f]=i),g.recordsMap&&(g.recordsMap[f]=e),k&&(i.Id=f),"ignoreDefaults"in c==!1||c.ignoreDefaults!==!0){var l,m,n=[],o=c.additionalConditions,p=g.recordTypeInfos&&g.recordTypeInfos.length>1,q=[];if(g.conditions&&g.conditions.length&&aa.each(g.conditions,function(a,b){n.push(b)}),o&&o.length&&aa.each(o,function(a,b){n.push(b)}),k){if(p&&aa.each(g.recordTypeInfos,function(){return this.isDefaultRecordTypeMapping&&!this.isMaster?(l=this.recordTypeId,!1):void 0}),g.createable&&n&&aa.each(n,function(a,b){!b.inactive&&b.field&&"RecordTypeId"===b.field&&b.value&&"null"!=b.value&&b.value.length>=15&&(l=b.value,q.unshift(a))}),l){var s=l.substring(0,15),t={};aa.each(g.recordTypeInfos,function(){return this.recordTypeId.substring(0,15)===s?(m=this,l=this.recordTypeId,!1):void 0}),t.RecordTypeId=l,m&&(t.RecordType={Name:m.name}),g.updateRow(i,t,{preventSetActive:!0})}q.length&&aa.each(q,function(){n.splice(this,1)})}g.fields&&aa.each(g.fields,function(a,b){b.createable&&g.getDefaultValue(b,g,l)&&g.updateRow(i,b.id,b.evaluatedDefaultValue,{preventSetActive:!0})}),n&&aa.each(n,function(a,b){d(b)})}f in g.changes||(g.changes[f]={}),g.evaluateFormulaFields({updatedRows:[i],updates:g.changes[f]}),g.registeredLists&&aa.each(g.registeredLists,function(){c.initiatorId&&this._GUID===c.initiatorId||this.handleNewRow(i,j)}),g.notifyEditorsOfChange({hadPriorChanges:h,changes:g.changes[f]});var u="row.created",v={modelId:g.id,rowId:f,row:i,initiatorId:c?c.initiatorId:null,event:u};return aa.extend(v,j),a.events.publish(u,[v]),i},updateRow:function(){var a=new Y(this,arguments),b=this.updateRows(a.updates,a.options);return b&&b.length?b[0]:b},updateRows:function(a,c){var d,f,g,h,i=this,j=i.hasChanged,k=[],l=b().setObjectProperty;return a?(c||(c={}),c.preventTrackChanges||(c.preventTrackChanges=!1),f=c.notifyFields,typeof f===va&&(f=!0),g=c.notify,typeof g===va&&(g=!0),aa.each(a,function(a,e){var f,g,h=i.getRowById(a),j=i.isNewRow(h);return h&&e?void aa.each(e,function(m,n){var o,p,q,s=i.getField(m),t=s&&s.displaytype,u=s&&s.id&&b().isString(s.id),v=(!u||(c._ignoreMetadata?!0:j?s.createable:s.editable))&&!c.preventTrackChanges,w=t===ga,x=w&&!n,y=w&&b().getReferenceFieldRelationshipName(m),z=i.getFieldValue(h,m,!0);if(p=t?r(n,t):n,(z===p||p!==p)&&!c.alwaysAddChanges)return!0;if(w&&!x&&void 0===e[y]){if(aa.each(i.data,function(){return this[m]&&(this[m]===p||this[m].length&&this[m].length>=15&&this[m].substr(0,15)===p)&&i.getFieldValue(this,y)?(o=i.getFieldValue(this,y,!0),!1):void 0}),!o&&i.dataSourceTypeName===ea){var A=s.referenceTo,B=[],C=[];A&&A.length&&aa.each(A,function(){B.push(this.keyPrefix),C.push(this.objectName)}),B.length>1&&p.length>=15&&(B=[p.substring(0,3)]),aa.each(B,function(a,b){aa.each(_.getModelsByKeyPrefix(b)||[],function(){var a=this,b=a.getDataSourceType().name===ea;return a.data&&a.data.forEach(function(c){if(a.getRowId(c)===p||b&&c.Id15&&c.Id15===p){var d=a.getRecordForRow(c);return o=d?d.get():c,!1}}),o?!1:void 0})})}if(!o){var D=i.dataSource&&i.dataSource.name;aa.each(I(D),function(){var a=this,b=[];if(a!==i)return aa.each(this.fields,function(){var a=this,c=a.referenceTo;c&&c.length&&aa.each(C,function(d,e){aa.each(c,function(){e===this.objectName&&b.push(a)})})}),b.length&&aa.each(a.getRows(),function(){var c=this;return aa.each(b,function(){var b=this;return a.getFieldValue(c,b.id,!0)===p?(o=a.getFieldValue(c,b.rel,!0),!1):void 0}),o?!1:void 0}),o?!1:void 0})}}v&&(m&&(f||(d||(d={}),d[a]={},f=i.changes[a],d[a][Ba]=!!f,f||(f=i.changes[a]={})),q=p,l(f,m,q),l(d[a],m,q),x?delete f[y]:w===!0&&(l(f,y,o),l(d[a],y,o))),i.hasChanged||c.preventSetActive||(i.hasChanged=!0),j||(g||(g=i.originals[a],g||(g=i.originals[a]={})),g.hasOwnProperty(m)||(l(g,m,i.getFieldValue(h,m,!0)),x&&l(g,y,i.getFieldValue(h,y,!0))))),l(h,m,p),x?delete h[y]:w===!0&&l(h,y,o),k.push(h)}):!0}),d&&(h=!1,aa.each(d,function(a,b){return b&&e(b)>1?(h=!0,!1):void 0}),h&&(i.evaluateFormulaFields({updatedRows:k,updates:a,preventTrackChanges:c.preventTrackChangesSecondTime}),g!==!1&&i.notifyEditorsOfChange({hadPriorChanges:j,changes:d}),f!==!1&&g!==!1&&i.notifyFieldsOfChange(d,{initiatorId:c.initiatorId,hadPriorChanges:j}))),k):!1},notifyFieldsOfChange:function(b,c){var d=this,e=d.registeredFieldsByRowThenField;c=c||{},aa.each(b,function(b,f){var g=f[Ba];delete f[Ba],aa.each(f,function(a,d){b in e&&a in e[b]&&aa.each(e[b][a],function(){c.initiatorId&&this._GUID===c.initiatorId||this.handleChange&&this.handleChange(d,a)})});var h="row.updated";a.events.publish(h,[{event:h,modelId:d.id,rowId:b,row:d.getRowById(b),updates:f,rowHadPriorChanges:g,modelHadPriorChanges:c.hadPriorChanges,initiatorId:c?c.initiatorId:null}])})},_findRow:function(a){var b,c=this,d=typeof a;return"object"===d?a:(b=c.getRowById(a),b||d!==wa||(b=c.data[a]),b)},deleteRows:function(b,c){c||(c={});var d=this,e={},f=d.hasChanged,g=c.notify!==!1,h="row.deleted";return b||(b=d.data),b.length&&(d.hasChanged=!0,aa.each(b,function(a,b){if(b=d._findRow(b)){var f,h=d.getRowId(b),i=d.changes[h],j=d.record(h);i||(d.changes[h]={},i=d.changes[h]),j.markForDeletion(),j.isNew()||(f=d.originals[h],f||(d.originals[h]={},f=d.originals[h])),h in d.registeredItemsByRow&&aa.each(d.registeredItemsByRow[h],function(){c&&c.initiatorId&&this._GUID===c.initiatorId||this.handleMarkRowForDeletion&&this.handleMarkRowForDeletion(b)}),g&&(e[h]={},e[h][Ha]=!0,e[h][Ia]=!1)}}),g&&(d.notifyEditorsOfChange({hadPriorChanges:f,changes:e}),aa.each(e,function(b){a.events.publish(h,[{event:h,modelId:d.id,rowId:b,row:d.getRowById(b),initiatorId:c?c.initiatorId:null,modelHadPriorChanges:f}])}))),d},deleteRow:function(a,b){return this.deleteRows([a],b),this},undeleteRows:function(b,c){c||(c={});var d=this,e={},f=d.hasChanged,g=c.notify!==!1,h="row.undeleted";b||(b=d.data),b.length&&(d.hasChanged=!0,aa.each(b,function(a,b){if(b=d._findRow(b)){var f=d.getRowId(b),h=d.record(f);h.unmarkForDeletion(),f in d.registeredItemsByRow&&aa.each(d.registeredItemsByRow[f],function(){c.initiatorId&&this._GUID===c.initiatorId||this.handleUnmarkRowForDeletion&&this.handleUnmarkRowForDeletion(b)}),g&&(e[f]={},e[f][Ha]=!1,e[f][Ia]=!0)}}),g&&(d.notifyEditorsOfChange({hadPriorChanges:f,changes:e}),aa.each(e,function(b){a.events.publish(h,[{event:h,modelId:d.id,rowId:b,row:d.getRowById(b),initiatorId:c?c.initiatorId:null,modelHadPriorChanges:f}])})))},undeleteRow:function(a,b){return this.undeleteRows([a],b)},removeRowById:function(a){return a||0===a?this.abandonRow(this.getRowById(a)):void 0},validateRequiredFields:function(){var a=[];return aa.each(this.registeredLists,function(){a=a.concat(this.validateRequiredFields())}),a},getNewId:function(){var a=this.getDataSource();return a&&a.getNewId?a.getNewId():x()},save:function(a){return K([this],a)},cancel:function(a){return L([this],a),this},notifyEditorsOfChange:function(a){this.registeredEditors&&aa.each(this.registeredEditors,function(){this.handleChange&&this.handleChange(a)})},getConditionCookieName:function(a){return f(this,a)},setCondition:function(b,c,e){var f=!1,h=this,i="condition.valueChanged",j="",k={event:i,conditionName:b.name,modelId:h.id,newValue:"",newValues:[],oldValue:"",oldValues:[]};b.inactive=!1,"modelmerge"===b.type&&(b.type="fieldvalue"),g(b.operator)&&(typeof c!==va&&(c instanceof Array?(f=!0,b.values=c):d(c)&&-1!=c.indexOf(";")?b.values=c.split(";"):b.values=[c]),k.newValues=b.values),f||(b.value=c,k.newValue=c),j=b.originalValue,j instanceof Array?(k.oldValue="",k.oldValues=j):(k.oldValue=j,k.oldValues=[]),e&&b.name&&this.getPersonalizationService().setCondition({name:b.name,value:c}),a.events.publish(i,[k])},deactivateCondition:function(b,c){b.inactive=!0,b.value=b.originalValue,g(b.operator)&&(b.originalValue?-1!=b.originalValue.indexOf(";")?b.values=b.originalValue.split(";"):b.values=[b.originalValue]:b.values&&b.values.length||(b.values=[])),c&&b.name&&this.getPersonalizationService().setCondition({name:b.name,value:"-off-"}),a.events.publish("condition.deactivated",[{event:"condition.deactivated",conditionName:b.name,modelId:this.id}])},deactivateFilterableConditions:function(a){var b=this;b&&b.conditions&&b.conditions.length&&aa.each(b.conditions,function(c,d){b.isFilterableCondition(d)&&b.deactivateCondition(d,a)})},isFilterableCondition:function(a){return a.state&&-1!==a.state.indexOf("filter")},activateCondition:function(b,c){b.inactive=!1,c&&b.name&&this.getPersonalizationService().setCondition({name:b.name,value:"-on-"}),a.events.publish("condition.activated",[{event:"condition.activated",conditionName:b.name,modelId:this.id}])},resetCondition:function(b,c){var d="",e={event:"condition.reset",conditionName:b.name,modelId:this.id,newValue:"",newValues:[],oldValue:"",oldValues:[],isActive:!b.inactive,wasActive:!b.originalInactive};b.inactive=b.originalInactive,b.value=b.originalValue,g(b.operator)&&(b.originalValue?-1!=b.originalValue.indexOf(";")?b.values=b.originalValue.split(";"):b.values=[b.originalValue]:b.values&&b.values.length||(b.values=[]),e.newValues=b.values),d=b.originalValue,d instanceof Array?(e.oldValue="",e.oldValues=d):(e.oldValue=d,e.oldValues=[]),c&&b.name&&this.getPersonalizationService().resetCondition({name:b.name}),a.events.publish("condition.reset",[e])},getConditionValueResult:function(c){var d,e,f=c.noValueBehavior||(-1!==aa.inArray(c.type,["param","multiple"])?"":"deactivate"),g=this,h={},i=b().startsWith(c.state,"filterable")&&c.name,j=c.value;if("userinfo"===c.type)e=b().getUserInfoPropValue(c.userInfoType);else if("modelmerge"===c.type){var k=G(c.model),l=k.getFirstRow();l&&(e=k.getFieldValue(l,c.mergeField,!0))}else if("blank"===c.type)e=null;else if("param"===c.type){var m=a.page.getParameters(g?g.getParentPageId():null),n=c.valueParamName;c.value&&c.value in m?(e=m[c.value],c.valueParamName=c.value):n&&n in m&&(e=m[n])}else e=c.value;return i&&typeof j!==va&&j!==e&&(e=j),d=e||e===!1||0===e||null===e,d?h.value=c.value=e:c.values&&c.values.length?h.values=c.values:"noquery"===f?(g&&(g.doQuery=!1),h.status="noquery"):"deactivate"===f?(c.originalInactive&&(c.originalInactive=c.inactive),c.inactive=!0,h.value=c.value=null,h.status="deactivate"):h.value=c.value="",h},getConditionValue:function(a){return this.getConditionValueResult(a).value},updateConditionValue:function(a){var b,c=a.type,d=a.mergeField,e=G(a.model),f=e&&e.data,h=a.row,i=this,j=!1;if("modelmerge"===c&&d&&f&&!a.inactive)if(g(a.operator))if(b=a.values,a.values=aa.map(f,function(a){return e.getFieldValue(a,d,!0)}),b&&b instanceof Array){if(b)if(b.length!==a.values.length)j=!0;else if(b.length){var k={};b.forEach(function(a){k[a]=1}),aa.each(a.values,function(a,b){return k.hasOwnProperty(b)?void 0:(j=!0,!1)})}}else j=!0;else(!h||0>h||h>=f.length)&&(a.row=0),b=e.getFieldValue(f[a.row],d,!0),a.value!==b&&(a.value=b,j=!0);if("userlocation"===a.locationSource&&!a.inactive&&!a.latitudeValue){var l=a.locationDelta?parseInt(a.locationDelta,10):100,m={enableHighAccuracy:!0,timeout:15e3,maximumAge:36e5};navigator.geolocation?(aa.blockUI({message:"Determining your current location...",onOverlayClick:aa.unblockUI}),navigator.geolocation[("false"===a.locationChangeBehavior?"getCurrent":"watch")+"Position"](function(b){aa.unblockUI();var c,d,e=b.coords,f=e.latitude,g=e.longitude;c=a.latitudeValue,d=a.longitudeValue,i.isProcessing||c&&d&&!(c&&d&&C(f,g,c,d)>=l)||(a.latitudeValue=f,a.longitudeValue=g,j=f!==c||g!==d,i.updateData())},function(b){aa.blockUI({message:"Unable to determine your current location: "+b.message,timeout:2e3}),"noquery"===a.locationNoValueBehavior?i.emptyData():(a.inactive=!0,i.updateData())},m)):aa.blockUI({message:"Your browser does not support GeoLocation. Some features may not work.",timeout:2e3})}return j},getDefaultValue:function(c,d,e){var f,g,h,i,j,k=c.defaultvaluetype,l=c.mergefield,m=G(c.model),n=m&&m.data,o=c.row,p=b().isUndefined,q=c.displaytype,r=d.recordTypeInfos&&d.recordTypeInfos.length>1;return"modelmerge"===k&&l&&n&&n.length?("MULTIPICKLIST"===c.displaytype?(j=[],aa.each(n,function(a,b){j.push(m.getFieldValue(b,l,!0))}),g=j.join(";")):((!o||0>o||o>=n.length)&&(c.row=0),g=m.getFieldValue(n[c.row],l,!0)),null!==g&&c.evaluatedDefaultValue!==g&&(f=g)):!r||!b().endsWith(q,ha)||c.overrideMetadata&&c.defaultValue||(i=b().getPicklistEntriesValidForRecordTypes(d.objectName,c.id,[e]),i&&i.length&&(aa.each(i,function(a,b){return"true"===b.defaultValue?(h=b.value,!1):void 0}),h&&0!==h&&"null"!=h&&(q===ta&&(h=h===!0||"true"===h),f=h))),f||"fieldvalue"!==k&&!p(k)||p(c.defaultValue)&&c.displaytype!==ua?"userinfo"===k&&typeof c.userinfotype!==va?f=b().getUserInfoPropValue(c.userinfotype):"param"===k&&typeof c.defaultValue!==va?f=a.page.params[c.defaultValue.toLowerCase()]:"multiple"===k&&typeof c.defaultValues!==va&&(f=c.defaultValues.join(";")):f=c.displaytype===ua?b().rfc4122v4GUID():c.defaultValue,c.evaluatedDefaultValue=f,typeof c.evaluatedDefaultValue!==va},registerEditor:function(a){s(a,this.registeredEditors)},unregisterEditor:function(a){t(a,this.registeredEditors)},registerList:function(a){s(a,this.registeredLists)},unregisterList:function(a){t(a,this.registeredLists)},registerItem:function(a){s(a,this.registeredItems);var b,c=this.registeredItemsByRow,d=a.row;c&&d&&(b=this.getRowId(d),b in c||(c[b]={}),c[b][a._GUID]=a)},unregisterItem:function(a){t(a,this.registeredItems);var b=this.registeredItemsByRow,c=a?a.row:0,d=c?this.getRowId(c):0,f=b[d];b&&f&&a._GUID in f&&(delete f[a._GUID],e(f)||delete b[d])},registerField:function(a,b){s(a,this.registeredFields);var c=this.registeredFieldsByRowThenField,d=b?b:a.id,e=a.row,f=e?this.getRowId(e):0;if(c&&e&&d&&f){f in c||(c[f]={});var g=c[f];d in g||(g[d]={}),g[d][a._GUID]=a}},unregisterField:function(a,b){if(typeof a===xa&&(a=this.registeredFields[a]),a){t(a,this.registeredFields);var c,d,f=this.registeredFieldsByRowThenField,g=[],h=a._GUID,i=a.row,j=i?this.getRowId(i):0;f&&j&&(c=f[j],c&&(b&&b.length&&aa.each(b,function(){g.push(this)}),a.id&&g.push(a.id),aa.each(g,function(a,b){d=c[b],d&&h in d&&(delete d[h],e(d)||delete c[b])}),e(c)||delete f[j]))}},mergeRow:function(a,c,d){return b().merge("row",c,d,this,a)},getRowMergeResult:function(a,c,d){return b().getMergeResult("row",c,d,this,a)},mergeModel:function(a,c){return b().merge("model",a,c,this)},getMergeResult:function(a,c){return b().getMergeResult("model",a,c,this)},getOrderObject:function(){var a=this,b=(a.orderByClause||"").split(","),c=[],d={};return aa.each(b,function(){var b=aa.trim(this);if(b){var e,f,g,h,i=b.split(" "),j=i[0],k={suffix:i.length>1?i.slice(1).join(" "):"ASC NULLS LAST"};-1!==j.indexOf("(")?(h=j.split("("),g=h[0],e=h[1].split(")")[0],k.fieldId=e,g&&(k.fieldFunction=g),aa.each(a.fields,function(){return this.name&&this.id===e&&this["function"]===g?(f=this.name,!1):void 0}),f&&(k.fieldName=f)):a.isAggregate?(e=j,aa.each(a.fields,function(){return this.name&&this.id===e?(f=this.name,!1):void 0}),k.fieldId=e,f&&(k.fieldName=f)):(k.fieldId=j,f=j),c.push(k),d[f]=k}}),new Z(c,d)},toggleOrdering:function(a,c){var e,f,g=this,h=g.getOrderObject(),i="",j=d(a),l=j?a:a.id,m=j?a:a.name?a.name:l,n=j?null:a["function"],o=g.getField(m);return o.displaytype===ga&&(l=b().getFieldReference(l,o),m=k(l,n)),e=h.map[m],e?(f=aa.inArray(e,h.list),-1!=f&&h.list.splice(f,1),m in h.map&&delete h.map[m],aa.each(h.list,function(a,b){i+=k(b.fieldId,b.fieldFunction)+" "+b.suffix+","}),-1!=e.suffix.indexOf("ASC")?(i=k(l,n)+" DESC NULLS LAST,"+i,e.suffix="DESC NULLS LAST"):e=!1):(i=k(l,n)+" ASC NULLS LAST,"+(g.orderByClause||""),e={fieldId:l,fieldName:m,suffix:"ASC NULLS LAST"},n&&(e.fieldFunction=n)),i=i.replace(/,+$/,""),g.orderByClause=i,g.updateData(c),g.getPersonalizationService().setOrderBy({newValue:i}),e},createSearchSubConditions:function(a,c,d,e){return b().createSearchSubConditions(this,a,c,d,e)},buildSearchCondition:function(a,b,c,d){b=b?aa.trim(b):!1,d||(d={}),a||(a="__default_searchbox");var e=this,f=d.affectCookies||!1,g=b&&b.length>(d.useSOSLSearch?1:0),h=e.getConditionByName(a,!1),i=this.getDataSourceType(),j=i.prop("canFieldsBeIndividuallySearched")!==!1,k=i.prop("hasDefaultSearch");return g?((j||k)&&(h||(h=new S,h.name=a,d.useSOSLSearch?h.type="search":h.type="group",e.addCondition(h))),j?(e.activateCondition(h,f),d.useSOSLSearch?(h.fieldfunction=d.SOSLFields,d.tokenize?h.value=aa.map(b.split(d.delemiter||" "),function(a){return'"'+a+'*"'}).join(" AND "):h.value='"'+b+'*"'):e.createSearchSubConditions(h,b,c,d)):h&&e.setCondition(h,b,f),h&&"group"===h.type&&(h.value=b)):h&&(e.deactivateCondition(h,f),h.subConditions=[],h.subConditionLogic="",h.value=""),h},prepareSearchConditions:function(a,b,c,d){this.buildSearchCondition(null,b,a.searchFields,d)},_invalidateDataIndices:function(){return this.dataMap={},this.recordsMap={},this},isRowMarkedForDeletion:function(a){var b,c=this._findRow(a);return c?(b=this.getRecordForRow(c),b&&b.isMoribund()):!1},getRowId:function(a){var b=this.getRecordForRow(a);return b?b.id():this.dataSource.getRowId(a,this)},getRowName:function(a){var b=this.getRecordForRow(a);return b?b.name():this.dataSource.getRowName(a,this)},rowHasId:function(a){return!!this.getRowId(a)},getIdField:function(){return this.dataSource.getIdField(this)},getRowChanges:function(a){a=this._findRow(a);var b;return a&&(b=this.changes?this.changes[this.getRowId(a)]:null),b},getRowOriginals:function(a){a=this._findRow(a);var b;return a&&(b=this.originals?this.originals[this.getRowId(a)]:null),b},isRowChanged:function(a){a=this._findRow(a);var b,c;return a?(b=this.getRowId(a),c=this.getRowById(b),c&&b in this.changes):!1},doesRowHaveUnsavedChanges:function(a){return this.isRowChanged(a)},isRowNew:function(a){var b,c=this._findRow(a);return c?(b=this.getRecordForRow(c),b&&b.isNew()):!1},isNewRow:function(a){return this.isRowNew(a)},isRowUnsavedClone:function(a){return a=this._findRow(a),y(a,this)},cancelRowChanges:function(a,b,c){if(c||(c={}),!a)throw"Row is required.";var f=this,g=f.getRowId(a),h=f.originals[g],i=f.changes[g],j={},k="updateRow";return i&&(!b&&i?b=Object.keys(i):b&&d(b)&&(b=[b]),b.forEach(function(b){h&&b in h?j[b]=h[b]:f.isNewRow(a)&&(j[b]="")}),e(j)&&(f[k](a,j,{initiatorId:c.initiatorId}),e(i)||delete f.changes[g],e(h)||delete f.originals[g],e(f.changes)||(f.hasChanged=!1))),f},getPersonalizationService:function(){var b="_personalizationService",c=this[b];return c||(c=this[b]=a.personalization.createModelService(this)),c},notifyEditorsOfDataRefresh:function(a){R([this],a)},exportData:function(c){c||(c={});var d=this,e=d.getIdField(),f=d.isAggregate,g=new Date,h=c.fileName||d.id+"-export-"+g.getTime(),i=c.additionalConditions||!1,j=c.rows||d.data,k=(c.fields||d.fields).slice(0),l=j.length,m=k.length,n=c.useAPINamesForHeaders||!1,o=c.doNotAppendRowIdColumn||!1,p=!f&&!o,q="skuidExportForm"+ ++Oa,r="skuidExportData"+Oa,s="skuidExportFileName"+Oa,t='<form name="'+q+'Name" id="'+q+'" action="'+(a.page.runningOnForceSite?a.page.currentSiteUrl:"/")+'apex/ExportData" method="POST" ><input type="text" name="dummyText" value="dummy"><input type="hidden" name="inputdata" id="'+r+'" value=""><input type="hidden" name="pgName" id="'+s+'" value="'+h+'"><input type="submit" id="submit'+q+'" name="submitBtn'+q+'"></form>',u=aa(t),v="";if(aa("body").append(u),m>0&&l>0){var w={},x=[];aa.each(k,function(a,b){b.name?w[b.name]=b:b.id&&(w[b.id]=b)}),p&&e&&e in w&&(p=!1),p&&e&&(p=(aa.isArray(e)?e:[e]).filter(function(a){return!(a in w)}).length>0),aa.each(k,function(a,c){if(c.displaytype&&c.displaytype===ga){var e=c.name?c.name:c.id,f=b().getFieldReference(e,c);if(!(f in w)&&f in d.fieldsMap){var g=d.getField(f);n||(g.label=c.label+": "+g.label),x.push({atIndex:a+1,id:f,field:g})}}}),x.length&&aa.each(x,function(a,b){k.splice(b.atIndex,0,b.field),m++}),p&&e&&aa.each(aa.isArray(e)?e:[e],function(a,b){return b in w?!0:(d.getField(b)?k.push(d.getField(b)):k.push({id:b,name:b,label:b}),void m++)}),k.forEach(function(a,c){var d=n?a.name?a.name:a.id:a.label;v+=b().escapeCSVCell(d)+(m-1>c?",":"\r\n")}),j.forEach(function(a){var c=!0;i&&i.length&&(c=b().doesRowMeetConditions(a,i)),c&&k.forEach(function(c,e){var f,g=c.name?c.name:c.id,h=c.template,i=c.type===za;i&&h&&(h="{{#"+g+".records}}"+c.template+",{{/"+g+".records}}"),f=d.getFieldValue(a,g,!0),i||!f&&0!==f&&f!==!1?d.getField(g)&&!i||!h?f="":(f=d.mergeRow(a,h).text(),i&&f&&(f=f.substring(0,f.length-1))):f=""+f,v+=""===f?f:b().escapeCSVCell(f),v+=m-1>e?",":"\r\n"})})}u.children("#"+r).val(v),u.submit(),u.remove()},getSOQL:function(){return this.soql},getConditionsWithDependencies:function(a){var b=[],c=this,d=c.conditions;return d&&d.length&&d.forEach(function(c){var d=c.subConditions;"modelmerge"!==c.type||a&&c.model!==a.id?"join"===c.type&&d&&d.length&&d.forEach(function(c){"modelmerge"!==c.type||a&&c.model!==a.id||b.push(c)}):b.push(c)}),b},getDependentConditions:function(){var a=this,b={};return aa.each(_.list(),function(c,d){if(a!==d){var e=d.getConditionsWithDependencies(a);e&&e.length&&(b[d.id]=e)}}),b},getConditionByName:function(a,b){var c,d,e,f,g=this,h=[],i=Array.prototype.push,j=g.conditions,k=g.havings;if(j&&j.length&&i.apply(h,j),k&&k.length&&i.apply(h,k),h.length)for(e=0;e<h.length;e++){if(c=h[e],c.name===a)return c;if(b&&c.subConditions&&c.subConditions.length)for(f=0;f<c.subConditions.length;f++)if(d=c.subConditions[f],d.name===a)return d}return!1},hasCondition:function(a){return this.getConditionByName(a,!0)!==!1},addCondition:function(a,b){var c,d,e=this;return!a||a instanceof S||(a=new S(a)),b&&"or"==b.toLowerCase()||(b="AND"),e.conditions.push(a),c="("+e.conditions.length+")",e.conditionLogic&&""!==e.conditionLogic?(d="and"===b.toLowerCase()&&-1===e.conditionLogic.toLowerCase().indexOf("or"),e.conditionLogic=(d?"":"(")+e.conditionLogic+(d?"":")")+b+c):e.conditionLogic=c,a},initialize:function(a){return v(this,a),this},register:function(a){var b=this;return La[a?a:b.id]=b,b.registerKeyPrefix(),b},registerKeyPrefix:function(){var a,b=this,c=b.keyPrefix;c&&(a=Ma[c],a||(a=Ma[c]=[]),-1===aa.inArray(a,b)&&a.push(b))},unregister:function(){var b,c=this,d=Ma[c.keyPrefix],e=c[Ca];return e&&e.length&&(aa.each(e,function(b,c){a.events.unsubscribe(c)}),delete c[Ca]),delete La[c.id],d&&(b=aa.inArray(c,d),-1!==b&&(d.splice(b,1),d.length||delete Ma[c.keyPrefix])),c},evaluateFormulaField:function(a,c){d(c)&&(c=this.getField(c));var e={evaluateFormulas:!0,outputType:c.displaytype},f=c.formula||"",g=this?a?"row":"model":"global";return b().getMergeResult(g,f,e,this,a)},evaluateFormulaFields:function(a){a||(a={});var c,d,f=this,g={},h=a.updatedRows||f.getRows(),i=a.preventTrackChanges;h.length&&(c={_ignoreMetadata:!0},i&&(c.notify=!1),d={},f.fields&&aa.each(f.fields,function(a,c){c.calculated&&c.uiOnly&&(g[c.id]=c,aa.each(h,function(a,e){var g=f.getRowId(e),h=d[g],i=f.getFieldValue(e,c.id,!0),j=f.evaluateFormulaField(e,c);(b().isDate(i)&&b().isDate(j)?i.getTime()!==j.getTime():i!==j)&&(h||(h=d[g]={}),h[c.id]=j)}))}),e(d)&&(c.preventTrackChangesSecondTime=i,f.updateRows(d,c),i&&(aa.each(d,function(a){var b=f.changes[a],c=f.originals[a];b&&(aa.each(b,function(a){a in g&&delete b[a]}),e(b)||delete f.changes[a]),c&&(aa.each(c,function(a){a in g&&delete c[a]}),e(c)||delete f.originals[a])}),e(f.changes)||(f.hasChanged=!1))))},_cloneRowsIfNeeded:function(c){var d,e,f,g=this,h=!1,i=b().isUndefined;if(!g.isAggregate&&(i(c)&&(c=g.getParentPage()||a.component.getByType("skuidpage")[0]),g.doClone===!0?h=!0:g.doClone!==!1&&(e=a.page.getParameters(c),f=e.id,!i(e.clone)&&f&&g.conditions.length&&aa.each(g.conditions,function(a,b){if(("param"===b.type||"fieldvalue"===b.type)&&b.value===f)return g.doClone=h=!0,!1;if("modelmerge"===b.type&&b.model){var c=G(b.model),d=c&&c.getFirstRow(),e=d?c.getRowId(d):null,i=c?c.realToFakeIdMap:null;if(d&&(e===f||i&&i[f]===e))return g.doClone=h=!0,!1}})),h&&g.data&&g.data.length)){g._invalidateDataIndices(),g.realToFakeIdMap||(g.realToFakeIdMap={}),g.data.forEach(function(a){var b=g.getRowId(a),c=g.realToFakeIdMap[b]=Da+Ka++,d=g.getRecordForRow(a);d?d.setId(c):d=new V(g,a,c),d.markNew().markCloned(),g.getDataSourceType().name===ea&&(a.Id=c)}),g._generateDataIndices();var j={};g.conditions&&aa.each(g.conditions,function(a,b){var c=b.field,d=b.value,e=g.getField(c);if(e&&e.createable&&(-1!==c.indexOf(".")||!d&&d!==!1&&0!==d||aa.each(g.data,function(a,b){c in b||(b[c]=d)}),e.displaytype===ga&&"modelmerge"===b.type&&b.model)){var f=G(b.model);f&&f.realToFakeIdMap&&(j[c]=f)}}),g.fields&&aa.each(g.fields,function(a,b){if(b.displaytype===ga){var c=[];j[b.id]?c.push(j[b.id].realToFakeIdMap):b.referenceTo&&aa.each(b.referenceTo,function(a,b){var d=Ma[b.keyPrefix];d&&d.length&&aa.each(d,function(a,b){b.realToFakeIdMap&&c.push(b.realToFakeIdMap)})}),c.length&&aa.each(g.data,function(a,d){aa.each(c,function(a,c){return d[b.id]in c?(d[b.id]=c[d[b.id]],!1):void 0})})}}),d=function(){var a={},b=g.fields,c=g.data;c&&c.length&&b&&b.length&&aa.each(c,function(c,d){var e={};aa.each(b,function(a,b){e[b.id]=g.getFieldValue(d,b.id,!0)}),a[g.getRowId(d)]=e}),g.updateRows(a,{alwaysAddChanges:!0,notifyFields:!1})},c.isRendered===!0?d():c.element.one("pageload",function(){d()})}},_createDefaultRowIfNeeded:function(){var a,b=this,c=b.data&&b.data.length<1,d="createRowIfNoneFound";return c&&b[d]===!0&&(!b.doQuery||b.doQuery&&b.lastLoadTime)&&(a=b.createRow(),delete b[d]),a},getRecordForRow:function(a){if(!a)throw"No row provided";return a[Ja]},_generateDataIndices:function(){var a=this,b=a.dataMap,c=a.recordsMap,d=a.data;return b||(a.dataMap=b={}),c||(a.recordsMap=c={}),d&&d.length&&d.forEach(function(d){var e,f=a.getRecordForRow(d);f||(f=new V(a,d)),e=f.id(),b[e]=d,c[e]=f}),a}},aa.extend(W,{cancel:L,getMoreData:P,initialize:v,load:M,register:z,save:K,sync:O,unregister:A,update:N}),aa.extend(_,{Condition:S,Field:T,Method:U,Model:W,Record:V,getModel:G,getModelsByKeyPrefix:H,getModelsByName:F,getModelsByDataSource:I,getModelList:E,list:E,map:F,getConditionCookieName:f,getModelsList:E,getNewId:x,isNewId:w,cancel:W.cancel,getMoreData:W.getMoreData,initializeModel:W.initialize,load:W.load,registerModel:W.register,save:W.save,sync:W.sync,unregisterModel:W.unregister,updateData:W.update}),a.$M=G}(skuid),function(a){var b=a.$,c=b.each,d=b.extend,e=a.dataSource,f=e.libraries.skuid,g=".",h=e.core||(e.core={}),i=a.utils,j=i.isString,k=i.createMapForArray,l=i.makeXMLDoc,m=a.time,n=m.parseSFDateTime,o=m.parseDateTimeString,p=m.getSFDateTime,q=a.constants,r=q.HTTP_VERBS,s=r.PATCH,t=r.MERGE,u=r.POST,v=r.DELETE,w="Collection(",x="_odatalib",y={"Edm.String":"STRING","Edm.Boolean":"BOOLEAN","Edm.Date":"DATE","Edm.DateTime":"DATETIME","Edm.DateTimeOffset":"DATETIME","Edm.Int16":"NUMBER","Edm.Int32":"NUMBER","Edm.Decimal":"NUMBER","Edm.Double":"NUMBER","Edm.Int64":"NUMBER","Edm.Guid":"STRING"},z=["@odata.editLink","@odata.id","@odata.type"],A=["__metadata"],B=function(a){var b;return a.major<4?(b=window.OData,{read:b.read,request:b.request,batchHandler:b.batchHandler,metadataHandler:b.metadataHandler,defaultHttpClient:b.defaultHttpClient}):(b=window.odatajs.oData,{read:b.read,request:b.request,batchHandler:b.batch.batchHandler,metadataHandler:b.metadata.metadataHandler,defaultHttpClient:b.net.defaultHttpClient})},C=function(a,b){var c,d,e,f=j(a)?a:a.objectName;return f?(c=f&&f.split("."),d=c.slice(0,-1).join("."),e=b.dataServices.aliasMap,e&&(d=e[d]||d),d+"."+c[c.length-1]):f},D=function(a,b,d){var e=d.major<4?A:z;c(e,function(c,d){b[d]&&(a[d]=b[d])})},E=function(a){var c=b.Deferred(),d=J.prototype.getServiceVersion(a),e=d.major,g=4>e,h="odata"+(g?"3":"4"),j=g?"data.js":"odatav4.js",k=function(a){return i.getStaticResourceUrl("lib/"+a,"skuid",void 0,i.getCacheTimestamp())};return a[x]?c.resolve():f[h]?(a[x]=f[h],c.resolve()):i.loadJS(k(j)).then(function(){a[x]=f[h]=B(d),c.resolve()}),c.promise()},F=function(a,c){var d={};return d[a]=!0,b.extend(d,c)},G=function(a,d){c(a,function(a){delete d[a]});var e={};c(a,function(a){var b=e[a]=[];c(d,function(c){0===c.indexOf(a+"/")&&-1===c.substring((a+"/").length).indexOf("/")&&(delete d[c],b.push(c.substring((a+"/").length)))})}),function g(a){var b=e;c(b,function(c,d){if(a){if(0===c.indexOf(a.name+"/")){var e={name:c.substring((a.name+"/").length),list:d};a.list.push(e),delete b[c],g(e)}}else g({name:c,list:d})})}();var f={str:"$expand="};return i.size(e)&&!function h(a,d){var e=!0;c(d,function(d,f){var g=!1,i=!1;if(e||(a.str+=","),e=!1,a.str+=d,f.length){var j=[];c(f,function(a,c){b.isPlainObject(c)||j.push(c)}),j.length&&(a.str+="($select=",a.str+=j.join(","),g=!0),c(f,function(c,d){if(b.isPlainObject(d)){g||i?!i&&g&&(a.str+=";$expand=",i=!0):(a.str+="($expand=",i=!0);var e={};e[d.name]=d.list,h(a,e)}}),!i&&!g||e||(a.str+=")")}})}(f,e),i.size(a)?f.str:void 0},H=function(a){var c={};return b.each(a,function(a,b){c[b.id]=b}),c},I=["name"],J=function(a){c(I,function(b,c){if(!a[c])throw"Missing Required Property Error: "+c}),d(this,a),a.extendedProperties&&(d(!0,this.properties,a.extendedProperties),delete this.extendedProperties),e.DataSourceType.prototype.constructor.call(this,this),delete this.getModelProperties},K="metadata",L="batch",M="entitySet";J.prototype=new e.DataSourceType(!1),J.constructor=J,J.prototype=d(!0,J.prototype,{RESOURCE_TYPES:{RESOURCE_METADATA:K,RESOURCE_BATCH:L,RESOURCE_ENTITY_SET:M},authenticateAndGetMetadata:function(a){var b=this;return a.dataSource.authenticate().then(function(){return b.getMetadata(a)})},populateSelect:function(a,b){var c,d;b.uiOnly||(c=b.id.split(g),b.isComplexField&&(c=[b.complexInReference?b.referenceParentId:c[0]]),d=c.join("/"),b.query!==!1&&(a[d]=!0))},getFieldDef:function(a,b,c,d){var e,f=this,g=d.metadata;return a.complexFields?a:(e=f.tryToGetComplexDef(a,a.id,b,c,d),e||(e=f.getPropertyDef(a.id,b,g,c,b)),e)},isDefEditable:function(a,b,c){var d=this,e=!0;return c.major<4&&(e=!d.propertyHasExtension(a,"StoreGeneratedPattern")),b.isComplexField?e=!b.complexInReference&&c.major<4:a.isFieldOnReferenceField&&c.major>3&&(e=!1),e},isDefCreateable:function(a,b,c){return this.isDefEditable(a,b,c)||this.isDefRequired(a,b,c)},isDefRequired:function(a){return"false"===a.nullable},isDefFilterable:function(a){return"Edm.String"===a.type},buildFieldMetadata:function(a,c,d,e,f,g){var h,i,j,k,l,m,n=this,o=g.metadata,p=n.getServiceVersion(g);return a.uiOnly===!0?a:(h=n.getFieldDef(a,c,d,g))?(i=n.isDefEditable(h,a,p),j=n.isDefCreateable(h,a,p),k=n.isDefRequired(h,a,p),l=n.isDefFilterable(h,a,p),m={id:a.id,accessible:!0,createable:j,editable:i,sortable:!0,label:h.name,displaytype:y[h.type]||h.type,edmtype:h.type,required:k,filterable:l},n.isDefForComplexTypeField(h,o)?n.populateFieldMetadataForComplexField(m,c):n.isDefForReferenceField(h)&&n.populateFieldMetadataForReferenceField(m,h,d,f,o),n.coerceFieldMetadata(m,h),a.overrideMetadata&&b.extend(m,a),a.query===!1&&(m.query=!1),m):void 0},isDefForReferenceField:function(a){return!(!a.fromRole&&!a.isReferenceProp)},populateFieldMetadataForComplexField:function(a,b){var c=a.id,d=b.propertyMap[c].type;a.displaytype="OBJECT",a.rel=c,a.ref=d,a.referenceTo=[{objectName:d,label:d,relationshipName:c}]},populateFieldMetadataForReferenceField:function(a,c,d,e,f){var g,h,i,j=this,k=a.id,l=a.id.split(".").join("/");if(c.fromRole)g=j.getAssociation(c.relationship,f),h=j.getEndFromAssociation(g,c.toRole),a.rel=k,-1!==b.inArray(h.multiplicity,["0..1","1"])?(a.displaytype="REFERENCE",
a.ref=h.type,a.referenceTo=[{objectName:h.type,label:h.type,relationshipName:k}]):(d&&(d[l]=!0),a.displaytype="ARRAY",a.type="array",a.dataPath="results",a.ref=h.type,a.referenceTo=[{objectName:h.type}],a.relationshipName=c.name,a.childSObject=h.type,i=j.getRefConstraintsFromAssociation(g,c.toRole),a.field=i.length&&i[0].name);else if(c.isReferenceProp){if(a.rel=k,-1!==c.type.indexOf(w)){d&&(d[l]=!0);var m=c.type.substring(w.length,c.type.length-1);a.displaytype="ARRAY",a.type="array",a.ref=m,a.referenceTo=[{objectName:m}],a.relationshipName=c.name,a.childSObject=m}else a.displaytype="REFERENCE",a.ref=c.type,a.referenceTo=[{objectName:c.type,label:c.type,relationshipName:k}];a.createable=!1,a.editable=!1,a.sortable=!1}},buildEntityMetadataRequest:function(a){var b=a.targetEntity;return!b&&a.model&&a.model.attr&&(b=a.model.attr("sobject")),{objectName:b}},buildResourceUri:function(a,b,c){if(!a)throw"Unable to build Resource URI";c||(c={});var d,e=i.combineUrls,f=a.serviceUrl,g=c.entitySet,h=c.keyPredicate,j=c.count;switch(b){case K:return e(f,"$metadata");case L:return e(f,"$batch");case M:return d=e(f,g),h&&(d+="("+h+")"),j&&(d+="/$count"),d;default:return f}},getAssociation:function(a,b){var c=this.processFullyQualifiedName(a);return b.dataServices.schemaMap[c.nameSpace].associationMap[c.name]},getAssociationSetFromAssociationName:function(a,b,c){var d=[],e=c.dataServices,f=e.schemaMap,g=e.aliasMap[b],h=g?f[g]:f[b],i=h.associationSetMap;for(var j in i)d.push(i[j]);return d.filter(function(b){return b.association===a})[0]},getEndFromAssociation:function(a,b){return a.end.filter(function(a){return a.role===b})[0]},getEntityMetadata:function(a){a=a?a:{};var c=this,d=b.Deferred(),e=a.entities;return c.authenticateAndGetMetadata(a).then(function(f){var g=[],h={};b.each(e,function(b,e){var i,j,k,l=C(e,f);return l?(i=c.getEntitySet(l,f),j=i?c.getEntityTypeFromEntitySet(i,f):c.getEntityType(l,f),k=c.getFieldsFromEntityType(j,l,f,a.dataSource,a),c.cacheFieldsOfEntity({dataSource:a.dataSource,objectName:l},k,f,h),g.push({childRelationships:[],fields:k,label:l,labelPlural:l,objectName:l,readonly:!1}),void 0):(d.reject("No object name provided."),!1)}),d.resolve(g)},function(a,b){d.reject(a,b)}),d.promise()},getEntityMetadataCacheKey:function(a){return j(a)?a:a.objectName},getEntityMetadataLoadingMessageFromBreadcrumb:function(a){return"Loading metadata for external object "+a.endsobject+"..."},getEntitySet:function(a,b){var c=this,d=c.processFullyQualifiedName(a),e=b.dataServices.schemaMap[d.nameSpace].entitySetMap;return e&&e[d.name]},getEntitySetList:function(a,c){var d=[];return b.each(a.dataServices.schemaMap,function(a,e){var f;if(c.entityContainer&&e.entityContainerMap){var h=e.entityContainerMap[c.entityContainer];f=h&&h.entitySetMap}else f=e.entitySetMap;f&&b.each(f,function(b){d.push(a+g+b)})}),d},getEntitySetNameFromRefPropDef:function(a,b,c){var d=this,e=d.getAssociationSetFromAssociationName(a.relationship,b,c);e||(e=d.getAssociation(a.relationship,c));var f=d.getEndFromAssociation(e,a.toRole);return f.entitySet&&b+g+f.entitySet},_getComplexTypeMap:function(a){return a.dataServices&&a.dataServices.complexTypeMap},_checkForComplexEntity:function(a,b){var c=this,d=c._getComplexTypeMap(b);if(d&&a)return d[a]},getEntityType:function(a,b){var c=this,d=c.processFullyQualifiedName(a),e=b.dataServices.schemaMap[d.nameSpace].entityTypeMap[d.name];return e?e:c._checkForComplexEntity(a,b)},getEntityTypeFromEntitySet:function(a,b){var c=this;return c.getEntityType(a.entityType,b)},getEntityTypeNameFromRefPropDef:function(a,b){var c,d,e=this;return a.relationship?(c=e.getAssociation(a.relationship,b),d=e.getEndFromAssociation(c,a.toRole),d.type):a.type?-1!==a.type.indexOf(w)?a.type.substring(w.length,a.type.length-1):a.type:void 0},getErrorFromErrorBody:function(c){var d,e,f;if(i.isString(c))try{d=JSON.parse(c)}catch(g){}else b.isPlainObject(c)&&(d=c);if(d&&b.isPlainObject(d)&&(d.error?d=d.error:d["odata.error"]&&(d=d["odata.error"]),d&&(e=d.code,f=b.isPlainObject(d.message)&&d.message.value?d.message.value:d.message)),!d)try{d=a.utils.makeXMLDoc(c),e=d.find("code").text(),f=d.find("message").text()}catch(h){}return{code:e,message:f}},getFieldDataForItem:function(a,b,c){var d,e=this,f=c.split(g);if(1===f.length){if("DATETIME"===b.displaytype){if(d=a[c]){var h;return h=d instanceof Date?d:o(d),p(h)}return null}return"Edm.Decimal"===b.edmtype||"Edm.Double"===b.edmtype?parseFloat(a[c]):"Edm.Int64"===b.edmtype?parseInt(a[c],10):a[c]}return d=a[f[0]],f.shift(),d?e.getFieldDataForItem(d,b,f.join(g)):null},_setComplexTypeMap:function(a){function d(a,b){if(!a)return[];b=b||{};var c=a.typeInfo,f=c.baseType,h=c.hasExpandedBaseType;return c.property||(c.property=[]),!f||h?c.property:(c.isDerived=!0,-1===f.indexOf(g)&&(f=a.namespace+g+f),c.hasExpandedBaseType=!0,b[f]?c.property:(b=F(f,b),c.property=c.property.concat(d(e[f],b)),c.property))}var e={};return b.each(a.dataServices.schemaMap,function(a,c){var d=c.complexType;d&&b.each(d,function(b,c){e[a+g+c.name]={typeInfo:c,namespace:a}})}),c(e,function(a,b){b.typeInfo.property=d(b)}),i.size(e)||(e=null),a.dataServices.complexTypeMap=e,e},isDefForComplexTypeField:function(a,b){var c=this,d=a.type;return c._checkForComplexEntity(d,b)},_setMapOfPropertiesOfEntityType:function(a,c,d){if(a.propertyMap)return a.propertyMap;d||(d={});var e=this,f={},g=e.getPropertiesOfEntity(a);return g?(b.each(g,function(a,b){var g;if(b&&(g=e._checkForComplexEntity(b.type,c),f[b.name]=b,g&&!d[b.type])){d=F(b.type,d);var h=g;f[b.name].complexFields=e._setMapOfPropertiesOfEntityType(h,c,d)}}),a.propertyMap=f,f):{}},_setMapOfNavigationPropertiesOfEntityType:function(a,b){return a.navigationPropertyMap?a.navigationPropertyMap:a.navigationProperty&&a.navigationProperty.length?(c(a.navigationProperty,function(a,c){var d,e,f=c.type,g="",h=b.aliasMap,i=f?0===f.indexOf(w):!1,j="";c.isReferenceProp=!0,f&&(i?g=f.substring(w.length,f.length-1):f&&(g=f),d=g.split("."),d.length>1&&h&&(e=d.slice(0,d.length-1),h[e]&&(j=h[e]+"."+d[d.length-1],i&&(j=w+j+")"),c.type=j)))}),a.navigationPropertyMap=i.listToMap(a.navigationProperty,"name"),a.navigationPropertyMap):{}},tryToGetComplexDef:function(a,c,d,e,f,h){var j,k,l,m,n,o,p,q,r,s,t,u,v,w,x=this,y=f.metadata,z=x._getComplexTypeMap(y),A=x.getServiceVersion(f);if(z&&d.__namespace){if(x._buildEntitySpecificMaps(d,y.dataServices.schemaMap[d.__namespace],y),j=c.split(g),l=d.propertyMap,m=d.navigationPropertyMap,h=h||"",j.length>1&&(r=m[j[0]]),i.size(r))return w=j[0],s=x.getEntityTypeNameFromRefPropDef(r,y),t=x.getEntityType(s,y),u=c.substring(w.length+1),v=h?h+"/"+w:w,x.tryToGetComplexDef(a,u,t,e,f,v);if(j.length>1){if(o=j[j.length-2],j.length>2){var B=j.slice(0,j.length-1).join(".complexFields."),C=i.getObjectProperty(l,B);C&&(n=C.type)}2===j.length&&(n=l&&l[o]&&l[o].type),p=j[j.length-1],q=n?z[n]:!1,q&&b.each(q.typeInfo.property,function(b,d){d.name===p&&(k=d,a.isComplexField=!0,a.complexParent=q,q.typeInfo.isDerived&&(a.editable=!1),e&&h&&(a.complexInReference=!0,A.major<=3&&(a.referenceParentId=h+"/"+c.substring(0,c.length-d.name.length-1),e[h]=!0)))})}return k}},getPropertiesOfEntity:function(a){return a.property&&a.property.length?a.property:a.typeInfo&&a.typeInfo.property?a.typeInfo.property:[]},getFieldsFromEntityType:function(a,c,d,e,f){f=f?f:{};var g,h=this,i=h.processFullyQualifiedName(c).nameSpace,j=h.getPropertiesOfEntity(a),k=f.requestedFields,l=f.selects,m=f.expands,n=d.dataServices;return h._buildEntitySpecificMaps(a,n.schemaMap[i],d),k?(g={},b.each(k,function(a,b){g[b.id]=b}),b.each(h.getKeyFields(a,d),function(a,b){g[b.id]||k.push(b)})):(k=[],j&&b.each(j,function(){var a={id:this.name};k.push(b.extend({},this,a))}),a.navigationProperty&&b.each(a.navigationProperty,function(){k.push({id:this.name})})),b.map(k,function(b){var c=h.buildFieldMetadata(b,a,m,l,i,e);if(c)return l&&h.populateSelect(l,b),c})},coerceFieldMetadata:function(){},getFieldMetadataFromConditionField:function(a,b,d){var e,f=this,g={},h=a.split("."),i=d.dataSource,j=i&&i.metadata;if(c(b,function(a,b){g[b.id]=b}),g[a])return g[a];if(e=g[h[0]],e&&e.ref&&!(h.length<2)){var k=e.ref,l=f.getEntitySet(e.ref,j),m=l?f.getEntityTypeFromEntitySet(l,j):f.getEntityType(k,j),n=f.getFieldsFromEntityType(m,k,j,i);return h.shift(),f.getFieldMetadataFromConditionField(h.join("."),n,d)}},getFilterStringFromCondition:function(a,b,d){d||(d={});var e,f,h,i,j,k,l=this,m=d.version||{major:1},n=d.fieldsMetadata||[],o=function(a){return l.getURLFormattedValue(a,e.edmtype,m)},p=m.major<4,q=function(a,b){var c=a.field.split(g).join("/");return c+" "+(b||"eq")+" "+h},r=function(a,b,c){var d=a.field.split(g).join("/"),e=h;return b+"("+(c===!0?e:d)+","+(c===!0?d:e)+")"},s=function(a){var b=[],d=a.field;return c(j,function(){b.push("("+q({field:d,value:this},"eq")+")")}),"("+b.join(" or ")+")"},t={"=":function(a){return q(a,"eq")},"!=":function(a){return q(a,"ne")},gt:function(a){return q(a,"gt")},lt:function(a){return q(a,"lt")},gte:function(a){return q(a,"ge")},lte:function(a){return q(a,"le")},contains:p?function(a){return r(a,"substringof",!0)}:function(a){return r(a,"contains")},"does not contain":p?function(a){return r(a,"not substringof",!0)}:function(a){return r(a,"not contains")},"starts with":function(a){return r(a,"startswith")},"does not start with":function(a){return r(a,"not startswith")},"ends with":function(a){return r(a,"endswith")},"does not end with":function(a){return r(a,"not endswith")},"in":function(a){return s(a)},"not in":function(a){return"not "+s(a)},">":function(a){return this.gt(a)},">=":function(a){return this.gte(a)},"<":function(a){return this.lt(a)},"<=":function(a){return this.lte(a)}};return a.inactive?"":"group"===a.type?l.getFilterStringFromConditions(a.subConditions,a.subConditionLogic,b,d):(e=l.getFieldMetadataFromConditionField(a.field,n,b))?(f=a.value,h=f&&o(f),i=a.values,j=i&&i.map&&i.map(o),k=t[a.operator],k?k(a):""):""},getFilterStringFromConditions:function(a,c,d,e){var f=this,g="",h=b.map(a,function(a){var b=f.getFilterStringFromCondition(a,d,e);return b||"!!"});return h.length&&(c||(c=b.map(a,function(a,b){return a.inactive!==!0?b+1+"":void 0}).join(" and ")),c&&(g=i.makeConditionLogicString(c,h,{customAndString:" and ",customOrString:" or "}),g=g.replace(/\(\)/g,""),-1!==g.indexOf("!!")&&(g=g.replace(/(((AND)|(OR)) ?!!)|(!! ?((AND)|(OR)))|!!|\(!!\)/gi,"").trim()))),g},getItemForDML:function(c,d,e){var f,g=c.edmtype,h=i.adjustValueBasedOnQuotedness,k=function(a){return j(a)===!1?""+a:a};return"Edm.Binary"===g?d=window.btoa(d):-1!==b.inArray(g,["Edm.Boolean","Edm.Byte","Edm.Double","Edm.Int16","Edm.Int32","Edm.SByte","Edm.Single"])?d=h(d,!1):-1!==b.inArray(g,["Edm.Decimal","Edm.Guid","Edm.Int64","Edm.String"])?e.major<4||"Edm.String"===g?d=k(d):("Edm.Int64"===g||"Edm.Decimal"===g)&&(d=h(d,!1)):"Edm.DateTime"===g?(f=n(d),d=a.time.formatDate("yy-mm-ddT",f)+a.time.formatTime("HH:mm:ss.SSS",f)):"Edm.DateTimeOffset"===g&&(f=n(d),d=a.time.formatDate("yy-mm-ddT",f)+a.time.formatTime("HH:mm:ss.SSS000Z",f),d=d.slice(0,-2)+":"+d.slice(-2)),d},getODataLibrary:function(a){return a[x]},getURLFormattedValue:function(c,d,e){var f,g=a.time,h=e.major<4,j=function(a,b,c){return c&&e.major>c?b:a+"'"+b+"'"},k=function(a,b,c){return c&&e.major>c?b:b+a},l=function(a){if(i.isNumber(a))return parseFloat(a);throw'The value "'+a+'" could not be translated to a number.'},m=function(a){var c;if(i.isDate(a)?c=a:i.isNumber(a)?c=new Date(a):i.isString(a)&&(c=g.parseDateTimeString(a),c||(c=g.resolveDateKeyword(a)),b.isArray(c)&&(c=c[0])),!c)throw'The value "'+a+'" could not be translated to a date.';return c},n=function(a){var b=i.userLocale.decimalsSeparator;if(-1===a.indexOf(b))return a;var c=new RegExp("\\"+b+"?0+$");return a.replace(c,"")};return f=null===c?"null":"Edm.Boolean"===d?c?"true":"false":"Edm.Byte"===d?l(c).toFixed(0):"Edm.DateTimeOffset"===d?j("datetimeoffset",m(c).toISOString(),3):"Edm.Decimal"===d?k("M",n(l(c).toFixed(20)),3):"Edm.Double"===d?k("D",l(c).toString(),3):"Edm.Guid"===d?j("guid",c,3):"Edm.Int16"===d?l(c).toFixed(0):"Edm.Int32"===d?l(c).toFixed(0):"Edm.Int64"===d?k("L",l(c).toFixed(0),3):"Edm.Float"===d&&h||"Edm.Single"===d?k("F",l(c).toString(),3):"Edm.SByte"===d?l(c).toFixed(0):"Edm.DateTime"===d&&h?j("datetime",m(c).toISOString().slice(0,-1),3):"Edm.Date"!==d||h?"Edm.TimeOfDay"!==d||h?"'"+(""+c).replace("'","''")+"'":m(c).toISOString().split("T")[1].slice(0,-1):m(c).toISOString().split("T")[0]},getIndividualKeyFormatted:function(a,b,c,d){return this.getURLFormattedValue(c[a],b.edmtype,d)},getKey:function(a,c,d,e){var f,g=c.key,h=this;return b.isArray(g)&&(g=g[0]),g?g.propertyRef.length>1?b.map(g.propertyRef,function(b){return b.name+"="+h.getIndividualKeyFormatted(b.name,e[b.name],a,d)}).join(","):(f=g.propertyRef[0].name,i.isUndefined(a[f])?void 0:h.getIndividualKeyFormatted(f,e[f],a,d)):""+(a.Id||a.ID||a.id)},getKeyFields:function(a){var c={},d=a.key;return b.isArray(d)&&(d=d[0]),d&&d.propertyRef&&b.each(d.propertyRef,function(b,d){c[d.name]={id:d.name,entityType:a}}),c},getMetadata:function(a){var b=this;return E(a.dataSource).then(function(){return b.queryMetadata(a)})},getModelProperties:function(b,c){var d=a.builder.core,e=b.state,f=d.getUnsavedChangesWarningProperty({component:b}),h=d.getCoreModelBasicProperties({component:b,propViewer:c}),j=[];return h.push({id:"sobject",type:"sobject",dataSourceTypeName:this.name,dataSourceName:e.attr("datasource")||e.attr("service"),label:"External Object Name",onChange:function(a){if(a&&(!e.attr("label")||!e.attr("labelplural"))){var c=a.split(g).pop();e.attr("label")||e.attr("label",c),e.attr("labelplural")||e.attr("labelplural",c+(i.endsWith(c,"s")?"":"s")),b.save()}}}),Array.prototype.push.apply(h,d.getModelLabelProperties()),h.push(d.getModelQueryOnPageLoadProperty({component:b,propViewer:c}),d.getModelLimitProperty(),d.getModelOrderByProperty(),d.getCreateDefaultRowProperty(),d.getModelNameFieldProperty()),f&&j.push(f),[{name:"Basic",props:h},{name:"Advanced",props:j}]},getNameField:function(a){var b,c,d,e,f=this,g=a.dataSource&&a.dataSource.metadata;return g&&(b=f.getEntitySet(a.objectName,g),c=f.getEntityTypeFromEntitySet(b,g),e=Object.keys(f.getKeyFields(c)),e&&e.length>0&&(d=e[0])),d},getRowName:function(a,b,c){return b.getFieldValue(a,this.getNameField({dataSource:c,objectName:b.objectName}),!0)},getRowId:function(a,b,c){var d=c.metadata,e=this.getEntitySet(b.objectName,d),f=this.getEntityTypeFromEntitySet(e,d),g=this.getServiceVersion(c);return this.getKey(a,f,g,b.fieldsMap)},getEntityList:function(a){var c=this,d=b.Deferred();return c.authenticateAndGetMetadata(a).then(function(b){d.resolve(c.getEntitySetList(b,a))},function(a){var b=a.response,c=b.error;d.reject(c,b)}),d.promise()},getPropertyByName:function(a,b){var c,d,e,f=this;return a.propertyMap?(e=a.propertyMap[b],e||(e=a.navigationPropertyMap&&a.navigationPropertyMap[b]),e&&(d=e)):(c=f.getPropertiesOfEntity(a),d=c.concat(a.navigationProperty).filter(function(a){return a?b===a.name:!1})[0]),d},getPropertyDef:function(a,b,c,d,e,f,h){var i=this,j=a.split(g),k=i.getPropertyByName(b,j[0]);if(f&&(k.isFieldOnReferenceField=!0),1===j.length)return k;var l=i.getEntityTypeNameFromRefPropDef(k,c),m=i.getEntityType(l,c);return d&&e.navigationPropertyMap[j[0]]&&(d[(h&&h+"/"||"")+j.slice(0,j.length-1).join("/")]=!0),j.shift(),i.getPropertyDef(j.join(g),m,c,d,e,!0,h)},getRefConstraintsFromAssociation:function(a,c){var d=[];return a.referentialConstraint&&b.each(a.referentialConstraint,function(a,e){e.role===c&&b.each(e.propertyRef,function(){d.push(this)})}),d},getRowForItem:function(a,c,d,e){var f=this,h={};return b.each(d,function(b,c){-1!==c.id.indexOf(g)?i.setObjectProperty(h,c.id,f.getFieldDataForItem(a,c,c.id)):h[c.id]=f.getFieldDataForItem(a,c,c.id)}),D(h,a,e),h},getServiceVersion:function(a){if(a.metadata&&a.metadata.skuidVersion)return a.metadata.skuidVersion;var b=a&&a.getConfigProperty("odata-version")||"1.0",c=(b+"").split(g),d=parseFloat(c[0]),e=parseFloat(c[1]),f=parseFloat(c[2]),h={major:isNaN(d)?void 0:d,minor:isNaN(e)?void 0:e,patch:isNaN(f)?void 0:f,toString:function(){return""+this.major+(i.isUndefined(this.minor)?"":g+this.minor+(i.isUndefined(this.patch)?"":g+this.patch))}};return h},getSelectClause:function(a){var b=Object.keys(a);return b.length?"$select="+b.join(","):void 0},getExpandClause:function(a){var b=Object.keys(a);return b.length?"$expand="+b.join(","):void 0},getOrderByClause:function(a){return a.orderByClause?"$orderby="+a.orderByClause.replace(/nulls first/gi,"").replace(/nulls last/gi,"").replace(/asc/gi,"asc").replace(/desc/gi,"desc"):void 0},getFilterClause:function(a,b,c,d){var e=this,f=e.getFilterStringFromConditions(a,b.conditionLogic,b,{version:c,fieldsMetadata:d});return f?"$filter="+f:void 0},getSkipClause:function(a){var b=a.offsetPageNumber,c=a.offsetPageSize;return b>1&&c>0?"$skip="+(b-1)*c:void 0},getTopClause:function(a){var b=a.offsetPageSize||a.recordsLimit;return 0===b||b>0?"$top="+(parseInt(b,10)+1):void 0},createQualifiedURL:function(a,b,c,d,e,f){var g,h,j=this,k=[],l=a.getDataSource(),m=i.combineUrls(l.serviceUrl,f.name);if(l)return g=j.getServiceVersion(l),h=g.major>3?G(d,e):j.getExpandClause(d),k.push(h),k.push(j.getSelectClause(e)),k.push(j.getOrderByClause(a)),k.push(j.getFilterClause(b,a,g,c)),k.push(j.getSkipClause(a)),k.push(j.getTopClause(a)),k=k.filter(function(a){return void 0!==a}),k.length&&(m+="?"+encodeURI(k.join("&"))),m},cacheFieldsOfEntity:function(a,b,c,d,e){var f=this,g=a.objectName,h=a.label||g,i=a.labelPlural||g,j=a.dataSource;if(e=e||0,d=d||{},!(d[g]||(d[g]={objectName:g,label:h,labelPlural:i,fields:b},j.cacheEntityMetadata(g,{objectName:g,label:h,labelPlural:i,fields:b}),e>5)))for(var k=0;k<b.length;k++){var l=b[k];if(l.ref&&!d[l.ref]){g=l.ref;var m=f.getEntityType(g,c),n=f.getFieldsFromEntityType(m,g,c,j);f.cacheFieldsOfEntity({dataSource:j,objectName:g},n,c,d,e+1)}}},getConditionsOfODataModel:function(a){return b.map(a.conditions,function(b){var c=a.getConditionValueResult(b);return b.originalValue||(b.originalValue=c.value),b})},loadIndividualModel:function(a,c,d){var e,f,g,h,i,j,k,l,m=this,n=c.metadata,o=b.Deferred(),p=a.objectName,q=a.label||p,r=a.labelPlural||p,s={},t={},u=a.offsetPageSize||a.recordsLimit;return p?(f=m.getEntitySet(p,n),g=m.getEntityTypeFromEntitySet(f,n),i=m.getFieldsFromEntityType(g,p,n,a.dataSource),j=m.getConditionsOfODataModel(a),m.cacheFieldsOfEntity(a,i,n),h=m.getFieldsFromEntityType(g,p,n,a.dataSource,{requestedFields:a.fields,selects:s,expands:t}),e=m.createQualifiedURL(a,j,i,t,s,f),l={label:q,labelPlural:r,accessible:!0,createable:!0,updateable:!0,deleteable:!0,fields:h,soql:e,conditions:j,recordsLimit:u},a.doQuery===!1?o.resolve(l):(k={requestUri:e},d&&b.extend(!0,k,d),m.fetchData(c,k,g,h,u).then(function(a){b.extend(l,a),o.resolve(l)},function(a){o.reject(a)}),o.promise())):o.reject("No object name specified for Model: "+a.id).promise()},fetchData:function(a,c,d,e,f){var g=this,h=a.metadata,i=g.getServiceVersion(a),j=b.Deferred();return g.getODataLibrary(a).read(c,function(a){var c,h=!1,k=i.major<4?a.results:a.value;c=k&&b.isArray(k)?b.map(k,function(a){return g.getRowForItem(a,d,e.filter(function(a){return a.query!==!1}),i,H(e))}):[],f&&c.length>f&&(h=!0,c.pop()),j.resolve({data:c,canRetrieveMoreRows:h})},function(a){j.reject(a)},void 0,a.httpClientOfDataSourceType,h),j},load:function(a,c){var d=this,e=b.Deferred(),f=c.dataSource,g=[];return d.authenticateAndGetMetadata(c).then(function(){b.each(a,function(){var a=this,b=d.loadIndividualModel(a,f,c);g.push(b)}),b.when.all(g).then(function(a){e.resolve(a)},function(a){var c="There was a problem with an OData Query: ";b.each(a,function(a,b){var e=d.getErrorFromErrorBody(b.message?b:b.response&&b.response.body);e&&b.response?c+=(e.code?e.code+" - ":"")+e.message+" - Request URL: "+b.response.requestUri:j(b)&&(c+=b)}),e.reject(c)})},function(a,b){e.reject(a,b)}),e.promise()},processFullyQualifiedName:function(a){var b=a.split(g);return{name:b.pop(),nameSpace:b.join(g)}},search:function(c,d,e){var f=this,g=c.returning.map(function(a){var b=e[a.modelName];return a.fields||(a.fields=[]),b.searchFields=a.fields,b}),h=b.Deferred();return f.getEntityMetadata({dataSource:c.dataSource,entities:g}).then(function(d){return b.each(d,function(a,d){var e=g[a],f=1;b.each(e.searchFields,function(e,h){b.each(d.fields,function(d,j){if(h=i.isString(h)?h:h.id,h===j.id){if(j.filterable){var k=!1;b.each(g[a].conditions,function(b,d){d.name==="__global_search_"+f&&(k=!0,g[a].conditions[b].value=c.query)}),k||g[a].addCondition({name:"__global_search_"+f,sourceType:"param",sourceParam:"search",value:c.query,field:h,operator:"contains",encloseValueInQuotes:!0,inactive:!1}),f++}g[a].fields[e]=j}})}),e.conditionLogic?e.conditionLogic=e.conditionLogic.replace("AND","OR"):e.conditionLogic=e.conditions.map(function(a,b){return a.inactive!==!0?b+1+"":void 0}).join(" OR ")}),f.load(g,{dataSource:a.dataSource.getDataSource(c.dataSourceName),loadAllMetadata:!0,performingSearch:!0,ignoreCache:!0}).then(function(a){return h.resolve({request:c,results:a.map(function(a,b){var d=c.returning[b];return{label:a.label,labelPlural:a.labelPlural,objectName:e[d.modelName].objectName,objectMapKey:d.objectMapKey,modelName:d.modelName,records:a.data}})}).promise()})})},properties:{composer:{supports:{childRelationships:!1},canFieldsBeSelected:function(a){return a.breadcrumb.endsobject?!0:"Select an external object for this Model."}},canAutoGenerateConditionsFromFields:!0,validConditionTypes:["fieldvalue","multiple","param","userinfo","blank","modelmerge"],canConditionsBeGrouped:!0,hasGlobalSearchEntities:!0},propertyHasExtension:function(a,b){return a.extensions?a.extensions.filter(function(a){return a.name===b}).length>0:!1},createPropertyExtensionsMap:function(a){var c={};if(a.extensions)return b.each(a.extensions,function(a,b){return b.name&&"undefined"!=typeof b.value?void(c[b.name]=b.value):!0}),c},_expandBaseTypeForEntity:function(a,b,c,d){if(!a||!b)return[];var e,f,h,i,j,k,l,m=this,n=a.baseType,o=a.hasExpandedBaseType,p=a.__namespace;return d=d||{},!n||o?{properties:a.property||[],navigationProperties:a.navigationProperty||[],key:a.key}:(-1!==n.indexOf(g)&&(f=n.split(g),e=f.slice(0,f.length-1).join(g),h=n.substring(e.length+1)),e?(k=c.aliasMap[e],e=k||e,a.baseType=e+g+h,l=c.schemaMap[e],i=l&&l.entityTypeMap[h]):(i=c.schemaMap[p].entityTypeMap[n],e=p),i?d[e+g+i.name]?{properties:a.property||[],navigationProperties:a.navigationProperty||[],key:a.key}:(d=F(e+g+i.name,d),a.hasExpandedBaseType=!0,j=m._expandBaseTypeForEntity(i,c.schemaMap[e],c,d),a.property=(a.property||[]).concat(j.properties),a.navigationProperty=(a.navigationProperty||[]).concat(j.navigationProperties),a.key=j.key||a.key,{properties:a.property,navigationProperties:a.navigationProperty,key:a.key}):{properties:a.property||[],navigationProperties:a.navigationProperty||[],key:a.key})},_buildEntitySpecificMaps:function(a,b,c){var d,e=this;a.builtMaps||(d=e._expandBaseTypeForEntity(a,b,c.dataServices),a.property=d.properties,d.navigationProperties&&d.navigationProperties.length&&(a.navigationProperty=d.navigationProperties),a.key=d.key,e._setMapOfPropertiesOfEntityType(a,c),e._setMapOfNavigationPropertiesOfEntityType(a,c.dataServices),a.builtMaps=!0)},_buildMetadataMaps:function(a,d){var e,f=this,g=d.major<4,h=a.dataServices;k([h],"schema","schemaMap","namespace",{addKeyRelationships:!1}),k(h.schema,"entityType","entityTypeMap","name",{addKeyRelationships:!1}),e=h.schema,h.aliasMap={},f._setComplexTypeMap(a),g&&(k(e,"association","associationMap","name",{addKeyRelationships:!1}),k(e,"entityContainer","entityContainerMap","name",{addKeyRelationships:!1})),c(e,function(a,c){var d,e,f,i;c.alias&&(h.aliasMap[c.alias]=c.namespace),g?e=c.entityContainer:(c.entityContainerMap={},e=(d=c.entityContainer)&&(c.entityContainerMap[d.name]=d)&&[d]),e&&(k(e,"entitySet","entitySetMap","name",{addKeyRelationships:!1}),f=c.entitySetMap={},b.each(e,function(){b.extend(f,this.entitySetMap)}),g&&(k(e,"associationSet","associationSetMap","name",{addKeyRelationships:!1}),i=c.associationSetMap={},b.each(e,function(){b.extend(i,this.associationSetMap)}))),b.each(c.entityTypeMap,function(a,b){b.__namespace=c.namespace})})},queryMetadata:function(c){function d(a,b,c){var d=a&&a.dataServices;if(a&&(a.skuidVersion=l),d)!c&&g._buildMetadataMaps(a,l),j.metadata=a,h.resolve(a);else{if(b)return"OK"===b.statusText?h.reject("Unable to parse metadata. Is your OData version correct?",b):h.reject(b.statusText+": "+b.body,b);h.reject("Attempted to pull from datasource cache, but failed")}}function e(){return n.read({requestUri:g.buildResourceUri(j,K)},function(a,b){d(a,b,k)},function(a,b){h.reject(a,b)},n.metadataHandler,j.httpClientOfDataSourceType)}function f(a){a.setPersistentCacheProperties({url:null,version:null}),b.get("/api/v1/datasource-metadata?datasource="+a.name).then(function(c){a.setPersistentCacheProperties({url:c.signedRequest,version:a._metadataCacheVersion}),b.get(c.signedRequest).then(function(a){d(JSON.parse(a))},e)},e)}var g=this,h=b.Deferred(),j=c.dataSource,k=c.minimalOnly,l=g.getServiceVersion(j),m=l.major<4,n=g.getODataLibrary(j);if(j.metadata)return h.resolve(j.metadata).promise();if(j.httpClientOfDataSourceType={request:function(d,e,f){var g=d.dataSource||j,h=g.createHTTPRequest({body:d.body,url:d.requestUri,headers:b.extend(d.headers,c.headers)});return g.useApexProxy?(g.authentication&&g.authentication.success&&(h.isAuthenticated=!0),a.ajax.proxy(h).done(function(a){var c=a?a.headers:null;if(3===l.major){var g;if(b.each(["Content-Type","content-type"],function(a){return c[a]?(g=c[a],!1):void 0}),g&&"application/json"===g.slice(0,16)){var h=g.split(";"),j=!1;b.each(h,function(){return"odata"===this.slice(0,5)?(j=!0,!1):void 0}),j||(a.headers["Content-Type"]=g+(m?";odata=minimalmetadata":";odata.metadata=minimal"))}}var k={requestUri:d.requestUri,statusCode:a.statusCode,statusText:a.status,headers:a.headers,body:a.body instanceof Document?i.getXML(a.body):a.body};a.statusCode>=200&&a.statusCode<300?e(k):f(a.status,k)}).fail(function(a){f({response:a})})):(b.extend(d,{requestUri:h.url,body:h.body,headers:h.headers}),n.defaultHttpClient.request(d,function(a){e(a)},function(a){f(a)}))}},!j._metadataCacheVersion||k)e();else{var o,p=j.getCacheProperties(["url","version"]);p.version===j._metadataCacheVersion?o=p.url:j.setPersistentCacheProperties({url:null,version:null}),o?b.get(o).then(function(a){d(JSON.parse(a))},function(){f(j)}):f(j)}return h.promise()},coerceSaveItemRequest:function(){},coerceChanges:function(){return!1},save:function(c,d){function e(a){return!(!a.__metadata||!a.__metadata.etag)}function f(){return{Accept:p,"Content-Type":p}}function h(a,b,c,d){var e=k.getEntitySet(a.ref,d),f=k.getEntityType(e.entityType,d);return b&&o?{__metadata:{uri:e.name+"("+b+")",id:c[a.id].__metadata.id,type:f.__namespace+g+f.name}}:!b||o?null:void 0}function i(a,c,d,e){var f={};return b.each(c,function(b,c){var g=a.getField(b);"REFERENCE"===g.displaytype?f[b]=h(g,c,d,e):f[b]=k.getItemForDML(g,c,n)}),f}var k=this,l=b.Deferred(),m=d.dataSource,n=this.getServiceVersion(m),o=n.major<4,p="application/json;"+(o?"odata=verbose":"odata.metadata=full"),q=o?t:s;return k.authenticateAndGetMetadata(d).then(function(d){var h=[];b.each(c.operations,function(j,l){function m(a,b,c){return{operationType:a,dataSource:s,model:r,key:b,row:c,operation:l,entitySet:w,entityType:x,version:n}}var p=b.Deferred(),r=a.$M(l.id),s=r.getDataSource(),t=[],w=k.getEntitySet(l.type,d),x=k.getEntityTypeFromEntitySet(w,d),y={},z=0;h.push(p),k.coerceChanges(l,c,r),b.each(l.deletes,function(a,b){var c,d=f(),g=r.getRowById(a);e(g)&&(d["If-Match"]="*"),o||(d["Content-ID"]=""+a),D(b,g,n),k.coerceSaveItemRequest(c={requestUri:w.name+"("+a+")",method:v,__oldid:a,headers:d},m("delete",a,b)),t.push(c)}),b.each(l.updates,function(a,b){var c,g=r.getRowById(a),h=i(r,b,g,d),j=f();e(g)&&(j["If-Match"]="*"),o||(j["Content-ID"]=""+a),D(h,g,n),k.coerceSaveItemRequest(c={requestUri:w.name+"("+a+")",method:q,data:h,__oldid:a,headers:j},m("update",a,b)),t.push(c)}),b.each(l.inserts,function(a,b){var c,e=r.getRowById(a),h=i(r,b,e,d),j=f(),l=x.__namespace+g+x.name,n=y[a];n||(z++,y[z],n=z),o?h.__metadata={type:l}:h["@odata.type"]=l,j["Content-ID"]=""+n,k.coerceSaveItemRequest(c={requestUri:w.name,method:u,data:h,__oldid:a,headers:j},m("insert",a,b)),t.push(c)}),k.getODataLibrary(s).request({requestUri:k.buildResourceUri(s,L),method:u,data:{__batchRequests:[{__changeRequests:t}]}},function(a,c){var d=[],e=[],f=[],g=!0,h=function(a,b){var c,h,i=t[b],j=[],m=a.data,p=o?m:m&&m.d||m,s=p?k.getRowForItem(p,x,r.fields,n,r.fieldsMap):null,w=s&&k.getKey(s,x,n,r.fieldsMap),y=a.statusCode?a.statusCode.substring(0,1):"4";if(!w&&n.major>3&&a.headers&&(c=a.headers["OData-EntityId"],c&&(w=c.match(/[^()]+(?=\))+/g))&&(w=w[0])),a instanceof Error&&(y="2"),"4"===y||"5"===y){if(h="There was a problem with an OData Batch Request: ",a.stack)h+="Unexpected end of JSON input"===a.message?"Service sent back an invalid JSON payload":a.message;else{var z=k.getErrorFromErrorBody(a.response&&a.response.body);z&&(h+=(z.code?z.code+" - ":"")+z.message)}j.push({fields:[],message:h,rowId:i.__oldid,severity:"ERROR",status:"OData Error"})}i.method===q?f.push({errors:j,id:i.__oldid,messages:[],record:s&&JSON.stringify(s),source:l.id,success:!j.length}):i.method===u?e.push({errors:j,id:w,messages:[],oldId:i.__oldid,record:s&&JSON.stringify(s),source:l.id,success:!j.length}):i.method===v&&d.push({errors:j,id:i.__oldid,messages:[],source:l.id,success:!j.length}),j.length&&(g=!1)},i=c.statusCode?(c.statusCode+"").substring(0,1):"4";"4"===i||"5"===i?p.reject(c.statusCode+" - "+c.statusText+" - "+c.body,c):(b.each(c.data.__batchResponses,function(a,c){c.__changeResponses?b.each(c.__changeResponses,function(a,b){h(b,a)}):h(c,a)}),p.resolve({deleteResults:d,globalErrors:[],insertResults:e,totalsuccess:g,updateResults:f}))},function(a,b){p.reject({message:"There was an error connecting to the proxy.",response:b})},k.getODataLibrary(s).batchHandler,s.httpClientOfDataSourceType)}),b.when.all(h).then(function(a){var c={insertResults:[],updateResults:[],deleteResults:[],globalErrors:[],totalsuccess:!0};b.each(a,function(a,d){b.merge(c.insertResults,d.insertResults),b.merge(c.updateResults,d.updateResults),b.merge(c.deleteResults,d.deleteResults),d.totalsuccess===!1&&(c.totalsuccess=!1)}),l.resolve(c)},function(a){var c=[],d=[];b.each(a,function(a,b){j(b.message)&&c.push(b.message),b.response&&d.push(b.response)}),l.reject(c,d)})}),l.promise()},getReferenceHandler:function(){return{getBaseReferenceProps:function(a){return[{id:"targetobjects",type:"sobject",label:"Entity Type",dataSourceName:e.getDataSourceFromXML(a.state).name}]},getOverrideBatchProperties:function(){return[{type:"helptext",html:"Specify fields that will be added as related data. Any fields that are used in search or display templates will need to be added here."}]},getOverrideBatchNoItemsFunction:function(){return function(){return b("<div>").text("(Loading key field only.)")}},getOverrideBatchFieldChildrenFunction:function(a){return function(){return[{id:"batchfield",indent:1,linkedComponent:a,addtooltip:"Add New Batch Load Field",labelFunction:function(a){return a.attr("field")||"[No Field Selected]"},defaultStateFunction:function(){return l("<batchfield/>")},propsFunction:function(b){var c=[{id:"field",type:"field",label:"Field",sobject:a.state.attr("targetobjects"),dataSourceName:a.state.attr("datasource"),onChange:function(){b.refresh().rebuildProps()}}];return c}}]}},getMetadataHandler:function(c,d,f,g,h){var i,j=c.children("batchfields").first(),k=j.children("batchfield"),l=c.attr("keyfield")||"ID",m=c.attr("targetobjects"),n=c.attr("ogdisplaytype"),o=c.attr("rel")||g+"__r";if(d.keyField=l,d.originalDisplayType=n,m&&(i=m.split(","),d.isNamePointing=i.length>1,(h||n&&"REFERENCE"!==n)&&(d.relationshipName=d.rel=o),d.referenceTo=b.map(i,function(a){
return{accessible:!0,objectName:a}}),d.ref=m),!h&&n&&"REFERENCE"!==n){var p=e.getDataSourceFromXML(c),q=new a.model.Model({dataSource:p});q.id="_ReferenceLabelModel_"+(new Date).getTime()+o,k&&k.length?q.fields=b.map(k,function(a){return{id:b(a).attr("field")}}):q.fields=[{id:l}],q.doQuery=!0,q.doClone=!1,q.objectName=m,q.initialize();var r=new a.model.Condition;r.name="__reference_batch",r.operator="in",r.field=l,r.encloseValueInQuotes=!1,q.addCondition(r),f.batchLabelModels||(f.batchLabelModels={}),f.batchLabelModels[g]=q}},getReferenceValue:function(a,b){return a[b.keyField||"ID"]},getRowFromReferenceValue:function(a,b,c){var d=a.getRows([{field:c.keyField||"ID",value:b}]);return d&&d.length?d[0]:{}},processReferenceLookupModel:function(a,b,c){a.objectName=c}}}}),d(h,{ODataDataSourceTypeBase:J})}(skuid),function(a){var b=a.$,c=b.extend,d=a.utils,e=d.makeXMLDoc,f=d.combineUrls,g=a.dataSource,h=g.core||(g.core={}),i=a.model,j=d.startsWith,k=d.contains,l=d.isString,m=d.getObjectProperty,n=d.hasObjectProperty,o="extensions",p="rest.methods",q="rest.entityName",r="x-entityname",s=function(a){b.each(["name"],function(b,c){if(!a[c])throw"Missing Required Property Error: "+c}),c(this,a),this.properties=c(!0,{},s.prototype.properties),a.extendedProperties&&(c(!0,this.properties,a.extendedProperties),delete this.extendedProperties),g.DataSourceType.prototype.constructor.call(this,this),delete this.getModelProperties};s.prototype=new g.DataSourceType(!1),s.constructor=s,s.prototype=c(!0,s.prototype,{_NEW_ID_PREFIX:"__skuid_new__",_FAKE_ID_PREFIX:"__skuid__",_DEFAULT_ID_FIELD:"id",buildEntityMetadataRequest:function(a){var b=a.model,d=new i.Model(b);return a.ignorePathToContent&&delete d.pathToContent,c(d,{path:a.path||""}),d},buildSaveRequests:function(c){function d(a,c){var d=a.method,e=a.request,f="autoprefix"===d.changeMapping,g=(d.sendDataAs||"").toLowerCase(),h={};b.each(c,function(a,b){h[(f?d.changeMappingPrefix:"")+a]=b}),"application/x-www-form-urlencoded"===d.contentType?e.data=b.map(h,function(a,b){return encodeURIComponent(b)+"="+encodeURIComponent(a)}).join("&"):"headerperfield"===g?e.headers=h:"queryparamperfield"===g?(e.url+=k(e.url,"?")?"&":"?",e.url+=b.map(h,function(a,b){return encodeURIComponent(b)+"="+encodeURIComponent(a)}).join("&")):e.data=h}function e(a,b,c){return{type:a,originalRecordId:c,originalRecord:g.getRecordById(c).get(),method:b,model:g,row:g.getRowById(c),request:{url:b.url,method:b.verb,scopes:b.scopes,contentType:b.contentType}}}var f=this,g=a.$M(c.id),h=[],i=f.getMethod(g,"insert"),j=f.getMethod(g,"update"),l=f.getMethod(g,"delete");return c.inserts&&i&&b.each(c.inserts,function(a,b){var c=e("insert",i,a);d(c,b),f.coerceRequest(c),h.push(c)}),c.updates&&j&&b.each(c.updates,function(a,b){var c=e("update",j,a);d(c,b),f.coerceRequest(c),h.push(c)}),c.deletes&&l&&b.each(c.deletes,function(a){var b=e("delete",l,a);f.coerceRequest(b),h.push(b)}),h},coerceRequest:function(){},generateErrorMessage:function(a,c){c=c||{};var d,e=this.processErrorObject,f=a.body,g=c.showStatus===!1?null:a.status;if("OK"===g&&(g=""),f){if(l(f))try{f=JSON.parse(f)}catch(h){}if(b.isPlainObject(f))d=e(f.errors&&b.isArray(f.errors)&&f.errors.length?f.errors[0]:f);else if(b.isArray(f)&&f.length)d=e(f[0]);else if(f&&k(f,"/html")){var i,j=f.toLowerCase().indexOf("<body"),m=f.toLowerCase().indexOf("</body>",j);i=b(j&&m?f.substring(j,m+7):f),d=b.trim(i.text()||"")}else d=f}return g&&d?g+": "+d:d},getConditionSourceProperties:function(b,c){var d=a.builder.core;return"propsonly"===c.renderMode?d.getConditionParameterProperties(b,{url:c.url}):[{label:"URL Merge Parameter",deleteable:!1,linkedComponent:b,summaryFunction:function(a){return d.conditionDescriptionRenderers.parameter(a)},propsFunction:function(a){return d.getConditionParameterProperties(b,{handleChange:c.handleChange(a),handleRefresh:c.handleRefresh(a)})}}]},getEntityAuthenticationMetadata:function(){},getEntityMetadata:function(a){a||(a={});var c=this,e=b.Deferred(),f=a.entities,g=a.dataSource,h=[],i=[],j={};return b.each(f,function(b,e){g&&!e.dataSource&&(e.dataSource=g);var f=c.getEntityMetadataCacheKey(e),h=c.queryEntityMetadata(e,a);h?(h.done(function(a){if(a){var e=a.extensions||(a.extensions={}),g=e.rest||(e.rest={}),h=a.accessible=!!d.size(c.getMethod(a,"query")),i=a.createable=!!d.size(c.getMethod(a,"insert")),k=a.updateable=!!d.size(c.getMethod(a,"update")),l=a.deleteable=!!d.size(c.getMethod(a,"delete")),m=a.searchable=!!d.size(c.getMethod(a,"search"));a.readonly=(h||m)&&!i&&!k&&!l,g.entityName=f}j[b]=a}).fail(function(a){j[b]={debug:a}}),i.push(h)):j[b]={}}),b.when.all(i).done(function(){b.each(f,function(a){h.push(j[a])}),e.resolve(h)}).fail(function(a){e.reject(a)}),e.promise()},getEntityMetadataCacheKey:function(a){return"string"==typeof a?a:a.objectName||m(a,"extensions.rest.entityName")},shouldIgnoreCache:function(a){return a=a||{},a.ignoreCache||!1},getEntityMetadataLoadingMessageFromBreadcrumb:function(){return"Loading Data Source metadata..."},getEntityList:function(){return b.Deferred().resolve([]).promise()},searchableEntities:function(a){a=a||{};var c=b.Deferred(),d=this,e=[];return d.getEntityList(a).then(function(f){b.each(f,function(b,c){d.queryEntityMetadata(c.value,a).then(function(a){a.methods.search&&e.push(c)})}),c.resolve(e)}),c.promise()},search:function(c,d,e){var f=this,g=[];return b.each(c.returning,function(a,h){var i=!1,j=d&&d[a],k=e[h.modelName];k.extensions.rest={entityName:h.objectName},b.each(k.conditions,function(a,b){"__global_search"===b.name&&(i=!0,b.value!==c.query&&(b.value=c.query))}),i||k.addCondition({name:"__global_search",sourceType:"param",sourceParam:"search",value:c.query,operator:"=",encloseValueInQuotes:!1,inactive:!1}),f.searchProperties&&j&&b.each(f.searchProperties(j).conditions,function(a,b){k.addCondition(b)}),g.push(k)}),f.load(g,{dataSource:a.dataSource.getDataSource(c.dataSourceName),loadAllMetadata:!0,performingSearch:!0,ignoreCache:!0}).then(function(a){return a})},getExtendedModelProperties:function(){return{basic:[],advanced:[],customTabs:[]}},getIdField:function(a){var b=this,c=a.idFields;return c&&c.length?1===c.length?c[0]:c:b._DEFAULT_ID_FIELD},getNameField:function(a){var c,d,e=this;return c=a&&a.fields?a:a&&a.model?a.model:{},c.nameField?c.nameField:(d=e.getIdField(c),b.isArray(d)?d[0]:d)},getRowId:function(a,c){var d=this,e=d.getIdField(c);return b.isArray(e)&&e.length>1?c.getFieldValues(a,e,!0).join(","):c.getFieldValue(a,e,!0)},getRowName:function(a,b){return b.getFieldValue(a,this.getNameField(b),!0)},getMethod:function(a,b){return this.getMethods(a)[b]||{}},getMethods:function(a){return m(a,o+"."+p)||a.methods||{}},getModelProperties:function(b,c,d){var e=this,f=a.builder.core,g=f.getUnsavedChangesWarningProperty({component:b}),h=b.state,i=void 0!==h.attr(r),j=f.getCoreModelBasicProperties({component:b,propViewer:c,isDataSourceLocked:i}),k=[],l=this.prop("composer.hasEntityOptions")!==!1;l&&j.push({id:r,label:"Model Entity",type:"entity",dataSourceName:d.name,readonly:h.attr(r)?!0:!1,onChange:function(a,c){e.onSelectEntity&&e.onSelectEntity(a,c,b,d),b.save().refresh()}}),j.push(f.getModelQueryOnPageLoadProperty({component:b,propViewer:c}),f.getCreateDefaultRowProperty()),g&&k.push(g),k.push(f.getDeferFieldRenderingProperty(!0));var m=this.getExtendedModelProperties({basic:[],advanced:[],customTabs:[]}),n=[],o=Array.prototype.push;return m.basic.length>0&&o.apply(j,m.basic),n.push({name:"Basic",props:j}),m.advanced.length>0&&o.apply(k,m.advanced),n.push({name:"Advanced",props:k}),m.customTabs.length>0&&o.apply(n,m.customTabs),e.coerceModelPropertyTabs(n),n},coerceModelPropertyTabs:function(){},handleSaveResult:function(a){var b,e=this,f=[],g=[],h=[],i=[],j=[];return a.map(function(a){var i,k,l,o=a.operation,p=a.requestContext,q=p.type,r=p.method,s=r.receiveDataAs||"recordinbody",t=a.response,u=t?e.parseResponseBodyAsJSON(t.body):null,v=t?t.headers:null,w=a.error,x=[],y={errors:j,messages:x,source:o.id},z=a.isSuccess,A=r.successIf,B=r.successField,C=r.successValue;z&&("responsefieldispresent"===A?z=n(u,B):"responsefieldistrue"===A?z=m(u,B,!0)===!0:"responsefieldequals"===A?z=m(u,B,!0)===C:"responseheaderispresent"===A?z=n(v,B,!0):"responseheaderequals"===A?z=m(v,B)===C:"responsebodyequals"===A?z=u===C:"responsebodyisempty"===A&&(z=d.isUndefined(u)||null===u)),y.success=z,z||(b=!0,w?j.push({message:w,severity:"ERROR"}):(i=e.generateErrorMessage(t),i&&j.push({message:i,severity:"ERROR"}))),"insert"===q?(y.oldId=p.originalRecordId,z&&(k=r.createdRecordIdLocation,l={},c(l,p.originalRecord),"recordinbody"===s?c(l,u):"idinbodyfield"===s?y.id=m(u,k):"idinheader"===s&&(y.id=m(v,k)),y.record=l,e.coerceInsertResultObject(y)),g.push(y)):"update"===q?(y.id=p.originalRecordId,"recordinbody"===s&&(y.record=u),h.push(y)):"delete"===q&&(y.id=p.originalRecordId,f.push(y))}),{deleteResults:f,globalErrors:i,insertResults:g,totalsuccess:!b,updateResults:h}},parseSuccessfulLoadResponse:function(a,b,c){var d=this,e=d.parseResponseBodyAsJSON(a.body),f=b.pathToContent,g=f?m(e,f):e;c.data=g},parseSuccessfulSaveResponse:function(){},coerceInsertResultObject:function(){},initialize:function(a){if(a&&a.fields&&a.fields.length){var c,e,f,g,h=this,i=h.getEntityMetadataCacheKey(a),j=a.getDataSource&&a.getDataSource(),k=j&&j.getCachedEntityMetadata(i);if(!k||!d.size(k))return;1===d.size(k)&&k.message&&(k=k.message),c=k&&k.getFieldsList()||[],e=a.fields,f=a.extensions||(a.extensions={}),g=f.rest||(f.rest={});var l=b.map(e,function(a){return a.id});b.each(c,function(a,b){l.indexOf(b.id)>=0||b.omittable!==!1||e.push({id:b.id})}),b.each(e,function(a,b){h.updateFieldMetadata(b,b.id,k)}),g.methods=k&&k.getExtensions(p)}return a},load:function(a,d){var e=this,f=d.dataSource,g=b.Deferred(),h=[];return f.authenticate().done(function(){f.getEntityMetadata({entities:a,ignoreCache:e.shouldIgnoreCache(d)}).done(function(f){1===a.length&&(f=[f]),b.each(a,function(a,g){var i=b.Deferred(),j=f[a],k=j.getExtensions(q),l=j.getExtensions(p),m=l&&(d.performingSearch?l.search:l.query);if(h.push(i.promise()),!m)return void i.reject('No query method found for "'+k+'"');var n={url:m.url,method:m.verb,contentType:m.contentType,scopes:m.scopes},o={type:d.performingSearch?"search":"query",method:m,model:g,request:n},r=j._unwrap(),s=r.fields.reduce(function(a,b){return a[b.id]=b,a},{}),t=c({},r,{fields:b.map(g.fields,function(a){return s[a.id]})});g.doQuery===!1?i.resolve(t):(e.coerceRequest(o),e.makeRequest(g,o).done(function(a){e.parseSuccessfulLoadResponse(a,m,t,g,r.fields),d.performingSearch?i.resolve({request:{dataSource:g.dataSource},results:[{label:g.label,objectName:g.objectName,objectMapKey:g.objectMapKey,modelName:g.id,records:t.data}]}):!g.deferFieldRendering&&o.method.additionalRequests?b.when.all(t.data.map(function(a,b){return e.makeAdditionalQueries(g,a,m,t).then(function(a){t.data[b]=a.row})})).then(function(){i.resolve(t)}):i.resolve(t)}).fail(function(a){i.reject(a)}))}),b.when.all(h).done(function(a){g.resolve(a)}).fail(function(a){g.reject(a)})}).fail(function(a){g.reject(a)})}).fail(function(a){g.reject(a)}),g.promise()},makeRequest:function(a,d,e){var g=b.Deferred(),h=d.request||d,i=d.parameters,k=d.row,l=this,m=function(a,d,e,g){g=g||{},e||(e={method:a.verb,contentType:a.contentType,url:a.serviceUrl,type:"query",scopes:a.scopes});var h,k=a.getDataSource(),n=k.serviceUrl||"",o=e.url||"",p=g.dfd;return k.authenticate(a,e).done(function(){h=k.authentication;var q,r={},s=!1;a.conditions&&b.each(a.conditions,function(b,c){if(c.inactive===!1&&c.sourceParam){var d,e=a.getConditionValueResult(c),f=e.status;if(f){if("deactivate"===f)return!0;if("noquery"===f)return s=!0,p.reject("Could not perform this query because no value could be found for merge variable  '"+c.sourceParam+"'"),!1}else d=e.value,r[c.sourceParam]=d?encodeURIComponent(d):d}}),s||(q=k.createHTTPRequest(c({},e,{apiExtensions:r,model:a,row:d,url:f(n,o),method:e.method||"GET",contentType:e.contentType||"application/json",body:e.data,parameters:i})),a.query=a.debug=q.url,k.makeRequest(q).done(function(a){var c,d=q.method,e=a.statusCode;"POST"===d?201!==e&&200!==e&&(c=l.generateErrorMessage(a)):-1!==b.inArray(d,["PUT","PATCH","DELETE"])?204!==e&&200!==e&&(c=l.generateErrorMessage(a)):200!==e&&(c=l.generateErrorMessage(a)),c?p.reject(c):p.resolve(a)}).fail(function(f){var i=f.statusCode,q=f.error;if(j(q,"Invalid Request: Unauthorized endpoint")&&window.confirm("To access this Data Source, you will need to add its endpoint as a Remote Site from Salesforce Setup.\n\nWould you like to do that now?")){var r=window.location.href+"",s=encodeURIComponent(r.substring(r.indexOf("/",r.indexOf("//")+2),r.length));window.location="/0rp/e?setupid=SecurityRemoteProxy&IsActive=1&retURL="+s+"&cancelURL="+s+"&EndpointUrl="+encodeURIComponent(n)+"&SiteName="+k.name.replace(/[\W]+/g,"")+'&DescriptionField=For Skuid Model Data Source "'+k.name+'"'}if(404===i)q=l.generateErrorMessage(f),q||(q='The requested resource for data source "'+k.name+'" could not be found:\n\n'+o);else if(401===i&&"basicauth"!==h.method)if(h&&h.success){if(k.invalidateAuthentication(),!h.hasRetried){h.hasRetried=!0;var t=b.Deferred();return m(a,d,e,c(g,{dfd:t})).always(function(){delete h.hasRetried}).done(function(a){p.resolve(a)}).fail(function(a){p.reject(a)})}q=l.generateErrorMessage(f)}else{if(h&&k.getPendingAuthenticationRequest())return h.hasRetried=!0,k.getPendingAuthenticationRequest().done(function(){var f=b.Deferred();return m(a,d,e,c(g,{dfd:f})).always(function(){delete h.hasRetried}).done(function(a){p.resolve(a)}).fail(function(a){p.reject(a)})}).fail(function(){q=l.generateErrorMessage(f)});q=l.generateErrorMessage(f)}q||(q=l.generateErrorMessage(f,{showStatus:!1})),p.reject('Request to data source "'+k.name+'" failed'+(q?": "+q:f.status))}))}).fail(function(a){p.reject('Unable to authenticate to data source "'+k.name+'": '+a)}),p.promise()};return m(a,k,h,c(e,{dfd:g})),g.promise()},makeAdditionalQueries:function(a,c,d,e){var f=b.Deferred(),g=this,h=d||a.extensions.rest.methods.query;return e&&(a.fields=e.fields),h.additionalRequests&&h.additionalRequests.map(function(b){var d={type:"query",method:b,model:a,request:{url:b.url,method:b.verb,contentType:b.contentType,scopes:b.scopes},row:c};g.coerceRequest(d),g.makeRequest(a,d).then(function(b){c._additionalRequestMade=!0,g.parseAdditionalQueries(b,a,c,d),f.resolve({row:c,model:a})})}),f.promise()},parseAdditionalQueries:function(a,c,d,e){var f="string"==typeof a.body?JSON.parse(a.body):a.body;c.fields.map(function(a){a.defer&&b.inArray(a.id,e.method.fields)>-1&&(d[a.id]=m(f,a.path))})},onSelectEntity:function(a,b,c,d){var f=a,g=d.getCachedEntityMetadata(f),h=g.getFieldsList().filter(function(a){return a.omittable===!1}),i=m(g.getExtensions(),"rest.defaultConditions"),j=c.state,k=j.children("fields").empty(),l=j.children("conditions").empty();h&&h.length>0&&k.append(h.map(function(a){return e('<field id="'+a.id+'" />')})),i&&i.length>0&&l.append(i.map(function(a){return e('<condition value="" />').attr(a)}))},parseResponseBodyAsJSON:function(a){if(a&&d.isString(a))try{a=JSON.parse(a)}catch(b){}return a},populateBreadcrumbFromEntityMetadata:function(a){var b=a.crumb,c=a.dataSource,d=a.modelXML;if(0===a.index){var e=d.attr("verb");b.rel=b.ref=c.name+(e?": "+e:"")}return b},processEntityMetadataRequest:function(a){var b=c(!0,{extensions:{rest:{}}},a.result),d=b.extensions.rest,e=b.methods,f=b.defaultConditions;return delete b.methods,d.methods=e,f&&(delete b.defaultConditions,d.defaultConditions=f),b},processErrorObject:function(a){var b=[];return l(a)?b.push(a):(a.error&&b.push(a.error),a.message&&b.push(a.message)),b.join(": ")},processModelXMLExtensions:function(a,b){a.extensions.rest={entityName:b.attr(r)}},properties:{composer:{canFieldsBeSelected:function(a){var b=a.model,c=b.attr(r)||b.attr("sobject"),d=b.attr("datasource")||b.attr("service"),e=g.get(d),f=e&&e.getDataSourceType(),h=f.prop("composer.hasEntityOptions")!==!1;return h&&c?!0:"Select an Entity for this Model"}},canAutoGenerateConditionsFromFields:!1,canConditionsBeGrouped:!1,showSearchFields:!1,canFieldsBeIndividuallySearched:!1,canServerSearch:!1},queryEntityMetadata:function(){},save:function(a){var c=this,d=b.Deferred();return b.each(a.operations,function(a,e){var f,g=c.buildSaveRequests(e),h=[],i=[];b.each(g,function(a,d){var f=c.makeRequest(d.model,d);b.when(f).done(function(a){c.parseSuccessfulSaveResponse(a,d),i.push({operation:e,requestContext:d,response:a,isSuccess:!0})}).fail(function(a){i.push({operation:e,requestContext:d,error:a,isSuccess:!1})}),h.push(f)}),b.when.all(h).always(function(){f=c.handleSaveResult(i),d.resolve(f)})}),d.promise()},setDefaultConditionState:function(a){a.sourceType="param",a.operator="=",a.encloseValueInQuotes=!0},updateFieldMetadata:function(a,b,d){if(b||(b=a.id),b){var e,f,g=d&&d.getField&&d.getField(b);g&&(e=a.id,f=a.name,c(!0,a,g),e&&(a.id=e),f&&(a.name=f))}}}),c(h,{RESTDataSourceTypeBase:s})}(skuid),function(a){function b(){return"ontouchstart"in window||navigator.maxTouchPoints}function c(a,b){var c=this,d=[];c.options=t({showHeader:!0,showFooter:!1,showMessages:!0,showErrorsInline:!0,showErrorsOnHover:!1},b),c._GUID=v.generateGUID(),c.models=[],c.modelsById={},c.lists=[],a&&(c.element=a.addClass("nx-editor"),c.options.showHeader&&(c.header=s("<div>").addClass("nx-editor-header"),c.submitwrapper=s("<div>").addClass("nx-header-"+(c.options.buttonPosition||"right")).appendTo(c.header),c.status=s('<div class="nx-status">').appendTo(c.header).hide(),c.statustext=s('<div class="nx-status-text"></div>').appendTo(c.status),d.push(c.header)),c.options.showMessages&&(c.messages=s('<div class="nx-messages">'),d.push(c.messages)),c.contents=s("<div>").addClass(c.options.customContentClass?c.options.customContentClass:"nx-editor-contents"),d.push(c.contents),c.options.showFooter&&(c.footer=s("<div>").addClass("nx-editor-footer"),c.footerSubmitWrapper=s("<div>").addClass("nx-footer-"+(c.options.buttonPosition||"right")).appendTo(c.footer),c.footerStatus=s('<div class="nx-status">').appendTo(c.footer).hide(),c.footerStatusText=s('<div class="nx-status-text"></div>').appendTo(c.footerStatus),d.push(c.footer)),c.element.append(d))}function d(b,c,d){var e,f,g,h=this;if(h._GUID=v.generateGUID(),h.editor=b,h.model=c,h.options=d||{},h.views=d.views,h.mode=d.mode,h.hideFooter=d.hideFooter||!1,h.filterCssClass=d.filterCssClass,h.personalizationService=d.personalizationService||d.component&&d.component.getPersonalizationService(),h.filtersPosition=d.filtersPosition||"top",h.filtersWidth=d.filtersWidth,h.component=d.component,e=h.personalizationService&&h.personalizationService.getSettings()._List||{},h.conditions=d.conditions,h.context=d.context,h.visibleItems=[],h.currentView=!1,h.views&&(f=Object.keys(h.views)),f&&(h.currentView=f[0]),f&&f.length>1){var i=e.lastViewId;s.each(h.views,function(a){return a===i?(h.currentView=a,!1):void 0}),h.editor.header.append(h.makeViewSwitcher())}if(h.element=!1,h.contents=!1,h.conditionsBar=s("<div>").addClass("left"===h.editor.options.buttonPosition?"nx-conditioncontainer-left":"nx-conditioncontainer"),h.searchBox=!1,h.searchFields=d.searchFields||[],h.searchSubFields=d.searchSubFields||{},h.searchFieldsMap={},h.searchSubFieldsMap={},h.setupConfigPopup=d.setupConfigPopup,h.filters=[],h.searchFields&&h.searchFields.length){var j=h.searchFields;h.searchFields=[],s.each(j,function(a,b){h.addSearchField(b)})}if(h.searchSubFields&&a.utils.size(h.searchSubFields)>=1){var k=h.searchSubFields;h.searchSubFields={},s.each(k,function(a,b){s.each(b,function(b,c){h.addSearchSubField(a,c)})})}h.customFilter=d.customFilter||!1,h.customFilterValue=d.customFilterValue||"",h.searchMethod=d.searchMethod||F,h.searchConditionName=d.searchConditionName,h.searchPlaceholderText=d.searchPlaceholderText||null;var l=d.requiredFields;if(h.requiredFields=l&&v.size(l)?l:{},!h.hideFooter){h.footer=s("<div>").addClass("nx-list-footer"),h.footerleft=s("<div>").addClass("nx-list-footer-left").appendTo(h.footer),h.footercenter=s("<div>").addClass("nx-list-footer-center").appendTo(h.footer),h.footerright=s("<div>").addClass("nx-list-footer-right").appendTo(h.footer),h.currentPage=0;var m=d.pageSize;m&&("all"!=m?(d.pageSize=parseInt(d.pageSize,10),h.currentPageSize=e.pageSize||d.pageSize):h.currentPageSize="all")}h.editor.registerList(h),h.makeConditionsBar(),h.editor&&h.editor.header&&(h.editor.header["left"===h.editor.options.buttonPosition?"prepend":"append"](h.conditionsBar),h.options.showSearchBox&&h.searchBox===!1&&(h.searchBox=h.makeSearchBox(),h.searchBox&&h.editor.submitwrapper.append(h.searchBox)),h.options.showConfigIcon&&(h.listConfigButton=s("<button>"),h.listConfigButton.addClass("nx-button-list-config").skootip(h.options.configIconTip||""),s("<span>").addClass("ui-icon sk-icon-configure sk-icon inline").appendTo(h.listConfigButton),h.listConfigButton&&h.editor.submitwrapper.append(h.listConfigButton),g=h.setupConfigPopup(h),h.listConfigButton.on("click",g)),h.options.delayFilterExecution&&(h.applyFiltersBtn=s("<div>").addClass("sk-button-applyfilter").text(w("apply")).skooButton({icon:"sk-icon-search-go",disabled:!1,hoverText:w("apply")}).hide().on("click",function(){h.applyFiltersAndSearch()}),h.cancelFiltersBtn=s("<div>").addClass("sk-button-cancelfilter").text(w("cancel")).skooButton({icon:"sk-icon-cancel",disabled:!1,hoverText:w("cancel")}).hide().on("click",function(){h.cancelFiltersAndSearch()}),h.editor.submitwrapper.append(h.applyFiltersBtn,h.cancelFiltersBtn))),h.renderedItems={}}function e(a,b){var c=a.footerleft;return c&&c.find(".nx-list-loadmore").toggleClass("unavailable",b),a}function f(a,b,c){var d=this;t(d,{_GUID:v.generateGUID(),list:a,row:b,defaultMode:a.mode||"read",deleted:!1,selected:c.selected||!1,element:!1,fields:[],fieldsByGUID:[]}),d.mode=c.mode||d.defaultMode,a&&a.model&&a.model.registerItem(d)}function g(a,b,c,d){var e,f,g=this;if(g._GUID=v.generateGUID(),g.row=a,g.model=b,g.editor=c,g.options=d||{},g.subComponents=[],g.id=d.fieldId,g.name=d.fieldName,g.context=d.fieldContext,g.messages=[],g.id&&(g.metadata=g.model.getField(g.name?g.name:g.id,g.context)),e=g.metadata,g.options.labelText?g.label=g.options.labelText:g.options.label?g.label=g.options.label:e&&(g.label=e.label),g.options.required||e&&e.required?g.required=!0:g.required=!1,g.mode=d.mode||"read",g.element=s("<div>").addClass("nx-field").attr("data-uid",g._GUID),d.additionalClass&&g.element.addClass(d.additionalClass),g.element.data("object",g),g.editable=(!e||b.isRowNew(a)&&e.createable||e.editable)&&g.options.editable!==!1&&"readonly"!==g.mode,g.loading=d.loading,g.options.register&&g.model.registerField(g),f=d.controllingFields,e&&-1!==s.inArray(e.displaytype,["PICKLIST","MULTIPICKLIST","COMBOBOX"])){var h=e.controllingField,i=g.model.getField("RecordTypeId");f||(d.controllingFields=f=[]),i&&f.push(i.id),h&&f.push(h)}f&&f.length&&s.each(f,function(){var a=this;-1!==a.indexOf(".")&&(a=a.split(".")[0]),g.model.registerField(g,a)}),e&&e.displaytype===A&&g.subscribeToEvent("ui.timeZoneChanged",function(){g.render()})}function h(a){if(a&&a.length){var b=[];return a.children().each(function(){var a=s(this),c="false"!==a.attr("enclosevalueinquotes"),d={field:a.attr("field"),type:a.attr("type"),operator:a.attr("operator"),value:a.attr("value"),depfield:a.attr("depfield"),sourceParam:a.attr("sourceparam"),model:a.attr("model"),mergeField:a.attr("mergefield"),encloseValueInQuotes:c};if("multiple"==d.type){d.values=[];var e=a.children("values");e.length&&e.first().children("value").each(function(){var a=v.getXML(this);a.length>8?(a=v.decodeXML(a.substring(7,a.length-8)),d.values.push(v.adjustValueBasedOnQuotedness(a,c))):d.values.push("")})}else"userinfo"==d.type?d.mergeField=a.attr("userinfotype"):"param"===d.type?d.mergeField=a.attr("value"):"modelmerge"===d.type&&t(d,{mergeField:a.attr("mergefield"),mergeModel:a.attr("model"),noValueBehavior:a.attr("novaluebehavior")});b.push(d)}),b}}function i(b){b=b||{};var e=this,f=b.grandparent,g=b.parent,h=b.model,i=b.element,j="nx-queue";e.model=h,f.css({overflow:"hidden","overflow-x":"hidden","overflow-y":"hidden"}),g.css({position:"relative","padding-left":"0px","padding-right":"0px",height:"100%"}),e.element=i.addClass(j).data("object",e).appendTo(g);var k=b.title?v.merge("row",b.title,{noLink:!0},h):"";e.header=s("<div>").addClass(j+"-header").attr({"aria-controls":i.prop("id")}),e.headerInner=s("<div>").addClass(j+"-header-inner").appendTo(e.header),e.titleBar=s("<div>").addClass(j+"-titlebar").appendTo(e.headerInner),(b.showSearchBox===!0||b.filtersXML&&b.filtersXML.children&&b.filtersXML.children().length>0)&&(e.titleIcon=s("<div>").attr({role:"button",tabindex:0}).addClass("ui-icon ui-icon-gear "+j+"-titleicon").on("click "+B,function(a){("click"===a.type||a.which===C.ENTER||a.which===C.SPACE)&&e.settingsBar.toggle()}).appendTo(e.titleBar)),e.titleText=s("<div>").append(k).addClass(j+"-titletext").appendTo(e.titleBar);var l=s("<div>").addClass(j+"-settings");b.showSearchByDefault?e.settingsBar=l.appendTo(e.headerInner):e.settingsBar=l.hide().appendTo(e.headerInner),g.append(e.header,e.element),e.editor=new c(e.element,{showSaveCancel:!1,buttonPosition:"block"});var m={renderComplete:function(){var c=e.element.find("."+j+"-item"),d=b.tagInteractions;a.interactions.enableInteractions(c,{customInteractionsEvaluator:function(a){d&&d(s(a.item).data("object"),a.validGestures)}})},render:function(a){a.element.addClass(j+"-item");var c=s("<div>").addClass(j+"-item-inner").appendTo(a.element),d=b.tagRenderer;d&&d(e.model,e.list,a,c)}};e.views={standard:m},e.list=new d(e.editor,e.model,{views:e.views,listFilters:b.filtersXML,conditions:b.editorConditions,context:b.context,showSearchBox:b.showSearchBox,useSOSLSearch:b.useSOSLSearch,SOSLFields:b.SOSLFields,searchMethod:b.searchMethod||F,searchConditionName:b.searchConditionName,emptySearchBehavior:b.emptySearchBehavior,tokenizeSearch:"undefined"!=typeof b.tokenizeSearch?b.tokenizeSearch:!0,searchPlaceholderText:b.searchPlaceholderText,delayFilterExecution:b.delayFilterExecution,personalizationService:b.personalizationService}),e.model.registerList(e.list),e.list.render(),e.list.attach();var n=this.list.editor.header;n.detach().appendTo(e.settingsBar)}function j(a,b){b||(b={});var c=b.mode||"edit",d=s("<div>").addClass("nx-editor-contents nx-basicfieldeditor-section-body");return s.each(a,function(a,e){var f=s("<div>").addClass("nx-basicfieldeditor-item"),g=s("<div>").addClass("nx-basicfieldeditor-item-label").text(e.metadata.label).appendTo(f);e.mode=c,e.editable=e.metadata.editable,e.editor=b.editor,e.wrapperElement=f,e.labelElement=g,e.render(),f.append(e.element),d.append(f)}),d}function k(b,c){var d,e,f,g,i=c.model,j=b.attr("id"),k=b.attr("name"),l=b.attr("type"),m=b.attr("valuehalign"),n=b.attr("placeholder"),o={additionalClass:c.layoutClass,allowHTML:"true"===b.attr("allowhtml"),editable:"true"!==b.attr("readonly"),fieldId:j,fieldName:k,maxDisplayCharacters:b.attr("maxdisplaycharacters"),displayRows:b.attr("displayrows"),mode:c.mode||"read",register:!0,renderAs:b.attr("renderAs"),type:l,pageSize:b.attr("pagesize")||5},p=i.getField(k?k:j);if(j&&!p)return!1;if(p&&(d=p.displaytype),"CUSTOM"===l?o.snippet=b.attr("snippet"):"IMAGE"===l&&(o.editable=!1,o.url=b.children("url").first().text(),o.alt=b.children("alt").first().text(),o.height=b.attr("height"),o.fill="true"===b.attr("fill")),m&&(o.valueHorizontalAlignment="right"),"MULTIPICKLIST"===d?(o.maxSelected=b.attr("maxselected"),e=b.attr("selectedlist"),e&&(o.selectedList=parseInt(e,10))):-1!==s.inArray(d,["PICKLIST","REFERENCE"])?(o.addNoneOption="true"===b.attr("addnoneoption"),b.attr("nonelabel")&&(o.noneLabel=b.attr("nonelabel"))):-1!==s.inArray(d,["DOUBLE","CURRENCY","PERCENT"])?o.decimalPlaces=b.attr("decimalplaces"):v.startsWith(d,"DATE")&&(f=b.attr("monthpicker"),"undefined"!=typeof f&&f&&(o.showMonthPicker="true"===f),g=b.attr("yearpicker"),"undefined"!=typeof g&&g&&(o.showYearPicker="true"===g),o.showYearPicker&&(o.yearPickerRange=(b.attr("yearpickermin")||"c-10")+":"+(b.attr("yearpickermax")||"c+10")),d===A&&(o.minuteIncrement=parseInt(b.attr("minuteincrement")||"5",10))),"REFERENCE"===d){o.optionsource=b.attr("optionsource"),o.optionmodel=b.attr("optionmodel"),o.template=b.attr("displaytemplate"),o.searchTemplate=b.attr("searchtemplate"),o.tokenizeSearch=b.attr("tokenizesearch"),o.delimiter=b.attr("delimiter");var q=[],r=h(b.children("filters")),t=b.children("searchfields").first(),u=t.children(),w=o.defaultOrdering="true"===t.attr("defaultordering"),x=t.attr("orderby");r&&r.length&&(o.filters=r,s.each(r,function(){"dependent"===this.type&&q.push(this.depfield)}),q.length&&(o.controllingFields=q)),o.useSOSLSearch="true"===t.attr("usesosl"),o.SOSLFields=t.attr("soslfields"),!w&&x&&(o.order=x),u.length&&(o.searchFields=[],o.returnFields=[],u.each(function(){var b,c,d=s(this),e=d.attr("return"),f=d.attr("show"),g=d.attr("query"),h=d.attr("field"),i=!1,j=!1;"true"===g&&o.searchFields.push({id:h,searchOperator:d.attr("operator")}),"undefined"!=typeof e?"true"===e&&(i=!0,"true"===f&&(j=!0)):"true"===f&&(i=!0,j=!0),i&&(b={id:h,showInSearchDialog:j},c=d.children("label").first(),c&&c.length&&(b.label=a.utils.getXML(c[0])),o.returnFields.push(b))}))}return b.children("enableconditions")&&(o.enableConditionsXML=b.children("enableconditions")),"true"===b.attr("required")&&(o.required=!0),n&&(c.row?o.placeholder=v.mergeAsText("row",n,{createFields:!0,registerFields:!1},i,c.row):o.placeholder=n),o}function l(a,b,c){a&&(a.css("opacity",1).show(),b.text(c))}function m(a,b,c,d){a&&(b.text(c),0===d?a.hide():a.animate({opacity:"0"},d||500,function(){a.hide()}))}function n(a,b,c){function d(){sforce.console.openPrimaryTab(null,a,!0,y(b))}function e(a,b,d){var g={tabsProcessed:0};a&&(g.numTabs=a.length,g.numTabs?s.each(a,function(a,h){sforce.console.getPageInfo(h,function(a){if("resolved"!==d.state())if(a.success){var i=JSON.parse(a.pageInfo);i&&c&&c(i)?(f={id:h},b&&(f.parentTabId=b),d.resolve()):b?sforce.console.getSubtabIds(h,function(a){if(a.success&&a.ids&&a.ids.length){var b=s.Deferred();e(a.ids,!1,b),s.when(b).then(function(){++g.tabsProcessed===g.numTabs&&d.resolve()})}else++g.tabsProcessed===g.numTabs&&d.resolve()}):++g.tabsProcessed===g.numTabs&&d.resolve()}else++g.tabsProcessed===g.numTabs&&d.resolve()})}):d.resolve())}if(a){var f,g=s.Deferred();sforce.console.getPrimaryTabIds(function(a){e(a.ids,null,g)}),s.when(g).then(function(){if(f){var a=f.parentTabId?f.parentTabId:f.id;sforce.console.focusPrimaryTabById(a,function(a){a.success?f.parentTabId&&sforce.console.focusSubtabById(f.id,function(){}):d()})}else d()})}}function o(a,b){n(a,b,function(b){return b&&v.endsWith(b.url,a)})}function p(a,b){n("/"+a,b,function(b){return b&&(b.objectId===a||a&&18===a.length&&b.objectId===a.substring(0,15))})}function q(b,c){var d=a.$M(y(c));p(b,d.getNameFieldValueForRow(d.getRowById(b)))}function r(b,c,d){var e=a.$M(y(c)),f=e?e.registeredFields[y(b)]:null;f&&"REFERENCE"===f.metadata.displaytype&&p(d,d||0===d?x(f.calculateReferenceText()):"")}var s=a.$,t=s.extend,u=a.ui={},v=a.utils,w=a.$L,x=v.encodeHTML,y=v.decodeHTML,z="_uniqueMessages",A="DATETIME",B="keydown.action.skuid",C=a.$.ui.keyCode,D="_eventSubscriptions",E="client",F="server",G="custom",H={ID:1,STRING:1,TEXT:1,EMAIL:1,PICKLIST:1,MULTIPICKLIST:1,COMBOBOX:1,PHONE:1,URL:1,REFERENCE:1,TEXTAREA:1};b()&&s(function(){v.loadJS(v.getStaticResourceUrl("HammerJS","skuid",null,v.getCacheTimestamp())).done(function(){u.hammerJSLoaded=!0,a.events.publish("skuid.resources.hammerjsloaded")})}),c.prototype={id:function(){return this._GUID},registerModel:function(a){if(!a)return this;var b=this,c=b.modelsById,d=!a.hasChanged;return c[a.id]||(b.models.push(a),c[a.id]=a,a.registerEditor(b),b.options.showSaveCancel&&!b.submitbuttons&&(b.savebutton=s("<div>").addClass("sk-button-save").text(w("save")).skooButton({icon:"sk-icon-save",disabled:d}),b.cancelbutton=s("<div>").addClass("nx-button-secondary sk-button-cancel").text(w("cancel")).skooButton({
icon:"sk-icon-cancel",disabled:d}),d?(b.savebutton.attr("tabindex",-1),b.cancelbutton.attr("tabindex",-1)):(b.savebutton.attr("tabindex",0),b.cancelbutton.attr("tabindex",0)),b.savebutton.on("click.skuid "+B,function(a){("click"===a.type||a.which===C.ENTER||a.which===C.SPACE)&&(s(this).removeClass("ui-state-hover"),b.submitbuttons&&b.submitbuttons.filter(".ui-button").button("disable").removeAttr("tabindex"),b.save())}),b.cancelbutton.on("click.skuid "+B,function(a){("click"===a.type||a.which===C.ENTER||a.which===C.SPACE)&&(s(this).removeClass("ui-state-hover"),b.submitbuttons&&b.submitbuttons.filter(".ui-button").button("disable").removeAttr("tabindex"),b.cancel())}),b.submitbuttons=b.savebutton.add(b.cancelbutton),b.submitwrapper.append(b.savebutton,b.cancelbutton))),b},registerList:function(a){this.lists.push(a),this.registerModel(a.model)},unregister:function(){var a=this;return a.lists&&a.lists.length&&s.each(a.lists,function(){this.unregister&&this.unregister()}),a.models&&a.models.length&&s.each(a.models,function(){this.unregisterEditor(a)}),a},hasModelWithChanges:function(){var a=this,b=!1;return s.each(a.models,function(){return this.hasChanged?(b=!0,!0):void 0}),b},handleChange:function(){var a=this;a.submitbuttons&&a.submitbuttons.filter(".ui-button").button("enable").attr("tabindex",0),a.lists.length&&s.each(a.lists,function(a,b){b.disableFiltersAndSearch().disableLoadMore()})},clearMessages:function(){this.messages&&this.messages.empty(),this[z]={}},clearInlineErrors:function(){var a=this;a.element&&a.element.find(".nx-error-inline").remove().end().find(".nx-field-error").removeClass("nx-field-error nx-field-error-icon")},handleMessages:function(a,b){var c=this,d="nx-dupcounter",e=c[z];return e||(e=c[z]={}),c.messages?b&&b.initiatorId&&c._GUID!==b.initiatorId?!1:void s.each(a,function(a,b){var f,g,h,i,j="nx-message",k=b.message;"ERROR"===b.severity||"FATAL"===b.severity?j="nx-error":"WARNING"===b.severity&&(j="nx-warning"),f=e[j],f||(f=e[j]={}),g=f[k],g?g.count++:g=f[k]={count:1},g.element?i=g.element:(i=g.element=s("<div>").addClass(j),"DUPLICATE_VALUE"===b.status?i.append(k):i.append(s("<div>").text(y(k))),i.on("click.skuid",function(){s(this).remove()}),c.messages.append(i)),g.count>1&&(h=i.children("."+d),h.length?h.text(g.count):i.prepend('<div class="'+d+'" style="">'+g.count+"</div>"))}):!1},handleCancel:function(){var a=this,b=!1,c={};s.each(a.models,function(a,d){d.hasChanged&&(b=!0,c[d.id]=!0)}),b===!1&&(a.clearMessages(),a.submitbuttons&&a.submitbuttons.filter(".ui-button").button("disable")),a.lists.length&&s.each(a.lists,function(a,b){!b.model||b.model.id in c||b.enableFiltersAndSearch().enableLoadMore()})},handleSave:function(a){var b=!1,c={},d=this;s.each(d.models,function(a,d){d.hasChanged&&(b=!0,c[d.id]=!0)}),a?d.hideStatus(w("saved")):d.hideStatus("",0),d.clearMessages(),a&&!b&&d.submitbuttons&&d.submitbuttons.filter(".ui-button").button("disable"),!a&&b&&d.submitbuttons&&d.submitbuttons.filter(".ui-button").button("enable"),d.lists.length&&s.each(d.lists,function(a,b){!b.model||b.model.id in c||b.enableFiltersAndSearch().enableLoadMore()})},cancel:function(){a.model.cancel(this.models,{initiatorId:this._GUID})},save:function(b){b=b||{};var c="rollbackOnAnyError";!(c in b)&&c in this.options&&(b[c]=this.options[c]),this.setStatus(w("saving")),b.initiatorId=this._GUID,a.model.save(this.models,b)},setStatus:function(b){a.ui.setStatus(this.status,this.statustext,b)},hideStatus:function(b,c){a.ui.hideStatus(this.status,this.statustext,b,c)},createConditionsFromXml:function(b,c){if(b){var d,e=this.conditions,f=0;if(e||(e=this.conditions=[]),d=c?c.createConditionsFromXml(b):a.component.Component.prototype.call(this,b),d&&d.length)for(;f<d.length;f++)e.push(d[f]);else d=[];return d}},addConditions:function(a){var b=this;a&&a.length&&(b.conditions||(b.conditions=[]),s.each(a,function(a,c){b.conditions.push(c)}))},getConditions:function(){return this.conditions}},t(d.prototype,{id:function(){return this._GUID},unregister:function(){var a=this;return a.model&&a.model.unregisterList(a),a.renderedItems&&s.each(a.renderedItems,function(){this.unregister&&this.unregister()}),a},getSelectedItems:function(){var a=[];return s.each(this.renderedItems,function(b,c){c.selected&&a.push(c)}),a},unSelectAll:function(){s.each(this.renderedItems,function(a,b){b.selected&&(b.selected=!1)})},isFieldSearchable:function(a){return a?a.displaytype in u.searchableDisplayTypes&&(a.filterable||this.searchMethod===E):!1},addSearchField:function(a,b){var c=this;if(a){var d,e=c.model.getField(a.id);c.isFieldSearchable(e)&&(e.id in c.searchFieldsMap||(d=t({},e),b&&(d.searchOperator=b),c.searchFields.push(d),c.searchFieldsMap[e.id]=d))}},addSearchSubField:function(a,b){var c=this;if("object"==typeof b&&(b=b.id),a&&b){var d=c.model.getField(b,a);if(c.isFieldSearchable(d)){var e=c.searchSubFieldsMap[a],f=c.searchSubFields[a];e||(e=c.searchSubFieldsMap[a]={},f=c.searchSubFields[a]=[]),d.id in e||(e[d.id]=1,f.push(d))}}},addRequiredField:function(a){this.requiredFields[a.id]=a},removeRequiredField:function(a){delete this.requiredFields[a.id]},validateRequiredFields:function(){var a=this,b=[],c=a.model,d=a.requiredFields;return s.each(c.changes,function(e){var f=c.getRowById(e);if(!c.isRowMarkedForDeletion(f)){var g={severity:"ERROR",status:"REQUIRED_FIELD_MISSING",fields:[],model:c},h="",i=!1;f&&e in a.renderedItems&&s.each(d,function(a,b){var d=c.getFieldValue(f,a,!0),j=(""===d||null===d)&&"BOOLEAN"!==b.displaytype;j&&(h&&(h+=", "),h+="["+b.label+"]",g.fields.push({id:b.id,label:b.label}),g.rowId=e,i=!0)}),i&&(g.message=w("required_fields_have_no_value")+" "+h,b.push(g))}}),b},getView:function(a){return a||(a=this.currentView),this.views[a]},callViewOperation:function(a,b){b||(b=this.getView()),b&&a&&a in b&&b[a](this)},setUp:function(a){this.callViewOperation("setUp",a)},beforeRender:function(a){this.callViewOperation("beforeRender",a)},renderComplete:function(a){this.callViewOperation("renderComplete",a)},tearDown:function(a){this.callViewOperation("tearDown",a)},getAllRows:function(){var a=this,b=a.model.getRows(a.conditions,a.context),c=a.customFilter,d=a.customFilterValue;return c&&(d||"0"===d)?b.filter(function(a){return c(d,a)}):b},render:function(b){b=b||{};var c,d=this,e=d.model,f=d.options,g=[],h=b.previousView||!1,i=h&&h!==d.currentView,j=d.getView(),k=!d.element||b.doNotCache||j.alwaysFullRender,l=b.changedRows,m=f.hideFooter,n=this.options.showLoadMore!==!1,o="deleted",p=e.getConditionByName(d.searchConditionName||"__default_searchbox");if(d.searchbox&&p&&("group"===p.type||"search"===p.type))if(b.initiatorId&&b.initiatorId===d._GUID);else{var q;if(p.value&&"search"===p.type)if(d.options.tokenizeSearch){q="";var r=p.value.split(" AND ");s.each(r,function(a,b){q+=b.substring(1,b.length-2)+" "}),q.substring(0,q.length-1)}else q=p.value.substring(1,p.value.length-2);else q=p.value;q&&!p.inactive?(d.searchbox.val(q),d.searchbox.data("curval",q)):(d.searchbox.val(""),d.searchbox.data("curval",""))}j.alwaysFullRender&&(b.doNotCache=!0),i&&(h=d.getView(h),h&&d.tearDown(h)),b.resetPagination&&(d.currentPage=0),c=d.getAllRows();var t=c.length,u=d.currentPageSize,v=0,x=t;d.footer&&!m&&(d.footerleft.empty(),d.footercenter.empty(),d.footerright.empty()),(!d.element||i)&&(d.element&&d.element.remove(),d.element=s("<"+(j.nodeType||"div")+">").addClass("nx-list"),d.contents=s("<"+(j.contentsNodeType||"div")+">").addClass("nx-list-contents").appendTo(d.element),d.setUp(j));var y=a.utils.makeXMLDoc,z=d.filtersPosition;if("left"!==z&&"right"!==z||!d.component)"bottom"===z&&d.element.append(d.conditionsBar.css({display:"block","float":"none"}).addClass("nx-conditioncontainer-bottom"));else{if(!d.panelSet){var A=y("<panelset/>").attr("type","standard").append(y("<panels/>").append(y("<panel/>"),y("<panel/>").attr({type:z,width:d.filtersWidth})));d.panelSet=a.$("<div>").panelSet(A,d.component)}d.conditionsBar.css({"float":z,"text-align":z})}if(!m&&u&&"all"!=u&&t>u){d.currentPage<0&&(d.currentPage=0);var B=Math.ceil(t/u);d.currentPage>B-1&&(d.currentPage=B-1),v=u*d.currentPage,x=u*(d.currentPage-0+1),d.currentPage==B-1&&(x=t),c=c.slice(v,x);var C=s("<div>").addClass("nx-buttonset"),D=s("<div>").addClass("first").text(w("first")).button(),E=s("<div>").addClass("prev").text(w("previous")).button(),F=s("<div>").addClass("next").text(w("next")).button(),G=s("<div>").addClass("last").text(w("last")).button(),H=d.currentPage<B-3?d.currentPage-2:B-5,I=d.currentPage>2?d.currentPage+2:4;C.append(D,E);for(var J=H;I>=J;J++)if(J>=0&&B>J){var K=s("<div>").text(J-0+1).attr("data-pn",J).button();J===d.currentPage&&K.addClass("nx-button-selected"),C.append(K)}C.append(F,G).buttonset(),C.children().filter('[data-pn="'+d.currentPage+'"]').button("disable"),0===d.currentPage?(D.button("disable"),E.button("disable")):d.currentPage==B-1&&(G.button("disable"),F.button("disable")),this.footerright.append(C),C.on("click",".ui-button",function(){var a=s(this);a.is(".first")?d.goToPage(0):a.is(".prev")?d.prevPage():a.is(".next")?d.nextPage():a.is(".last")?d.goToPage(B-1):d.goToPage(parseInt(a.data("pn"),10))})}if(!m&&u&&"all"!=u&&t){var L=[5,10,25,50];-1==L.indexOf(f.pageSize)&&L.push(f.pageSize),-1==L.indexOf(d.currentPageSize)&&L.push(d.currentPageSize);var M=function(a,b){return a-b};L.sort(M);var N=s("<select>");N.append(s.map(L,function(a){return s('<option value="'+a+'">'+a+"</option>")})),N.children().filter('[value="'+u+'"]').attr("selected","selected"),N.change(function(){var a=parseInt(s(this).val(),10);d.personalizationService&&d.personalizationService.updateSettings({_List:{pageSize:a}}),d.currentPageSize=a,d.render()});var O=s("<span>");O.append("<span>"+w("show")+" </span>",N,"<span> "+a.label.merge(w("objects_per_page"),e.labelPlural)+"</span>"),this.footerleft.append(O)}var P=w("pagination_limit_reached"),Q=e.debug===P,R=e.canRetrieveMoreRows===!0;if(!m){if(t){var S=t+"";R&&(S+="+"),this.footercenter.append("<span>"+a.label.merge(w("showing_rows"),v+1,x,S)+(Q?" ("+P+")":"")+"</span>")}if(R&&!Q&&n){var T=s('<div class="nx-list-loadmore">').text(w("load_more")).on("click.skuid",function(){s(this).is(".unavailable")||(d.blockUI({message:w("loading")}),e.loadNextOffsetPage(function(){d.unblockUI()}))});this.footerleft.append(T)}t||this.footercenter.append("<span>"+a.label.merge(w("no_objects_to_display"),e.labelPlural)+"</span>").css("line-height","25px")}b.doNotCache&&(s.each(d.renderedItems,function(a,b){b&&b.destroy()}),d.renderedItems={},d.makeConditionsBar()),d.beforeRender(j),d.visibleItems=[],b.destroyDeletedRows===!0&&s.each(d.renderedItems,function(a,b){var c=e.record(a);!b||c&&!c.isMoribund()||(b.destroy(),delete d.renderedItems[a])}),s.each(c,function(){var a=this,c=e.getRowId(a),f=e.record(c),h=d.renderedItems[c];h&&!b.doNotCache?(b.resetItemModes===!0&&h.resetMode(),b.refreshFields!==!1&&(l&&l[c]?h.refreshFields(l[c]):h.refreshFields())):h=d.newItem(this,b),h&&(h.element[(f.isMoribund()?"add":"remove")+"Class"](o),g.push(h.element),d.visibleItems.push(h))}),j.noAutoAppend||(d.contents.children().detach(),d.contents.append(g)),k&&d.attach(),d.renderComplete(j)},showRow:function(a){var b=this,c=!0;return b.conditions&&b.conditions.length&&(c=v.doesRowMeetConditions(a,b.conditions)),c},handleNewRow:function(a,b){var c=this,d={},e=c.model.getRowId(a);if(b&&t(d,b),!v.isUndefined(e)&&!(e in c.renderedItems)&&c.showRow(a)){var f=c.newItem(a,d);if(c.contents.prepend(f.element),c.render({resetPagination:!0,refreshFields:!1}),f&&"edit"===f.mode){var g=f.element.find(".nx-field > :input:visible:not(.nx-skootable-rowselect):not(.hasDatepicker):not(select)").first();g&&g.focus()}}},handleRowDeletion:function(a){a&&a in this.renderedItems&&this.renderedItems[a].destroy()},newItem:function(a,b){var c,d=this,e=d.model.getRowId(a);return e?(c=new f(d,a,{mode:b&&b.editModeForNewItems?"edit":d.mode,selected:b&&b.selected}),c.render(),d.renderedItems[e]=c,c):void 0},attach:function(){var a=this;"right"===a.filtersPosition||"left"===a.filtersPosition?(a.panelSet.find(".nx-panel-fluid .nx-panel").append(a.element,a.footer),a.panelSet.find(".nx-panel-left-inner, .nx-panel-right-inner").append(a.conditionsBar),a.editor.contents.append(a.panelSet)):this.editor.contents.append(this.element,this.footer)},makeViewSwitcher:function(){var a=this,b=[];s.each(a.views,function(c,d){b.push({value:c,label:d.label||c,icon:d.icon,isSelected:a.currentView===c})});var c=s("<div>").actionSelect({items:b,onItemSelect:function(b){var c=a.currentView;a.currentView=b.value,a.render({doNotCache:!0,previousView:c}),a.personalizationService&&a.personalizationService.updateSettings({_List:{lastViewId:b.value}})}});return c.addClass("nx-viewswitcher")},makeSearchBox:function(){var a=this;if(a.searchMethod===E&&(a.customFilter=function(b,c){var d=!1,e=b.toLowerCase(),f=function(b,c){var f,g=b.searchOperator,h=a.model.getFieldValue(c,b.id,!0)+"";null!==h&&(f=h.toLowerCase(),d="="===g?f===e:"starts with"===g?v.startsWith(f,e):v.contains(f,e))};return s.each(a.searchFields,function(a,b){return f(b,c),!d}),!d&&a.searchSubFields&&s.each(a.searchSubFields,function(a,b){var e=c[a];e&&e.totalSize&&b.length&&s.each(e.records,function(a,c){return s.each(b,function(a,b){return f(b,c),!d}),!d})}),d}),a.searchFields||a.searchMethod===G){var b="placeholder"in document.createElement("input"),c=s('<input type="text" class="searchbox" />'),d=a.searchPlaceholderText?v.mergeAsText("model",a.searchPlaceholderText,{createFields:!0,registerFields:!1},a.model):w("search")+" "+a.model.labelPlural;return a.customFilterValue&&c.val(a.customFilterValue),a.searchbox=c,b?c.attr("placeholder",d):(c.addClass("unchanged").val(d),c.focus(function(){c.hasClass("unchanged")&&c.val("").removeClass("unchanged")}).blur(function(){""===c.val()&&c.val(d).addClass("unchanged")})),a.options.delayFilterExecution&&c.on("keyup",function(b){13===b.which&&a.applyFiltersAndSearch()}),v.delayInputCallback(c,function(b,d){a.options.delayFilterExecution&&"undefined"==typeof c.data("originalValue")&&c.data("originalValue",d),a.searchMethod===E||a.searchMethod===G?(a.customFilterValue=b,a.render()):a.options.delayFilterExecution?a.showFilterActions():(a.setSearchCondition(b),"remove"!==a.options.emptySearchBehavior||b?a.updateData({message:w("searching"),failmessage:w("error_performing_requested_search"),showerror:!0}):a.model.emptyData())},{dataPropertyName:"curval"}),c}return!1},setSearchCondition:function(a){var b=this;b.model.buildSearchCondition(b.searchConditionName,a,b.searchFields,{tokenize:b.options.tokenizeSearch,useSOSLSearch:b.options.useSOSLSearch,SOSLFields:b.options.SOSLFields})},showFilterActions:function(){return this.applyFiltersBtn.show("fast"),this.cancelFiltersBtn.show("fast"),this.editor.options.showSaveCancel&&this.editor.submitbuttons.hide("fast"),this},hideFilterActions:function(){return this.applyFiltersBtn.hide("fast"),this.cancelFiltersBtn.hide("fast"),this.editor.options.showSaveCancel&&this.editor.submitbuttons.show("fast"),this},applyFiltersAndSearch:function(){var a,b=this,c=b.searchBox;return c&&(a=c.is(".unchanged")?"":c.val(),c.data("originalValue",a),b.setSearchCondition(a)),b.filters&&s.each(b.filters,function(){var a=this.activateFilter;a&&a()}),"remove"!==b.options.emptySearchBehavior||a?b.updateData({message:w("searching"),failmessage:w("error_performing_requested_search"),showerror:!0,successcallback:function(){b.hideFilterActions()}}):(b.model.emptyData(),b.hideFilterActions()),b},cancelFiltersAndSearch:function(){var a=this,b=a.searchBox;return b&&b.val(b.data("originalValue")),a.filters&&s.each(a.filters,function(){this.restoreOriginalValue()}),a.hideFilterActions(),a},updateData:function(a){var b=this;return b.blockUI({message:a.message}),b.model.updateData(!1,{initiatorId:b._GUID}).always(function(){b.unblockUI()}).done(function(){b.editor.clearMessages(),a.successcallback&&a.successcallback()}).fail(function(c){b.editor.clearMessages(),b.editor.handleMessages([{message:a.failmessage+(a.showerror&&c?" "+c:""),severity:"ERROR"}])}),b},makeConditionsBar:function(){this.makeFiltersBar()},enableFiltersAndSearch:function(){var a=this;return a.conditionsBar&&a.conditionsBar.find(".nx-conditiontoken").removeClass("unavailable").children(".ui-multiselect").siblings("select").multiselect("enable").end().children("input").prop("disabled",!1),a.searchMethod===F&&a.searchBox&&a.searchBox.prop("disabled",!1),a},disableFiltersAndSearch:function(){var a=this;return a.conditionsBar&&a.conditionsBar.find(".nx-conditiontoken").addClass("unavailable").children(".ui-multiselect").siblings("select").multiselect("disable").end().children("input").prop("disabled",!0),a.searchMethod===F&&a.searchBox&&a.searchBox.prop("disabled",!0),a},enableLoadMore:function(){return e(this,!1)},disableLoadMore:function(){return e(this,!0)},blockUI:function(a){var b=this;a=a||{};var c={message:a.message};b.options.blockUICSS&&(c.css=b.options.blockUICSS),b.options.blockOverlayCSS&&(c.overlayCSS=b.options.blockOverlayCSS),b.editor.element.block(c)},unblockUI:function(a){var b=this;a=a||{};var c={};a.failmessage?(b.options.blockUICSS&&(c.css=b.options.blockUICSS),b.options.blockOverlayCSS&&(c.overlayCSS=b.options.blockOverlayCSS),c.timeout=a.timeout||4e3,c.message=a.failmessage,b.editor.element.block(c)):b.editor.element.unblock()},makeFiltersBar:function(){var a,b=this,c=b.options.listFilters,d=c&&c.closest("filterset"),e="right"===b.filtersPosition||"left"===b.filtersPosition;return b.filters=[],c?(a=b.conditionsBar,a.empty(),s.each(c.children(),function(c){var f=new u.Filter({xml:s(this),list:b,selectedList:d.length&&"vertical"===d.attr("layout")?2:3,cssClass:b.filterCssClass});b.filters.push(f),f&&f.element&&(e&&0!==c&&a.append("<br>"),a.append(f.element))}),e&&a.addClass("nx-conditioncontainer-vertical nx-conditioncontainer-vertical-"+b.filtersPosition),a):!1},nextPage:function(){this.currentPage++,this.render({refreshFields:!1})},prevPage:function(){this.currentPage--,this.render({refreshFields:!1})},goToPage:function(a){this.currentPage=a,this.render({refreshFields:!1})}}),t(f.prototype,{id:function(){return this._GUID},render:function(){var a,b=this,c=b.list,d=c?c.views:!1,e=c.currentView;return c&&d&&e&&(a=d[e],b.element&&b.element.remove(),b.element=s("<"+(a.itemNodeType||"div")+">").addClass("nx-item").data("object",b),a.render(b)),b},refreshFields:function(a){var b=this;return s.each(b.fields,function(){(b.mode!==this.mode||!a||this.id in a)&&(this.mode=b.mode,this.render())}),b},resetMode:function(){return this.mode!==this.defaultMode&&(this.mode=this.defaultMode),this},toggleEdit:function(){return"readonly"!==this.mode&&(this.mode="read"==this.mode?"edit":"read",this.refreshFields()),this},toggleDelete:function(a){var b=this;return b.deleted?b.unMarkForDelete(a):b.markForDelete(a),b},handleUnmarkRowForDeletion:function(a){var b=this,c=b.list.model,d=b.row,e=d?c.getRowId(d):!1,f=a?c.getRowId(a):!1;return!d||d!==a&&e!=f||b.unMarkForDelete(!1),b},handleMarkRowForDeletion:function(a){var b=this,c=b.list.model,d=b.row,e=d?c.getRowId(d):!1,f=a?c.getRowId(a):!1;return!d||d!==a&&e!=f||b.markForDelete(!1),b},unMarkForDelete:function(a){var b=this;return b.element.removeClass("deleted"),b.deleted=!1,a&&b.list.model.undeleteRow(this.row),b},markForDelete:function(a){var b=this;return b.element.addClass("deleted"),b.deleted=!0,a&&b.list.model.deleteRow(b.row),b},registerField:function(a){this.fields.push(a),this.fieldsByGUID[a._GUID]=a},unregister:function(a){var b=this,c=b.fields,d=b.list;return d&&d.model&&d.model.unregisterItem(b),c&&c.length&&s.each(c,function(){this.destroy(a)}),b},destroy:function(){this.unregister({removeDOM:!1}),this.element&&this.element.remove()}}),t(g.prototype,{uid:function(){return this._GUID},register:function(a){return this.model&&this.model.registerField(this,a),this},subscribeToEvent:function(b,c){var d=this,e=d[D];e||(e=d[D]=[]),e.push(a.events.subscribe(b,c))},unregister:function(){var b=this,c=b.options,d=b[D];b.model&&b.model.unregisterField(b,c?c.controllingFields:!1),v.removeEventSubscriptions(b.element),d&&d.length&&s.each(d,function(){a.events.unsubscribe(this)})},calculateReferenceText:function(){return v.calculateReferenceText({model:this.model,row:this.row,template:this.options.template,fieldMetadata:this.metadata})},calculateReferenceMerges:function(a){return a||(a={}),v.calculateReferenceMerges(t(a,{model:this.model,row:this.row,template:this.options.template,fieldMetadata:this.metadata}))},getValidPicklistEntries:function(){var a,b,c,d,e,f=this,g=f.model,h=g.objectName,i=f.item,j=f.metadata,k=j.controllingField,l=j.picklistEntries||[],m=function(a,b){var c=new sforce.Base64Binary(""),d=c.decode(b),e=d.charCodeAt(a>>3);return 0!==(e&128>>a%8)},n=i&&i.ValidRecordTypeIds?i.ValidRecordTypeIds:[],o=g.getFieldValue(f.row,"RecordTypeId",!0);return o&&-1===s.inArray(o,n)&&n.push(o),n.length&&(b=v.getPicklistEntriesValidForRecordTypes(h,f.id,n)),k&&(d=g.getFieldValue(f.row,k,!0),a=g.getField(k),a&&(b&&b.length?(c={},s.each(b,function(){c[this.value]=1}),b.length=0):b=[],"BOOLEAN"===a.displaytype?e=d?1:0:s.each(a.picklistEntries,function(a,b){b.value===d&&(e=a)}),(e||0===e)&&l&&s.each(l,function(a,d){m(e,d.validFor)&&(!c||d.value in c)&&b.push(d)}))),b?b:l},addOrReplaceConditionsForLookupFiltersToModel:function(b){var c=this,d=[],e=c.options&&c.options.filters?c.options.filters:!1;return b||(b=c.model),e&&e.length&&s.each(e,function(e,f){var g,h,i=c.id+"_"+f.field+"_"+e,j=b.getConditionByName(i);if(j||(j=new a.model.Condition,j.name=i,b.addCondition(j)),j.field=f.field,j.operator=f.operator||"=",j.encloseValueInQuotes=f.encloseValueInQuotes,f.sourceParam&&(j.sourceParam=f.sourceParam),g=v.isMultiValueOperator(j.operator),"dependent"===f.type)h=c.model.getFieldValue(c.row,f.depfield,!0),"undefined"!=typeof h&&(g?j.values=h&&-1!=h.indexOf(";")?h.split(";"):[h]:j.value=h),null!==h?j.type="fieldvalue":(j.type="blank",j.value="null",j.encloseValueInQuotes=!1);else if("userinfo"===f.type)delete j.type,j.value=v.getUserInfoPropValue(f.mergeField);else if("param"===f.type)h=a.page.params[f.mergeField],"undefined"!=typeof h&&(g?j.values=h&&-1!=h.indexOf(";")?h.split(";"):[h]:j.value=h),j.type="fieldvalue";else if("modelmerge"===f.type){var k=a.model.getModel(f.mergeModel);k&&(g?(j.values=[],s.each(k.data,function(){j.values.push(k.getFieldValue(this,f.mergeField,!0))})):j.value=k.getFieldValue(k.getFirstRow(),f.mergeField,!0),delete j.type,j.model=f.mergeModel,j.noValueBehavior=f.noValueBehavior)}else j.type=f.type,f.values?j.values=f.values:j.value=f.value,f.mergeField&&(j.mergeField=f.mergeField,j.originalValue=null);d.push(j)}),d},_getUpdateRowOptions:function(){return"edit"===this.mode?{initiatorId:this._GUID}:{}},_toggleModified:function(){var a=this,b=a.element,c=a.model,d=a.row,e=c.getRowId(d),f=a.name?a.name:a.id,g=f?c.getFieldValue(d,f,!0):null,h=c.originals[e];return b.removeClass("nx-modified"),(h&&f&&f in h&&h[f]!==g||c.isRowNew(d)&&!c.isAggregate)&&b.addClass("nx-modified"),a},render:function(){function b(){h.element.removeClass("disabled").find(":input").prop("disabled",!1).end().find("[sk-contenteditabledisabled=true]").attr("contenteditable","true").removeAttr("sk-contenteditabledisabled").end().find(".ui-button").button("enable").end().find(".ui-multiselect").animate({opacity:"1.0"},function(){s(this).css("opacity","")}).siblings("select").multiselect("enable"),h.element.attr("sk-ckeditorname")&&(a.CKEDITOR.instances[h.element.attr("sk-ckeditorname")].setReadOnly(!1),h.element.find(".sk-cke-hide").remove()),h._toggleModified(),h.labelElement&&h.labelElement.animate({color:"rgba(0,0,0,1)"}),r&&(q=h.element.data(t),q&&"function"!=typeof q&&q!==r?(h.element.skootip(q),h.element.removeData(t)):h.element.tooltip("instance")&&h.element.tooltip("destroy")),d(!1),h.disabled=!1}function c(){if(h.element.removeClass("nx-modified").addClass("disabled").find(":input").prop("disabled",!0).end().find(".ui-button").button("disable").end().find("[contenteditable=true]").attr("sk-contenteditabledisabled","true").removeAttr("contenteditable").end().find(".ui-multiselect").animate({opacity:"0.4"}).siblings("select").multiselect("disable"),h.element.attr("sk-ckeditorname")){var b=h.element.attr("sk-ckeditorname");a.CKEDITOR.instances[h.element.attr("sk-ckeditorname")].setReadOnly(!0),0===h.element.find(".sk-cke-hide").length&&h.element.append('<style class="sk-cke-hide">#cke_'+b+"{display:none!important;}</style>")}if(h.labelElement&&h.labelElement.animate({color:"rgba(0,0,0,0.3)"}),r){if(h.element.tooltip("instance")){var c=h.element.tooltip("option","content");c&&"function"!=typeof c&&c!==r&&h.element.data(t,c)}h.element.skootip(r,{position:{my:w+" bottom",at:w+" top-10"},open:function(a,b){var c=s("<div>").addClass("sk-hastooltip").css(w,"0px");b.tooltip.append(c)}})}d(!0),h.disabled=!0}function d(a){h.editor&&h.editor.element._columnSettingsByUID&&s.each(h.editor.element._columnSettingsByUID,function(){this.fieldId==h.id&&(this.disabled=a)})}var e,f,g,h=this,i=h.element,j=h.options,k=h.model,l=k.getDataSource().getFieldRenderers()||{},m=h.row,n=h.name?h.name:h.id,o=n?k.getFieldValue(m,n,!0):null,p=j.enableConditionsXML;if(i.empty(),h._toggleModified(),h.editable||(h.mode="readonly"),"edit"===h.mode&&h.required?i.addClass("required"):i.removeClass("required"),h.loading&&(h.mode="loading"),j&&"right"===j.valueHorizontalAlignment&&i.addClass("halignright"),h.metadata&&(g=h.metadata.displaytype),j.type&&(j.type in u.fieldRenderers||j.type in l)?e=u.getFieldRenderer(j.type,k.dataSource):g&&(g in u.fieldRenderers||g in l)&&(e=u.getFieldRenderer(g,k.dataSource)),f=h.mode,e||(e=u.getFieldRenderer("TEXT",k.dataSource)),!e||f in e||(f="read",f in e||(e=u.getFieldRenderer("TEXT",k.dataSource))),e[f](h,o),p&&p.length&&p.children().length){var q,r=p.attr("message"),t="skuid__originalTooltip",w=j.valueHorizontalAlignment||"left";h.editor&&h.editor.element._columnsByGUID&&s.each(h.editor.element._columnsByGUID,function(){this.fieldId==h.id&&(this.disabled=!1)}),"edit"===h.mode?v.conditionallyDo(b,c,p,i,{row:m,model:k}):h.editor&&h.editor.element._columnSettingsByUID&&v.conditionallyDo(function(){d(!1)},function(){d(!0)},p,i,{row:m,model:k})}h.messages.length&&h.editor&&h.editor.options&&h.editor.options.showErrorsInline&&s.each(this.messages,function(a,b){h.renderMessage(b)})},destroy:function(a){var b=this.element,c=this.options,d=c&&c.subscriptionElement,e=!a||a.removeDOM!==!1;b&&!b.jquery&&(b=s(b)),d&&v.removeEventSubscriptions(d),this.unregister(),b&&e&&b.remove()},handleUpdate:function(a,b){this.handleChange(a,b)},handleChange:function(a,b){var c=this,d=c.model,e=c.row,f=c.id,g=c.options,h=g.controllingFields;if(h&&h.length&&b&&-1!==s.inArray(b,h)){var i=!1,j=d.getFieldValue(e,f,!0),k=c.metadata&&-1!==s.inArray(c.metadata.displaytype,["PICKLIST","MULTIPICKLIST","COMBOBOX"])?c.getValidPicklistEntries():!1;k&&s.each(k,function(a,b){return j===b.value?(i=!0,!1):void 0}),i||d.updateRow(e,f,"",{initiatorId:c.uid()})}c.render()},handleMessage:function(a){this.messages.push(a),this.messages.length&&this.editor&&this.editor.options&&this.editor.options.showErrorsInline&&this.renderMessage(a)},renderMessage:function(b){this.errorElement||(this.errorElement=s("<div>"));var c=b.message;"REQUIRED_FIELD_MISSING"===b.status&&(c="This Field is Required"),this.editor.options.showErrorsOnHover?(this.element.children("input").addClass("input-with-error"),this.errorElement.skootip(a.utils.decodeHTML(c)),this.errorElement.addClass("sk-icon sk-icon-error sk-icon-inline-error nx-field-error-icon"),this.element.append(this.errorElement)):(this.errorElement.addClass("nx-error-inline").text(a.utils.decodeHTML(c)),this.element.prepend(this.errorElement),this.element.addClass("nx-field-error"))}}),t(i.prototype,{unregister:function(){this.editor.unregister()},addSearchField:function(a,b){this.list.addSearchField(a,b)}}),t(u,{Editor:c,List:d,Item:f,Field:g,Queue:i,createFieldSet:j,getFieldOptionsFromXML:k,setStatus:l,hideStatus:m,searchableDisplayTypes:H,openConsoleTabForField:r,openConsoleTabForNameField:q,openConsoleTabForUrl:o,openConsoleTabForRow:p,isTouchDevice:b,_createLookupFiltersFromXML:h})}(skuid),function(a){function b(a,b){var c=a.options&&a.options.addfocusbox;a.element.html('<div class="nx-fieldtext">'+b+(c?'<div class="focusbox" tabindex="0"/>':"")+"</div>")}function c(a){var b=a.getDataSource(),c=b?b.name:a.dataSourceName;return!c||"salesforce"===c}function d(a){var b,c=a.model,d=a.row,e=c.getFieldValue(d,a.id),f=c.objectName,g=c.getNameFieldValueForRow(d);window.sforce&&sforce.interaction&&window.sendCTIMessage&&(b=window.sendCTIMessage),b&&b("/CLICK_TO_DIAL?DN="+encodeURIComponent(e)+(d.Id?"&ID="+d.Id:"")+"&ENTITY_NAME="+f+"&OBJECT_NAME="+encodeURIComponent(g))}function e(a,b){var c=a.metadata;return c&&c.displaytype&&-1!=r.inArray(c.displaytype,D)?b:A(b)}function f(a){var b=a.options,c=b&&b[C];return c||a.metadata[C]}function g(){return window.sforce&&sforce.one?sforce.one:!1}function h(){return window.Aura?window.Aura:!1}function i(){var b,c=h(),d=window.location.search&&-1!==window.location.search.indexOf("lightning.force.com"),e=-1!==window.location.href.indexOf("one/one.app");if(c&&(d||e))return b=a.component.getByType("skuidpage")[0].getPageParameters(),"Theme4d"===b.UIThemeDescription}function j(){return window.sforce&&sforce.console&&sforce.console.isInConsole()?sforce.console:!1}function k(a,b){return t.mergeAsTextInContext(a||z("select_option_none"),b||{})}function l(b,c,d){function e(b,c,e){var f=r("<div>").addClass("nx-radiowrapper"),g=a.utils.generateGUID(),h=r('<input type="radio" name="'+d.buttonSetName+'">').addClass("nx-radio").prop("id",g).prop("checked",e).prop("disabled","read"===d.mode||"readonly"===d.mode).val(b),i=r("<label>").prop("for",g).addClass("nx-radiolabel").html(A(c)).appendTo(f);return f.append(h,i),f}var f=!1,g=[];if(d.makeNoneOption&&g.push(e("",k(d.noneLabel),!b)),r.each(c,function(a,c){if(c.value){var d=c.value==b&&""!==c.label;d&&!f&&(f=!0),g.push(e(c.value,c.label,d))}}),!f&&(b||"0"===b||"false"===b)){var h=e(b,b,!0);d.makeNoneOption?g.splice(1,0,h):g.unshift(h)}return g}function m(a){a||(a={});var b,c=a.value,d=t.userLocale,e=a.decimalPlaces||0,f=a.decimalsSeparator||d.decimalsSeparator,g=a.thousandsSeparator||d.thousandsSeparator,h=a.prefix||"",i=a.suffix||"";return c||0===c||(c=""),b=""!==c&&r.isNumeric(c)?isFinite(c)?h+r.number(c,e,f,g)+i:"-":c,a.wrapInElement?r("<div>").text(b):b}function n(a){var b={},c=function(c,d){var e=a[c];"undefined"!=typeof e&&(b[d]=e)};return c("showYearPicker","changeYear"),c("showMonthPicker","changeMonth"),c("yearPickerRange","yearRange"),b}function o(a,b){var c=b&&b.getFieldRenderers();return c&&a in c?c[a]:a in q?q[a]:!1}var p,q,r=a.$,s=a.ui,t=a.utils,u=a.time,v=u.parseSFDate,w=u.parseSFDateTime,x=u.getSFDate,y=u.getSFDateTime,z=a.$L,A=t.encodeHTML,B=t.startsWith,C="placeholder",D=["BOOLEAN","CURRENCY","DATE","DATETIME","DOUBLE","ID","INTEGER","PERCENT","TIME"],E="keydown.action.skuid",F=a.$.ui.keyCode;p={AUTOCOMPLETE:{edit:function(a){a=a||{},a.minLength||0===a.minLength||(a.minLength=2);var b,c=r("<input>"),d=function(){b&&(b.removeClass("ui-icon ui-icon-search"),b.addClass("nx-spinner-small"))},e=function(){b&&(b.removeClass("nx-spinner-small"),b.addClass("ui-icon ui-icon-search"))},f=function(){return"function"==typeof a.source?function(b,c){a.source(b,c,d,e)}:a.source};return c.autocomplete({minLength:a.minLength,source:f(),select:a.onChange,focus:a.onFocus,close:a.onClose,appendTo:a.appendTo}).val(a.value),a.menuRenderer&&(c.data("ui-autocomplete")._renderMenu=a.menuRenderer),a.optionRenderer&&(c.data("ui-autocomplete")._renderItem=a.optionRenderer),c.on("keyup",function(b){""===r(this).val()&&9!==b.keyCode&&a.onClear&&a.onClear()}),c.focus(function(){c.autocomplete("widget").css("z-index",parseInt(c.closest(".ui-front").css("z-index"),10)+1)}),c.blur(function(){a.onBlur&&a.onBlur()}),a.parentElem&&(b=r("<div>").addClass("ui-icon ui-icon-search nx-field-reference-search").css({
cursor:"pointer"}),a.parentElem.append(b),a.parentElem.is(c)&&c.css("padding-right","22px")),c}},BOOLEAN:{edit:function(a){var b=r('<input type="checkbox">').prop("checked",a.value).change(function(){a.onChange&&a.onChange(r(this).is(":checked")),b.focus()});return b}},COMBOBOX:{edit:function(a){a=a||{};var b=a.parentElem,c=a.value,d=".nx-combobox-renderer-button",e=r("<div>").addClass("ui-icon ui-icon-search nx-field-reference-search").css({cursor:"pointer"}),f=r('<select id="combobox"></select>'),g=function(){var a=b.find(d);e&&(a.css({display:"none"}),e.removeClass("ui-icon ui-icon-search"),e.addClass("nx-spinner-small").css({top:"5px"}))},h=function(){var a=b.find(d);e&&(e.removeClass("nx-spinner-small"),e.addClass("ui-icon ui-icon-search"),a.css({display:"block"}))},i=function(){return"function"==typeof a.source?function(b,c){a.source(b,c,g,h)}:a.source};return f.combobox({value:c,parentElem:a.parentElem,source:i(),onBlur:a.onBlur,onChange:a.onChange,onFocus:a.onFocus,searchicon:e,originalValue:a.originalValue,required:a.required,appendDropdown:a.appendDropdown})}},CURRENCY:{read:function(b){b||(b={});var c,d,e=t.userLocale,f=t.userInfo.defaultCurrency,g=b.value,h=b.decimalPlaces||0,i=b.decimalsSeparator,j=b.thousandsSeparator,k=b.valueCurrencyCode;return"undefined"==typeof i&&(i=e.decimalsSeparator),"undefined"==typeof j&&(j=e.thousandsSeparator),g||0===g||(g=""),d=""!==g&&r.isNumeric(g)?r.number(g,h,i,j):g,""!==g&&r.isNumeric(g)&&(t.isMultiCurrencyOrganization?(d=k+" "+d,k&&k!=f&&(c=t.convertCurrency(g,k,f),c&&c!=g&&(d+=" ("+f+" "+r.number(c,h,i,j)+")"))):d=a.currency.getSymbol(f)+d),b.wrapInElement?r("<div>").text(d):d}},DOUBLE:{read:m},DATE:{edit:function(a){a=a||{};var b,c,d=!1,e=a.value&&v(a.value);return b=r("<input>").datepicker(r.extend(n(a),{onSelect:function(e,f){var g,h=1,i=f.selectedMonth-0+h+"",j=f.selectedDay+"";1===i.length&&(i="0"+i),1===j.length&&(j="0"+j),g=f.selectedYear+"-"+i+"-"+j,c=b.val(),a.onChange&&a.onChange(g),d=!0,b.focus(),setTimeout(function(){d=!1},200)},beforeShow:function(){return setTimeout(function(){r(".ui-datepicker").css("z-index",parseInt(b.closest(".ui-front").css("z-index")||0,10)+1)},0),d?!1:void 0}})).on("click",function(){b.datepicker("show")}),b.datepicker("widget").click(function(a){a.stopPropagation()}),e&&b.datepicker("setDate",e),c=b.val(),b.bind("change keyup",function(){var d=r(this).val();if(d!=c){c=d;var e;e=""!==d?x(b.datepicker("getDate")):"",a.onChange&&a.onChange(e)}}),b}},DATETIME:{edit:function(a){var b,c=r("<div>"),d=r("<input>"),e=!1;a.value&&(b=w(a.value),c.data("usedate",b)),d.datepicker(r.extend(n(a),{onSelect:function(b,f){var g,h,i,j=new Date,k=c.data("usedate");k?g=u.getLocalDateTime(k):(g=u.getLocalDateTime(j),g.setHours(0,0,0,0)),g.setFullYear(f.selectedYear,f.selectedMonth,f.selectedDay),h=u.getRealJSDateTimeFromLocal(g),i=y(h),a.onChange&&a.onChange(i),c.data("usedate",h),e=!0,d.focus(),setTimeout(function(){e=!1},200)},beforeShow:function(){return setTimeout(function(){r(".ui-datepicker").css("z-index",parseInt(d.closest(".ui-front").css("z-index")||0,10)+1)},0),e?!1:void 0}})).click(function(){d.datepicker("show")}),a.value&&b&&d.datepicker("setDate",u.getLocalDateTime(b)),d.datepicker("widget").click(function(a){a.stopPropagation()});var f,g,h,i,j,k=d.val(),l=r("<div>").addClass("nx-dt-timewrapper");d.bind("change keyup",function(){if(r(this).val()!=k){k=r(this).val();var b;if(""!==r(this).val()){var e,f,g=d.datepicker("getDate")||new Date;g.setHours(0,0,0,0),e=u.getLocalDateTime(c.data("usedate")||g),e.setFullYear(g.getFullYear(),g.getMonth(),g.getDate()),f=u.getRealJSDateTimeFromLocal(e),b=y(f),c.data("usedate",f)}else b="",c.data("usedate",null);a.onChange&&a.onChange(b)}}).addClass("nx-dt-dateinput"),f=new Date,b?g=u.getLocalDateTime(b):(g=u.getLocalDateTime(f),g.setHours(0,0,0,0));var m,o,p=t.userLocale,q=p.timeFormat,s=u.amPm,v=function(a){var b=m+1<q.length&&q.charAt(m+1)===a;return b&&m++,b},x=!1,z=function(){var b,d=u.getLocalDateTime(c.data("usedate")||new Date);d.setHours((parseInt(h.val(),10)+(j&&"pm"===j.val()?12:0))%24),d.setMinutes(i.val()),b=u.getRealJSDateTimeFromLocal(d),c.data("usedate",b),a.onChange&&a.onChange(y(b))},A=function(a){l.append(r("<span>"+a+"</span>"))},B=function(a,b,c,d){a.append(r("<option "+(c?"selected ":"")+'value="'+b+'">'+(d&&10>b?"0"+b:b)+"</option>"))};for(m=0;m<q.length;m++)if(o=q.charAt(m),x)"'"!==o||v("'")?A(o):x=!1;else{var C,D;switch(o){case"a":if(!j){var E=g&&g.getHours()>=12;j=r("<select>").html("<option "+(E?"":"selected ")+'value="am">'+s[0]+"</option><option "+(E?"selected ":"")+'value="pm">'+s[1]+"</option>").appendTo(l).on("change",z)}break;case"h":case"K":case"k":case"H":if(!h){h=r("<select>"),D=v(o);for(var F,G="h"===o||"K"===o?12:24,H=0;G>H;H++)F="h"===o&&0===H?12:"k"===o?H-0+1:H,C=!1,g?C=H===(G>12?g.getHours():g.getHours()%12):8===H&&(C=!0),h.append(r("<option "+(C?"selected ":"")+'value="'+H+'">'+(D&&10>F?"0"+F:F)+"</option>"));h.appendTo(l).on("change",z)}break;case"m":if(!i){i=r("<select>"),D=v("m");var I,J=a.minuteIncrement||5,K=g?g.getMinutes():0,L=g&&K%J===0;for(I=0;60>I;I+=J)C=I===K,!L&&I>K&&(B(i,K,!0,D),L=!0),B(i,I,C,D);i.appendTo(l).on("change",z)}break;case"'":v("'")?A("'"):x=!0;break;default:A(q.charAt(m))}}return p&&p.showTimeBeforeDate?c.append(l,d):c.append(d,l),c}},ENTITY:{edit:function(b){b||(b={});var c,d,e,f,g,h=r('<div style="position: relative;">'),i=b.value,j=b.readOnly,k=b.onChange,l=function(){var c=b.dataSource;return"function"==typeof c?c():c?c:a.dataSource.getDataSource(a.platform.getDefaultDataSourceName())},m=function(){return h.parent().find(".nx-property-error")},n="x-metadata";return j?(f=l(),d=i,f&&f.dataSourceType&&f.dataSourceType.prop&&t.size(f.dataSourceType.prop(n))&&(g=f.dataSourceType.prop(n)[i],g&&g.label&&(d=g.label)),h.addClass("nx-fieldtext").text(d||"").css("margin-top","6px")):(c=b.comboBox?p.COMBOBOX:p.AUTOCOMPLETE,e=c.edit({parentElem:h,value:i,appendDropdown:!0,onChange:function(a,b){var c=b.item.value;m().hide(),l().getEntityMetadata({entities:c,ignoreMetadataOverrides:!0}).then(function(){k&&k(c,i),i=c})},onBlur:function(){m().hide(),i!==e.val()&&e.val("")},source:function(a,c,d,e){var f=b.filter,g="function"==typeof f&&f()||l().getEntityList();d(),g.then(function(b){e(),c(b.filter(function(b){var c=t.isString(b)?b:b.value;return-1!==c.toLowerCase().indexOf(a.term.toLowerCase())})),m().hide()},function(a){e(),c([]);var b=m();b.length?b.show():b=r('<div class="nx-property-error">').insertAfter(h),b.text(a)})}}).appendTo(h)),h}},INTEGER:{read:function(a){return a||(a={}),r.extend(a,{decimalPlaces:0}),m(a)}},MULTIPICKLIST:{edit:function(a){a.valueDelimiter||(a.valueDelimiter=";");var b,c=a.value,d=a.checkboxSetName,e=a.entries,f=a.maxSelected,g=a.valueDelimiter,h=a.hasOwnProperty("selectedList")?a.selectedList:3,i=a.selectedText||z("number_selected"),j=a.noneSelectedText||z("none_selected"),k=!1,l=a.required||!1;c||(c="");var m,n=c.length?c.split(g):[],o=f&&n.length>=f,p=a.element||r("<div>"),q=c;if("CHECKBOXES"===a.renderas)p.addClass("nx-fieldtext").css("padding","0px"),b=function(){if(!k){k=!0;var b,c=p.find('input[type="checkbox"]'),d=c.filter(function(){return r(this).prop("checked")}).map(function(){return this.value}).get();if(f)if(d.length>=f){b=[];var e=0;c.each(function(){var a=r(this);if(a.prop("checked")){if(e++<f)return b.push(a.val()),!0;a.prop("checked",!1)}a.prop("disabled",!0)})}else c.each(function(){r(this).prop("disabled")&&r(this).prop("disabled",!1)});m=(f&&b?b:d).join(g),a.onChange&&a.onChange(m,q),q=m,k=!1}},r.each(e,function(a,b){if(b.value){var c="";-1!==r.inArray(b.value,n)&&""!==b.value&&(c='checked="yes"');var e=r("<div>").addClass("nx-checkboxwrapper"),f=r("<input "+c+' type="checkbox">').val(b.value).prop("id","mscb_"+d+"_"+b.value).addClass("nx-checkbox").appendTo(e),g=r("<div>").addClass("nx-checkboxlabel").appendTo(e);o&&!c&&f.prop("disabled",!0),g.append(r("<label>").html(A(b.label)).prop("for","mscb_"+d+"_"+b.value)),p.append(e)}}),p.off(),p.on("change","input",function(){b()});else{var s=r('<select multiple="multiple">').appendTo(p);r.each(e,function(a,b){var c,d="";-1!==r.inArray(b.value,n)&&""!==b.label&&(d='selected="selected"'),c=r("<option "+d+">").attr("value",b.value).text(b.label),s.append(c)}),b=function(){if(!k){k=!0;var b,c,d,e={},h=s.multiselect("getChecked").map(function(){return e[this.value]=1,this.value}).get();f&&(c=s.multiselect("widget").find('input[type="checkbox"]'),h.length>=f?(b=[],d=0,c.each(function(){var a=r(this),c=a.val();if(a.prop("checked")){if(d++<f)return b.push(c),e[c]=1,!0;delete e[c],this.click()}a.prop("disabled",!0).closest("label").addClass("ui-state-disabled")}),s.children().each(function(){var a=r(this);e[a.val()]?a.attr("aria-selected","true"):a.prop("disabled",!0).removeAttr("aria-selected")})):(s.children().each(function(){var a=r(this);a.prop("disabled",!1).attr("aria-selected",e[a.val()]?"true":"false")}),c.each(function(){r(this).prop("disabled",!1).closest("label").removeClass("ui-state-disabled")}))),m=(f&&b?b:h).join(g),a.onChange&&a.onChange(m,q),q=m,k=!1}},s.multiselect({selectedText:i,noneSelectedText:j,checkAllText:z("check_all"),uncheckAllText:z("uncheck_all"),selectedList:h,position:a.position,autoOpen:!1,classes:l?"required":"",close:function(){r(this).parent().find("button.ui-multiselect").removeAttr("tabindex").focus(),a.onClose&&a.onClose.call(this)},click:function(a,c){b(a,c)},open:function(){r(this).parent().find("button.ui-multiselect").attr("tabindex","-1"),s.multiselect("widget").find("li").on(E,function(a){a.which===F.TAB&&a.stopPropagation()})},create:function(){s.val()&&s.val().length>=f&&s.children().each(function(){var a=r(this);a.prop("selected")||a.prop("disabled",!0).removeAttr("aria-selected")}),a.onCreate&&a.onCreate.call(this)}}).on("multiselectcheckall multiselectuncheckall",function(a,c){b(a,c)});var t=s.data("echMultiselect")||s.data("ech-multiselect");t&&t.menu&&t.menu.on("focusin",function(a){a.stopPropagation()}),s.multiselect("getButton").attr({role:"button",tabindex:0}).on(E,function(a){if(a.which===F.ENTER||a.which===F.SPACE){var b=s.multiselect("isOpen")?"close":"open";s.multiselect(b)}}),e.length>5&&s.multiselectfilter({label:"",placeholder:z("enter_keywords")})}return p}},PERCENT:{read:function(a){return a||(a={}),r.extend(a,{suffix:"%"}),m(a)}},PICKLIST:{edit:function(a){var b,c,d,e,f="change.skuid",g=a.onChange;if("RADIO_BUTTONS"===a.renderas)b=r("<div>").addClass("nx-fieldtext").css("padding","0px"),d=function(){return b.find("input:checked").first().val()},c=l(a.value,a.entries,{makeNoneOption:!a.required||a.addNoneOption,mode:a.mode,buttonSetName:a.buttonSetName,noneLabel:a.noneLabel}),r.each(c,function(){b.append(this)}),g&&(e=d(),b.off(f).on(f,"input",function(){g(d(),e),e=d()}));else{b=r("<select>");var h=!1,i=a.value||""===a.value,j={},m=a.defaultValue,n=!1,o=[],p=a.entries,q=a.value||"",s=t.isString(q)?q.replace(/\"/g,'\\"'):q,u=t.isString(m)?m.replace(/\"/g,'\\"'):m;p&&r.each(p,function(a,b){var c=b.value,d=r("<option>").attr("value",c).text(b.label);b.disabled===!0&&d.prop("disabled",!0),j[c]=d,o.push(d)}),q&&t.isUndefined(j[q])&&(j[q]=r("<option>").attr("value",q).text(a.label?a.label:q),o.unshift(j[q])),(!a.required||a.addNoneOption)&&o.unshift(r("<option>").attr("value","").text(k(a.noneLabel))),o.length&&b.append(o),i&&q in j&&(h=!0),i&&h?(b.val(q),b.children('[value="'+s+'"]').attr("selected",!0)):"undefined"!=typeof m&&m in j&&(b.val(m),b.children('[value="'+u+'"]').attr("selected",!0),n=!0),g&&(e=b.val(),b.off(f).on(f,function(){g(b.val(),e),e=b.val()})),!a.required||i&&h||(n=!0),n&&g&&b.val()&&g(b.val())}return b}},TEXT:{edit:function(a){var b=a.inputType,c=a.onChange,d={},e=r("<input "+(b?' type="'+b+'"':"")+">").val(a.value);return["inputMode","maxLength",C].forEach(function(b){a[b]&&(d[b.toLowerCase()]=a[b])}),t.size(d)&&e.attr(d),c&&t.delayInputCallback(e,function(a,b){c(a,b)},{dataPropertyName:a.dataPropertyName}),e}},TEXTAREA:{edit:function(a){var b=a.onChange,c=a.displayRows,d=a[C],e=r("<div>"),f=r("<textarea>").val(a.value).appendTo(e);return c?f.attr("rows",c).css({height:"100%"}):f.flexText(),d&&f.attr(C,d),r.support.leadingWhitespace||f.addClass("ie8-textarea"),t.delayInputCallback(f,function(a,c){b&&b(a,c)}),e}},RICHTEXT:{edit:function(b){function c(){function c(){function c(){var a=r(".cke"),b=r(a[a.length-1]);b.insertAfter(r(g[0])),b&&(b.removeClass("cke-sf1-fix"),b.addClass("cke-sf1-fix"))}if(!e.parent().hasClass("disabled")&&!d){g.off("click.sk-richtext focus.sk-richtext"),f.removePlugins="ckeditor-gwf-plugin",d=a.CKEDITOR.inline(g[0],f),e.parent().attr("sk-ckeditorname",d.name),d.config.customConfig=t.getStaticResourceUrl("CKEditor","skuid","config.js",t.getCacheTimestamp()),d.config.uiColor="#DDDDDD",a.utils._oniOS&&a.utils._inIframe()&&(d.on("contentDom",c),r(g[0]).on("click",c));var h=2,i=function(a){b.onChange&&b.onChange(a,h)};d.on("change",function(){i(d.getData())}),d.on("mode",function(){h=2===h?!1:!h}),d.on("key",function(){h&&i(d.getData())}),b.onCreated&&b.onCreated(d),b.afterInit&&b.afterInit({ckInstance:d})}}var f,g,h=b.config||{},i=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);h instanceof Array&&(h=r.extend.apply(this,r.map(h,function(a){return"function"==typeof a&&(a=a()),a}))),f={allowedContent:!0,disallowedContent:"style script iframe",toolbar:i?"Mobile":"FieldEditor"},"function"==typeof h?h(f):f=r.extend(f,h),g=r('<div class="nx-richtext-input" id="'+t.generateUniqueId()+'">').on("click.sk-richtext focus.sk-richtext",c),b.value&&g.html(b.value),e.parent().hasClass("disabled")?g.attr("sk-contenteditabledisabled","true"):g.attr("contenteditable","true"),e.empty().append(g),b.initialize._initializeWhenReady===!0?(c(),b.initialize=function(){}):b.initialize=c}b||(b={});var d,e=r("<div>").append(r('<div class="nx-spinner">'));return b.initialize=function(){b.initialize._initializeWhenReady=!0},a.utils.loadRichTextApi(c),e}},COLOR:{read:function(a){a||(a={});var b=a.color||a.value;return r('<div class="sk-colorpicker"><div class="sk-colorpicker-wrapper"><div class="nx-field">'+b+'</div><div><div class="sk-colorpicker-preview-wrapper sk-transparency-background"><div class="sk-colorpicker-preview" style="background-color:'+b+'; cursor:default"></div></div></div></div></div>')},edit:function(a){function b(a){f.trigger("sk-colorselected",[a])}function c(a){"undefined"==typeof a&&(a=d),f.trigger("sk-colorpreview",[a])}a||(a={});var d=a.color||a.value;void 0===d&&(d="#000000");var e=a.onChange,f=r('<div class="sk-colorpicker"><div class="sk-colorpicker-wrapper"><div class="nx-field"><input placeholder="'+(a.placeholder?a.placeholder:"")+'"></div><div><div class="sk-colorpicker-preview-wrapper sk-transparency-background"><div class="sk-colorpicker-preview"></div></div></div></div></div>'),g=f.find("input").val(d),h=f.find(".sk-colorpicker-preview").css({"background-color":d}),i={black:"#000000",white:"#ffffff",red:"#ff0000",orange:"#ffa500",yellow:"#ffff00",green:"#008000",blue:"#0000ff",purple:"#800080",violet:"#ee82ee",rebeccapurple:"#663399"},j=a.colorSwatches||["transparent","rgba(0%,0%,0%,0.5)","	","red","orange","yellow","green","blue","purple","violet","#663399","\n","\n","white","black","	","#c0504d","#f79646","#eeece1","#9bbb59","#1f497d","#4f81bd","#4bacc6","#8064a2","\n","#f2f2f2","#7f7f7f","	","#f2dcdb","#fdeada","#ddd9c3","#ebf1dd","#c6d9f0","#dbe5f1","#dbeef3","#e5e0ec","\n","#d8d8d8","#595959","	","#e5b9b7","#fbd5b5","#c4bd97","#d7e3bc","#8db3e2","#b8cce4","#b7dde8","#ccc1d9","\n","#bfbfbf","#3f3f3f","	","#d99694","#fac08f","#938953","#c3d69b","#548dd4","#95b3d7","#92cddc","#b2a2c7","\n","#a5a5a5","#262626","	","#953734","#e36c09","#494429","#76923c","#17365d","#366092","#31859b","#5f497a","\n","#7f7f7f","#0c0c0c","	","#632423","#974806","#1d1b10","#4f6128","#0f243e","#244061","#205867","#3f3151"];t.delayInputCallback(g,function(a){b(a)}),f.on("sk-colorpreview",function(a,b){h.css({"background-color":b||d})}).on("sk-colorselected",function(a,b){if(b!==d){var c=d;d=b,g.val()!==d&&g.val(d),h.css({"background-color":d}),e&&e(d,c)}});var k=a.popup=function(){function a(){u||(u=h().appendTo(document.body),k(),r(window).on("resize.sk-colorpicker scroll.sk-colorpicker",k),r(document.body).on("mousedown.sk-colorpicker",function(a){var b=a.clientX,c=a.clientY,d=u.offset(),f=d.left-r(window).scrollLeft(),g=d.top-r(window).scrollTop(),h=f+u.outerWidth(),i=g+u.outerHeight();(f>b||b>h||g>c||c>i)&&e()}).on("keyup.sk-colorpicker",function(a){27===a.keyCode&&e()}))}function e(){u&&(f.trigger("sk-popup-hide"),r(window).off("resize.sk-colorpicker scroll.sk-colorpicker"),r(document.body).off("mousedown.sk-colorpicker keyup.sk-colorpicker"),u.fadeOut(function(){u.remove(),u=null,c()}))}function h(){var a=r('<div class="sk-colorpicker-popup ui-widget ui-widget-content ui-corner-all"><div class="sk-colorpicker-popup-contents"><div class="sk-colorpicker-popup-panel sk-swatch-panel"></div><div class="sk-colorpicker-popup-panel sk-gradient-panel"></div></div></div>').on("click",function(a){a.stopPropagation()}),b=a.find(".sk-swatch-panel"),c=a.find(".sk-gradient-panel");return l({colors:j,panel:b}),m({panel:c}),a}function k(){u&&u.position({my:"left top",at:"left bottom",of:g,collision:"fit flip"})}function l(a){for(var d,f,g,h=a.colors.slice(0),i=a.panel,j=function(a){return function(){c(a)}},k=function(){return function(){c()}},l=function(a){return function(){b(a)}},m=function(a){return function(){b(a),e()}},n=r("<div>").addClass("sk-colorpicker-table").appendTo(i),o=0;h.length>0;){for(f=r("<div>").addClass("sk-colorpicker-row sk-row-"+o).appendTo(n),d=0;h.length>0;d++){var p,q=h.shift();if("\n"===q)break;g=r("<div>").addClass("sk-colorpicker-cell sk-cell-"+d).appendTo(f),"	"!==q&&(g.addClass("sk-transparency-background"),p=q,r("<div>").css({"background-color":p}).addClass("sk-colorpicker-swatch").on("mouseover",j(p)).on("mouseout",k()).on("click",l(p)).on("dblclick",m(p)).appendTo(g))}o++}}function m(a){function g(a){var b="hsl("+a.hue+",100%,50%)",c={"background-color":b};m.css(c),x.find(".layer1").css(c),y.find(".layer1").css(c),z.find(".layer2").css({"background-image":"linear-gradient(to bottom, "+b+", rgba(204, 154, 129, 0))"})}function h(a){l=!0,w.slider("value")!==k.hue&&w.slider("value",360-k.hue),x.slider("value")!==k.sat&&x.slider("value",k.sat),y.slider("value")!==k.lum&&y.slider("value",k.lum),z.slider("value")!==k.alpha&&z.slider("value",k.alpha),l=!1,i({supressEventNotification:a})}function i(a){if(!l){var c=Math.round(360-w.slider("value")),d=Math.round(x.slider("value")),e=Math.round(y.slider("value")),f=z.slider("value");k.hue!==c&&(k.hue=c),k.sat!==d&&(k.sat=d),k.lum!==e&&(k.lum=e),k.alpha!==f&&(k.alpha=f),g(k),a.supressEventNotification!==!0&&b(s(p(k.hue/360,k.sat/100,k.lum/100),{alpha:k.alpha}))}}var j=a.panel,k=o(q(t(d))),l=!1,m=r('<div class="sk-colorpicker-gradient"><div class="sk-colorpicker-gradient-layer1"><div class="sk-colorpicker-gradient-layer2"></div></div></div>').appendTo(j).on("mousemove",function(a){c(n(k,a.offsetX,a.offsetY))}).on("mouseout",function(){c()}).on("click",function(a){b(n(k,a.offsetX,a.offsetY)),h()}).on("dblclick",function(a){b(n(k,a.offsetX,a.offsetY)),e()}),u=r('<div class="sk-colorpicker-hsl"><div class="sk-hsl-preview"></div><div class="sk-colorpicker-slider sk-hsl-h"></div><div class="sk-colorpicker-slider sk-hsl-s"></div><div class="sk-colorpicker-slider sk-hsl-l"></div><div class="sk-colorpicker-slider sk-alpha"></div></div>').appendTo(j),v=u.find(".sk-hsl-preview").css("background-color",d),w=u.find(".sk-hsl-h").slider({orientation:"vertical",min:0,max:360,step:1,slide:i,change:i}),x=u.find(".sk-hsl-s").slider({orientation:"vertical",min:0,max:100,step:1,slide:i,change:i}).append(r('<div class="layer1"><div class="layer2"></div></div>')),y=u.find(".sk-hsl-l").slider({orientation:"vertical",min:0,max:100,step:1,slide:i,change:i}).append(r('<div class="layer1"><div class="layer2_1"></div><div class="layer2_2"></div></div>')),z=u.find(".sk-alpha").slider({orientation:"vertical",min:0,max:1,step:.01,slide:i,change:i}).append(r('<div class="layer1 sk-transparency-background"><div class="layer2"></div></div>'));r.each(new Array(6),function(a){w.append(r('<div class="layer1_'+(a+1)+'">'))}),h(!0),f.on("sk-colorselected.gradientbox",function(a,b){v.css("background-color",b),k=o(q(t(b),k)),h(!0)}).on("sk-popup-hide",function(){f.off("sk-colorselected.gradientbox")})}function n(a,b,c){var d=a.hue/360,e=b/150,f=(1-.5*(b/150))*((150-c)/150),g=s(p(d,e,f),{alpha:a.aplha});return a.sat=Math.round(100*e),a.lum=Math.round(100*f),g}function o(a){return{hue:Math.round(360*a[0]),sat:Math.round(100*a[1]),lum:Math.round(100*a[2]),alpha:r.isNumeric(a[3])?a[3]:1}}function p(a,b,c){function d(a,b,c){return 0>c&&(c+=1),c>1&&(c-=1),1/6>c?a+6*(b-a)*c:.5>c?b:2/3>c?a+(b-a)*(2/3-c)*6:a}var e,f,g;if(0===b)e=f=g=c;else{var h=.5>c?c*(1+b):c+b-c*b,i=2*c-h;e=d(i,h,a+1/3),f=d(i,h,a),g=d(i,h,a-1/3)}return[Math.min(255,Math.max(0,Math.round(255*e))),Math.min(255,Math.max(0,Math.round(255*f))),Math.min(255,Math.max(0,Math.round(255*g)))]}function q(a,b,c,d){var e=1;a instanceof Array&&(d=b,e=a[3],c=a[2],b=a[1],a=a[0]),d||(d={hue:0,sat:0}),a/=255,b/=255,c/=255;var f,g,h=Math.max(a,b,c),i=Math.min(a,b,c),j=(h+i)/2;if(h==i)f=g=0;else{var k=h-i;switch(g=j>.5?k/(2-h-i):k/(h+i),h){case a:f=(b-c)/k+(c>b?6:0);break;case b:f=(c-a)/k+2;break;case c:f=(a-b)/k+4}f/=6}return 0===g&&(f=d.hue/360),(0===j||1===j)&&(g=d.sat/100),[f,g,j,e]}function s(a,b){var c=a[0],d=a[1],e=a[2],f=a[3];return r.isNumeric(f)||(f=r.isNumeric(b.alpha)?b.alpha:1),1>f||b.ignoreAlpha===!0?"rgba("+c+","+d+","+e+","+f+")":"#"+("0"+c.toString(16)).slice(-2)+("0"+d.toString(16)).slice(-2)+("0"+e.toString(16)).slice(-2)}function t(a){var b,c,d,e;if(a in i&&(a=i[a]),/^\s*#/.test(a))return a=(/[a-f0-9]{6}/.exec(a)||[""])[0],b=parseInt(a.slice(0,2),16)||0,c=parseInt(a.slice(2,4),16)||0,d=parseInt(a.slice(4,6),16)||0,[b,c,d,1];if(/^\s*rgb/i.test(a)){for(var f,g=[],h=/(\d*\.)?\d+%?/g;f=(h.exec(a)||[""])[0];)g.push(-1===f.indexOf("%")?parseFloat(f):parseFloat(2.55*f.replace("%","")));return b=Math.round(g[0]),c=Math.round(g[1]),d=Math.round(g[2]),e=r.isNumeric(g[3])?g[3]:1,[b,c,d,e]}return[0,0,0,1]}var u=null;return{show:a,hide:e}}();return h.on("click",k.show),f}}},q={TEXT:{read:function(a,d){d||0===d||(d=""),a.options&&"PASSWORD"===a.options.type&&(d=Array(d.length+1).join("*")),t.isString(d)||(d=""+d);var e,f,h,k,l=a.options.maxDisplayCharacters,m=a.metadata,n=m&&"URL"===m.displaytype,o=a.model,p=a.row,q=o.getRowId(p),s=g(),u=j(),v=i(),w=["FirstName","LastName","Company"],x=!1;n&&(!d||t.contains(d,"//")||B(d,"/")||(d="http://"+d),l||(l=40)),f=d,l&&(l-=0),!isNaN(l)&&l>0&&l<d.length&&(d=d.substring(0,l)+"..."),!o.isSingleRow()&&c(o)&&t.userInfo.isAuthenticated&&(m&&m.nameField||-1!==r.inArray(a.id,w))&&!o.isNewRow(p)&&-1===a.id.indexOf(".")&&!a.options.noLink?(f=d,d='<a href="',d+=v?"#/sObject/"+q+'/view"':s?'#" onclick="sforce.one.navigateToSObject(\''+q+"');":u?'#" onclick="skuid.ui.openConsoleTabForNameField(\''+q+"','"+A(o.id)+"');":t.getSafeRelativeUrl("/"+q),d+='">'+A(f)+"</a>",x=!0):n&&(h=d&&B(d,"/"),k=A(f),d=s?'<a href="#" onclick="sforce.one.navigateToURL(\''+k+"');\">"+A(d)+"</a>":u&&h?'<a href="#" onclick="skuid.ui.openConsoleTabForUrl(\''+k+"','"+k+"');\">"+A(d)+"</a>":'<a href="'+k+'"'+(u?' target="blank"':"")+">"+A(d)+"</a>",x=!0),e=(m?m.htmlFormatted:!1)?t.removeScriptTags(d):t.nl2br(x?d:A(d)),b(a,e)},readonly:function(a,b){q.TEXT.read(a,b)},edit:function(a,b,c){var d,e=a.options,g=f(a);b||0===b||(b=""),d={inputType:c,value:b,onChange:function(b){a.model.updateRow(a.row,a.id,b,a._getUpdateRowOptions())}},e&&"PASSWORD"===e.type&&(d.inputType="password"),g&&(d[C]=g),a.element.append(p.TEXT.edit(d),r("<div>").addClass("sk-focusbar"))}},TEXTAREA:{read:function(a,b){a._ckInstance&&(a._ckInstance.destroy(),delete a._ckInstance),q.TEXT.read(a,b)},readonly:function(a,b){q.TEXTAREA.read(a,b)},edit:function(a,b){var c=a.options||{},d=f(a);if(b||0===b||(b=""),a.metadata.htmlFormatted)a.disableBlur=!0,a.element.append(p.RICHTEXT.edit({afterInit:function(b){a._ckInstance=b.ckInstance},config:[{uiColor:"#DDDDDD"},c.ckEditorConfig||{}],onChange:function(b){a.model.updateRow(a.row,a.id,b,a._getUpdateRowOptions())},value:b}));else{var e=c.displayRows;a.element.append(p.TEXTAREA.edit({displayRows:e,onChange:function(b){a.model.updateRow(a.row,a.id,b,a._getUpdateRowOptions())},placeholder:d,value:b}))}}},RICHTEXT:{read:function(a,b){return a.metadata.htmlFormatted=!0,q.TEXTAREA.read(a,b)},readonly:function(a,b){return q.RICHTEXT.read(a,b)},edit:function(a,b){return a.metadata.htmlFormatted=!0,q.TEXTAREA.edit(a,b)}},DOUBLE:{read:function(a,c,d,e){var f,g=a.metadata,h=a.options.decimalPlaces;h||"0"===h?f=parseInt(h,10):g&&g.scale&&(f=g.scale),f&&t.isNumber(f)||(f=0),b(a,p.DOUBLE.read({value:c,decimalPlaces:f,prefix:d,suffix:e}))},readonly:function(a,b){q.DOUBLE.read(a,b)},edit:function(a,b){b||0===b||(b="");var c=t.userLocale,d=r('<input inputmode="numeric">').val(""!==b&&r.isNumeric(b)?r.number(b,a.metadata&&a.metadata.scale?a.metadata.scale:0,c.decimalsSeparator,c.thousandsSeparator):b);t.delayInputCallback(d,function(b){var e,f,g=a.metadata.displaytype,h=!1,i=c.thousandsSeparator,j=c.decimalsSeparator,k=b.indexOf(j),l=b.split(j),m=l[0],n=parseInt(l[1],10),o=l[1]?l[1].length:0,p=n.toString().length,q=d.val(),r={k:3,m:6,b:9,t:12},s=q.toLowerCase().charAt(q.length-1),u=Math.pow(10,r[s]),v=u/10,w=null===new RegExp("[^\\dbkm"+("."===j?"\\"+j:j)+("."===i?"\\"+i:i)+"-]|[bkm"+j+"]{2,}","ig").exec(q);if("."===i&&(i="\\."),b=b.toString().replace(new RegExp(i,"g"),"").replace(j,"."),e=parseInt(b,10),""===m?m=0:"-"===m&&(m=-0),w&&0==isNaN(u))if(-1!==k){for(p;p>1;p--)v/=10;for(f=0;o>f&&"0"===l[1][f];f++)v/=10;v=m>=0&&1/m>0?n*v:-(n*v),b=m*u+v}else b=e*u;b&&(h="INTEGER"===g?parseInt(b,10):parseFloat(b)),h===!1||t.isExactlyNaN(h)||(b=h),a.model.updateRow(a.row,a.id,b,a._getUpdateRowOptions())}),a.element.append(d)}},INTEGER:{read:function(a,c){b(a,p.INTEGER.read({value:c}))},readonly:function(a,b){q.INTEGER.read(a,b)},edit:function(a,b){q.DOUBLE.edit(a,b)}},PERCENT:{read:function(a,b){q.DOUBLE.read(a,b,"","%")},readonly:function(a,b){q.PERCENT.read(a,b)},edit:function(a,b){q.DOUBLE.edit(a,b)}},CURRENCY:{read:function(a,c){var d,e,f=a.metadata,g=a.options?a.options.decimalPlaces:null,h=a.row;g||"0"===g||0===g?d=parseInt(g,10):f&&f.scale&&(d=f.scale),d&&t.isNumber(d)||(d=0),""!==c&&h&&t.isMultiCurrencyOrganization&&(e=t.getRowCurrency({row:h,model:a.model,field:a.id})),b(a,p.CURRENCY.read({value:c,decimalPlaces:d,valueCurrencyCode:e}))},readonly:function(a,b){q.CURRENCY.read(a,b)},edit:function(a,b){q.DOUBLE.edit(a,b)}},BOOLEAN:{read:function(a,b){var c=r("<div>").addClass("nx-fieldtext").css("padding","0px"),d=r('<input type="checkbox">').prop({checked:b,disabled:"true"});c.append(d),a.editable&&"readonly"!==a.mode&&c.append('<div class="focusbox" tabindex="0"/>'),a.element.append(c)},readonly:function(a,b){q.BOOLEAN.read(a,b)},edit:function(a,b){"true"===b&&(b=!0),a.element.append(p.BOOLEAN.edit({value:b,onChange:function(b){a.model.updateRow(a.row,a.id,b,{initiatorId:a._GUID})}}))}},DATE:{read:function(a,c){b(a,u.makeFormattedDate(c))},readonly:function(a,b){q.DATE.read(a,b)},edit:function(a,b){var c=a.options;a.element.append(p.DATE.edit({value:b,renderas:c.type,showMonthPicker:c.showMonthPicker,showYearPicker:c.showYearPicker,yearPickerRange:c.yearPickerRange,onChange:function(b){a.model.updateRow(a.row,a.id,b,a._getUpdateRowOptions())}}))}},DATETIME:{read:function(a,c){b(a,u.makeFormattedLongDateTime(c))},readonly:function(a,b){q.DATETIME.read(a,b)},edit:function(a,b){var c=a.options;a.element.append(p.DATETIME.edit({value:b,showMonthPicker:c.showMonthPicker,showYearPicker:c.showYearPicker,yearPickerRange:c.yearPickerRange,minuteIncrement:c.minuteIncrement,onChange:function(b){a.model.updateRow(a.row,a.id,b,a._getUpdateRowOptions())}}))}},EMAIL:{read:function(a,c){c||0===c||(c=""),""!==c&&(c=A(c),c='<a href="mailto:'+c+'">'+c+"</a>"),b(a,c)},edit:function(a,b){q.TEXT.edit(a,b,"email")},readonly:function(a,b){q.EMAIL.read(a,b)}},LOCATION:{read:function(a,c){var d,e,f,g,h=".",i="DECIMAL",j="",k=a.options.type||a.metadata.type||i;c&&(e=c.latitude,f=c.longitude,k===i?(g=function(a){var b=(a+"").split(h);return r.number(a,b.length>1?b[1].length:1,h,"")+""},e=g(e),f=g(f),e&&(j+=e),j+=" ",f&&(j+=f)):(d="&#39;",g=function(a,b){var c=0>a,e=Math.abs(a),f=Math.floor(e),g=60*(e-f),h=Math.floor(g),i=Math.round(60*(g-h));return f+"&deg;"+h+d+i+d+d+(b?c?"S":"N":c?"W":"E")},e=g(e,!0),f=g(f),e&&(j+=e),j+=" ",f&&(j+=f))),b(a,j)},edit:function(b){var c=b.row,d=b.model,e=b.id,f=e.substring(0,e.length-1),g=f+"Latitude__s",h=f+"Longitude__s",i=new a.ui.Field(c,d,null,{fieldId:g}),j=new a.ui.Field(c,d,null,{fieldId:h});i.render(),j.render(),b.element.append(i.element,j.element)},readonly:function(a,b){q.LOCATION.read(a,b)}},PHONE:{read:function(a,c){if(window.sforce&&c&&s.showClick2Dial){q.TEXT.read(a,c);var e=s.click2Dial;e||(e=d),a.element.css("white-space","nowrap").append(r('<div class="sk-click2dial-wrapper">').append(r('<span class="ui-icon sk-icon sk-icon-phone inline">').attr("title","Click to dial")).on("click.skuid",function(){e(a)}).css("cursor","pointer")),a.element.children().css({display:"inline-block"})}else{var f;c||"0"===c?f=c.replace(/\D+/g,""):(c="",f=!1),""!==c&&(c=A(c),(f||"0"===f)&&(c='<a href="tel:'+f+'">'+c+"</a>")),b(a,c)}},edit:function(a,b){q.TEXT.edit(a,b,"tel")},readonly:function(a,b){q.PHONE.read(a,b)}},PICKLIST:{read:function(a,c){var d,e=a.options||{};if(d=e&&e.entries&&e.entries.length?e.entries:a.getValidPicklistEntries(),"RADIO_BUTTONS"===e.type){var f=r("<div>").addClass("nx-fieldtext").css("padding","0px"),g=l(c,d,{makeNoneOption:!a.required||e.addNoneOption,mode:a.mode,buttonSetName:a.id+"_"+a._GUID});r.each(g,function(){f.append(this)}),a.editable&&"readonly"!==a.mode&&f.append('<div class="focusbox" tabindex="0"/>'),a.element.append(f)}else d&&d.length&&r.each(d,function(){return this.value==c?(this.label&&(c=this.label),!1):void 0}),b(a,c?A(c):"")},readonly:function(a,b){q.PICKLIST.read(a,b)},edit:function(a,b){a.element.append(p.PICKLIST.edit({addNoneOption:a.options.addNoneOption,buttonSetName:a.id+"_"+a._GUID,entries:a.getValidPicklistEntries(),mode:a.mode,noneLabel:a.options.noneLabel,onChange:function(b){a.model.updateRow(a.row,a.id,b,{initiatorId:a._GUID})},renderas:a.options.type,required:a.required,value:b}))}},MULTIPICKLIST:{read:function(a,b,c){c||(c=";");var d=r("<div>").addClass("nx-fieldtext"),e=a.getValidPicklistEntries(),f=b?b:"",g=f.split(c);if("CHECKBOXES"===a.options.type)d.css("padding","0px"),r.each(e,function(a,b){if(b.value){var c="";-1!==r.inArray(b.value,g)&&""!==b.value&&(c='checked="yes"');var e=r("<div>").addClass("nx-checkboxwrapper");e.append(r("<input "+c+' type="checkbox" value="'+b.value+'">').addClass("nx-checkbox").prop("disabled",!0)),e.append(r("<div>"+A(b.label)+"</div>").addClass("nx-checkboxlabel")),d.append(e)}});else if(f){var h={},i=[];r.each(e,function(a,b){h[b.value]=b.label}),r.each(g,function(){i.push(h[this]||this)}),d.html(A(i.join(", ")))}else d.html("");a.editable&&"readonly"!==a.mode&&d.append('<div class="focusbox" tabindex="0"/>'),a.element.append(d)},readonly:function(a,b,c){q.MULTIPICKLIST.read(a,b,c)},edit:function(a,b,c){var d=a.options;"CHECKBOXES"!==d.type&&(a.disableBlur=!0),a.element.append(p.MULTIPICKLIST.edit({value:b,defaultValue:a.metadata.defaultValue,entries:a.getValidPicklistEntries(),renderas:d.type,onChange:function(b){a.model.updateRow(a.row,a.id,b,{initiatorId:a._GUID})},valueDelimiter:c,checkboxSetName:a.id+"_"+a._GUID,maxSelected:d.maxSelected,required:a.required,selectedList:d.selectedList}))}},COMBOBOX:{read:function(a,b){q.TEXT.read(a,b)},readonly:function(a,b){q.COMBOBOX.read(a,b)},edit:function(a,b){var c=function(c){return!c&&a.required&&(c=b),a.model.updateRow(a.row,a.id,c,{
initiatorId:a._GUID})},d=function(){return a.element.find(".nx-error-inline")},e=r("<div>");a.element.append(p.COMBOBOX.edit({parentElem:e.appendTo(a.element),value:b,source:function(d,e){e(a.getValidPicklistEntries().filter(function(a){var b=function(a){return a.toString().toLowerCase().indexOf(d.term.toLowerCase())>-1};return t.isObject(a)?r.map(a,function(a){return b(a)?a:void 0}).length>0:b(a)})),b=d.term,a.metadata.limitEntries||c(b)},onChange:function(a,d){b=d.item.value,c(b)},onFocus:function(a){a.target.select()},onBlur:function(e){var f=e.target.value,g=d();if(a.metadata.limitEntries){var h=a.getValidPicklistEntries().filter(function(a){var b=t.isString(a)?a:a.value;return f===b?b:void 0});0===h.length?(g.length?g.show():g=r('<div class="nx-error-inline">').prependTo(a.element),g.text("Only entries in this list are allowed.")):(g.hide(),c(h[0].value))}else f!==b&&c(b)}}))}},ARRAY:{read:function(a,b,c){c||(c={});var d,e,f=r("<div>").addClass("nx-fieldtext").appendTo(a.element),g=a.model.getFieldValue(a.row,a.id,!0),h=a.options.delimiter,i=c.dataPath||a.metadata.dataPath;h||(h=""),g&&(d=g,i&&(d=t.getObjectProperty(d,i)),e=d.length,r.each(d,function(b){var c=a.model.mergeRow(this,a.options.template,{allowHTML:a.options&&a.options.allowHTML,registerFields:!1});c.css("display","inline"),f.append(c),b+1!==e&&f.append("<span>"+h+"</span>")})),a.element.append(f)},readonly:function(a,b){q.ARRAY.read(a,b)}},CHILDREL:{read:function(a,b){q.ARRAY.read(a,b,{dataPath:a.metadata.dataPath||"records"})},readonly:function(a,b){q.CHILDREL.read(a,b)}},COMBO:{read:function(a){var b=r("<div>").addClass("nx-fieldtext").appendTo(a.element),c=a.options;b.append(a.model.mergeRow(a.row,c.template,{allowHTML:c&&c.allowHTML,registerFields:!1})),a.editable&&"readonly"!==a.mode&&b.append('<div class="focusbox" tabindex="0"/>'),a.element.append(b).off("dblclick.skuid mouseenter.skuid mouseleave.skuid").css("cursor","auto")},readonly:function(a,b){q.COMBO.read(a,b)},edit:function(a,b){q.COMBO.read(a,b);var c,d=a.options,e=a.element,f=e.find(".focusbox").prop("tabindex","-1"),g=r('<input type="text">').addClass("nx-visuallyhidden");f.before(g),c=function(){function b(){r(this).click().find(":input").first().focus()}function c(){var a=e.find("input"),b=e.find(".focusbox");a.length&&a[0]===g[0]&&a.attr("preventaction","true"),b.length&&b[0]===f[0]&&b.attr("preventaction","true")}function h(){var a=e.find("input"),b=e.find(".focusbox");a.length?a[0]!==g[0]&&a.attr("preventaction","true").focus():b[0]!==f[0]&&b.attr("preventaction","true").focus(),setTimeout(function(){a.removeAttr("preventaction"),b.removeAttr("preventaction")},100)}var i,j,k,l="custompopup"===d.editModeBehavior,m=[{text:z("done"),icons:{primary:"sk-icon-save sk-icon"},click:function(){r(this).dialog("close")}}];l?k=t.createPopupFromPopupXML(d.editModePopupXML,a,{open:b,close:h,beforeClose:c,buttons:m,modal:!0,resizable:!0}):(i=a.model.getRowMergeResult(a.row,d.template),j=i.fields,k=r('<div title="'+d.label+'" class="nx-editor"/>'),k.append(s.createFieldSet(j,{editor:a.editor})),k.dialog({resizable:!0,modal:!0,width:450,open:b,beforeClose:c,close:function(){h(),k.dialog("destroy").remove()},buttons:m})),a.editor.editModePopup=k},g.on("focus.skuid",function(){var a=r(this);a.attr("preventaction")?a.removeAttr("preventaction"):c()}),e.on("mouseenter.skuid mouseleave.skuid","> .nx-fieldtext",function(a){"mouseenter"===a.type?r(this).append(r("<div>").addClass("nx-edithover sk-icon-edit sk-icon inline").click(function(a){c(),a.stopPropagation()})):r(this).find("div.nx-edithover").remove()}).on("dblclick.skuid",c).css("cursor","pointer")}},CUSTOM:{read:function(b,c){var d=a.snippet.get(b.options.snippet);d&&d(b,e(b,c))},readonly:function(a,b){q.CUSTOM.read(a,b)},edit:function(a,b){q.CUSTOM.read(a,b)}},FILE:{read:function(a){var b=r("<div>").addClass("nx-fieldtext").css({padding:"0px","min-height":"26px"}).appendTo(a.element);new t.FileComponent(b,{model:a.model,row:a.row,displayAs:"filename",storeAs:"field",idField:a.id,deleteable:!1,editable:!1,_GUID:a._GUID})},readonly:function(a,b){q.FILE.read(a,b)},edit:function(a){var b=r("<div>").addClass("nx-fieldtext").appendTo(a.element);a.model.isRowNew(a.row)?(b.css({"font-size":"8pt",color:"#aaa"}),b.text("Save record before uploading files.")):(b.attr("id",t.generateGUID()).css("padding","0px"),new t.FileComponent(b,{model:a.model,row:a.row,displayAs:"filename",storeAs:"field",idField:a.id,deleteable:!0,editable:!0,_GUID:a._GUID}))}},REFERENCE:{read:function(a,d){var e,f,h,k,l=d||0===d?A(a.calculateReferenceText()):"";return"skuid__Image__c"===a.metadata.ref?(o("FILE").read(a,d),!1):(c(a.model)&&(e='<a href="',f=g(),h=j(),k=i(),e+=k?"#/sObject/"+d+'/view"':f?'#" onclick="sforce.one.navigateToSObject(\''+d+"');":h?'#" onclick="skuid.ui.openConsoleTabForField(\''+A(a._GUID)+"','"+A(a.model.id)+"','"+d+"');":t.getSafeRelativeUrl("/"+d),e+='" tabindex="-1">'+l+"</a>"),void b(a,e||l))},readonly:function(a,b){q.REFERENCE.read(a,b)},edit:function(b,c){if("skuid__Image__c"===b.metadata.ref)return q.FILE.edit(b,c),!1;c||0===c||(c="");var d,e,f,g=b.element,h=b.options,i=r("<input>").val(c),j=b.metadata.ref,l=b.metadata.referenceTo,m=j&&-1!=j.indexOf(","),n=b.metadata.dataSourceName?a.dataSource.getDataSource(b.metadata.dataSourceName):b.model.getDataSource(),o=n.getDataSourceType(),p=o&&o.getReferenceHandler&&o.getReferenceHandler(),u=r('<div class="ui-autocomplete-container"></div>'),v=0,w=0;if(!p)return q.REFERENCE.read(b,c),!1;var x=function(a){var c=t.extractFieldsFromTemplate(h.searchTemplate||h.template),d=b.calculateReferenceMerges({targetObject:a});e=r("<div>").append(d.merges).text(),f=[],r.each(c,function(a,c){f.push({id:b.metadata.rel&&0===c.indexOf(b.metadata.rel+".")?c.slice(b.metadata.rel.length+1):c})})};if(g.data("recordId",c),m){var y;b.element.addClass("nx-polymorphic"),d=r("<select>").on("change",function(){y=d.val(),g.data("selectedSObject",d.find('option[value="'+y+'"]').attr("data-sobject")),g.data("selectedSObjectPrefix",y),g.data("recordId",""),g.data("recordLabel",""),x(y),b.model.updateRow(b.row,b.id,"",{initiatorId:b._GUID});var a=d.next();a.val(""),g.data("recordId",""),g.data("recordLabel",""),"REFPICK"===h.type&&J("",L),r.support.leadingWhitespace?a.focus():setTimeout(function(){a.focus()},400)});var C={},D=[];if(r.each(l,function(a,b){C[b.label+"_"+b.objectName]=b}),r.each(Object.keys(C).sort(),function(a,b){D.push(C[b])}),r.each(D,function(a,c){d["User"===c.objectName&&t.endsWith(b.id,"OwnerId")?"prepend":"append"](r("<option>").attr({value:c.keyPrefix,"data-sobject":c.objectName}).text(c.label))}),g.data("recordId")&&"undefined"!=g.data("recordId")){var E=g.data("recordId").substring(0,3);E&&3===E.length&&g.data("selectedSObjectPrefix",E)}g.data("selectedSObjectPrefix")&&d.val(g.data("selectedSObjectPrefix"));var F=d.find('option[value="'+d.val()+'"]');0===F.length&&(F=d.find("option").first()),g.data("selectedSObject",F.attr("data-sobject"))}else g.data("selectedSObject",j);x(g.data("selectedSObject")),g.data("recordLabel",""===g.data("recordId")?"":e);var G=function(a){var c,d;for(c=a.length-1;c>=0;c--)d=a[c],b.metadata.uiOnly||d.displaytype in s.searchableDisplayTypes||a.splice(c,1)},H=function(){var a=b.options.returnFields;return a&&a.length||(a=[],r.each(f,function(b,c){c.showInSearchDialog=!0,a.push(c)})),a},I=function(a){var c=b.options.searchFields;return c&&c.length||(f&&f.length?(c=[],r.each(f,function(a,b){c.push(b)})):c=[{id:a,displaytype:"STRING",filterable:!0}]),c},J=function(c,d){var e,f=g.data("selectedSObject"),i=n.getNameField(f),j=I(i),k=H(i);if(h.optionsource){if("model"===h.optionsource){if(e=a.$M(h.optionmodel),!e)return;r.each(j,function(a,b){var c=b.id,d=e.getField(b.id);d?(r.extend(b,d),b.id=c):b.displaytype="STRING"}),G(j);var l=b.addOrReplaceConditionsForLookupFiltersToModel(e),m=l&&l.length;e.conditions&&e.conditions.length&&e.conditions.forEach(function(a){"modelmerge"===a.type?e.updateConditionValue(a)&&(m=!0):"join"===a.type&&a.subConditions&&r.each(a.subConditions,function(a,b){"modelmerge"===b.type&&e.updateConditionValue(b)&&(m=!0)})}),"REFPICK"===h.type?m?e.updateData(function(){d(e)}):d(e):(e.buildSearchCondition("__default_searchbox",c,j,{tokenize:"true"===h.tokenizeSearch,useSOSLSearch:h.useSOSLSearch,SOSLFields:h.SOSLFields,delimiter:h.delimiter,searchOperator:"contains"}),e.updateData(function(){d(e)}))}}else{if(b.model){var o;o=b.metadata&&b.metadata.rel?b.metadata.rel+".":"",r.each(j,function(a,c){var d=c.id,e=b.model.getField(o+c.id);e?(r.extend(c,e),c.id=d):c.displaytype="STRING"})}G(j),e=new a.model.Model({dataSource:n}),e.id="_TempModel_"+(new Date).getTime(),e.fields=k.slice(),e.doQuery=!0,e.recordsLimit=50,e.orderByClause=i,e.doClone=!1,p&&p.processReferenceLookupModel(e,b,f),e.initialize(),v++;var q=!1;r.each(k,function(a,b){return b.id==i?(q=!0,!1):void 0}),q||e.fields.push({id:i}),h.defaultOrdering?e.orderByClause="":h.order&&(e.orderByClause=h.order),b.addOrReplaceConditionsForLookupFiltersToModel(e),c&&e.buildSearchCondition("__default_searchbox",c,j,{tokenize:"true"===h.tokenizeSearch,useSOSLSearch:h.useSOSLSearch,SOSLFields:h.SOSLFields,delimiter:h.delimiter,searchOperator:"contains"});var s=v;e.load(function(){var a={};s>w?(w=s,a.isStale=!1):a.isStale=!0,a.isFinal=s===v,d(e,a)})}},K=function(a,c,d){if(a||0===a||""===a){g.data("recordId",a);var e=n.getNameField&&n.getNameField(g.data("selectedSObject")),f=d||p&&p.getRowFromReferenceValue(c,a,b.metadata)||c.getRowById(a);if(f){var i=c.getRowMergeResult(f,h.searchTemplate||h.template||"{{"+e+"}}",{registerFields:!1}),j=i.merges.text();g.data("recordLabel",j)}f&&e&&"Name"!==e&&"Id"!==e&&!("Name"in f)&&e in f&&(f.Name=f[e]);var k={},l=a;b.metadata&&f&&-1===r.inArray(b.metadata.displaytype,["REFERENCE","ID"])&&f.__templabel&&(l=f.__templabel),k[b.id]=l,(l||0===l)&&(k[b.metadata.rel]=f),b.model.updateRow(b.row,k,{initiatorId:b._GUID})}},L=function(a){i.empty(),b.element.hasClass("disabled")||i.prop("disabled",!1);var d=!1;b.required&&a.data.length&&!h.addNoneOption||(d=!c,i.append(r("<option>").val("").text(k(h.noneLabel,{model:b.model})).prop("selected",!c)));var e=n.getNameField(g.data("selectedSObject")),f=b.metadata.originalDisplayType,j="NUMBER"===f||"INTEGER"===f||"DOUBLE"===f,l=h.searchTemplate||h.template||"{{"+e+"}}";r.each(a.data,function(e,f){var g=p?p.getReferenceValue(f,b.metadata):f.Id;d||(d=c+""==g+"");var h=a.mergeRow(f,l,{registerFields:!1}).text();i.append(r("<option>").val(g).text(h).prop("selected",c===g))}),d||!c&&0!==c||i.append(r("<option>").val(c).text(g.data("recordLabel")).prop("selected",!0)),b.required&&!c&&0!==c&&K(j?parseInt(i.val(),10):i.val(),a,null),i.off("change.skuid").on("change.skuid",function(){var b=r(this).val();j&&(b=parseInt(b,10)),K(b,a,null)})};if("REFPICK"===h.type)i=r("<select>").prop("disabled",!0).append(r('<option value="">').text(c?e:k(h.noneLabel,{model:b.model}))),J("",L);else{i=a.ui.renderers.AUTOCOMPLETE.edit({minLength:2,source:function(a,b,c,d){c(),J(a.term,function(a,c){if(c&&c.isStale)return void b([]);g.data("tempmodel",a);var e=n.getNameField&&n.getNameField(g.data("selectedSObject")),f=h.searchTemplate||h.template||"{{"+e+"}}",i=-1!==f.indexOf("Name}}");r.each(a.data,function(){i&&!this.Name&&e in this&&(this.Name=this[e]),this.__templabel=g.data("tempmodel").mergeRow(this,f,{registerFields:!1}).text()}),b(a.data),(!c||c&&c.isFinal)&&d()})},onFocus:function(a,b){return i.val(b.item.__templabel),!1},onChange:function(a,c){var d=p?p.getReferenceValue(c.item,b.metadata):c.item.Id;K(d,g.data("tempmodel"),c.item);var e=b.element.find(".nx-error-inline");return b.render(),e&&b.element.prepend(e),i.focus(),!1},onClose:function(){i.focus()},onBlur:function(){setTimeout(function(){i.val(g.data("recordLabel"))},200)},onClear:function(){var a=b.model.getFieldValue(b.row,b.id);""!==a&&null!==a&&(b.model.updateRow(b.row,b.id,"",{initiatorId:b._GUID}),g.data("recordId",""),g.data("recordLabel",""))},optionRenderer:function(a,b){return r("<li></li>").data("ui-autocomplete-item",b).html("<a>"+A(b.__templabel)+"</a>").appendTo(a)},appendTo:a.mobile?u:void 0,value:g.data("recordLabel")||c,parentElem:g}),a.mobile&&u.insertAfter(g.children().last());var M=g.find(".ui-icon-search");M.on("click.skuid",function(){if(!b.element.hasClass("disabled")){var c,d,e,f,j,k,l,m,o=function(){a.mobile?a.mobile.hidePopupPanel():c.dialog("close").remove(),k.unregister&&k.unregister(),B(l.id,"_TempModel_")&&l.unregister()};a.snippet.registerSnippet("skuid.__referencepopupselect",function(a){var c,d;a.row?c=a.row:a.component&&a.component.row?c=a.component.row:a.item&&(c=a.item.row),a.model?d=a.model:a.component&&a.component.list&&(d=a.component.list.model);var e=p?p.getReferenceValue(c,b.metadata):c.Id;K(e,d,c),b.render(),i.focus(),o()}),f=g.data("selectedSObject"),b.options&&"model"===b.options.optionsource?(m=a.$M(b.options.optionmodel),m&&m.objectName===f&&m.label&&(f=m.label)):b.metadata&&b.metadata.referenceTo&&b.metadata.referenceTo.length&&r.each(b.metadata.referenceTo,function(){return this.objectName===f?(this.label?f=this.label:r.each(a.model.list(),function(){return this.objectName===f&&this.label?(f=this.label,!1):void 0}),!1):void 0}),!f&&b.metadata&&b.metadata.label&&(f=b.metadata.label),j=z("select")+" "+t.encodeHTML(f+""),c=r("<div>").attr("title",z("select")+" "+f),e=r("<div>").css("min-height","300px"),c.append(e),J(i.data("uiAutocomplete").term,function(c){a.$M(c.id)||c.register(),l=c,r.each(l.fields,function(){this.nameField&&(this.nameField=!1)});var d,g=h.tokenizeSearch?' tokenizesearch="true"':"",i=n.getNameField(c),m=H(i),o=[],p=I(i),q="";m&&m.length?r.each(m,function(a,b){b.showInSearchDialog&&o.push(b)}):o.push({id:i}),p&&p.length||h.useSOSLSearch?(q+="<searchfields"+(h.useSOSLSearch?' usesosl="true"':"")+(h.SOSLFields?' soslfields="'+h.SOSLFields+'"':"")+">",p&&p.length&&r.each(p,function(){q+='<searchfield field="'+this.id+'"/>'}),q+="</searchfields>"):q="",a.mobile?(d='<mobiledeck model="'+c.id+'"'+g+' pagesize="'+(b.options.pageSize||5)+'" mode="readonly" searchbox="true" showsavecancel="false" createrecords="false" precision="1" minwidth="300"><components>',r.each(o,function(a,b){d+='<mobilefield id="'+b.id+'"',d+=b.label?">"+b.label+"</mobilefield>":"/>"}),d+='</components><cardinteractions><interaction type="tap"><actions><action type="custom" snippet="skuid.__referencepopupselect"/></actions></interaction></cardinteractions>'+q+"</mobiledeck>"):(d='<skootable model="'+c.id+'"'+g+' pagesize="'+(b.options.pageSize||5)+'" mode="readonly" searchbox="true" showsavecancel="false" createrecords="false"><fields>',r.each(o,function(a,b){d+='<field id="'+b.id+'" allowordering="true"',d+=b.label?">"+b.label+"</field>":"/>"}),d+='</fields><rowactions><action type="custom" label="'+j+'" icon="sk-icon-add-reference" snippet="skuid.__referencepopupselect"/></rowactions>'+q+"</skootable>"),k=a.component.factory({xmlDefinition:d}),e.append(k.element),a.mobile?a.mobile.setPopupPanel(k.element,{title:z("select")+" "+f}):(e.append(k.element),e.find(".searchbox").focus().select())}),a.mobile||(d=[{icons:{primary:"ui-button-icon-primary ui-icon sk-icon-remove-reference sk-icon inline"},text:"Clear Value",click:function(){b.model.updateRow(b.row,b.id,"",{initiatorId:b._GUID}),g.data("recordId",""),g.data("recordLabel",""),o(),i.val("")}},{icons:{primary:"ui-button-icon-primary ui-icon sk-icon-cancel sk-icon inline"},text:z("cancel"),click:function(){o()}}],c.dialog({close:function(){o()},modal:!0,resizable:!0,width:"90%",buttons:d}),r(".ui-dialog").addClass("sk-dialog-autocomplete"),r(".ui-widget-overlay").addClass("sk-overlay-autocomplete"))}})}if(g.addClass("editable"),d){var N=r("<label>").addClass("nx-basicfieldeditor-item-select-label");N.append(d),g.append(N,i)}else g.append(i)}},ID:{read:function(a,b){q.TEXT.read(a,b)},readonly:function(a,b){q.ID.read(a,b)},edit:function(a,b){a.model.isRowNew(a.row)&&(b=""),a.metadata.ref=a.model.objectName,q.REFERENCE.edit(a,b)}},STRING:{read:function(a,b){q.TEXT.read(a,b)},readonly:function(a,b){q.TEXT.readonly(a,b)},edit:function(a,b){q.TEXT.edit(a,b)}},IMAGE:{read:function(b){var c,d=b.options,e=a.component.factory(b.element,a.utils.makeXMLDoc("<image/>").attr({alt:b.model.getRowMergeResult(b.row,d.alt||"",{asText:!0}),url:b.model.getRowMergeResult(b.row,d.url||"",{asText:!0}),model:b.model.id,dataSource:b.model.dataSourceTypeName,source:"url"}));d.height&&(e.element.css({height:d.height,overflow:"hidden"}),c=e.element.children().first(),d.fill&&c.addClass("nx-field-image-fill"),c.addClass("nx-field-image-withheight").attr("tabindex",0)),b.subComponents.push(e)},readonly:function(a,b){q.IMAGE.read(a,b)},edit:function(a,b){q.IMAGE.read(a,b)}},ANYTYPE:{read:function(a,b){q[t.getDisplayTypeOfEntity(b)][a.mode](a,b)},readonly:function(a,b){q.ANYTYPE.read(a,b)},edit:function(a,b){q.ANYTYPE.read(a,b)}}},r.each(q,function(b,c){c.loading=function(b){o("TEXT").read(b,a.label.map.loading)}}),s.renderers=p,s.fieldRenderers=q,s.getFieldRenderer=o,s.click2Dial=d}(skuid),function(a){function b(p){p||(p={});var s,t,u,v,w,x,y,z=p.xml,A=p.list,B=A.model,C=p.element||c("<div>"),D=this,E=z.attr("condition"),F=D.type=z.attr("type"),G=!1,H=[],I=A?A.options.delayFilterExecution:!1,J=z.attr("labelmode"),K=p.cssClass||"";J||"daterange"!==F&&"numericrange"!==F||(J="auto"),D.affectCookies="false"!==z.attr("affectcookies"),D.isReferenceFilter=!1,D.element=C.addClass("nx-conditiontoken"),D.list=A,D.model=A.model,K&&D.element.addClass(K),D.affectedConditions={},E&&(D.filterCondition=B.getConditionByName(E,!0),!s&&D.filterCondition&&(s=B.getField(D.filterCondition.field))),D.filterCondition&&(D.affectedConditions[E]=D.filterCondition),z.find("effect").each(function(){var a=c(this),b=a.attr("condition"),d=B.getConditionByName(b,!0);d&&(D.affectedConditions[b]=d)});var L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca,da=function(a){var b=D.filterCondition;return b&&!b.inactive?D.isMultiselect?c.inArray(a,b.values)>-1:a===b.value:!1},ea=function(){var a,b,c,d,e;if(a=z.attr("startcondition"),c=z.attr("endcondition"),a&&c&&"auto"!==z.attr("conditionsource"))b=B.getConditionByName(a,!0),d=B.getConditionByName(c,!0);else if(e=z.attr("conditionfield"),a="__autofilter__nstart__"+e,c="__autofilter__nend__"+e,b=B.getConditionByName(a,!0),d=B.getConditionByName(c,!0),!b||!d){if(!e)return!1;b=new m({operator:"gte",field:e,inactive:!0,name:a,encloseValueInQuotes:!1}),d=new m({operator:"lte",field:e,inactive:!0,name:c,encloseValueInQuotes:!1}),B.addCondition(b),B.addCondition(d)}return[b,d]},fa=function(a,b){if(!a)return"";var c=a;return b===q&&(c="$"+a),b===r&&(c=a+"%"),c},ga=function(a){var b=a.keyCode?a.keyCode:a.which;-1!==[8,9,13,27,46,110,190].indexOf(b)||65==b&&(a.ctrlKey||a.metaKey)||b>=35&&40>=b||b>=48&&57>=b&&!a.shiftKey&&!a.altKey||b>=96&&105>=b||a.preventDefault()};if("select"===F||"multiselect"===F){D.isMultiselect="multiselect"===F;var ha,ia,ja="auto"===z.attr("conditionsource");if(ja){if(ha=z.attr("conditionfield"),!ha)return;if(s=B.getField(ha),D.isReferenceFilter=!1,"REFERENCE"!==s.displaytype||e.endsWith(s.id,"RecordTypeId")||(D.isReferenceFilter=!0),E="__autofilter__"+ha,D.filterCondition=ia=B.getConditionByName(E,!0),ia){if(ia&&D.isReferenceFilter&&ia.inactive!==!0){var ka,la=[],ma=D.isMultiselect&&ia.values,na={};ma?c.each(ia.values,function(a,b){la.push(b)}):ia.value&&la.push(ia.value),la.length&&(c.each(la,function(a,b){var d,f=b.substring(0,3),g=na[f],h=B.getField(ia.field),i=h.referenceTo;g||(c.each(i,function(a,b){return b.keyPrefix===f?(d=b.objectName,!1):void 0}),g=na[f]={objectType:d,fields:[e.getNameField(d)],records:[]}),g.records.push(b)}),ka=a.data.get(na),ka.isComplete?(c.each(la,function(a,b){var c=b.substring(0,3),d=ka.data[c],e=d?d[b]:!1,f=na[c].fields[0];H.push({label:e?e.record[f]:"Invalid record",value:b,isSelected:!0})}),ma||(G=!0)):(c.each(la,function(a,b){H.push({label:"Loading...",value:b,isSelected:!0})}),ma||(G=!0),c.when(ka.promise).done(function(){C.empty(),new b({element:C,xml:z,list:A})})))}}else{D.filterCondition=ia=new m;var oa=z.attr("conditionoperator");oa||(oa=D.isMultiselect?"MULTIPICKLIST"===s.displaytype?"includes":"in":"="),ia.operator=oa,ia.field=ha,ia.inactive=!0,ia.name=E,ia.encloseValueInQuotes=!0,ia.originalValue="",ia.value="",ia.originalInactive=!0,B.addCondition(ia)}D.affectedConditions[E]=ia}var pa;("true"===z.attr("createfilteroffoption")||ja)&&(pa=e.mergeAsText("global",z.attr("filteroffoptionlabel")||"",{createFields:!0,registerFields:!1}),D.isMultiselect||D.isReferenceFilter||(this.filterCondition&&this.filterCondition.value===this.filterCondition.originalValue&&(G=!0),this.filterCondition||(G=!0),H.push({label:pa,value:"__reset",affectDefaultCondition:!0,isSelected:G})));var qa=z.children("sources").first();if(!ja||qa.length&&qa.children().length||(qa.length||(qa=l("<sources/>")),qa.append(l('<source type="metadata"/>'))),qa.children().each(function(){var b,d=c(this),f=d.attr("effectsbehavior"),g={};if(("defaultandothers"===f||"justothers"===f)&&(b=d.children("effects").children(),b.length&&(g.effects=b)),"manual"===d.attr("type"))d.children("options").children().each(function(){var a,b,d=c(this);if("simple"===d.attr("type")&&D.filterCondition){var f=d.attr("value");"undefined"==typeof f&&(f=""),b=da(f),a={label:e.mergeAsText("global",d.attr("label")||f||"",{createFields:!0,registerFields:!1}),value:e.mergeAsText("global",f||"",{createFields:!1,registerFields:!1}),isSelected:b,affectDefaultCondition:!0,source:g},b&&(G=!0)}else if("complex"===d.attr("type")){var h=d.children("effects").children();b=D.isSelectedFromEffects(h),a={label:e.mergeAsText("global",d.attr("label")||"",{createFields:!0,registerFields:!1}),effects:h,value:"",isSelected:b,source:g},b&&(G=!0)}a&&H.push(a)});else{var h="justothers"!==d.attr("effectsbehavior");if("model"===d.attr("type")){var i=a.$M(d.attr("model")),j=d.children("labeltemplate").text(),k=d.children("valuetemplate").text();i&&(g.model=i,c.each(i.data,function(a,b){var c=e.mergeAsText("row",j||"{{{"+e.getNameField(i.objectName)+"}}}",{createFields:!0,registerFields:!1},i,b),d=e.mergeAsText("row",k||"{{{Id}}}",{createFields:!1,registerFields:!1},i,b),f=da(d);H.push({label:c,value:d,isSelected:f,affectDefaultCondition:h,source:g,row:b}),f&&(G=!0)}))}else if("metadata"===d.attr("type")){if(D.filterCondition){var l=s,m=e.mergeAsText("model",d.attr("prefix")||"",{createFields:!0,registerFields:!1},B),n=e.mergeAsText("model",d.attr("suffix")||"",{createFields:!0,registerFields:!1},B),o={};if(c.each(H,function(a,b){o[b.value]=b}),l){var p=B.recordTypeInfos;l.picklistEntries&&l.picklistEntries.length?c.each(l.picklistEntries,function(a,b){var c=b.value,d=da(c),e=b.label?b.label:c;o[c]||H.push({label:m+e+n,value:c,isSelected:d,affectDefaultCondition:h,source:g}),d&&(G=!0)}):p&&p.length&&e.endsWith(l.id,"RecordTypeId")&&c.each(p,function(a,b){var c=b.recordTypeId;if(b.isAvailable&&(1===p.length||!b.isMaster)){var d=da(c);o[c]||H.push({label:m+b.name+n,value:c,isSelected:d,affectDefaultCondition:h,source:g}),d&&(G=!0)}})}}}else if("custom"===d.attr("type")){var q=d.attr("snippet");if(q){var r=a.snippet.get(q);r&&c.each(r({list:D,model:B}),function(a,b){var d=c("<div>").append(b.label?B.mergeModel(b.label):""),e=da(b.value);H.push({label:d.text(),value:b.value,isSelected:e,affectDefaultCondition:h,source:g}),e&&(G=!0)})}}}}),G||D.isMultiselect||D.isReferenceFilter||H.push({label:" - - - - ",value:"",isSelected:!0}),D.activateFilter=function(){D.isMultiselect||D.isReferenceFilter?(D.resetAffectedConditions(),D.isReferenceFilter?(c.each(D.affectedConditions,function(){this.values=[]}),H=c.map(C.actionAutocomplete("getSelectedItems"),function(a){return a.isSelected=!0,a.affectDefaultCondition=!0,a})):D.setOriginalValue(C.val()),H.length&&c.each(H,function(){this.isSelected?D.applyFilterForItem(this):D.unApplyFilterForItem(this)})):D.selectedItem&&(D.resetAffectedConditions(),D.applyFilterForItem(D.selectedItem),D.setOriginalValue(D.selectedItem))},D.isMultiselect&&!D.isReferenceFilter){var ra=!1,sa=c.map(H,function(a){return a.isSelected?(ra=!0,a.value):void 0}).join(";"),ta=function(){var a=C.data("multiselect-newvalues"),b=C.data("multiselect-oldvalues");if(B.hasChanged===!1){var d={};a&&c.each(a.split(";"),function(){d[this]=1}),c.each(H,function(a,b){b.isSelected=b.value in d}),I?(b||(b="__reset"),D.setOriginalValue(b),D.list.showFilterActions()):(D.activateFilter(),D.executeFilter())}},ua=function(){D.restoreOriginalValue()};D.setOriginalValue(ra?sa:"__reset"),a.ui.renderers.MULTIPICKLIST.edit({position:{my:"right top",at:"right bottom"},element:C.addClass("nx-actionselect"),entries:H,value:sa,selectedText:s?s.label+": "+k("number_selected"):null,selectedList:p.selectedList||3,noneSelectedText:pa,onChange:function(a,b){var c=C.find("div[type=button]").find("span").not(".ui-icon"),d=C.find("div[type=button]").find(".nx-actionselect-arrow"),e=C.width();c.css({"max-width":e-d.width()+"px","text-wrap":"none",overflow:"hidden"}),C.data({"multiselect-newvalues":a,"multiselect-oldvalues":b}),I&&ta()},onClose:function(){0!==B.isProcessing||I||ua()},onCreate:function(){var a=c(this),b=a.multiselect("widget");I||b.append(c("<div>").addClass("ui-widget-footer ui-multiselect-footer ui-helper-clearfix").append(c("<div>").attr({role:"button",tabindex:0}).text(k("apply")).addClass("sk-timefilter-button").css("cursor","pointer").on("click "+n,function(b){("click"===b.type||b.which===o.ENTER||b.which===o.SPACE)&&(ta(),a.multiselect("close"))}),c("<div>").attr({role:"button",tabindex:0}).text(k("cancel")).addClass("sk-timefilter-button-grey").css("cursor","pointer").on("click "+n,function(b){("click"===b.type||b.which===o.ENTER||b.which===o.SPACE)&&(ua(),a.multiselect("close"))})))}}),C.find(".ui-multiselect").append('<div class="nx-actionselect-arrow"><div class="ui-icon ui-icon-triangle-1-s"/></div>')}else{var va=function(a){if(B.hasChanged===!1){var b=D.selectedItem;D.selectedItem=a,I?(D.isReferenceFilter?(c.each(D.affectedConditions,function(){this.values=[]}),D.setOriginalValue(c.map(H,function(a){return a.value}).join(";")),H=c.map(C.list.items,function(a){return a.isSelected=!0,a.affectDefaultCondition=!0,a})):D.setOriginalValue(b),D.list.showFilterActions()):(D.activateFilter(),D.executeFilter())}},wa=parseInt(z.attr("autocompthreshold"),10);if(s&&D.isReferenceFilter){var xa=z.children("conditions").children("condition").map(function(a,b){return new m(c(b))}).toArray();C.actionAutocomplete({refField:s,model:B,items:H,onItemSelect:va,isMultiselect:D.isMultiselect,defaultOptionLabel:pa,additionalConditions:xa})}else if(H.length<(wa?wa:25)){var ya=z.attr("maxheight");C.actionSelect({items:H,onItemSelect:va,maxHeight:ya})}else C.actionAutocomplete({model:B,items:H,onItemSelect:va})}}else if("toggle"===F){var za=z.children("effects").children(),Aa=D.isSelectedFromEffects(za);Aa||C.addClass("disabled"),D.activateFilter=function(){if(B.hasChanged===!1&&D.selectedItem){var a=C.is(".disabled");D.resetAffectedConditions(),a?D.unApplyFilterForItem(D.selectedItem):D.applyFilterForItem(D.selectedItem),D.setOriginalValue(a)}},C.actionSelect({items:[{label:e.mergeAsText("model",z.attr("label")||"",{createFields:!0,registerFields:!1},B),effects:za,value:"",isSelected:Aa}],onItemSelect:function(a){var b=C.is(".disabled");C.toggleClass("disabled"),D.selectedItem=a,I?(D.setOriginalValue(b),D.list.showFilterActions()):(D.activateFilter(),D.executeFilter())}})}else if("daterange"===F){if(L=z.attr("startcondition"),M=z.attr("endcondition"),L&&M&&"auto"!==z.attr("conditionsource"))N=B.getConditionByName(L,!0),O=B.getConditionByName(M,!0);else if(P=z.attr("conditionfield"),L="__autofilter__start__"+P,M="__autofilter__end__"+P,N=B.getConditionByName(L,!0),O=B.getConditionByName(M,!0),!N||!O){if(!P)return!1;N=new m,N.operator="gte",N.field=P,N.inactive=!0,N.name=L,N.encloseValueInQuotes=!1,O=new m,O.operator="lte",O.field=P,O.inactive=!0,O.name=M,O.encloseValueInQuotes=!1,B.addCondition(N),B.addCondition(O)}if(t=B.getField(N.field),u=B.getField(O.field),!t||!u)return!1;Q=t.displaytype,R=u.displaytype,N.inactive?S="":"DATETIME"===Q?(x=h(N.value),x=a.time.getLocalDateTime(x),S=i(x)):(x=g(N.value),S=N.value),O.inactive?T="":"DATETIME"===R?(y=h(O.value),y.setDate(y.getDate()-1),y=a.time.getLocalDateTime(y),T=i(y)):(y=g(O.value),T=O.value),ca=function(){Ba.datepicker("getDate")||Ca.datepicker("getDate")?_.css("display","block"):_.css("display","none")};var Ba=d.renderers.DATE.edit({value:S,onChange:ca}).addClass("sk-timefilter-input"),Ca=d.renderers.DATE.edit({value:T,onChange:ca}).addClass("sk-timefilter-input");C.addClass("nx-actionselect nx-conditiontoken"),U=c("<div>"),V=c("<div>").addClass("nx-actionselect-text").append(U),W=c("<div>").addClass("nx-actionselect-arrow").append(c("<div>").addClass("ui-icon ui-icon-triangle-1-s")),X=c("<div>").addClass("nx-actionselect-dropdown sk-timefilter-body").hide(),Y=c("<div>").text(k("start_date")).addClass("sk-timefilter-label"),Z=c("<div>").text(k("end_date")).addClass("sk-timefilter-label"),$=c("<div>"),_=c("<div>").addClass("sk-timefilter-clearfilter-button").text("Clear Filter"),_.click(function(){Ba.datepicker("setDate",null),Ca.datepicker("setDate",null),ca()}),I?(ba=c("<div>").text(k("done")).addClass("sk-timefilter-button").attr({role:"button",tabindex:0}),$.append(ba)):(aa=c("<div>").text(k("cancel")).addClass("sk-timefilter-button-grey").attr({role:"button",tabindex:0}),ba=c("<div>").text(k("apply")).addClass("sk-timefilter-button").attr({role:"button",tabindex:0}),$.append(ba,aa)),D.updateDisplayValue=function(b,c){var d,e=f.makeFormattedDateFromLocal,g=a.label.merge;return d=b&&c?e(b)+" - "+e(c):b&&!c?g(k("after_this"),e(b)):!b&&c?g(k("before_this"),e(c)):k("all_time"),U.text(d),b instanceof Date&&Ba.datepicker("setDate",b),c instanceof Date&&Ca.datepicker("setDate",c),ca(),D},D.updateDisplayValue(x,y),aa&&aa.click(function(){X.hide("fast")}),D.activateFilter=function(){var b,c,d=Ba.datepicker("getDate"),e=Ca.datepicker("getDate");if(d&&(b=i(d)),e&&(c=i(e)),b?("DATETIME"===Q&&(b=j(a.time.getRealJSDateTimeFromLocal(g(b)))),B.setCondition(N,b,D.affectCookies)):B.deactivateCondition(N,D.affectCookies),c){if("DATETIME"===R){var f=a.time.getRealJSDateTimeFromLocal(g(c));f.setDate(f.getDate()-0+1),c=j(f)}B.setCondition(O,c,D.affectCookies)}else B.deactivateCondition(O,D.affectCookies);D.setOriginalValue({start:d,end:e})},ba.on("click "+n,function(a){if("click"===a.type||a.which===o.ENTER||a.which===o.SPACE){var b=Ba.datepicker("getDate"),c=Ca.datepicker("getDate");I?D.list.showFilterActions():(D.activateFilter(),D.executeFilter()),D.updateDisplayValue(b,c),X.hide("fast")}}),X.append(Y,Ba,Z,Ca,_,$),C.addClass("nx-actionselect-haslabel").append(V,W,X),V.attr("tabindex",0),W.attr("tabindex",0),V.add(W).on("click "+n,function(a){("click"===a.type||a.which===o.ENTER||a.which===o.SPACE)&&(C.hasClass("unavailable")||(X.is(":visible")?X.toggle("fast"):(X.css("min-width",Math.max(C.width(),180)+"px"),X.show("fast"))))}),X.on(n+" focusout",function(a){a.which===o.ESCAPE&&(X.toggle("fast"),V.trigger("focus"))})}else if("numericrange"===F){var Da,Ea=ea();if(N=Ea[0],O=Ea[1],t=B.getField(N.field),u=B.getField(O.field),!t||!u)return!1;Da=t.displaytype,S=N.inactive?"":N.value,T=O.inactive?"":O.value;var Fa=c("<input>").val(S).addClass("sk-timefilter-input"),Ga=c("<input>").val(T).addClass("sk-timefilter-input");Fa.on(n,ga),Ga.on(n,ga),ca=function(){Fa.val()||Ga.val()?_.css("display","block"):_.css("display","none")},C.addClass("nx-actionselect nx-conditiontoken"),U=c("<div>"),V=c("<div>").addClass("nx-actionselect-text").append(U),W=c("<div>").addClass("nx-actionselect-arrow").append(c("<div>").addClass("ui-icon ui-icon-triangle-1-s")),X=c("<div>").addClass("nx-actionselect-dropdown sk-timefilter-body").hide(),Y=c("<div>").text("Min. Value").addClass("sk-timefilter-label"),Z=c("<div>").text("Max. Value").addClass("sk-timefilter-label"),$=c("<div>"),_=c("<div>").addClass("sk-timefilter-clearfilter-button").text("Clear Filter"),
_.click(function(){Fa.val(""),Ga.val(""),ca()}),I?(ba=c("<div>").text(k("done")).addClass("sk-timefilter-button").attr({role:"button",tabindex:0}),$.append(ba)):(aa=c("<div>").text(k("cancel")).addClass("sk-timefilter-button-grey").attr({role:"button",tabindex:0}),ba=c("<div>").text(k("apply")).addClass("sk-timefilter-button").attr({role:"button",tabindex:0}),$.append(ba,aa)),D.updateDisplayValue=function(b,c){var d,e=a.label.merge;return b=fa(b,Da),c=fa(c,Da),d=b&&c?b+" - "+c:b&&!c?e(k("after_this"),b):!b&&c?e(k("before_this"),c):"All Values",U.text(d),ca(),D},D.updateDisplayValue(S,T),aa&&aa.click(function(){X.hide("fast")}),D.activateFilter=function(){var a=Fa.val(),b=Ga.val();a?B.setCondition(N,a,D.affectCookies):B.deactivateCondition(N,D.affectCookies),b?B.setCondition(O,b,D.affectCookies):B.deactivateCondition(O,D.affectCookies),D.setOriginalValue({start:a,end:b})},ba.on("click "+n,function(a){if("click"===a.type||a.which===o.ENTER||a.which===o.SPACE){var b=Fa.val(),c=Ga.val();I?D.list.showFilterActions():(D.activateFilter(),D.executeFilter()),D.updateDisplayValue(b,c),X.hide("fast")}}),X.append(Y,Fa,Z,Ga,_,$),C.addClass("nx-actionselect-haslabel").append(V,W,X),V.attr("tabindex",0),W.attr("tabindex",0),V.add(W).on("click "+n,function(a){if(("click"===a.type||a.which===o.ENTER||a.which===o.SPACE)&&!C.hasClass("unavailable"))if(X.is(":visible"))X.toggle("fast");else{var b=Math.max(C.width(),180);X.css("min-width",b+"px").show("fast")}}),X.on(n+" focusout",function(a){a.which===o.ESCAPE&&(X.toggle("fast"),V.trigger("focus"))})}"toggle"===F||"auto"!==J&&"manual"!==J||(w=c("<div>").addClass("nx-actionselect-label"),"auto"===J?"daterange"===F?v=t.label:"numericrange"===F?v=t.label:s&&(v=s.label):"manual"===J&&(v=z.attr("label"),v&&(v=e.mergeAsTextInContext(v,{model:B}))),v&&(w.text(v),C.addClass("nx-actionselect-haslabel").prepend(w))),D.selectedItem||D.isMultiselect||(s&&D.isReferenceFilter?D.selectedItem=C.actionAutocomplete("getSelectedItem"):"daterange"===F?D.setOriginalValue({start:x,end:y}):"numericrange"===F?D.setOriginalValue({start:S,end:T}):D.selectedItem=C.actionSelect("getSelectedItem"))}var c=a.$,d=a.ui,e=a.utils,f=a.time,g=f.parseSFDate,h=f.parseSFDateTime,i=f.getSFDate,j=f.getSFDateTime,k=a.label.read,l=e.makeXMLDoc,m=a.model.Condition,n="keydown.action.skuid",o=a.$.ui.keyCode,p=a.constants.DISPLAY_TYPES,q=p.CURRENCY,r=p.PERCENT;c.extend(b.prototype,{setOriginalValue:function(a){"undefined"==typeof this.element.data("originalValue")&&this.element.data("originalValue",a)},restoreOriginalValue:function(){var a=this,b=a.element,d=b.data("originalValue");if(a.isMultiselect&&!a.isReferenceFilter){if(b=b.find("select"),"__reset"===d)b.val("");else if(d){var e=d.split(";");c.each(b.children("option"),function(a,b){c(b).prop("selected",c.inArray(b.value,e)>-1)})}b.data("echMultiselect")&&b.multiselect("refresh")}else"undefined"!=typeof d&&("toggle"===a.type?b.toggleClass("disabled",d):"daterange"===a.type?a.updateDisplayValue(d.start,d.end):a.isReferenceFilter?b.actionAutocomplete("resetItem",d):d&&"undefined"!=typeof d.value&&(a.element.is(".nx-actionautocomplete")?b.actionAutocomplete("resetItem",d.value):b.actionSelect("selectItem",d,{triggerHandlers:!1})))},isSelectedFromEffects:function(a){var b=this,d=!1;return a.each(function(){var a=c(this),f=b.affectedConditions[a.attr("condition")];if(f)if("deactivate"===a.attr("action")){if(!f.inactive)return d=!1,!1}else if("set"===a.attr("action")){var g=e.mergeAsText("global",a.attr("value")||"",{createFields:!0,registerFields:!1});if(g!==f.value||f.inactive)return d=!1,!1}else if("activate"===a.attr("action")&&f.inactive)return d=!1,!1;d=!0}),d},resetAffectedConditions:function(){var a=this;c.each(a.affectedConditions,function(){a.model.resetCondition(this,a.affectCookies)})},applyFilterForItem:function(a){var b,d=this,f=d.model,g=[],h=a.effects,i=a.source,j=i&&i.effects,k=a.affectDefaultCondition;if(h&&h.length&&c.each(h,function(){g.push(this)}),j&&j.length&&c.each(j,function(){g.push(this)}),b=g&&g.length,b&&c.each(g,function(){var b=c(this),g=d.affectedConditions[b.attr("condition")];if(g)if("deactivate"===b.attr("action"))f.deactivateCondition(g,d.affectCookies);else if("set"===b.attr("action")){var h,j={};a.row&&(j.row=a.row),i&&i.model&&(j.model=i.model),b.attr("value")?h=b.attr("value"):a.value&&(h=a.value),h=e.mergeAsTextInContext(h,j,{createFields:!1,registerFields:!1}),f.setCondition(g,h,d.affectCookies)}else"activate"===b.attr("action")&&f.activateCondition(g,d.affectCookies)}),k&&"undefined"!=typeof a.value&&d.filterCondition)if("__reset"===a.value)f.resetCondition(d.filterCondition,d.affectCookies);else{var l,m=e.mergeAsText("global",a.value||"",{createFields:!1,registerFields:!1}),n=d.filterCondition.operator;d.isMultiselect?(l=d.filterCondition.values,l?(e.isString(l)&&(l=l.split(";")),-1===c.inArray(m,l)&&l.push(m)):l||(l=[m]),e.isMultiValueOperator(n)||("="===n?n="in":"!="===n&&(n="not in"),d.filterCondition.operator=n)):l=m,f.setCondition(d.filterCondition,l,d.affectCookies)}},unApplyFilterForItem:function(a){var b,d=this,f=d.model,g=[],h=a.effects,i=a.source,j=i&&i.effects,k=a.affectDefaultCondition;if(h&&h.length&&c.each(h,function(){g.push(this)}),j&&j.length&&c.each(j,function(){g.push(this)}),b=g&&g.length,b&&c.each(g,function(){var a=c(this),b=d.affectedConditions[a.attr("condition")];b&&("deactivate"===a.attr("action")?f.activateCondition(b,d.affectCookies):f.deactivateCondition(b,d.affectCookies))}),k&&"undefined"!=typeof a.value&&d.filterCondition)if("__reset"===a.value){var l=e.mergeAsText("global",a.value||"",{createFields:!1,registerFields:!1});f.setCondition(d.filterCondition,l,d.affectCookies)}else if(d.isMultiselect){var m=d.filterCondition.values,n=c.inArray(a.value,m);n>-1&&(m.splice(n,1),f.setCondition(d.filterCondition,m,d.affectCookies))}else f.resetCondition(d.filterCondition,d.affectCookies)},executeFilter:function(){var a,b=this,c=b.list,d=c.searchBox;d&&(a=d.val()),"remove"!==c.options.emptySearchBehavior||a?c.updateData({message:k("applying_filter"),failmessage:k("filter_could_not_be_applied"),showerror:!0}):c.model.abandonAllRows()}}),d.Filter=b}(skuid),function(a){var b=a.$,c=a.utils,d=c.mergeAsDataInContext,e=c.makeXMLDoc,f=a.$M,g=a.hotkeys={},h=a.actions={},i=a.interactions={},j={},k={},l={swipe:"drag",swipeleft:"dragleft",swiperight:"dragright",swipeup:"dragup",swipedown:"dragdown"},m="BOOLEAN",n="DATE",o="DATETIME",p=h.register=function(a){b.extend(j,a)},q=c.getContextToUse,r=function(a,c,d,e){var g=c.attr("model"),h=g?f(g):null,i="all"===c.attr("affectedrows")?"model":"row",j=q(d,e,{mode:i}),k=j.row,l=j.list,m=l?b.map(l.getSelectedItems(),function(a){return a.row}):!1;k&&h&&h.getRowById(h.getRowId(k))?h[a]([k]):m&&m.length&&h&&l&&l.model===h?h[a](m):h&&h.data.length&&h[a](h.data)},s=c.isPromise;i.register=function(a){b.each(a,function(){k[this]=1})},i.processInteractionsNode=function(a,c,d){a.children().each(function(){i.processInteractionNode(b(this),c,d)})},i.processInteractionNode=function(a,c,d){if(!a||!a.children)return!1;var e=a.attr("type"),f=a.children("actions").first();return e in k==!1?!1:void(d&&d.selector?c.element.on(e,d.selector,function(a){var d=b(this),e=d&&d.data?d.data("component"):null;e||(e=c),h.runActionsNode(f,e),a&&a.gesture&&a.gesture.preventDefault()}):(c.element.on(e,function(a){h.runActionsNode(f,c),a&&a.gesture&&a.gesture.preventDefault()}),l[e]&&c.element.on(l[e],function(a){a.gesture.stopPropagation(),a.gesture.preventDefault()})))},i.runInteractionsNode=function(c,d,f,g){var h=e("<actions></actions>");f=f.length?f:[f];var i=c.clone();i.children("interaction").each(function(a,c){c=b(c);var d=c.attr("type")+("swipe"==c.attr("type")?c.attr("direction"):"");f.indexOf(d)>-1&&h.append(c.children())}),a.actions.runActionsNode(h,d,{model:g.model,item:g.item,row:g.row,list:g.list,initiatorId:g.initiatorId})},i.enableInteractions=function(b,c){function d(d,g){function h(b){e?(c.validGestures=g,c.eventName=d,c.event=b,c.item=this,e(c)):a.interactions.runInteractionsNode(c.interactionsDef,c.component,g,f),b.stopPropagation()}function i(){b.off("click.skuid"),b.hammer({}),b.on(d,h)}("tap"==g||g.indexOf("tap")>-1)&&b.on("click.skuid",h),a.ui.hammerJSLoaded?i():a.events.subscribe("skuid.resources.hammerjsloaded",i)}var e=c.customInteractionsEvaluator,f=c.context||{};d("tap.skuid","tap"),d("swipeleft.skuid",["swipeleft","swipeeither"]),d("swiperight.skuid",["swiperight","swipeeither"]),d("press.skuid","press")},i.disableInteractions=function(a){a.off("tap.skuid click.skuid swipeleft.skuid swiperight.skuid press.skuid")},h.runActionsNode=function(c,d,e){var f,g=b.Deferred(),i="true"===c.attr("continuesequenceonerror"),j=c.children(),k=j.length,l=0,m=function(c){if(l===k)return a.mobile&&a.mobile.processResponsiveElements(),void g.resolve(c);f=j.eq(l++);var e=h.runActionNode(f,d,c),i=f.children("iftrueactions").children(),o=function(a){var b=f.children("onerroractions").children();b.length?(j=b,k=b.length,l=0,f=null,m(a)):n(a)};if(i.length)e===!0?(j=i,k=i.length,l=0,f=null,m(c)):m(e?b.extend(c,e):c);else if(e===!1)o(c);else if(e&&(e.deferred&&s(e.deferred)||s(e))){var p=e.deferred?e.deferred:e;p.then(function(a){m(b.extend(c,a))},function(a){o(b.extend(c,a))})}else m(e?b.extend(c,e):c)},n=function(b){i?m(b):(a.mobile&&a.mobile.processResponsiveElements(),g.reject(b))};return k?m(e):g.resolve(),d&&d.xmlDefinition&&d.xmlDefinition.attr("buttonset")&&(b(".sm-buttonset-"+d.xmlDefinition.attr("buttonset")).removeClass("sm-active"),d.element.addClass("sm-active")),g.promise()},h.runActionNode=function(b,c,d){var e,f,g,h=b.attr("type");return h&&(h in j?e=j[h]:c&&c.type()&&(f=a.componentType.get(c.type()),g=f.actions,g&&h in g&&(e=g[h])),e)?e(b,c,d):void 0},h.registerEditorWithModelsForActionsNode=function(a,c){var d=a.find('action[type="save"], action[type="requeryModel"], action[type="requeryModels"]');d.length&&d.each(function(){var a=b(this),d="requeryModel"===a.attr("type");d?c.registerModel(f(a.attr("model"))):a.children("models").children().each(function(){c.registerModel(f(b(this).text()))})})},p({branch:function(b,d,e){var f,g=b.attr("model"),h=q(d,e);return g&&(f=a.$M(g),f&&(h.model=f,h.model===f&&-1===f.data.indexOf(h.row)&&(h.row=f.getFirstRow()))),c.mergeInContext(b.children("formula").text(),h,{evaluateFormulas:!0,outputType:m,asData:!0,createFields:!1})},blockUI:function(a,d,e){var f={},g=a.attr("message"),h=a.attr("timeout");g&&(f.message=c.mergeInContext(g,q(d,e),{createFields:!0,registerFields:!1,nl2br:!0})),h&&(f.timeout=parseInt(h,10)),b.blockUI(f)},unblockUI:function(){b.unblockUI()},deactivateFilterableConditions:function(a){var c=a.children("models").first();b.each(c.children("model"),function(){var a=f(b(this).text());a.deactivateFilterableConditions()})},save:function(c,d,e){var g=[],h=c.children("models").first(),i=c.attr("model"),j="true"===c.attr("rollbackonanyerror"),k=b.Deferred(),l=e?e.initiatorId:null,m={rollbackOnAnyError:j};if(l&&(m.initiatorId=l),h.length)b.each(h.children("model"),function(){var a=f(b(this).text());a&&g.push(a)});else if(i&&f(i)){var n=f(i);g.push(n)}return d&&d.button&&d.button.startProcessing(),b.when(a.model.save(g,m)).then(function(a){a.totalsuccess?k.resolve(a):k.reject(a),d&&d.button&&d.button.stopProcessing()},function(a){k.reject(a),d&&d.button&&d.button.stopProcessing()}),k.promise()},cancel:function(c){var d=[],e=c.children("models").first(),g=c.attr("model");e.length?b.each(e.children("model"),function(){var a=f(b(this).text());a&&d.push(a)}):g&&f(g)&&d.push(f(g)),a.model.cancel(d)},markRowsForDeletion:function(a,b,c){r("deleteRows",a,b,c)},unmarkRowsForDeletion:function(a,b,c){r("undeleteRows",a,b,c)},unmarkAllRowsForDeletion:function(a){var c=a.children("models").first();c.length&&b.each(c.children("model"),function(){var a=f(b(this).text());a&&a.undeleteRows()})},createRow:function(a,c,e){var g=a.attr("model"),h=f(g),i="all"===a.attr("affectedrows")?"model":"row",j=q(c,e,{mode:i}),k=j.model,l=j.row,m=j.list,n=j.editor,o=j.rows,p={},r="append"===a.attr("appendorprepend"),s="edit"===a.attr("defaultmodefornewitems"),t=a.children("defaults").first().children();if(h){var u=function(a,c){var e=[],f={createFields:!1,registerFields:!1},g={row:a,model:c},i=m?m.conditions:null,j=n?n.conditions:null;return n&&j&&j.length&&n.models&&b.inArray(c,n.models)>-1?b.each(j,function(){e.push(this)}):m&&i&&i.length&&m.model===h&&b.each(i,function(){e.push(this)}),t&&t.length&&t.each(function(){var a=b(this),c=a.attr("field"),h=a.attr("value"),i=d(h,g,f);e.push({field:c,value:i})}),h.createRow({additionalConditions:e,doAppend:r,editModeForNewItems:s})},v=[];return l?v.push(u(l,k)):o&&o.length?b.each(o,function(a,b){v.push(u(b,k))}):v.push(u(null,k)),v.length&&(1===v.length?p.row=v[0]:p.rows=v),p}},adoptRows:function(a,b,c){var d,e,g=a.attr("sourcemodel"),h=a.attr("targetmodel"),i="all"===a.attr("affectedrows")?"model":"row",j=q(b,c,{mode:i}),k=j.list,l=j.rows,m=j.row;g&&(d=f(g)),h&&(e=f(h)),d&&e&&d.data&&d.data.length&&(m&&d.getRowById(d.getRowId(m))?e.adoptRows([m]):l&&l.length&&k&&k.model===d?e.adoptRows(l):e.adoptRows(d.data))},updateRow:function(a,e,g){var h,i,j,k,l=a.attr("fieldmodel"),p=a.attr("field"),r=a.attr("value"),s="all"===a.attr("affectedrows")?"model":"row",t=q(e,g,{mode:s}),u=t.list,v=t.rows,w=t.model,x=t.row;l&&(h=f(l)),!w&&u&&(w=u.model),h&&(i=h.getField(p),i&&(j=i.displaytype));var y=function(a,e){var g,h,i,k={};if("REFERENCE"===j){h=c.getReferenceFieldRelationshipName(p);var l,q,s=c.extractFieldsFromTemplate(r);if(s&&1===s.length)if(l=s[0],c.startsWith(l,"$Model.")&&c.contains(l,".data.")){q=l.split(".");var u,v=q[1],w=parseInt(q[3],10),x=l.indexOf("."+q[3]+".")+2+q[3].length,y=l.substring(x,l.length),z=f(v);z&&(u=z.data[w],u&&(i=y===z.getIdField()?u:z.getFieldValue(u,c.getReferenceFieldRelationshipName(y),!0)))}else i=l===e.getIdField()?a:e.getFieldValue(a,c.getReferenceFieldRelationshipName(l),!0)}return r?(g=d(r,b.extend(t,{model:e,row:a}),{createFields:!1,registerFields:!1}),j===m&&("false"===g?g=!1:"true"===g&&(g=!0))):j&&-1!==b.inArray(j,[m,n,o])?j===m&&(g=!1):g="",k[p]=g,h&&i&&(k[h]=i),k};h&&(x&&h.getRowById(h.getRowId(x))?h.updateRow(x,y(x,w)):v&&v.length&&u&&u.model===h?(k={},b.each(v,function(a,b){k[u.model.getRowId(b)]=y(b,u.model)}),c.size(k)&&h.updateRows(k)):(k={},b.each(h.data,function(a,b){k[h.getRowId(b)]=x?y(x,w):y(b,h)}),c.size(k)&&h.updateRows(k)))},requeryModel:function(a,c,d){var e=a.attr("model"),g=b.Deferred();if(e){var h=f(e);if(h){c&&c.button&&c.button.startProcessing(),h.hasChanged&&h.cancel();var i="loadmore"!==a.attr("behavior")?"updateData":"getMoreData";b.when(h[i](void 0,d)).then(function(a){g.resolve(a),c&&c.button&&c.button.stopProcessing()},function(a){g.reject(a),c&&c.button&&c.button.stopProcessing()})}}return g.promise()},requeryModels:function(c,d,e){var g=[],h=c.children("models").first(),i=b.Deferred();h.length&&b.each(h.children("model"),function(){var a=f(b(this).text());a&&g.push(a)}),d&&d.button&&d.button.startProcessing(),b.each(g,function(){this.hasChanged&&this.cancel()});var j="loadmore"!==c.attr("behavior")?"updateData":"getMoreData";return b.when(a.model[j](g,void 0,e)).then(function(a){i.resolve(a),d&&d.button&&d.button.stopProcessing()},function(a){i.reject(a),d&&d.button&&d.button.stopProcessing()}),i.promise()},emptyModelData:function(a){var c=a.children("models").first();c.length&&b.each(c.children("model"),function(){var a=f(b(this).text());a&&a.emptyData()})},abandonRows:function(a,b,c){var d,e=a.attr("model"),g="all"===a.attr("affectedrows")?"model":"row",h=q(b,c,{mode:g}),i=h.list,j=h.rows,k=h.row;e&&(d=f(e)),d&&d.data&&d.data.length&&(k&&d.getRowById(d.getRowId(k))?d.abandonRows([k]):j&&j.length&&i&&i.model===d?d.abandonRows(j):d.emptyData())},redirect:function(a,d,e){c.redirect(b.extend(q(d,e),{url:a.attr("url"),window:a.attr("window")}))},custom:function(c,d,e){var f,g,h=a.snippet.get(c.attr("snippet"));if(h){if(f=q(d,e),b.extend(f,{component:d,context:e}),g=h(f),g===!1)return!1;if(g&&"object"==typeof g)return g}},"sfdc-custom-apex":function(c,d,e){var f=c.attr("sfdcactionname"),g=b.Deferred(),h={},i=!0;if(c.children("inputs").children().each(function(){var c=b(this),j=c.attr("name"),k=c.attr("value"),l=c.attr("displaytype"),n=q(d,e);return j?(k=a.utils.mergeAsDataInContext(k,n),l===m&&(k="true"===k?!0:!1),h[j]=k,void 0):(g.reject({$CurrentAction:{Error:'Invalid parameter name "'+j+'" for Salesforce Action "'+f+'"'}}),i=!1,!1)}),!i)return g.promise();d&&d.button&&d.button.startProcessing();var j={inputs:[h]};return a.sfdc.api.makeRequest({type:"POST",url:"/actions/custom/apex/"+f,data:j,crossDomain:!0,success:function(a){g.resolve({$PreviousAction:{result:a[0].outputValues}})},error:function(a){var b=a.responseJSON;b&&b.length&&g.reject({$CurrentAction:{error:b[0].errors[0]}})}}).always(function(){d&&d.button&&d.button.stopProcessing()}),g.promise()},"datasource-action":function(c,d,e){var f=c.attr("datasource"),g=a.dataSource.get(f),h=c.attr("actionname");return g?g.runAction(h,c,d,e):b.Deferred().reject("Invalid Data Source Name for action: "+h).promise()},publish:function(b,c){a.events.publish(b.attr("event"),[c])},setCondition:function(a,e,g){var h=f(a.attr("model"));if(!h)return!1;var i=h.getConditionByName(a.attr("condition"),!0);if(!i)return!1;var j,k,l,m=q(e,g),n=a.attr("value");j=m.model,k=m.row,!j&&e&&e.model&&(j=e.model),j||(j=h),k||(e&&e.row&&!c.isFunction(k)&&(k=e.row),!k&&j&&(k=j.getFirstRow()));var o=b.extend({},m,{row:k,model:j});l=d(n,o,{createFields:!1,registerFields:!1}),h.setCondition(i,l)},deactivateCondition:function(a){var b=f(a.attr("model"));if(!b)return!1;var c=b.getConditionByName(a.attr("condition"));c&&b.deactivateCondition(c)},activateCondition:function(a){var b=f(a.attr("model"));if(!b)return!1;var c=b.getConditionByName(a.attr("condition"));c&&b.activateCondition(c)},updateIncludePanel:function(c,d,e){var f=a.component.getById(c.attr("panelid")),g=c.attr("pagename"),h=c.attr("querystring"),i=c.attr("module"),j=e.model,k=e.row,l=b.Deferred();return f?(f.pagename=a.utils.mergeAsText("row",g,{createFields:!1,registerFields:!1},j,k),f.includeType="skuid",i&&(f.modulename=i),h?f.querystring="?"+a.utils.mergeAsText("row",h,{createFields:!1,registerFields:!1},j,k):f.querystring="?"+c.attr("parameter")+"="+k.Id,f.load(l.resolve)):l.resolve(),l.promise()}});var t,u={},v=function(a){var b=a.bindString,c=u[b]||(u[b]={});c[a.componentId]=a},w=function(a){b.each(u,function(b,c){c&&a in c&&delete c[a]})};g.getFromCache=function(a){return u[a]},g.bind=function(a,d,e,f){var g=a.children();g.length&&b(function(){t||(t=b(document)),b.each(g,function(){var a,g,h,i,j=b(this),k=j.attr("key");a=j.attr("modifiers"),g="true"===j.attr("ignoretextinputs"),h=(a?a.replace(",","+")+"+":"")+k,i={componentId:d,bindString:h,visibleElement:f,actionFunction:e},v(i),t.on("keydown."+d,null,{keys:h,filterTextInputs:g},function(a){if((!g||"true"!==b(a.target).attr("contenteditable"))&&f&&f.is(":visible")&&e){var d,j=u[h],k=i;j&&c.size(j)>1&&(d=function(a){var b,c=a.visibleElement,d=-1;return c&&c.length?(b=c&&c.closest&&c.closest(".ui-dialog-content"),b.length?d=b.zIndex():c.closest("body").length||(d=-2)):d=-2,a.zIndex=d,d},d(i),b.each(j,function(a,b){k.componentId!==a&&b!==k&&b.actionFunction&&d(b)>k.zIndex&&(k=b)})),a.preventDefault(),a.stopImmediatePropagation(),k.actionFunction()}})})})},g.unbind=function(a){t||(t=b(document)),t.off("keydown."+a),w(a)}}(skuid),function(a){function b(b){function c(){return t}function g(a){a||(a={});var b=a.itemId,c=h({namespace:a.namespace,type:a.type,id:b}),f={getSettings:function(){return d(i({key:c})||{})},updateSettings:function(a,b){return n(e.extend(b,{key:c,settings:a}))},deleteSetting:function(a){if("string"==typeof a){var b={};b[a]=null,n({key:c,settings:b,removeNulls:!0,createNodes:!1})}}};return f}function h(a){a||(a={});var b=[];return a.id&&(a.namespace&&b.push(a.namespace),a.type&&b.push(a.type),b.push(a.id)),b}function i(a){var b=a&&a.key;if(!e.isArray(b)||0===b.length)return null;var c,d,f=p;for(c=0;c<b.length;c++){if(d=b[c],!f[d]){if(a.createNodes!==!0)return null;f[d]={}}f=f[d]}return f}function j(a,b){var c={},d="personalMerge-";return k(b,c,d),e.extend(!0,a,b),l(a,c),a}function k(b,c,d){var e=Object.keys(b),f="[object Object]",g="[object Array]";if(e.length>0)for(var h=e.length-1;h>=0;h--){var i=e[h],j=Object.prototype.toString.call(b[i]);if(j===g){var l=d+a.utils.generateGUID();c[l]=b[i],b[i]=l}else j===f&&k(b[i],c)}}function l(a,b){var c=Object.keys(a),d="[object Object]";if(c.length>0)for(var e=c.length-1;e>=0;e--){var f=c[e],g=Object.prototype.toString.call(a[f]);g===d?l(a[f],b):b[a[f]]&&(a[f]=b[a[f]])}}function m(a){var b,c;c=[];for(b in a)c.push(b);e.each(c,function(b,c){"undefined"==typeof a[c]||null===a[c]?delete a[c]:"object"==typeof a[c]&&m(a[c])})}function n(a){var b=a.settings,c=e.isEmptyObject(b),f=a&&a.hasOwnProperty("createNodes")?a.createNodes:!c,g=i(e.extend(a,{createNodes:f})),h=a&&a.deferUpdate;return g?"object"!=typeof b?(new e.Deferred).resolve():(b=d(b),a.deepMerge!==!1?g=j(g,b):e.extend(g,b),a.removeNulls===!0&&m(g),h===!0?(new e.Deferred).resolve():o()):(new e.Deferred).resolve()}function o(){if(q&&"pending"===q.state())return r||(r=new e.Deferred),s=!0,r.promise();q=r||new e.Deferred,r=null,void 0===p.m&&(p.m={}),"client"===t&&(p.m.lastModifiedDate=Date.now());var b=JSON.stringify(p);if("server"===t)a.remote().updatePersonalizationSettings(u,b,function(a,b){b.status?q.resolve():q.reject(b),s===!0&&(s=!1,o())});else{var c=JSON.stringify({m:p.m}),d=JSON.stringify({c:p.c,z:p.z});e.cookie(v,c,{secure:!0,path:"/"}),f.sessionStorage(w,d),q.resolve()}return q.promise()}var p,q,r,s,t,u=b.pageId,v="apex__sk-pf-"+u,w="sk-pf-"+u;return function(a){var b,c;t=a.mode||"server","client"===t?(a.isModelCookieObsolete===!0?(e.removeCookie(v),b={}):b=JSON.parse(e.cookie(v)||"{}"),c=JSON.parse(f.sessionStorage(w)||"{}"),p=e.extend({},b,c)):p=e.extend({},a.pageSettings||{})}(b),{_createService:g,_savePageSettings:o,_getMode:c,_getPageSettings:function(){return d(p)}}}function c(c){c||(c={});var d=c.getParentPage&&c.getParentPage(),e=d&&d._pageRecord,f=e&&e.Id||c.getParentPageId&&c.getParentPageId(),g=c.pageId||f||a.page.id;if(h[g])return h[g];c.mode||window.console&&window.console.warn;var i=h[g]=b(c);return i}function d(a){return JSON.parse(JSON.stringify(a))}var e=a.$,f=a.utils,g=a.personalization={},h={};e.extend(g,{getPageSettings:function(a){var b=c(a);return b._getPageSettings()},createService:function(b){var d=c({pageId:b.pageId||a.page.id});return d._createService({namespace:"x",type:b.type,itemId:b.id})},createComponentService:function(a){var b=c(a),d=a&&a.xmlDefinition&&a.xmlDefinition.attr("uniqueid");return d?b._createService({namespace:"c",type:a._componentType,itemId:d}):b._createService({})},createModelService:function(a){var b=c(a),d=b._createService({namespace:"m",type:"sf",itemId:a&&a.id});return d=e.extend(d,{setCondition:function(a){var b,c=a&&a.name,f=a&&a.value;return c?(b={conditions:{}},b.conditions[c]=f,d.updateSettings(b)):(new e.Deferred).reject()},resetCondition:function(a){var b,c=a&&a.name;return c?(b={conditions:{}},b.conditions[c]=null,d.updateSettings(b,{removeNulls:!0})):(new e.Deferred).reject()},setOrderBy:function(a){var b=a.newValue,c={orderBy:b};return d.updateSettings(c)},resetOrderBy:function(){var a={orderBy:null};return d.updateSettings(a,{removeNulls:!0})}})},initializeSettings:function(a){a||(a={}),c(a)}})}(skuid||(window.skuid={})),function(a){var b,c=a.mobile={},d=a.utils,e=a.actions,f=a.interactions,g=a.$;c.mainarea,c.headernavwrapper=g("<div>").addClass("sm-headerwrapper"),c.toppanelarea=g("<div>").addClass("sm-toppanelwrapper"),c.headernavarea=g("<div>").addClass("sm-headerarea"),c.headernavwrapper.append(c.toppanelarea,c.headernavarea),c.popupwrapper=g("<div>").addClass("sm-popupwrapper"),c.popuptitle=g("<div>").addClass("sm-popupcontent-title"),c.popupcontentwrapper=g("<div>").addClass("sm-popupcontent"),c.popupcontent=g("<div>").addClass("sm-popupcontent-body"),c.footernavarea=g("<div>").addClass("sm-footerwrapper"),c.panelarea=g("<div>").addClass("sm-panelwrapper"),c.mainpanel,c.leftpanels=[],c.rightpanels=[],c.toppanel,c.popuppanel,c.panelMap={},c.panels=[],c.windowWidth,c.isAnimating=!1,b=["tap","hold","doubletap","pinch","pinchin","pinchout","swipeleft","swiperight","swipedown","swipeup","swipe","drag"],c.config={validInteractions:b,defaultLeftPanelWidth:300,minSidePanelPercent:.75,resizeWaitTime:100,defaultAnimationSpeed:500},a.interactions.register(b),g(document.body).one("pageload",function(){c.setSizeCaches(),c.panels.length&&c.setMainPanel(c.panels[0]),c.mainarea.removeClass("sm-mainwrapper-hide"),a.events.publish("skuidMobileReady"),document.addEventListener("touchstart",function(){},!0)}),c.registerPanel=function(a){return c.panelMap[a.id()]=a,c.panels.push(a),a},c.handleResize=function(){c.setSizeCaches(),c.processResponsiveElements()},c.setSizeCaches=function(){c.windowWidth=g(window).width()},d.addResizeHandler(c.handleResize,c.config.resizeWaitTime),c.dumbFitAlgorithm=a.responsive.dumbFitAlgorithm,c.processResponsiveElements=function(){c.mainpanel&&(c.processResponsivePanels(),c.processResponsiveArea(c.headernavarea),c.processResponsiveArea(c.footernavarea),c.processResponsiveArea(c.popupcontent),c.processResponsiveArea(c.toppanelarea),c.processResponsiveArea(c.panelarea))},c.processResponsivePanels=function(){if(c.mainpanel){var a=c.mainpanel,b=a.element,d=a.xmlDefinition.attr("minwidth"),e=0,f=0;g.each(c.leftpanels,function(a){var b=this;if(b.closing)return!0;if(b.offset=f+e,b.width=b.preferredwidth||c.config.defaultLeftPanelWidth,b.width>.75*c.windowWidth&&(b.width=.75*c.windowWidth),"push"===b.displaymode||"fit"===b.displaymode)if("push"===b.displaymode&&d&&d>c.windowWidth-b.width-b.offset)if(0===a)f+=b.width;else{var g=c.leftpanels[a-1];"fit"!==g.displaytype&&(b.offset=g.offset,f-=g.width,f+=b.width)}else e+=b.width;b.element.css("width",b.width+"px"),b.element.css("left",b.offset+"px")}),b.css({left:f||"","border-style":"solid","border-left-width":e?e+"px":""})}},c.processResponsiveArea=function(a){c.mainpanel&&(c.processResponsiveGrids(a),c.processResponsiveButtons(a),c.positionPanelWrapper())},c.processResponsiveGrids=function(a){a=a||g(document.body),a.filter(".sm-grid").add(a.find(".sm-grid")).each(function(){c.processGrid(g(this))})},c.processGrid=a.responsive.processGrid,c.processResponsiveButtons=function(a){a=a||g(document.body),a.filter(".sm-button").add(a.find(".sm-button")).each(function(){c.processButton(g(this))})},c.processButton=function(a){var b=a.find(".sm-button-text"),c=a.data("fullwidth");c||(c=a.children().first()[0].scrollWidth+14,a.data("fullwidth",c)),c>a[0].clientWidth?b.addClass("sm-button-text-hidden"):b.removeClass("sm-button-text-hidden")},c.positionPanelWrapper=function(){c.panelarea.css("border-top",c.headernavarea.outerHeight()+"px solid white"),c.panelarea.css("border-bottom",c.footernavarea.outerHeight()+"px solid white")},c.setMainPanel=function(a,b){if(b||(b={}),c.isAnimating)return!1;if("string"==typeof a&&(a=c.panelMap[a]),!a.element)return!1;var d=c.mainpanel;if(a===d)return!1;var e=b.transition;if(c.panelarea.append(a.element),e){if("slideleft"===e||"slideright"===e){c.isAnimating=!0;var f=c.windowWidth,g=("slideleft"===e?"":"-")+f+"px",h=("slideleft"===e?"-":"")+f+"px",i=("slideleft"===e?"-":"")+f+"px",j=("slideleft"===e?"":"-")+f+"px";a.element.css({left:g,right:h}),a.element.removeClass("sm-panel-hidden"),d.element.animate({left:i,right:j},c.config.defaultAnimationSpeed),a.element.animate({left:"0px",right:"0px"},c.config.defaultAnimationSpeed,function(){c.isAnimating=!1,c.setMainPanel(a)})}}else d&&d.element.addClass("sm-panel-hidden").removeClass("sm-panel-primary"),d&&d.element.css({width:"",left:"",right:""}),d&&d.element.detach(),a.element.addClass("sm-panel-primary").removeClass("sm-panel-hidden"),c.mainpanel=a,c.processResponsiveElements()},c.addLeftPanel=function(a,b){if(b||(b={}),c.isAnimating)return!1;if("string"==typeof a&&(a=c.panelMap[a]),!a.element)return!1;var d=c.leftpanels.indexOf(a);if(a===c.mainpanel)return!1;if(-1!==d)return!1;a.position=b.position,a.displaymode=b.displaymode||"push";var e;b.replace===!0&&c.leftpanels.length&&(e=0===a.position||a.position&&"edge"!==a.position?c.leftpanels[a.position]:c.leftpanels[c.leftpanels.length-1],e&&(c.removeLeftPanel(e,{preventProcessing:!0}),b.transition=null)),a.preferredwidth=parseInt(a.xmlDefinition&&a.xmlDefinition.attr("preferredwidth")||c.config.defaultLeftPanelWidth,10),0===a.position||a.position&&"edge"!==a.position?(c.leftpanels.length<a.position&&(a.position=c.leftpanels.length),c.leftpanels.splice(a.position,0,a)):c.leftpanels.push(a),c.panelarea.append(a.element),a.element.addClass("sm-panel-left").removeClass("sm-panel-hidden"),b&&"slide"===b.transition&&(c.addTransition(a.element,"slideright"),a.element.one("animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd",function(){a.element.removeClass("sm-transition-slideright")})),b.preventProcessing||c.processResponsiveElements()},c.removeLeftPanel=function(a,b){if(b&&"slide"===b.transition)return c.addTransition(a.element,"unslideright"),a.closing=!0,a.element.one("animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd",function(){a.element.removeClass("sm-transition-unslideright"),delete b.transition,a.closing=!1,c.removeLeftPanel(a,b)}),void c.processResponsiveElements();if(c.isAnimating)return!1;if("string"==typeof a&&(a=c.panelMap[a]),!a.element)return!1;var d=c.leftpanels.indexOf(a);return-1===d?!1:(b||(b={}),a.element.detach(),a.element.addClass("sm-panel-hidden").removeClass("sm-panel-left sm-panel-left-sliding"),a.element.css({width:"",left:"",right:""}),c.leftpanels.splice(d,1),c.mainpanel.element.removeClass("sm-panel-primary-fit sm-panel-primary-pushed sm-panel-primary-pushing"),b.preventProcessing||c.processResponsiveElements(),void(b.dfd&&b.dfd.resolve()))},c.setLeftPanel=function(a,b){c.hideLeftPanel({transition:b.transition,preventProcessing:!0,callback:function(){c.addLeftPanel(a,b)}})},c.hideLeftPanel=function(a){var b=[],d=[];g.each(c.leftpanels,function(){b.push(this)}),g.each(b,function(){var b=g.Deferred();d.push(b),c.removeLeftPanel(this,{transition:a.transition||"slide",dfd:b})}),a&&a.preventProcessing||c.processResponsiveElements(),a&&a.callback&&g.when.all(d).then(a.callback)},c.toggleLeftPanel=function(a,b){b||(b={}),"string"==typeof a&&(a=c.panelMap[a]),-1!==c.leftpanels.indexOf(a)?c.removeLeftPanel(a,b):c.addLeftPanel(a,b)},c.setTopPanel=function(a,b){if(b||(b={}),c.isAnimating)return!1;if("string"==typeof a&&(a=c.panelMap[a]),!a.element)return!1;var d=c.toppanel;if(a===d)return!1;if(a===c.mainpanel)return!1;var e=b.transition;d&&(e=null),d&&d.element.addClass("sm-panel-hidden").removeClass("sm-panel-top"),c.toppanelarea.append(a.element),e?"slide"===e&&(c.isAnimating=!0,a.element.addClass("sm-panel-top-sliding").removeClass("sm-panel-hidden").hide(),a.element.slideDown(c.config.defaultAnimationSpeed,function(){c.isAnimating=!1,c.setTopPanel(a)})):(d&&d.element.detach(),a.element.addClass("sm-panel-top").removeClass("sm-panel-hidden sm-panel-top-sliding"),c.toppanel=a)},c.hideTopPanel=function(a){if(a||(a={}),c.isAnimating)return!1;var b=c.toppanel;return b?void(a.transition?"slide"===a.transition&&(c.isAnimating=!0,b.element.addClass("sm-panel-top-sliding"),b.element.slideUp(c.config.defaultAnimationSpeed,function(){c.isAnimating=!1,c.hideTopPanel()})):(b&&b.element.detach(),b&&b.element.addClass("sm-panel-hidden").removeClass("sm-panel-top sm-panel-top-sliding"),c.toppanel=null)):!1},c.toggleTopPanel=function(a,b){b||(b={}),"string"==typeof a&&(a=c.panelMap[a]),a===c.toppanel?c.hideTopPanel(b):c.setTopPanel(a,b)},c.setPopupPanel=function(a,b){if(b||(b={}),c.isAnimating)return!1;if("string"==typeof a&&(a=c.panelMap[a]),a instanceof g&&(a={element:a}),!a.element)return!1;var d=c.popuppanel;if(a===d)return!1;if(a===c.mainpanel)return!1;
var e=b.transition;b.title&&(c.popuptitle.empty(),"string"==typeof b.title?c.popuptitle.text(b.title):b.title&&b.title(c.popuptitle)),d&&(e=null),d&&d.element.addClass("sm-panel-hidden").removeClass("sm-panel-popup"),d&&d.element.css({width:"",left:"",right:""}),a.element.addClass("sm-panel-popup").removeClass("sm-panel-hidden"),c.popupcontent.append(a.element),b.noPadding?c.popupcontent.css("padding","0px"):c.popupcontent.css("padding",""),e?c.popupwrapper.removeClass("sm-popupwrapper-hidden").hide().fadeIn(200,function(){c.popuppanel=a}):(d&&d.element.detach(),c.popupwrapper.removeClass("sm-popupwrapper-hidden"),c.popuppanel=a)},c.hidePopupPanel=function(a){if(a||(a={}),c.isAnimating)return!1;var b=c.popuppanel;return b?(b&&b.element.detach(),b&&b.element.addClass("sm-panel-hidden").removeClass("sm-panel-popup"),b&&b.element.css({width:"",left:"",right:""}),c.popuppanel=null,c.popuptitle.empty(),c.popupwrapper.css("display",""),void c.popupwrapper.addClass("sm-popupwrapper-hidden")):!1},c.toggleSetupMenu=function(){c.toggleTopPanel("skuidmobilesetupmenu",{transition:"slide"}),c.processResponsiveArea(c.panelMap.skuidmobilesetupmenu.element)},c.addTransition=function(a,b){a.removeClass(function(a,b){return(b.match(/\bsm-transition-\S+/g)||[]).join(" ")}),a.addClass("sm-transition-"+b)},c.processStylesNode=d.processStylesNode,c.processInteractionsNode=f.processInteractionsNode,c.processInteraction=f.processInteractionNode,c.runActionsNode=e.runActionsNode,c.runAction=e.runActionNode,e.register({setLeftPanel:function(a){c.setLeftPanel(a.attr("panel"),{transition:"slide"})},hideLeftPanel:function(){c.hideLeftPanel({transition:"slide"})},toggleLeftPanel:function(a){c.toggleLeftPanel(a.attr("panel"),{transition:"slide",position:a.attr("position"),replace:"true"===a.attr("replace")})},toggleSetupMenu:function(){c.toggleSetupMenu()},setMainPanel:function(b){a.mobile.setMainPanel(b.attr("panel"))},setPopupPanel:function(a,b,e){c.setPopupPanel(a.attr("panel"),{transition:"slideleft",title:d.mergeAsTextInContext(a.attr("title"),d.getContextToUse(b,e))})},hidePopupPanel:function(){c.hidePopupPanel()}})}(skuid),function(a){function b(a){this.options=a||{},this.element=a.element||c("<div>");var b=c("<div>").addClass("sm-button-inner");"list"===a.style?this.element.addClass("sm-liststyle"):this.element.addClass("sm-navstyle"),a.icon&&(this.icon=c("<i>").addClass("sm-button-icon fa "+a.icon+" fa-fw fa-1x"),a.iconColor&&this.icon.css("color",a.iconColor)),a.label&&(this.text=c("<div>").addClass("sm-button-text").text(a.label)),a.buttonset&&this.element.addClass("sm-buttonset-"+a.buttonset),this.icon&&b.append(this.icon),this.text&&b.append(this.text),this.element.append(b),a.tooltip&&this.setTooltip(a.tooltip)}var c=a.$;b.prototype={setTooltip:function(a){var b,c,d=this.element;return d&&(c=d.children(".sm-button-inner"),b=a||this.options.tooltip,b?c.skootip(b):c.tooltip("instance")&&c.tooltip("destroy")),this},startProcessing:function(){this.icon&&this.icon.addClass("fa-refresh fa-spin"),this.element.addClass("sm-processing"),this.icon&&this.icon.removeClass(this.options.icon)},stopProcessing:function(){this.icon&&this.icon.addClass(this.options.icon),this.element.removeClass("sm-processing"),this.icon&&this.icon.removeClass("fa-refresh fa-spin")},enable:function(){var a=this;a.element&&(a.element.removeClass("ui-state-disabled"),a.setTooltip())},disable:function(a){var b=this;b.element&&(b.element.addClass("ui-state-disabled"),a&&a.message&&b.setTooltip(a.message))}},a.mobile.ui={Button:b}}(skuid);