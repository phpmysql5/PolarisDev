/*! Brooklyn Update 1 - Iteration 4 9.5.4 04-04-2017 */
window.skuid||(window.skuid={}),function(a,b){function c(){return a.utils}function d(a){return b.map(a.tabs,function(b){var d=c().sfTabs[b],e=a.url&&a.url.slice(-20);return e&&(e=-1===e.indexOf("tsid=")?"":(-1===d.url.indexOf("?")?"?":"&")+e),{label:d.label,link:d.url+e}})}function e(){var a,e=[];return c().sfApps&&c().sfTabs?(b.each(c().sfApps,function(){return this.isSelected?(a=this,!1):void 0}),a&&(e=d(a)),e):e}function f(a){if(!c().sfApps||!c().sfTabs)return[];a||(a={});var e,f,g=[],h={},i=[],j=a.selectedAppFirst,k=a.withTabs;return b.each(c().sfApps,function(a,b){if(j&&b.isSelected)f=b;else{var c=b.sortOrder;c>-1&&!h[c]?h[c]=b:i.push(b)}}),e=Object.keys(h),e.sort(function(a,b){return a-b}),f&&g.push(f),b.each(e,function(a,b){g.push(h[b])}),i.length&&g.concat(i),b.map(g,function(a){var b=k?d(a):null;return{label:a.label,link:a.url,items:b}})}function g(){return f({selectedAppFirst:!0})}function h(){return f({withTabs:!0})}function i(){return[{label:"My Profile",link:"/_ui/core/userprofile/UserProfilePage"},{label:"My Settings",link:"/ui/setup/Setup?setupid=PersonalSetup"},{label:"My Apps",link:null,items:g},{label:"Salesforce Setup",link:"/setup/forcecomHomepage.apexp?setupid=ForceCom"},{label:"Developer Console",link:"/_ui/common/apex/debug/ApexCSIPage",window:"blank"},{label:"Logout",link:"/secur/logout.jsp"}]}function j(){return"/apex/skuid__PageBuilder?id="}function k(c,d){var e="";return e=a.isAura?"/skuid/ui.app?"+(a.mobile?"type=Mobile&":"")+"page=":"/apex/skuid__ui?page=",e+=c[C.page.name],d&&(e+="&"+d.substring(b.inArray(d.charAt(0),["&","?"]>-1)?1:0)),e}function l(a){return"/apex/skuid__PageXMLEdit?id="+a[C.page.id]}function m(){return["skuid__Layout__c","skuid__Layout2__c","skuid__Layout3__c","skuid__Layout4__c","skuid__Layout5__c"]}function n(){return 65e4}function o(){return"salesforce"}function p(){return window.location.origin+(window.$A?"/skuid/oauthproxy.app":"/apex/skuid__oauthproxy")}function q(){var b=window.location.origin;return a.isAura?b+"/skuid/oauthcallback.app":r()?b+"/apex/skuid__oauthcallback":b+"/apex/oauthcallback"}function r(){var a=window.location.host.split(".")[0];return c().endsWith(a,"-skuid")||"skuid"===a}function s(){return[{value:"sftabs",label:"Salesforce Tabs for Current App",items:e},{value:"sfapps",label:"Salesforce Apps",items:g},{value:"sfappswithtabs",label:"Salesforce Apps with Tabs",items:h},{value:"sfusermenu",label:"Salesforce User Menu",items:i}]}function t(a){return C[a]}function u(a,b){return C[a][b]}function v(b){var d,e,f,g,h=a.page.sitePrefix,i=a.isAura,j=a.page.runningOnForceSite;return"object"==typeof b?(d=b.name,e=b.namespace||b.ns,f=b.nestedPath||b.path,g=b.modstamp):d=b,d&&c().contains(d,"/")&&(d=c().capitalizeFirst(d.split("/").pop().replace(".js","JS").replace(".css","CSS"))),(j&&h&&!i?h:"")+"/resource/"+(g?g+"/":"")+(e?e+"__":"")+d+(f?"/"+f:"")}function w(a){return v(a)}function x(a){var b=a.split("/").pop();return v(b.charAt(0).toUpperCase()+b.slice(1)+"TestsJS")}function y(){return"undefined"!=typeof window.InlineEditState}function z(a){return E[a]}function A(a,b){E[a]=b}var B="skuid__Module__c",C={auth_provider:{auth_method:"skuid__Auth_Method__c",authorize_endpoint_url:"skuid__Authorize_Endpoint_URL__c",client_id:"skuid__Client_Id__c",client_secret:"skuid__Client_Secret__c",id:"Id",name:"Name",oauth_grant_type:"skuid__OAuth_Grant_Type__c",oauth_provider_type:"skuid__Type__c",request_headers:"skuid__Request_Headers__c",token_endpoint_url:"skuid__Token_Endpoint_URL__c",token_request_body_parameters:"skuid__Token_Request_Body_Parameters__c",default_scopes:"skuid__Default_Scopes__c"},data_source:{authentication:"skuid__Authentication__c",auth_request_body:"skuid__Auth_Request_Body__c",auth_request_body_content_type:"skuid__Auth_Request_Body_Content_Type__c",auth_request_headers:"skuid__Auth_Request_Headers__c",auth_request_verb:"skuid__Auth_Request_Verb__c",auth_url:"skuid__Authentication_URL__c",credential_source:"skuid__Credential_Source__c",id:"Id",is_active:"skuid__Active__c",name:"Name",password:"skuid__Password__c",request_body_parameters:"skuid__Request_Body_Parameters__c",request_headers:"skuid__Request_Headers__c",request_url_parameters:"skuid__Request_URL_Parameters__c",request_scopes:"skuid__Request_Scopes__c",url:"skuid__URL__c",username:"skuid__Username__c",use_proxy:"skuid__Use_Apex_Proxy__c",type:"skuid__Adapter_Name__c"},page:{composer_settings:"skuid__Composer_Settings__c",id:"Id",is_master_page:"skuid__IsMaster__c",master_page:"skuid__MasterPage__r",master_page_id:"skuid__MasterPage__c",max_auto_saves:"skuid__Max_Auto_Saves__c",module:B,name:"Name"},static_resource:{id:"Id",name:"Name",namespace:"NamespacePrefix",content_type:"ContentType"},theme:{id:"Id",name:"Name",resource_name:"skuid__Resource_Name__c",resource_namespace:"skuid__Resource_Namespace__c",type:"skuid__Type__c",version_date:"skuid__Skuid_Version_Date__c",active:"skuid__Active__c"}},D=a.constants.SALESFORCE,E={};sforce.one&&navigator&&(navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPhone/i))&&(a.$.ui.dialog.prototype._focusTabbable=function(){}),window.Visualforce&&window.Visualforce.remoting&&(window.Visualforce.remoting.timeout=9e4),a.platform={get:z,getBaseBuilderUrl:j,getBasePreviewUrl:k,getBaseXmlEditorUrl:l,getDefaultDataSourceTypeName:function(){return"salesforce"},getDefaultDataSourceName:function(){return"salesforce"},dataSourceIsCurrentSalesforceOrg:function(a){return"string"==typeof a?a===D:"object"==typeof a?a.name===D:!1},getEntityFieldName:u,getEntityFieldNames:t,getLayoutFields:m,getMaxProxyRequestPayload:n,getName:o,getNavigationItemSourceTypes:s,getOAuthRedirectUri:q,getOAuthProxyUri:p,getResourceUrl:v,getSiteResourceUrl:w,requiresSerializedProxyRequests:function(){return!0},resolveTestPath:x,set:A,utils:{hasLoadedSFMainJS:y}},a.platform.builder={getProtectedModules:function(){return a.builder.core.protectedModules},getPageModule:function(a,b){return a.getFieldValue(b,B,!0)||""},getModuleEntries:function(b){return a.$.map(b.getField(B).picklistEntries,function(a){return{value:a.value,label:a.label,disabled:a.active===!1,defaultValue:a.defaultValue}})},getAvailableComponentPacks:function(){return a.builder.core.availablePacks},getPageSelectProperty:function(a){return{id:a.id,type:"autocomplete",sobject:"skuid__Page__c",dataSource:a.dataSource,fieldsToReturn:["Name","skuid__Module__c"],fieldsToSearch:["Name","skuid__Module__c"],displayTemplate:"{{Name}}{{#skuid__Module__c}} ({{skuid__Module__c}}){{/skuid__Module__c}}",valueTemplates:{pagename:"{{Name}}",module:"{{skuid__Module__c}}"},order:"Name",label:a.label,helptext:a.helptext,required:!0,onChange:a.onChange||function(){}}},getStaticResourceProperty:function(a){return{id:a.id,type:"autocomplete",sobject:"StaticResource",fieldsToReturn:["Name","NamespacePrefix","ContentType"],fieldsToSearch:["Name","NamespacePrefix"],displayTemplate:"{{Name}}{{#ContentType}} ({{ContentType}}){{/ContentType}}",valueTemplates:a.valueTemplates,order:"Name",label:"Resource Name",helptext:a.helptext,required:a.required||!1,onChange:a.onChange||function(){}}},getNestedPathProperty:function(a){return{id:a.id||"filepath",type:"filepath",label:"File Path (within ZIP Static Resources)",helptext:"The desired file's relative location within Static Resources that are .zip files. Do not use unless your Static Resource is a ZIP file.",divisionSize:"2",getResourceName:function(){var b=a.state.attr(a.nameProperty).split("__");return b[b.length-1]},getResourceNamespace:function(){var b=a.state.attr(a.namespaceProperty).split("__");return 2===b.length?b[0]:null},onChange:a.onChange||function(){}}}},a.platform.themeBuilder={getThemeData:function(b,c){a.ThemeComposerController.bootstrap(JSON.stringify({resourceName:b.Name,resourceNamespace:b.NamespacePrefix}),function(a){c(a)},{escape:!1})},getThemeResourceUrl:function(b){return a.platform.getResourceUrl(b)},getResource:function(b,c){return a.utils.getBodyOfZIPResourceFile(b.Name,b.NamespacePrefix,c)},saveTheme:function(b,c,d){var e={Id:b.resourceId||d.Id,Body:c},f=new a.sfdc.api.SObject("StaticResource",e);return f.update()}}}(skuid,skuid.$),function(a,b,c){function d(b){var c=a.page.language,d=[c];return c&&c.length>2&&d.push(c.substring(0,2)),{fields:[{id:"Name"},{id:"MasterLabel"},{id:"PageOrSobjectType"},{id:"NamespacePrefix"},{id:"OpenType"},{id:"LinkType"},{id:"Url"},{id:"Localization",type:"childRelationship",fields:[{id:"Value"}],conditions:[{field:"Language",type:"multiple",operator:"in",values:d}],recordsLimit:1,orderByClause:"NamespacePrefix NULLS FIRST"}],conditions:[{field:"DisplayType",operator:"IN",type:"multiple",values:["L","B"]},{field:"PageOrSobjectType",value:b},{field:"LinkType",operator:"IN",type:"multiple",values:["page","url"]}],objectName:"Weblink",order:"Name"}}function e(a){a&&(a instanceof Array?a.length&&c.each(a,function(){k.push(this)}):k.push(this))}function f(a){return a in l}function g(b){var h,i,j=b.weblinkName,n=b.objectName,o=b.namespacePrefix,p=b.callback,q=c.Deferred();if(j&&n&&c.each(k,function(a,b){if(b.Name===j&&b.PageOrSobjectType===n){if(o===b.NamespacePrefix)return i=b,!1;b.NamespacePrefix&&(h=b)}}),!i&&h&&(i=h),i||b.didQuery===!0||f(n))q.resolve(),p&&p(i);else{var r=m[n],s=!1;r||(r=m[n]=[],s=!0),r.push(b),s&&a.remote().load(JSON.stringify(d(n)),function(a,b){l[n]=1;var d=JSON.parse(a),f=d.models[0];b.status?(f.data&&f.data.length&&e(f.data),c.each(r,function(a,b){b.didQuery=!0,g(b)})):(q.resolve(),r.length&&c.each(r,function(a,b){b.callback&&b.callback(null)})),delete m[n]},{escape:!1})}return q}function h(a){var b=a.Localization;return b&&b.records?b.records[0].Value:a.MasterLabel}function i(a){var b=[];return k.length&&c.each(k,function(){this.PageOrSobjectType===a&&b.push(this)}),b}function j(){k=[],l={},m={}}var k,l,m,n=b.weblink={};j(),n.get=g,n.getLabel=h,n.getAllForObject=i,n.add=e,n.haveQueriedForObject=f,n.resetCaches=j,n._buildQueryForObject=d}(skuid,skuid.sfdc,skuid.$);