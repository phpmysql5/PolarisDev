!function(a){var b=a.$,c=a.snippet,d=c.register,e=a.utils,f=a.constants.SALESFORCE,g=e.capitalizeFirst,h=a.dataSource,i=function(c){var d=c.field,e=c.value,f=c.entries,g=c.onChange;"edit"===d.mode?d.element.html(a.ui.renderers.PICKLIST.edit({value:e,required:!0,onChange:function(a){d.model.updateRow(d.row,d.id,a,{initiatorId:d._GUID}),g&&c.onChange(a)},entries:f})):(b.each(f,function(){if(e===this.value)return e=this.label,!1}),a.ui.fieldRenderers[d.metadata.displaytype][d.mode](d,e))},j=function(){var a={};return b.each(h.map(),function(b,c){var d=c.dataSourceType?c.dataSourceType.name:c.dataSourceTypeName;d&&(a[d]||(a[d]=[]),a[d].push(c))}),a};d("skuid.core.haveMultipleActiveDataSources",function(){return e.size(a.dataSource.map())>1}),d("skuid.core.actions.previewPage",function(){var a=arguments[0],b=c.get("skuid.builder.page.preview");b&&b({model:a.model,row:a.item?a.item.row:a.row})}),d("skuid.core.renderers.dataSourceType",function(){i({field:arguments[0],value:e.decodeHTML(arguments[1]),entries:b.map(j(),function(a,b){if("REST"!==b&&"Ui-Only"!==b)return{value:b,label:b}}).sort(function(a,b){return a.value===f?-1:g(a.label)>g(b.label)})})}),d("skuid.core.renderers.dataSource",function(){var a=j(),c=arguments[0],d=c.model.getFieldValue(c.row,"skuid__DataSourceType__ui",!0)||Object.keys(a)[0];i({field:arguments[0],value:e.decodeHTML(arguments[1]),entries:b.map(a[d],function(a){var b=a.name;return{value:b,label:b===f?"Current Salesforce Org":b}}).sort(function(a,b){return a.value===f?-1:g(a.label)>g(b.label)})})}),d("skuid.core.snippets.newPageRenderStartingPoint",function(a){var c,d,e=a.updates&&a.updates.skuid__Type__c,f=a.model,g=a.row;e&&(c=f.getFieldValue(g,"skuid__Initial_State__c"),d=f.registeredFields,"Mobile"===e&&"masterpage"===c&&f.updateRow(g,{skuid__Initial_State__c:"none"}),b.each(d,function(){"skuid__Initial_State__c"===this.id&&this.render()}))}),d("skuid.core.snippets.newPageStartingPoint",function(c,d){if(c.options||(c.options={}),c.options.type="RADIO_BUTTONS",a.ui.fieldRenderers[c.metadata.displaytype][c.mode](c,d),c.options.type="CUSTOM","edit"===c.mode){var e=c.model,f=c.row;if("Mobile"===e.getFieldValue(f,"skuid__Type__c")){c.element.find("div.nx-radiowrapper").each(function(){var a=b(this);"masterpage"===a.children('input[type="radio"]').val()&&a.hide()})}}}),b(document.body).one("pageload",function(){var c=a.$M("pgs__NewPage"),g='<skuidpage unsavedchangeswarning="yes" personalizationmode="server" useviewportmeta="true"';d("PrimaryObjectField",function(b){var c=b.model,d=b.row,e=j(),f=c.getFieldValue(d,"skuid__Primary_Object__c",!0);b.element.append(a.ui.renderers.ENTITY.edit({value:f,dataSource:function(){var b=c.getFieldValue(d,"skuid__DataSourceType__ui",!0)||Object.keys(e)[0],f=c.getFieldValue(d,"skuid__DataSource__ui",!0);return f&&a.dataSource.getDataSource(f)||e[b][0]},onChange:function(a){c.updateRow(d,"skuid__Primary_Object__c",a,{initiatorId:b._GUID})}}))});var h=function(c){c||(c={});var d,h,i,j,k=c.model,l=c.row,m=k.getFieldValue(l,"skuid__Initial_State__c",!0)||"none",n=k.getFieldValue(l,"skuid__Page_Template__c",!0)||"tab-page",o=k.getFieldValue(l,"skuid__Primary_Object__c",!0)||"",p=k.getFieldValue(l,"skuid__DataSourceType__ui",!0)||f,q=k.getFieldValue(l,"skuid__DataSource__ui",!0)||f,r=a.dataSource.getDataSource(q),s=r.getCachedEntityMetadata(o),t=q===f&&p===f,u=k.getFieldValue(l,"skuid__Type__c",!0)||"Desktop",v=function(){p===f&&b.inArray(o,["Contact","Lead","User"])>-1?(i=["FirstName","LastName"],"Lead"===o&&i.push("Company")):(i=[],(j=r.getNameField(o))&&i.push(j))};if(""!==o&&"none"!==m)h=o.replace("__c","").replace(/_/g,""),"tab-page"===n?(v(),d="Mobile"===u?g+"><models>":g+' showsidebar="true" showheader="true" '+(t?'tabtooverride="'+o+'"':"")+"><models>",d+='<model id="'+h+'" limit="100" query="true" createrowifnonefound="false" datasourcetype="'+p+'" datasource="'+q+'" sobject="'+o+'">',d+="<fields>",b.each(i,function(a,b){s.getField(b)&&(d+='<field id="'+b+'"/>')}),s.getField("CreatedDate")&&(d+='<field id="CreatedDate"/>'),d+="</fields>",d+="<conditions/></model></models><components>","Desktop"===u?(d+='<pagetitle model="'+h+'"><maintitle><template>{{Model.labelPlural}}</template></maintitle><subtitle><template>Home</template></subtitle><actions><action type="savecancel"/></actions></pagetitle>',d+='<skootable showconditions="true" showsavecancel="false" searchmethod="server" searchbox="true" showexportbuttons="false" pagesize="10"  createrecords="true" model="'+h+'" mode="read" allowcolumnreordering="true"><fields>',b.each(i,function(a,b){s.getField(b)&&(d+='<field id="'+b+'" hideable="true" allowordering="true" uniqueid="'+e.generateUniqueId({prefix:"fi"})+'"/>')}),s.getField("CreatedDate")&&(d+='<field id="CreatedDate" hideable="true" allowordering="true" uniqueid="'+e.generateUniqueId({prefix:"fi"})+'"/>'),d+='</fields><rowactions><action type="edit"/><action type="delete"/></rowactions><massactions usefirstitemasdefault="true"><action type="massupdate"/><action type="massdelete"/></massactions><views><view type="standard"/></views></skootable>'):"Mobile"===u&&(d+="<skuidmobile>",d+="<mobilepanels>",d+='<mobilepanel uniqueid="main" minwidth="400">',d+="<components>",d+='<mobiledeck showsavecancel="true" searchmethod="server" searchbox="true" tokenizesearch="true" createrecords="true" precision="6" minwidth="300" model="'+h+'" mode="read">',d+="<components>",b.each(i,function(a,b){s.getField(b)&&(d+='<mobilefield id="'+b+'"/>')}),s.getField("CreatedDate")&&(d+='<mobilefield id="CreatedDate"/>'),d+="</components>",d+="<title>{{Model.labelPlural}}</title>",d+="<cardtitle>",b.each(i,function(a,b){d+=(0!==a?" ":"")+"{{"+b+"}}"}),d+="</cardtitle>",d+="</mobiledeck>",d+="</components>",d+="</mobilepanel>",d+="</mobilepanels>",d+="<mobilenavs>",d+='<mobilenav uniqueid="header">',d+="<components>",d+='<mobilegrid precision="6" minwidth="50">',d+="<divisions>",d+='<division size="1">',d+="<components>",d+='<mobilebutton label="" style="nav" icon="fa-bars">',d+="<actions>",d+='<action type="setMainPanel" panel="main"/>',d+="</actions>",d+="</mobilebutton>",d+="</components>",d+="</division>",d+='<division size="4">',d+="<components>",d+="<mobiletitle>",d+="<contents>{{$Model."+h+".labelPlural}}</contents>",d+="</mobiletitle>",d+="</components>",d+="</division>",d+='<division size="1">',d+="<components>",d+='<mobilebutton label="" style="nav" icon="fa-th">',d+="<actions>",d+='<action type="toggleSetupMenu"/>',d+="</actions>",d+="</mobilebutton>",d+="</components>",d+="</division>",d+="</divisions>",d+="</mobilegrid>",d+="</components>",d+="<interactions>",d+='<interaction type="doubletap">',d+="<actions>",d+='<action type="toggleSetupMenu"/>',d+="</actions>",d+="</interaction>",d+='<interaction type="swipedown">',d+="<actions>",d+='<action type="toggleSetupMenu"/>',d+="</actions>",d+="</interaction>",d+="</interactions>",d+="</mobilenav>",d+="</mobilenavs>",d+="</skuidmobile>"),d+="</components><resources><labels/><css/><javascript/></resources></skuidpage>"):"detail-page"===n?(v(),d="Mobile"===u?g+"><models>":g+' showsidebar="true" showheader="true" '+(t?'tabtooverride="'+o+'"':"")+"><models>",d+='<model id="'+h+'" limit="1" query="true" createrowifnonefound="false" datasourcetype="'+p+'" datasource="'+q+'" sobject="'+o+'">',d+="<fields>",b.each(i,function(a,b){s.getField(b)&&(d+='<field id="'+b+'"/>')}),s.getField("CreatedDate")&&(d+='<field id="CreatedDate"/>'),d+="</fields>",d+='<conditions><condition type="param" enclosevalueinquotes="true" operator="=" field="Id" value="id"/></conditions>',d+="</model></models><components>","Desktop"===u?(d+='<pagetitle model="'+h+'"><maintitle><template>',b.each(i,function(a,b){s.getField(b)&&(d+=(0!==a?" ":"")+"{{"+b+"}}")}),d+="</template></maintitle><subtitle><template>{{Model.label}}</template></subtitle><actions>"+(t?'<action type="delete"/><action type="clone"/><action type="share"/>':"")+'<action type="savecancel" window="self"/></actions></pagetitle>',d+='<basicfieldeditor showsavecancel="false" showheader="true" model="'+h+'" mode="read"><columns>',d+='<column width="50%"><sections>',d+='<section title="Basics"><fields>',b.each(i,function(a,b){s.getField(b)&&(d+='<field id="'+b+'"/>')}),d+="</fields></section>",d+="</sections></column>",d+='<column width="50%"><sections>',d+='<section title="System Info"><fields>'+(s.getField("CreatedDate")?'<field id="CreatedDate"/>':"")+"</fields></section>",d+="</sections></column>",d+="</columns></basicfieldeditor>"):"Mobile"===u&&(d+="<skuidmobile>",d+="<mobilepanels>",d+='<mobilepanel uniqueid="main" minwidth="400">',d+="<components>",d+='<mobiledeck showsavecancel="true" searchmethod="server" searchbox="false" tokenizesearch="false" createrecords="false" precision="1" minwidth="200" model="'+h+'" mode="read">',d+="<components>",b.each(i,function(a,b){s.getField(b)&&(d+='<mobilefield id="'+b+'"/>')}),s.getField("CreatedDate")&&(d+='<mobilefield id="CreatedDate"/>'),d+="</components>",d+="<title>{{Model.label}}</title>",d+="<cardtitle>",b.each(i,function(a,b){s.getField(b)&&(d+=(0!==a?" ":"")+"{{"+b+"}}")}),d+="</cardtitle>",d+="</mobiledeck>",d+="</components>",d+="</mobilepanel>",d+="</mobilepanels>",d+="<mobilenavs>",d+='<mobilenav uniqueid="header">',d+="<components>",d+='<mobilegrid precision="6" minwidth="50">',d+="<divisions>",d+='<division size="1">',d+="<components>",d+='<mobilebutton label="" style="nav" icon="fa-bars">',d+="<interactions>",d+='<interaction type="tap">',d+="<actions>",d+='<action type="setMainPanel" panel="main"/>',d+="</actions>",d+="</interaction>",d+="</interactions>",d+="</mobilebutton>",d+="</components>",d+="</division>",d+='<division size="4">',d+="<components>",d+="<mobiletitle>",d+="<contents>{{$Model."+h+".label}}</contents>",d+="</mobiletitle>",d+="</components>",d+="</division>",d+='<division size="1">',d+="<components>",d+='<mobilebutton label="" style="nav" icon="fa-th">',d+="<interactions>",d+='<interaction type="tap">',d+="<actions>",d+='<action type="toggleSetupMenu"/>',d+="</actions>",d+="</interaction>",d+="</interactions>",d+="</mobilebutton>",d+="</components>",d+="</division>",d+="</divisions>",d+="</mobilegrid>",d+="</components>",d+="<interactions>",d+='<interaction type="doubletap">',d+="<actions>",d+='<action type="toggleSetupMenu"/>',d+="</actions>",d+="</interaction>",d+='<interaction type="swipedown">',d+="<actions>",d+='<action type="toggleSetupMenu"/>',d+="</actions>",d+="</interaction>",d+="</interactions>",d+="</mobilenav>",d+="</mobilenavs>",d+="</skuidmobile>"),d+="</components><resources><labels/><css/><javascript/></resources></skuidpage>"):"new-page"===n&&(v(),d="Mobile"===u?g+"><models>":g+' showsidebar="true" showheader="true" '+(t?'tabtooverride="'+o+'"':"")+"><models>",d+='<model id="'+h+'" limit="1" query="false" createrowifnonefound="true" datasourcetype="'+p+'" datasource="'+q+'" sobject="'+o+'">',d+="<fields>",b.each(i,function(a,b){s.getField(b)&&(d+='<field id="'+b+'"/>')}),d+="</fields>",d+="</model></models><components>","Desktop"===u?(d+='<pagetitle model="'+h+'"><maintitle><template>New {{Model.label}}</template></maintitle><subtitle><template>{{Model.labelPlural}}</template></subtitle><actions><action type="savecancel" '+(t?'afterCancel="/{{Model.KeyPrefix}}/o" ':"")+(t?'afterSave="/{{Id}}" ':"")+'rollbackonanyerror="true"/></actions></pagetitle>',d+='<basicfieldeditor showsavecancel="false" showheader="true" model="'+h+'" mode="edit"><columns>',d+='<column width="50%"><sections>',d+='<section title="Basics"><fields>',b.each(i,function(a,b){s.getField(b)&&(d+=(0!==a?" ":"")+'<field id="'+b+'"/>')}),d+="</fields></section>",d+="</sections></column>",d+='<column width="50%"><sections>',d+='<section title="Additional Info"><fields/></section>',d+="</sections></column>",d+="</columns></basicfieldeditor>"):"Mobile"===u&&(d+="<skuidmobile>",d+="<mobilepanels>",d+='<mobilepanel uniqueid="main" minwidth="400">',d+="<components>",d+='<mobiledeck showsavecancel="true" searchmethod="client" searchbox="false" tokenizesearch="false" createrecords="true" precision="1" minwidth="200" model="'+h+'" mode="edit">',d+="<components>",b.each(i,function(a,b){s.getField(b)&&(d+='<mobilefield id="'+b+'"/>')}),d+="</components>",d+="<title>{{Model.label}}</title>",d+="<cardtitle>",b.each(i,function(a,b){s.getField(b)&&(d+=(0!==a?" ":"")+"{{"+b+"}}")}),d+="</cardtitle>",d+="</mobiledeck>",d+="</components>",d+="</mobilepanel>",d+="</mobilepanels>",d+="<mobilenavs>",d+='<mobilenav uniqueid="header">',d+="<components>",d+='<mobilegrid precision="6" minwidth="50">',d+="<divisions>",d+='<division size="1">',d+="<components>",d+='<mobilebutton label="" style="nav" icon="fa-bars">',d+="<interactions>",d+='<interaction type="tap">',d+="<actions>",d+='<action type="setMainPanel" panel="main"/>',d+="</actions>",d+="</interaction>",d+="</interactions>",d+="</mobilebutton>",d+="</components>",d+="</division>",d+='<division size="4">',d+="<components>",d+="<mobiletitle>",d+="<contents>New {{$Model."+h+".label}}</contents>",d+="</mobiletitle>",d+="</components>",d+="</division>",d+='<division size="1">',d+="<components>",d+='<mobilebutton label="" style="nav" icon="fa-th">',d+="<interactions>",d+='<interaction type="tap">',d+="<actions>",d+='<action type="toggleSetupMenu"/>',d+="</actions>",d+="</interaction>",d+="</interactions>",d+="</mobilebutton>",d+="</components>",d+="</division>",d+="</divisions>",d+="</mobilegrid>",d+="</components>",d+="<interactions>",d+='<interaction type="doubletap">',d+="<actions>",d+='<action type="toggleSetupMenu"/>',d+="</actions>",d+="</interaction>",d+='<interaction type="swipedown">',d+="<actions>",d+='<action type="toggleSetupMenu"/>',d+="</actions>",d+="</interaction>",d+="</interactions>",d+="</mobilenav>",d+="</mobilenavs>",d+="</skuidmobile>"),d+="</components><resources><labels/><css/><javascript/></resources></skuidpage>");else if("masterpage"===m)d='<skuidpage unsavedchangeswarning="yes" useviewportmeta="true"><models/><pageregioncontents/><components/><resources><labels/><css/><javascript/></resources></skuidpage>';else if("from-xml"===m){var w=k.getFieldValue(l,"skuid__Page_XML__c",!0);return void(w&&e.writeXmlToPageLayoutFields(w,k,l))}d||(d="Mobile"===u?g+"><models/><components><skuidmobile><mobilepanels/><mobilenavs/></skuidmobile></components><resources><labels/><javascript/><css/></resources></skuidpage>":g+' showsidebar="true" showheader="true"><models/><components/><resources><labels/><javascript/><css/></resources></skuidpage>'),e.writeXmlToPageLayoutFields(d,k,l)};if(d("skuid.pageList.buildLayoutFromTemplate",function(){h({model:c,row:arguments[0].row})}),e._ie<9&&b(".sk-header-skuidlogo img").attr("src",a.utils.getStaticResourceUrl("SkuidLogoCustomHeaderPNG","skuid",undefined,a.version.date)),e._ie<10){b(".nx-page").addClass("sk-ie-legacy");var i=b(".sk-master-grid-division-rightside");i.eq(0).prev().after(i.toArray().reverse())}})}(skuid);